!function(){"use strict";var r,t={2971:function(r,t,e){var n=e(6253),o=e(1386),i=e(4763),a=e(7175);function u(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function f(r){for(var t=r.length,e=0;e<t;++e)u(r,e,i.random_int(e,t))}function s(r,t){if(r<=0)return[];for(var e=new Array(r),n=0;n<r;++n)e[n]=t(n);return e}function c(r,t){var e=s(r,t);return f(e),e}function v(r,t,e){for(var n=r.length,o=t.length,i=n<o?n:o,a=new Array(i),u=0;u<i;++u)a[u]=e(r[u],t[u]);return a}function d(r){for(var t=r.length,e=0,n=0;n<t;++n)e=e+r[n].length|0;var o=new Array(e);e=0;for(var i=0;i<t;++i)for(var a=r[i],u=0,f=a.length;u<f;++u)o[e]=a[u],e=e+1|0;return o}function l(r,t){for(var e=0,n=r.length;e<n;++e)t(r[e])}function p(r,t){for(var e=r.length,n=new Array(e),o=0;o<e;++o)n[o]=t(r[o]);return n}function m(r,t){for(var e,n=r.length,o=0;void 0===e&&o<n;){var i=r[o];t(i)&&(e=a.some(i)),o=o+1|0}return e}function h(r,t){for(var e,n=r.length,o=0;void 0===e&&o<n;)t(r[o])&&(e=o),o=o+1|0;return e}function g(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var a=r[i];t(a)&&(n[o]=a,o=o+1|0)}return n.length=o,n}function E(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var a=r[i];t(a,i)&&(n[o]=a,o=o+1|0)}return n.length=o,n}function _(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var u=t(r[i]);void 0!==u&&(n[o]=a.valFromOption(u),o=o+1|0)}return n.length=o,n}function x(r,t){for(var e=0,n=r.length;e<n;++e)t(e,r[e])}function y(r,t){for(var e=r.length,n=new Array(e),o=0;o<e;++o)n[o]=t(o,r[o]);return n}function b(r,t,e){for(var n=t,o=0,i=r.length;o<i;++o)n=e(n,r[o]);return n}function T(r,t,e){for(var n=t,o=r.length-1|0;o>=0;--o)n=e(n,r[o]);return n}function A(r,t,e,o){for(var i=e,a=n.int_min(r.length,t.length)-1|0;a>=0;--a)i=o(i,r[a],t[a]);return i}function S(r,t,e){for(var n=t,o=0,i=r.length;o<i;++o)n=e(n,r[o],o);return n}function k(r,t){for(var e=r.length,n=0;;){var o=n;if(o===e)return!0;if(!t(r[o]))return!1;n=o+1|0}}function w(r,t){for(var e=r.length,n=0;;){var o=n;if(o===e)return!1;if(t(r[o]))return!0;n=o+1|0}}function I(r,t,e,n,o){for(;;){var i=e;if(i===o)return!0;if(!n(r[i],t[i]))return!1;e=i+1|0}}function G(r,t,e){return I(r,t,0,e,n.int_min(r.length,t.length))}function M(r,t,e){for(var o=0,i=n.int_min(r.length,t.length);;){var a=o;if(a===i)return!1;if(e(r[a],t[a]))return!0;o=a+1|0}}function N(r,t,e){var n=r.length;return n===t.length&&I(r,t,0,e,n)}function C(r,t,e){var n=r.length,o=t.length;if(n>o)return 1;if(n<o)return-1;for(var i=0;;){var a=i;if(a===n)return 0;var u=e(r[a],t[a]);if(0!==u)return u;i=a+1|0}}function D(r,t){for(var e=r.length,n=0,o=0,i=new Array(e),a=new Array(e),u=0;u<e;++u){var f=r[u];t(f)?(i[n]=f,n=n+1|0):(a[o]=f,o=o+1|0)}return i.length=n,a.length=o,[i,a]}function U(r,t,e){var n=r.length;if(0===n)return"";for(var o=n-1|0,i=0,a="";;){var u=a,f=i;if(f===o)return u+e(r[f]);a=u+(e(r[f])+t),i=f+1|0}}function j(r,t){for(var e=new Array(r),n=0;n<r;++n)e[n]=t(n);return e}t.get=function(r,t){if(t>=0&&t<r.length)return a.some(r[t])},t.getExn=function(r,t){if(!(t>=0&&t<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",35,2],Error:new Error};return r[t]},t.set=function(r,t,e){return t>=0&&t<r.length&&(r[t]=e,!0)},t.setExn=function(r,t,e){if(!(t>=0&&t<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",45,2],Error:new Error};r[t]=e},t.shuffleInPlace=f,t.shuffle=function(r){var t=r.slice(0);return f(t),t},t.reverseInPlace=function(r){for(var t=r.length,e=0,n=t/2|0;e<n;++e)u(r,0+e|0,((0+t|0)-e|0)-1|0)},t.reverse=function(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=r[(t-1|0)-n|0];return e},t.make=function(r,t){if(r<=0)return[];for(var e=new Array(r),n=0;n<r;++n)e[n]=t;return e},t.range=function(r,t){var e=t-r|0;if(e<0)return[];for(var n=new Array(e+1|0),o=0;o<=e;++o)n[o]=r+o|0;return n},t.rangeBy=function(r,t,e){var n=t-r|0;if(n<0||e<=0)return[];for(var o=1+(n/e|0)|0,i=new Array(o),a=r,u=0;u<o;++u)i[u]=a,a=a+e|0;return i},t.makeByU=s,t.makeBy=function(r,t){return s(r,o.__1(t))},t.makeByAndShuffleU=c,t.makeByAndShuffle=function(r,t){return c(r,o.__1(t))},t.zip=function(r,t){for(var e=r.length,n=t.length,o=e<n?e:n,i=new Array(o),a=0;a<o;++a)i[a]=[r[a],t[a]];return i},t.zipByU=v,t.zipBy=function(r,t,e){return v(r,t,o.__2(e))},t.unzip=function(r){for(var t=r.length,e=new Array(t),n=new Array(t),o=0;o<t;++o){var i=r[o];e[o]=i[0],n[o]=i[1]}return[e,n]},t.concat=function(r,t){for(var e=r.length,n=t.length,o=new Array(e+n|0),i=0;i<e;++i)o[i]=r[i];for(var a=0;a<n;++a)o[e+a|0]=t[a];return o},t.concatMany=d,t.slice=function(r,t,e){if(e<=0)return[];var o=r.length,i=t<0?n.int_max(o+t|0,0):t,a=o-i|0,u=a<e?a:e;if(u<=0)return[];for(var f=new Array(u),s=0;s<u;++s)f[s]=r[i+s|0];return f},t.sliceToEnd=function(r,t){for(var e=r.length,o=t<0?n.int_max(e+t|0,0):t,i=e>o?e-o|0:0,a=new Array(i),u=0;u<i;++u)a[u]=r[o+u|0];return a},t.fill=function(r,t,e,o){if(!(e<=0)){var i=r.length,a=t<0?n.int_max(i+t|0,0):t,u=i-a|0,f=u<e?u:e;if(!(f<=0))for(var s=a,c=a+f|0;s<c;++s)r[s]=o}},t.blit=function(r,t,e,o,i){var a=r.length,u=e.length,f=t<0?n.int_max(a+t|0,0):t,s=o<0?n.int_max(u+o|0,0):o,c=n.int_min(i,n.int_min(a-f|0,u-s|0));if(s<=f)for(var v=0;v<c;++v)e[v+s|0]=r[v+f|0];else for(var d=c-1|0;d>=0;--d)e[d+s|0]=r[d+f|0]},t.blitUnsafe=function(r,t,e,n,o){if(n<=t)for(var i=0;i<o;++i)e[i+n|0]=r[i+t|0];else for(var a=o-1|0;a>=0;--a)e[a+n|0]=r[a+t|0]},t.forEachU=l,t.forEach=function(r,t){l(r,o.__1(t))},t.mapU=p,t.map=function(r,t){return p(r,o.__1(t))},t.flatMapU=function(r,t){return d(p(r,t))},t.flatMap=function(r,t){return d(p(r,o.__1(t)))},t.getByU=m,t.getBy=function(r,t){return m(r,o.__1(t))},t.getIndexByU=h,t.getIndexBy=function(r,t){return h(r,o.__1(t))},t.keepU=g,t.keep=function(r,t){return g(r,o.__1(t))},t.keepWithIndexU=E,t.keepWithIndex=function(r,t){return E(r,o.__2(t))},t.keepMapU=_,t.keepMap=function(r,t){return _(r,o.__1(t))},t.forEachWithIndexU=x,t.forEachWithIndex=function(r,t){x(r,o.__2(t))},t.mapWithIndexU=y,t.mapWithIndex=function(r,t){return y(r,o.__2(t))},t.partitionU=D,t.partition=function(r,t){return D(r,o.__1(t))},t.reduceU=b,t.reduce=function(r,t,e){return b(r,t,o.__2(e))},t.reduceReverseU=T,t.reduceReverse=function(r,t,e){return T(r,t,o.__2(e))},t.reduceReverse2U=A,t.reduceReverse2=function(r,t,e,n){return A(r,t,e,o.__3(n))},t.reduceWithIndexU=S,t.reduceWithIndex=function(r,t,e){return S(r,t,o.__3(e))},t.joinWithU=U,t.joinWith=function(r,t,e){return U(r,t,o.__1(e))},t.someU=w,t.some=function(r,t){return w(r,o.__1(t))},t.everyU=k,t.every=function(r,t){return k(r,o.__1(t))},t.every2U=G,t.every2=function(r,t,e){return G(r,t,o.__2(e))},t.some2U=M,t.some2=function(r,t,e){return M(r,t,o.__2(e))},t.cmpU=C,t.cmp=function(r,t,e){return C(r,t,o.__2(e))},t.eqU=N,t.eq=function(r,t,e){return N(r,t,o.__2(e))},t.initU=j,t.init=function(r,t){return j(r,o.__1(t))}},2815:function(r,t,e){var n=e(7175),o=e(5252),i=e(354);function a(r,t,e,n){for(;;){var o=n;if(void 0===o)return;var i=r(o.key)&(t.length-1|0),a=e[i];void 0!==a?a.next=o:t[i]=o,e[i]=o,n=o.next}}function u(r,t,e,n,o){var i=r.buckets,u=i.length,f=o(t)&(u-1|0),s=i[f];if(void 0!==s?function(r,t,e,n){for(;;){var o=n;if(r(o.key,t))return o.value=e,!1;var i=o.next;if(void 0===i)return!0;n=i}}(n,t,e,s)&&(i[f]={key:t,value:e,next:s},r.size=r.size+1|0):(i[f]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>u<<1){var c=r.buckets,v=c.length,d=v<<1;if(d<v)return;var l=new Array(d),p=new Array(d);r.buckets=l;for(var m=0;m<v;++m)a(o,l,p,c[m]);for(var h=0;h<d;++h){var g=p[h];void 0!==g&&(g.next=void 0)}}}var f=i.clear,s=i.isEmpty,c=o.copy,v=o.forEachU,d=o.forEach,l=o.reduceU,p=o.reduce,m=o.keepMapInPlaceU,h=o.keepMapInPlace,g=o.toArray,E=o.keysToArray,_=o.valuesToArray,x=o.getBucketHistogram,y=o.logStats;t.Int=void 0,t.$$String=void 0,t.make=function(r,t){return i.make(t.hash,t.eq,r)},t.clear=f,t.isEmpty=s,t.set=function(r,t,e){u(r,t,e,r.eq,r.hash)},t.copy=c,t.get=function(r,t){var e=r.buckets,o=e[r.hash(t)&(e.length-1|0)];if(void 0!==o){var i=r.eq;if(i(t,o.key))return n.some(o.value);var a=o.next;if(void 0!==a){if(i(t,a.key))return n.some(a.value);var u=a.next;if(void 0!==u){if(i(t,u.key))return n.some(u.value);for(var f=u.next;;){var s=f;if(void 0===s)return;if(i(t,s.key))return n.some(s.value);f=s.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[r.hash(t)&(e.length-1|0)];if(void 0===n)return!1;for(var o=n,i=r.eq;;){var a=o;if(i(a.key,t))return!0;var u=a.next;if(void 0===u)return!1;o=u}},t.remove=function(r,t){var e=r.buckets,n=r.hash(t)&(e.length-1|0),o=e[n];if(void 0!==o){var i=r.eq;if(i(o.key,t))return e[n]=o.next,void(r.size=r.size-1|0);for(var a=o,u=o.next;;){var f=u,s=a;if(void 0===f)return;var c=f.next;if(i(f.key,t))return s.next=c,void(r.size=r.size-1|0);u=c,a=f}}},t.forEachU=v,t.forEach=d,t.reduceU=l,t.reduce=p,t.keepMapInPlaceU=m,t.keepMapInPlace=h,t.size=function(r){return r.size},t.toArray=g,t.keysToArray=E,t.valuesToArray=_,t.fromArray=function(r,t){for(var e=t.hash,n=t.eq,o=r.length,a=i.make(e,n,o),f=0;f<o;++f){var s=r[f];u(a,s[0],s[1],n,e)}return a},t.mergeMany=function(r,t){for(var e=r.hash,n=r.eq,o=t.length,i=0;i<o;++i){var a=t[i];u(r,a[0],a[1],n,e)}},t.getBucketHistogram=x,t.logStats=y},7356:function(r,t,e){var n=e(7175),o=e(1863),i=e(5252),a=e(354);function u(r,t,e){for(;;){var n=e;if(void 0===n)return;var i=o.hash_final_mix(o.hash_mix_int(0,n.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=n:r[i]=n,t[i]=n,e=n.next}}function f(r,t,e){var n=r.buckets,i=n.length,a=o.hash_final_mix(o.hash_mix_int(0,t))&(i-1|0),f=n[a];if(void 0!==f?function(r,t,e){for(;;){var n=e;if(n.key===r)return n.value=t,!1;var o=n.next;if(void 0===o)return!0;e=o}}(t,e,f)&&(n[a]={key:t,value:e,next:f},r.size=r.size+1|0):(n[a]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>i<<1){var s=r.buckets,c=s.length,v=c<<1;if(v<c)return;var d=new Array(v),l=new Array(v);r.buckets=d;for(var p=0;p<c;++p)u(d,l,s[p]);for(var m=0;m<v;++m){var h=l[m];void 0!==h&&(h.next=void 0)}}}var s=a.clear,c=a.isEmpty,v=i.copy,d=i.forEachU,l=i.forEach,p=i.reduceU,m=i.reduce,h=i.keepMapInPlaceU,g=i.keepMapInPlace,E=i.toArray,_=i.keysToArray,x=i.valuesToArray,y=i.getBucketHistogram,b=i.logStats;t.make=function(r){return a.make(void 0,void 0,r)},t.clear=s,t.isEmpty=c,t.set=f,t.copy=v,t.get=function(r,t){var e=r.buckets,i=e[o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0)];if(void 0!==i){if(t===i.key)return n.some(i.value);var a=i.next;if(void 0!==a){if(t===a.key)return n.some(a.value);var u=a.next;if(void 0!==u){if(t===u.key)return n.some(u.value);for(var f=u.next;;){var s=f;if(void 0===s)return;if(t===s.key)return n.some(s.value);f=s.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0)];if(void 0===n)return!1;for(var i=n;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,n=o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0),i=e[n];if(void 0!==i){if(i.key===t)return e[n]=i.next,void(r.size=r.size-1|0);for(var a=i,u=i.next;;){var f=u,s=a;if(void 0===f)return;var c=f.next;if(f.key===t)return s.next=c,void(r.size=r.size-1|0);u=c,a=f}}},t.forEachU=d,t.forEach=l,t.reduceU=p,t.reduce=m,t.keepMapInPlaceU=h,t.keepMapInPlace=g,t.size=function(r){return r.size},t.toArray=E,t.keysToArray=_,t.valuesToArray=x,t.fromArray=function(r){for(var t=r.length,e=a.make(void 0,void 0,t),n=0;n<t;++n){var o=r[n];f(e,o[0],o[1])}return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n){var o=t[n];f(r,o[0],o[1])}},t.getBucketHistogram=y,t.logStats=b},2275:function(r,t,e){var n=e(7175),o=e(1863),i=e(5252),a=e(354);function u(r,t,e){for(;;){var n=e;if(void 0===n)return;var i=o.hash_final_mix(o.hash_mix_string(0,n.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=n:r[i]=n,t[i]=n,e=n.next}}function f(r,t,e){var n=r.buckets,i=n.length,a=o.hash_final_mix(o.hash_mix_string(0,t))&(i-1|0),f=n[a];if(void 0!==f?function(r,t,e){for(;;){var n=e;if(n.key===r)return n.value=t,!1;var o=n.next;if(void 0===o)return!0;e=o}}(t,e,f)&&(n[a]={key:t,value:e,next:f},r.size=r.size+1|0):(n[a]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>i<<1){var s=r.buckets,c=s.length,v=c<<1;if(v<c)return;var d=new Array(v),l=new Array(v);r.buckets=d;for(var p=0;p<c;++p)u(d,l,s[p]);for(var m=0;m<v;++m){var h=l[m];void 0!==h&&(h.next=void 0)}}}var s=a.clear,c=a.isEmpty,v=i.copy,d=i.forEachU,l=i.forEach,p=i.reduceU,m=i.reduce,h=i.keepMapInPlaceU,g=i.keepMapInPlace,E=i.toArray,_=i.keysToArray,x=i.valuesToArray,y=i.getBucketHistogram,b=i.logStats;t.make=function(r){return a.make(void 0,void 0,r)},t.clear=s,t.isEmpty=c,t.set=f,t.copy=v,t.get=function(r,t){var e=r.buckets,i=e[o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0)];if(void 0!==i){if(t===i.key)return n.some(i.value);var a=i.next;if(void 0!==a){if(t===a.key)return n.some(a.value);var u=a.next;if(void 0!==u){if(t===u.key)return n.some(u.value);for(var f=u.next;;){var s=f;if(void 0===s)return;if(t===s.key)return n.some(s.value);f=s.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0)];if(void 0===n)return!1;for(var i=n;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,n=o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0),i=e[n];if(void 0!==i){if(i.key===t)return e[n]=i.next,void(r.size=r.size-1|0);for(var a=i,u=i.next;;){var f=u,s=a;if(void 0===f)return;var c=f.next;if(f.key===t)return s.next=c,void(r.size=r.size-1|0);u=c,a=f}}},t.forEachU=d,t.forEach=l,t.reduceU=p,t.reduce=m,t.keepMapInPlaceU=h,t.keepMapInPlace=g,t.size=function(r){return r.size},t.toArray=E,t.keysToArray=_,t.valuesToArray=x,t.fromArray=function(r){for(var t=r.length,e=a.make(void 0,void 0,t),n=0;n<t;++n){var o=r[n];f(e,o[0],o[1])}return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n){var o=t[n];f(r,o[0],o[1])}},t.getBucketHistogram=y,t.logStats=b},9775:function(r,t,e){var n=e(9167),o=e(354);function i(r,t,e,n){for(;;){var o=n;if(void 0===o)return;var i=r(o.key)&(t.length-1|0),a=e[i];void 0!==a?a.next=o:t[i]=o,e[i]=o,n=o.next}}function a(r,t,e,n){var o=r.buckets,a=o.length,u=e(t)&(a-1|0),f=o[u];if(void 0!==f?function(r,t,e,n){for(;;){var o=e;if(n(o.key,t))return;var i=o.next;if(void 0===i)return r.size=r.size+1|0,void(o.next={key:t,next:void 0});e=i}}(r,t,f,n):(r.size=r.size+1|0,o[u]={key:t,next:void 0}),r.size>a<<1){var s=r.buckets,c=s.length,v=c<<1;if(v<c)return;var d=new Array(v),l=new Array(v);r.buckets=d;for(var p=0;p<c;++p)i(e,d,l,s[p]);for(var m=0;m<v;++m){var h=l[m];void 0!==h&&(h.next=void 0)}}}var u=o.clear,f=o.isEmpty,s=n.copy,c=n.forEachU,v=n.forEach,d=n.reduceU,l=n.reduce,p=n.logStats,m=n.toArray,h=n.getBucketHistogram;t.Int=void 0,t.$$String=void 0,t.make=function(r,t){return o.make(t.hash,t.eq,r)},t.clear=u,t.isEmpty=f,t.add=function(r,t){a(r,t,r.hash,r.eq)},t.copy=s,t.has=function(r,t){var e=r.eq,n=r.buckets,o=n[r.hash(t)&(n.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(e(a.key,t))return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.eq,n=r.buckets,o=r.hash(t)&(n.length-1|0),i=n[o];if(void 0!==i){var a=i.next;if(e(i.key,t))return r.size=r.size-1|0,void(n[o]=a);if(void 0!==a)for(var u=i,f=a;;){var s=f,c=u,v=s.next;if(e(s.key,t))return c.next=v,void(r.size=r.size-1|0);if(void 0===v)return;f=v,u=s}}},t.forEachU=c,t.forEach=v,t.reduceU=d,t.reduce=l,t.size=function(r){return r.size},t.logStats=p,t.toArray=m,t.fromArray=function(r,t){for(var e=t.eq,n=t.hash,i=r.length,u=o.make(n,e,i),f=0;f<i;++f)a(u,r[f],n,e);return u},t.mergeMany=function(r,t){for(var e=r.eq,n=r.hash,o=t.length,i=0;i<o;++i)a(r,t[i],n,e)},t.getBucketHistogram=h},7659:function(r,t,e){var n=e(1863),o=e(9167),i=e(354);function a(r,t,e){for(;;){var o=e;if(void 0===o)return;var i=n.hash_final_mix(n.hash_mix_int(0,o.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=o:r[i]=o,t[i]=o,e=o.next}}function u(r,t){var e=r.buckets,o=e.length,i=n.hash_final_mix(n.hash_mix_int(0,t))&(o-1|0),u=e[i];if(void 0!==u?function(r,t,e){for(;;){var n=e;if(n.key===t)return;var o=n.next;if(void 0===o)return r.size=r.size+1|0,void(n.next={key:t,next:void 0});e=o}}(r,t,u):(e[i]={key:t,next:void 0},r.size=r.size+1|0),r.size>o<<1){var f=r.buckets,s=f.length,c=s<<1;if(c<s)return;var v=new Array(c),d=new Array(c);r.buckets=v;for(var l=0;l<s;++l)a(v,d,f[l]);for(var p=0;p<c;++p){var m=d[p];void 0!==m&&(m.next=void 0)}}}var f=i.clear,s=i.isEmpty,c=o.copy,v=o.forEachU,d=o.forEach,l=o.reduceU,p=o.reduce,m=o.logStats,h=o.toArray,g=o.getBucketHistogram;t.make=function(r){return i.make(void 0,void 0,r)},t.clear=f,t.isEmpty=s,t.add=u,t.copy=c,t.has=function(r,t){var e=r.buckets,o=e[n.hash_final_mix(n.hash_mix_int(0,t))&(e.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,o=n.hash_final_mix(n.hash_mix_int(0,t))&(e.length-1|0),i=e[o];if(void 0!==i){var a=i.next;if(i.key===t)return r.size=r.size-1|0,void(e[o]=a);if(void 0!==a)for(var u=i,f=a;;){var s=f,c=u,v=s.next;if(s.key===t)return c.next=v,void(r.size=r.size-1|0);if(void 0===v)return;f=v,u=s}}},t.forEachU=v,t.forEach=d,t.reduceU=l,t.reduce=p,t.size=function(r){return r.size},t.logStats=m,t.toArray=h,t.fromArray=function(r){for(var t=r.length,e=i.make(void 0,void 0,t),n=0;n<t;++n)u(e,r[n]);return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n)u(r,t[n])},t.getBucketHistogram=g},8615:function(r,t,e){var n=e(1863),o=e(9167),i=e(354);function a(r,t,e){for(;;){var o=e;if(void 0===o)return;var i=n.hash_final_mix(n.hash_mix_string(0,o.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=o:r[i]=o,t[i]=o,e=o.next}}function u(r,t){var e=r.buckets,o=e.length,i=n.hash_final_mix(n.hash_mix_string(0,t))&(o-1|0),u=e[i];if(void 0!==u?function(r,t,e){for(;;){var n=e;if(n.key===t)return;var o=n.next;if(void 0===o)return r.size=r.size+1|0,void(n.next={key:t,next:void 0});e=o}}(r,t,u):(e[i]={key:t,next:void 0},r.size=r.size+1|0),r.size>o<<1){var f=r.buckets,s=f.length,c=s<<1;if(c<s)return;var v=new Array(c),d=new Array(c);r.buckets=v;for(var l=0;l<s;++l)a(v,d,f[l]);for(var p=0;p<c;++p){var m=d[p];void 0!==m&&(m.next=void 0)}}}var f=i.clear,s=i.isEmpty,c=o.copy,v=o.forEachU,d=o.forEach,l=o.reduceU,p=o.reduce,m=o.logStats,h=o.toArray,g=o.getBucketHistogram;t.make=function(r){return i.make(void 0,void 0,r)},t.clear=f,t.isEmpty=s,t.add=u,t.copy=c,t.has=function(r,t){var e=r.buckets,o=e[n.hash_final_mix(n.hash_mix_string(0,t))&(e.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,o=n.hash_final_mix(n.hash_mix_string(0,t))&(e.length-1|0),i=e[o];if(void 0!==i){var a=i.next;if(i.key===t)return r.size=r.size-1|0,void(e[o]=a);if(void 0!==a)for(var u=i,f=a;;){var s=f,c=u,v=s.next;if(s.key===t)return c.next=v,void(r.size=r.size-1|0);if(void 0===v)return;f=v,u=s}}},t.forEachU=v,t.forEach=d,t.reduceU=l,t.reduce=p,t.size=function(r){return r.size},t.logStats=m,t.toArray=h,t.fromArray=function(r){for(var t=r.length,e=i.make(void 0,void 0,t),n=0;n<t;++n)u(e,r[n]);return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n)u(r,t[n])},t.getBucketHistogram=g},6638:function(r,t,e){var n=e(1386);t.MakeComparableU=function(r){return r},t.MakeComparable=function(r){var t=r.cmp;return{cmp:n.__2(t)}},t.comparableU=function(r){return{cmp:r}},t.comparable=function(r){return{cmp:n.__2(r)}},t.MakeHashableU=function(r){return r},t.MakeHashable=function(r){var t=r.hash,e=n.__1(t),o=r.eq;return{hash:e,eq:n.__2(o)}},t.hashableU=function(r,t){return{hash:r,eq:t}},t.hashable=function(r,t){return{hash:n.__1(r),eq:n.__2(t)}}},1094:function(r,t,e){var n=e(1386),o=e(7175),i=e(3163),a=e(6144);function u(r,t,e){if(void 0===r)return a.singleton(t,e);var n=r.k;if(t===n)return a.updateValue(r,e);var o=r.v;return t<n?a.bal(u(r.l,t,e),n,o,r.r):a.bal(r.l,n,o,u(r.r,t,e))}function f(r,t,e){if(void 0!==r){var n=r.k;if(t===n){var i=e(o.some(r.v));if(void 0!==i)return a.updateValue(r,o.valFromOption(i));var u=r.l,s=r.r;if(void 0===u)return s;if(void 0===s)return u;var c={contents:s.k},v={contents:s.v},d=a.removeMinAuxWithRef(s,c,v);return a.bal(u,c.contents,v.contents,d)}var l=r.v,p=r.l,m=r.r;if(t<n){var h=f(p,t,e);return p===h?r:a.bal(h,n,l,m)}var g=f(m,t,e);return m===g?r:a.bal(p,n,l,g)}var E=e(void 0);return void 0!==E?a.singleton(t,o.valFromOption(E)):r}function s(r,t){var e=r.k,n=r.l,o=r.r;if(t===e){if(void 0===n)return o;if(void 0===o)return n;var i={contents:o.k},u={contents:o.v},f=a.removeMinAuxWithRef(o,i,u);return a.bal(n,i.contents,u.contents,f)}if(t<e){if(void 0===n)return r;var c=s(n,t);return c===n?r:a.bal(c,e,r.v,o)}if(void 0===o)return r;var v=s(o,t);return a.bal(n,e,r.v,v)}var c=a.isEmpty,v=i.has,d=i.cmpU,l=i.cmp,p=i.eqU,m=i.eq,h=a.findFirstByU,g=a.findFirstBy,E=a.forEachU,_=a.forEach,x=a.reduceU,y=a.reduce,b=a.everyU,T=a.every,A=a.someU,S=a.some,k=a.size,w=a.toList,I=a.toArray,G=i.fromArray,M=a.keysToArray,N=a.valuesToArray,C=a.minKey,D=a.minKeyUndefined,U=a.maxKey,j=a.maxKeyUndefined,P=a.minimum,R=a.minUndefined,O=a.maximum,F=a.maxUndefined,V=i.get,B=i.getUndefined,L=i.getWithDefault,X=i.getExn,z=a.checkInvariantInternal,W=i.mergeU,q=i.merge,H=a.keepSharedU,$=a.keepShared,K=a.partitionSharedU,J=a.partitionShared,Q=i.split,Z=a.mapU,Y=a.map,rr=a.mapWithKeyU,tr=a.mapWithKey;t.empty=void 0,t.isEmpty=c,t.has=v,t.cmpU=d,t.cmp=l,t.eqU=p,t.eq=m,t.findFirstByU=h,t.findFirstBy=g,t.forEachU=E,t.forEach=_,t.reduceU=x,t.reduce=y,t.everyU=b,t.every=T,t.someU=A,t.some=S,t.size=k,t.toList=w,t.toArray=I,t.fromArray=G,t.keysToArray=M,t.valuesToArray=N,t.minKey=C,t.minKeyUndefined=D,t.maxKey=U,t.maxKeyUndefined=j,t.minimum=P,t.minUndefined=R,t.maximum=O,t.maxUndefined=F,t.get=V,t.getUndefined=B,t.getWithDefault=L,t.getExn=X,t.checkInvariantInternal=z,t.remove=function(r,t){if(void 0!==r)return s(r,t)},t.removeMany=function(r,t){var e=t.length;if(void 0!==r)for(var n=r,o=0;;){var i=o;if(i>=e)return n;var a=s(n,t[i]);if(void 0===a)return a;o=i+1|0,n=a}},t.set=u,t.updateU=f,t.update=function(r,t,e){return f(r,t,n.__1(e))},t.mergeU=W,t.merge=q,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o){var i=t[o];n=u(n,i[0],i[1])}return n},t.keepU=H,t.keep=$,t.partitionU=K,t.partition=J,t.split=Q,t.mapU=Z,t.map=Y,t.mapWithKeyU=rr,t.mapWithKey=tr},5082:function(r,t,e){var n=e(1386),o=e(7175),i=e(6144),a=e(2459);function u(r,t,e){if(void 0===r)return i.singleton(t,e);var n=r.k;if(t===n)return i.updateValue(r,e);var o=r.v;return t<n?i.bal(u(r.l,t,e),n,o,r.r):i.bal(r.l,n,o,u(r.r,t,e))}function f(r,t,e){if(void 0!==r){var n=r.k;if(t===n){var a=e(o.some(r.v));if(void 0!==a)return i.updateValue(r,o.valFromOption(a));var u=r.l,s=r.r;if(void 0===u)return s;if(void 0===s)return u;var c={contents:s.k},v={contents:s.v},d=i.removeMinAuxWithRef(s,c,v);return i.bal(u,c.contents,v.contents,d)}var l=r.v,p=r.l,m=r.r;if(t<n){var h=f(p,t,e);return p===h?r:i.bal(h,n,l,m)}var g=f(m,t,e);return m===g?r:i.bal(p,n,l,g)}var E=e(void 0);return void 0!==E?i.singleton(t,o.valFromOption(E)):r}function s(r,t){var e=r.k,n=r.l,o=r.r;if(t===e){if(void 0===n)return o;if(void 0===o)return n;var a={contents:o.k},u={contents:o.v},f=i.removeMinAuxWithRef(o,a,u);return i.bal(n,a.contents,u.contents,f)}if(t<e){if(void 0===n)return r;var c=s(n,t);return c===n?r:i.bal(c,e,r.v,o)}if(void 0===o)return r;var v=s(o,t);return i.bal(n,e,r.v,v)}var c=i.isEmpty,v=a.has,d=a.cmpU,l=a.cmp,p=a.eqU,m=a.eq,h=i.findFirstByU,g=i.findFirstBy,E=i.forEachU,_=i.forEach,x=i.reduceU,y=i.reduce,b=i.everyU,T=i.every,A=i.someU,S=i.some,k=i.size,w=i.toList,I=i.toArray,G=a.fromArray,M=i.keysToArray,N=i.valuesToArray,C=i.minKey,D=i.minKeyUndefined,U=i.maxKey,j=i.maxKeyUndefined,P=i.minimum,R=i.minUndefined,O=i.maximum,F=i.maxUndefined,V=a.get,B=a.getUndefined,L=a.getWithDefault,X=a.getExn,z=i.checkInvariantInternal,W=a.mergeU,q=a.merge,H=i.keepSharedU,$=i.keepShared,K=i.partitionSharedU,J=i.partitionShared,Q=a.split,Z=i.mapU,Y=i.map,rr=i.mapWithKeyU,tr=i.mapWithKey;t.empty=void 0,t.isEmpty=c,t.has=v,t.cmpU=d,t.cmp=l,t.eqU=p,t.eq=m,t.findFirstByU=h,t.findFirstBy=g,t.forEachU=E,t.forEach=_,t.reduceU=x,t.reduce=y,t.everyU=b,t.every=T,t.someU=A,t.some=S,t.size=k,t.toList=w,t.toArray=I,t.fromArray=G,t.keysToArray=M,t.valuesToArray=N,t.minKey=C,t.minKeyUndefined=D,t.maxKey=U,t.maxKeyUndefined=j,t.minimum=P,t.minUndefined=R,t.maximum=O,t.maxUndefined=F,t.get=V,t.getUndefined=B,t.getWithDefault=L,t.getExn=X,t.checkInvariantInternal=z,t.remove=function(r,t){if(void 0!==r)return s(r,t)},t.removeMany=function(r,t){var e=t.length;if(void 0!==r)for(var n=r,o=0;;){var i=o;if(i>=e)return n;var a=s(n,t[i]);if(void 0===a)return a;o=i+1|0,n=a}},t.set=u,t.updateU=f,t.update=function(r,t,e){return f(r,t,n.__1(e))},t.mergeU=W,t.merge=q,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o){var i=t[o];n=u(n,i[0],i[1])}return n},t.keepU=H,t.keep=$,t.partitionU=K,t.partition=J,t.split=Q,t.mapU=Z,t.map=Y,t.mapWithKeyU=rr,t.mapWithKey=tr},5981:function(r,t,e){var n=e(1386),o=e(7175),i=e(3163),a=e(6144);function u(r,t){return{data:a.mapU(r.data,t)}}function f(r,t){return{data:a.mapWithKeyU(r.data,t)}}function s(r,t,e){return a.reduceU(r.data,t,e)}function c(r,t){var e=r.k;if(t===e){var n=r.l,o=r.r;return void 0!==n?void 0!==o?(r.r=a.removeMinAuxWithRootMutate(r,o),a.balMutate(r)):n:o}if(t<e){var i=r.l;return void 0!==i?(r.l=c(i,t),a.balMutate(r)):r}var u=r.r;return void 0!==u?(r.r=c(u,t),a.balMutate(r)):r}function v(r,t,e){if(void 0!==r){var n=r.k;if(n===t){var i=e(o.some(r.v));if(void 0!==i)return r.v=o.valFromOption(i),r;var u=r.l,f=r.r;return void 0!==u?void 0!==f?(r.r=a.removeMinAuxWithRootMutate(r,f),a.balMutate(r)):u:f}var s=r.l,c=r.r;if(t<n){var d=v(s,t,e);r.l=d}else r.r=v(c,t,e);return a.balMutate(r)}var l=e(void 0);return void 0!==l?a.singleton(t,o.valFromOption(l)):r}function d(r,t,e){var n=r.data,o=v(n,t,e);o===n||(r.data=o)}function l(r,t,e){return i.cmpU(r.data,t.data,e)}function p(r,t,e){return i.eqU(r.data,t.data,e)}t.make=function(r){return{data:void 0}},t.clear=function(r){r.data=void 0},t.isEmpty=function(r){return void 0===r.data},t.has=function(r,t){return i.has(r.data,t)},t.cmpU=l,t.cmp=function(r,t,e){return l(r,t,n.__2(e))},t.eqU=p,t.eq=function(r,t,e){return p(r,t,n.__2(e))},t.forEachU=function(r,t){a.forEachU(r.data,t)},t.forEach=function(r,t){a.forEachU(r.data,n.__2(t))},t.reduceU=s,t.reduce=function(r,t,e){return s(r,t,n.__3(e))},t.everyU=function(r,t){return a.everyU(r.data,t)},t.every=function(r,t){return a.everyU(r.data,n.__2(t))},t.someU=function(r,t){return a.someU(r.data,t)},t.some=function(r,t){return a.someU(r.data,n.__2(t))},t.size=function(r){return a.size(r.data)},t.toList=function(r){return a.toList(r.data)},t.toArray=function(r){return a.toArray(r.data)},t.fromArray=function(r){return{data:i.fromArray(r)}},t.keysToArray=function(r){return a.keysToArray(r.data)},t.valuesToArray=function(r){return a.valuesToArray(r.data)},t.minKey=function(r){return a.minKey(r.data)},t.minKeyUndefined=function(r){return a.minKeyUndefined(r.data)},t.maxKey=function(r){return a.maxKey(r.data)},t.maxKeyUndefined=function(r){return a.maxKeyUndefined(r.data)},t.minimum=function(r){return a.minimum(r.data)},t.minUndefined=function(r){return a.minUndefined(r.data)},t.maximum=function(r){return a.maximum(r.data)},t.maxUndefined=function(r){return a.maxUndefined(r.data)},t.get=function(r,t){return i.get(r.data,t)},t.getUndefined=function(r,t){return i.getUndefined(r.data,t)},t.getWithDefault=function(r,t,e){return i.getWithDefault(r.data,t,e)},t.getExn=function(r,t){return i.getExn(r.data,t)},t.checkInvariantInternal=function(r){a.checkInvariantInternal(r.data)},t.remove=function(r,t){var e=r.data;if(void 0!==e){var n=c(e,t);n===e||(r.data=n)}},t.removeMany=function(r,t){var e=r.data;if(void 0!==e){var n=function(r,t,e,n){for(;;){var o=e;if(o>=n)return r;var i=c(r,t[o]);if(void 0===i)return;e=o+1|0,r=i}}(e,t,0,t.length);n===e||(r.data=n)}},t.set=function(r,t,e){var n=r.data,o=i.addMutate(n,t,e);o===n||(r.data=o)},t.updateU=d,t.update=function(r,t,e){d(r,t,n.__1(e))},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.mapWithKeyU=f,t.mapWithKey=function(r,t){return f(r,n.__2(t))}},2867:function(r,t,e){var n=e(1386),o=e(7175),i=e(6144),a=e(2459);function u(r,t){return{data:i.mapU(r.data,t)}}function f(r,t){return{data:i.mapWithKeyU(r.data,t)}}function s(r,t,e){return i.reduceU(r.data,t,e)}function c(r,t){var e=r.k;if(t===e){var n=r.l,o=r.r;return void 0!==n?void 0!==o?(r.r=i.removeMinAuxWithRootMutate(r,o),i.balMutate(r)):n:o}if(t<e){var a=r.l;return void 0!==a?(r.l=c(a,t),i.balMutate(r)):r}var u=r.r;return void 0!==u?(r.r=c(u,t),i.balMutate(r)):r}function v(r,t,e){if(void 0!==r){var n=r.k;if(n===t){var a=e(o.some(r.v));if(void 0!==a)return r.v=o.valFromOption(a),r;var u=r.l,f=r.r;return void 0!==u?void 0!==f?(r.r=i.removeMinAuxWithRootMutate(r,f),i.balMutate(r)):u:f}var s=r.l,c=r.r;if(t<n){var d=v(s,t,e);r.l=d}else r.r=v(c,t,e);return i.balMutate(r)}var l=e(void 0);return void 0!==l?i.singleton(t,o.valFromOption(l)):r}function d(r,t,e){var n=r.data,o=v(n,t,e);o===n||(r.data=o)}function l(r,t,e){return a.cmpU(r.data,t.data,e)}function p(r,t,e){return a.eqU(r.data,t.data,e)}t.make=function(r){return{data:void 0}},t.clear=function(r){r.data=void 0},t.isEmpty=function(r){return void 0===r.data},t.has=function(r,t){return a.has(r.data,t)},t.cmpU=l,t.cmp=function(r,t,e){return l(r,t,n.__2(e))},t.eqU=p,t.eq=function(r,t,e){return p(r,t,n.__2(e))},t.forEachU=function(r,t){i.forEachU(r.data,t)},t.forEach=function(r,t){i.forEachU(r.data,n.__2(t))},t.reduceU=s,t.reduce=function(r,t,e){return s(r,t,n.__3(e))},t.everyU=function(r,t){return i.everyU(r.data,t)},t.every=function(r,t){return i.everyU(r.data,n.__2(t))},t.someU=function(r,t){return i.someU(r.data,t)},t.some=function(r,t){return i.someU(r.data,n.__2(t))},t.size=function(r){return i.size(r.data)},t.toList=function(r){return i.toList(r.data)},t.toArray=function(r){return i.toArray(r.data)},t.fromArray=function(r){return{data:a.fromArray(r)}},t.keysToArray=function(r){return i.keysToArray(r.data)},t.valuesToArray=function(r){return i.valuesToArray(r.data)},t.minKey=function(r){return i.minKey(r.data)},t.minKeyUndefined=function(r){return i.minKeyUndefined(r.data)},t.maxKey=function(r){return i.maxKey(r.data)},t.maxKeyUndefined=function(r){return i.maxKeyUndefined(r.data)},t.minimum=function(r){return i.minimum(r.data)},t.minUndefined=function(r){return i.minUndefined(r.data)},t.maximum=function(r){return i.maximum(r.data)},t.maxUndefined=function(r){return i.maxUndefined(r.data)},t.get=function(r,t){return a.get(r.data,t)},t.getUndefined=function(r,t){return a.getUndefined(r.data,t)},t.getWithDefault=function(r,t,e){return a.getWithDefault(r.data,t,e)},t.getExn=function(r,t){return a.getExn(r.data,t)},t.checkInvariantInternal=function(r){i.checkInvariantInternal(r.data)},t.remove=function(r,t){var e=r.data;if(void 0!==e){var n=c(e,t);n===e||(r.data=n)}},t.removeMany=function(r,t){var e=r.data;if(void 0!==e){var n=function(r,t,e,n){for(;;){var o=e;if(o>=n)return r;var i=c(r,t[o]);if(void 0===i)return;e=o+1|0,r=i}}(e,t,0,t.length);n===e||(r.data=n)}},t.set=function(r,t,e){var n=r.data,o=a.addMutate(n,t,e);o===n||(r.data=o)},t.updateU=d,t.update=function(r,t,e){d(r,t,n.__1(e))},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.mapWithKeyU=f,t.mapWithKey=function(r,t){return f(r,n.__2(t))}},5650:function(r,t,e){var n=e(1386),o=e(7175);function i(r){r.length=0,r.first=void 0,r.last=void 0}function a(r,t){var e={content:t,next:void 0},n=r.last;void 0!==n?(r.length=r.length+1|0,n.next=e,r.last=e):(r.length=1,r.first=e,r.last=e)}function u(r,t){for(var e,n={length:r.length,first:void 0,last:void 0},o=r.first;;){var i=o,a=e;if(void 0===i)return n.last=a,n;var u={content:t(i.content),next:void 0};void 0!==a?a.next=u:n.first=u,o=i.next,e=u}}function f(r,t){for(var e=r.first;;){var n=e;if(void 0===n)return;t(n.content),e=n.next}}function s(r,t,e){for(var n=t,o=r.first;;){var i=o;if(void 0===i)return n;var a=e(n,i.content);o=i.next,n=a}}t.make=function(r){return{length:0,first:void 0,last:void 0}},t.clear=i,t.isEmpty=function(r){return 0===r.length},t.fromArray=function(r){for(var t={length:0,first:void 0,last:void 0},e=0,n=r.length;e<n;++e)a(t,r[e]);return t},t.add=a,t.peek=function(r){var t=r.first;if(void 0!==t)return o.some(t.content)},t.peekUndefined=function(r){var t=r.first;if(void 0!==t)return t.content},t.peekExn=function(r){var t=r.first;if(void 0!==t)return t.content;throw{RE_EXN_ID:"Not_found",Error:new Error}},t.pop=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),o.some(t.content)):(r.length=r.length-1|0,r.first=e,o.some(t.content))}},t.popUndefined=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),t.content):(r.length=r.length-1|0,r.first=e,t.content)}},t.popExn=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),t.content):(r.length=r.length-1|0,r.first=e,t.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}},t.copy=function(r){for(var t,e={length:r.length,first:void 0,last:void 0},n=r.first;;){var o=n,i=t;if(void 0===o)return e.last=i,e;var a={content:o.content,next:void 0};void 0!==i?i.next=a:e.first=a,n=o.next,t=a}},t.size=function(r){return r.length},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.forEachU=f,t.forEach=function(r,t){f(r,n.__1(t))},t.reduceU=s,t.reduce=function(r,t,e){return s(r,t,n.__2(e))},t.transfer=function(r,t){if(!(r.length<=0)){var e=t.last;return void 0!==e?(t.length=t.length+r.length|0,e.next=r.first,t.last=r.last,i(r)):(t.length=r.length,t.first=r.first,t.last=r.last,i(r))}},t.toArray=function(r){var t=new Array(r.length);return function(r,t,e){for(;;){var n=e,o=r;if(void 0===n)return;t[o]=n.content,e=n.next,r=o+1|0}}(0,t,r.first),t}},6601:function(r,t,e){var n=e(1386),o=e(7175);function i(r,t){for(var e=r.root;;){var n=e;if(void 0===n)return;t(n.head),e=n.tail}}function a(r,t){for(;;){var e=r.root;if(void 0===e)return;r.root=e.tail,t(e.head)}}t.make=function(r){return{root:void 0}},t.clear=function(r){r.root=void 0},t.copy=function(r){return{root:r.root}},t.push=function(r,t){r.root={head:t,tail:r.root}},t.popUndefined=function(r){var t=r.root;if(void 0!==t)return r.root=t.tail,t.head},t.pop=function(r){var t=r.root;if(void 0!==t)return r.root=t.tail,o.some(t.head)},t.topUndefined=function(r){var t=r.root;if(void 0!==t)return t.head},t.top=function(r){var t=r.root;if(void 0!==t)return o.some(t.head)},t.isEmpty=function(r){return void 0===r.root},t.size=function(r){var t=r.root;if(void 0===t)return 0;for(var e=t,n=0;;){var o=n,i=e.tail;if(void 0===i)return o+1|0;n=o+1|0,e=i}},t.forEachU=i,t.forEach=function(r,t){i(r,n.__1(t))},t.dynamicPopIterU=a,t.dynamicPopIter=function(r,t){a(r,n.__1(t))}},6517:function(r,t,e){var n=e(1386),o=e(7175);function i(r,t){if(void 0!==r&&t(o.valFromOption(r)))return r}function a(r,t){if(void 0!==r)return t(o.valFromOption(r))}function u(r,t,e){return void 0!==r?e(o.valFromOption(r)):t}function f(r,t){if(void 0!==r)return o.some(t(o.valFromOption(r)))}function s(r,t){if(void 0!==r)return t(o.valFromOption(r))}function c(r,t,e){return void 0!==r?void 0!==t&&e(o.valFromOption(r),o.valFromOption(t)):void 0===t}function v(r,t,e){return void 0!==r?void 0!==t?e(o.valFromOption(r),o.valFromOption(t)):1:void 0!==t?-1:0}t.keepU=i,t.keep=function(r,t){return i(r,n.__1(t))},t.forEachU=a,t.forEach=function(r,t){a(r,n.__1(t))},t.getExn=function(r){if(void 0!==r)return o.valFromOption(r);throw{RE_EXN_ID:"Not_found",Error:new Error}},t.mapWithDefaultU=u,t.mapWithDefault=function(r,t,e){return u(r,t,n.__1(e))},t.mapU=f,t.map=function(r,t){return f(r,n.__1(t))},t.flatMapU=s,t.flatMap=function(r,t){return s(r,n.__1(t))},t.getWithDefault=function(r,t){return void 0!==r?o.valFromOption(r):t},t.orElse=function(r,t){return void 0!==r?r:t},t.isSome=function(r){return void 0!==r},t.isNone=function(r){return void 0===r},t.eqU=c,t.eq=function(r,t,e){return c(r,t,n.__2(e))},t.cmpU=v,t.cmp=function(r,t,e){return v(r,t,n.__2(e))}},6369:function(r,t,e){var n=e(1386);function o(r,t,e){return 0===r.TAG?e(r._0):t}function i(r,t){return 0===r.TAG?{TAG:0,_0:t(r._0)}:{TAG:1,_0:r._0}}function a(r,t){return 0===r.TAG?t(r._0):{TAG:1,_0:r._0}}function u(r,t,e){return 0===r.TAG?0===t.TAG&&e(r._0,t._0):0!==t.TAG}function f(r,t,e){return 0===r.TAG?0===t.TAG?e(r._0,t._0):1:0===t.TAG?-1:0}t.getExn=function(r){if(0===r.TAG)return r._0;throw{RE_EXN_ID:"Not_found",Error:new Error}},t.mapWithDefaultU=o,t.mapWithDefault=function(r,t,e){return o(r,t,n.__1(e))},t.mapU=i,t.map=function(r,t){return i(r,n.__1(t))},t.flatMapU=a,t.flatMap=function(r,t){return a(r,n.__1(t))},t.getWithDefault=function(r,t){return 0===r.TAG?r._0:t},t.isOk=function(r){return 0===r.TAG},t.isError=function(r){return 0!==r.TAG},t.eqU=u,t.eq=function(r,t,e){return u(r,t,n.__2(e))},t.cmpU=f,t.cmp=function(r,t,e){return f(r,t,n.__2(e))}},303:function(r,t,e){var n=e(4881),o=e(9113);function i(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,a=r.r;if(t<e){var u=i(o,t);return u===o?r:n.bal(u,e,a)}var f=i(a,t);return f===a?r:n.bal(o,e,f)}function a(r,t){if(void 0===r)return r;var e=r.v,o=r.l,i=r.r;if(t===e){if(void 0===o)return i;if(void 0===i)return o;var u={contents:i.v},f=n.removeMinAuxWithRef(i,u);return n.bal(o,u.contents,f)}if(t<e){var s=a(o,t);return s===o?r:n.bal(s,e,i)}var c=a(i,t);return c===i?r:n.bal(o,e,c)}function u(r,t){var e=r.v,o=r.l,i=r.r;if(t===e)return[o,i];if(t<e){if(void 0===o)return[void 0,r];var a=u(o,t);return[a[0],n.joinShared(a[1],e,i)]}if(void 0===i)return[r,void 0];var f=u(i,t);return[n.joinShared(o,e,f[0]),f[1]]}function f(r,t,e){var o=r.v,i=r.l,a=r.r;if(t===o)return e.contents=!0,[i,a];if(t<o){if(void 0===i)return[void 0,r];var u=f(i,t,e);return[u[0],n.joinShared(u[1],o,a)]}if(void 0===a)return[r,void 0];var s=f(a,t,e);return[n.joinShared(i,o,s[0]),s[1]]}var s=o.fromArray,c=n.fromSortedArrayUnsafe,v=n.isEmpty,d=o.has,l=o.subset,p=o.cmp,m=o.eq,h=n.forEachU,g=n.forEach,E=n.reduceU,_=n.reduce,x=n.everyU,y=n.every,b=n.someU,T=n.some,A=n.keepSharedU,S=n.keepShared,k=n.partitionSharedU,w=n.partitionShared,I=n.size,G=n.toList,M=n.toArray,N=n.minimum,C=n.minUndefined,D=n.maximum,U=n.maxUndefined,j=o.get,P=o.getUndefined,R=o.getExn,O=n.checkInvariantInternal;t.empty=void 0,t.fromArray=s,t.fromSortedArrayUnsafe=c,t.isEmpty=v,t.has=d,t.add=i,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=i(n,t[o]);return n},t.remove=a,t.removeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=a(n,t[o]);return n},t.union=function r(t,e){if(void 0===t)return e;if(void 0===e)return t;var o=t.h,a=e.h;if(o>=a){if(1===a)return i(t,e.v);var f=t.v,s=t.l,c=t.r,v=u(e,f);return n.joinShared(r(s,v[0]),f,r(c,v[1]))}if(1===o)return i(e,t.v);var d=e.v,l=e.l,p=e.r,m=u(t,d);return n.joinShared(r(m[0],l),d,r(m[1],p))},t.intersect=function r(t,e){if(void 0!==t&&void 0!==e){var o=t.v,i=t.l,a=t.r,u={contents:!1},s=f(e,o,u),c=r(i,s[0]),v=r(a,s[1]);return u.contents?n.joinShared(c,o,v):n.concatShared(c,v)}},t.diff=function r(t,e){if(void 0===t)return t;if(void 0===e)return t;var o=t.v,i=t.l,a=t.r,u={contents:!1},s=f(e,o,u),c=r(i,s[0]),v=r(a,s[1]);return u.contents?n.concatShared(c,v):n.joinShared(c,o,v)},t.subset=l,t.cmp=p,t.eq=m,t.forEachU=h,t.forEach=g,t.reduceU=E,t.reduce=_,t.everyU=x,t.every=y,t.someU=b,t.some=T,t.keepU=A,t.keep=S,t.partitionU=k,t.partition=w,t.size=I,t.toList=G,t.toArray=M,t.minimum=N,t.minUndefined=C,t.maximum=D,t.maxUndefined=U,t.get=j,t.getUndefined=P,t.getExn=R,t.split=function(r,t){if(void 0===r)return[[void 0,void 0],!1];var e={contents:!1};return[f(r,t,e),e.contents]},t.checkInvariantInternal=O},1367:function(r,t,e){var n=e(4881),o=e(1572);function i(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,a=r.r;if(t<e){var u=i(o,t);return u===o?r:n.bal(u,e,a)}var f=i(a,t);return f===a?r:n.bal(o,e,f)}function a(r,t){if(void 0===r)return r;var e=r.v,o=r.l,i=r.r;if(t===e){if(void 0===o)return i;if(void 0===i)return o;var u={contents:i.v},f=n.removeMinAuxWithRef(i,u);return n.bal(o,u.contents,f)}if(t<e){var s=a(o,t);return s===o?r:n.bal(s,e,i)}var c=a(i,t);return c===i?r:n.bal(o,e,c)}function u(r,t){var e=r.v,o=r.l,i=r.r;if(t===e)return[o,i];if(t<e){if(void 0===o)return[void 0,r];var a=u(o,t);return[a[0],n.joinShared(a[1],e,i)]}if(void 0===i)return[r,void 0];var f=u(i,t);return[n.joinShared(o,e,f[0]),f[1]]}function f(r,t,e){var o=r.v,i=r.l,a=r.r;if(t===o)return e.contents=!0,[i,a];if(t<o){if(void 0===i)return[void 0,r];var u=f(i,t,e);return[u[0],n.joinShared(u[1],o,a)]}if(void 0===a)return[r,void 0];var s=f(a,t,e);return[n.joinShared(i,o,s[0]),s[1]]}var s=o.fromArray,c=n.fromSortedArrayUnsafe,v=n.isEmpty,d=o.has,l=o.subset,p=o.cmp,m=o.eq,h=n.forEachU,g=n.forEach,E=n.reduceU,_=n.reduce,x=n.everyU,y=n.every,b=n.someU,T=n.some,A=n.keepSharedU,S=n.keepShared,k=n.partitionSharedU,w=n.partitionShared,I=n.size,G=n.toList,M=n.toArray,N=n.minimum,C=n.minUndefined,D=n.maximum,U=n.maxUndefined,j=o.get,P=o.getUndefined,R=o.getExn,O=n.checkInvariantInternal;t.empty=void 0,t.fromArray=s,t.fromSortedArrayUnsafe=c,t.isEmpty=v,t.has=d,t.add=i,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=i(n,t[o]);return n},t.remove=a,t.removeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=a(n,t[o]);return n},t.union=function r(t,e){if(void 0===t)return e;if(void 0===e)return t;var o=t.h,a=e.h;if(o>=a){if(1===a)return i(t,e.v);var f=t.v,s=t.l,c=t.r,v=u(e,f);return n.joinShared(r(s,v[0]),f,r(c,v[1]))}if(1===o)return i(e,t.v);var d=e.v,l=e.l,p=e.r,m=u(t,d);return n.joinShared(r(m[0],l),d,r(m[1],p))},t.intersect=function r(t,e){if(void 0!==t&&void 0!==e){var o=t.v,i=t.l,a=t.r,u={contents:!1},s=f(e,o,u),c=r(i,s[0]),v=r(a,s[1]);return u.contents?n.joinShared(c,o,v):n.concatShared(c,v)}},t.diff=function r(t,e){if(void 0===t)return t;if(void 0===e)return t;var o=t.v,i=t.l,a=t.r,u={contents:!1},s=f(e,o,u),c=r(i,s[0]),v=r(a,s[1]);return u.contents?n.concatShared(c,v):n.joinShared(c,o,v)},t.subset=l,t.cmp=p,t.eq=m,t.forEachU=h,t.forEach=g,t.reduceU=E,t.reduce=_,t.everyU=x,t.every=y,t.someU=b,t.some=T,t.keepU=A,t.keep=S,t.partitionU=k,t.partition=w,t.size=I,t.toList=G,t.toArray=M,t.minimum=N,t.minUndefined=C,t.maximum=D,t.maxUndefined=U,t.get=j,t.getUndefined=P,t.getExn=R,t.split=function(r,t){if(void 0===r)return[[void 0,void 0],!1];var e={contents:!1};return[f(r,t,e),e.contents]},t.checkInvariantInternal=O},2531:function(r,t,e){var n=e(1386),o=e(2971);function i(r,t){var e=r.length;if(0===e||1===e)return e;var n=r[0],o=r[1];if(!t(n,o))return t(o,n)?0|-function(r,t,e,n,o){for(;;){var i=e,a=t;if(i>=n)return i;var u=r[i];if(!o(u,a))return i;e=i+1|0,t=u}}(r,o,2,e,t):1;for(var i=o,a=2;;){var u=a,f=i;if(u>=e)return u;var s=r[u];if(!t(f,s))return u;a=u+1|0,i=s}}function a(r,t){var e=r.length;if(0===e)return!0;for(var n=0,o=e-1|0;;){var i=n;if(i===o)return!0;if(t(r[i],r[i+1|0])>0)return!1;n=i+1|0}}function u(r,t,e,n,i,a,u,f,s){for(var c=t+e|0,v=i+a|0,d=t,l=r[t],p=i,m=n[i],h=f;;){var g=h,E=m,_=p,x=l,y=d;if(s(x,E)<=0){u[g]=x;var b=y+1|0;if(b>=c)return o.blitUnsafe(n,_,u,g+1|0,v-_|0);h=g+1|0,l=r[b],d=b}else{u[g]=E;var T=_+1|0;if(T>=v)return o.blitUnsafe(r,y,u,g+1|0,c-y|0);h=g+1|0,m=n[T],p=T}}}function f(r,t,e,n,i,a,u,f,s){for(var c=t+e|0,v=i+a|0,d=t,l=r[t],p=i,m=n[i],h=f;;){var g=h,E=m,_=p,x=l,y=d,b=s(x,E);if(b<0){u[g]=x;var T=y+1|0,A=g+1|0;if(T<c){h=A,l=r[T],d=T;continue}return o.blitUnsafe(n,_,u,A,v-_|0),(A+v|0)-_|0}if(0!==b){u[g]=E;var S=_+1|0,k=g+1|0;if(!(S<v))return o.blitUnsafe(r,y,u,k,c-y|0),(k+c|0)-y|0;h=k,m=n[S],p=S}else{u[g]=x;var w=y+1|0,I=_+1|0,G=g+1|0;if(!(w<c&&I<v))return w===c?(o.blitUnsafe(n,I,u,G,v-I|0),(G+v|0)-I|0):(o.blitUnsafe(r,w,u,G,c-w|0),(G+c|0)-w|0);h=G,m=n[I],p=I,l=r[w],d=w}}}function s(r,t,e,n,o,i,a,u,f){for(var s=t+e|0,c=o+i|0,v=t,d=r[t],l=o,p=n[o],m=u;;){var h=m,g=l,E=d,_=v,x=f(E,p);if(x<0){var y=_+1|0;if(y>=s)return h;d=r[y],v=y}else if(0!==x){var b=g+1|0;if(b>=c)return h;p=n[b],l=b}else{a[h]=E;var T=_+1|0,A=g+1|0,S=h+1|0;if(!(T<s&&A<c))return S;m=S,p=n[A],l=A,d=r[T],v=T}}}function c(r,t,e,n,i,a,u,f,s){for(var c=t+e|0,v=i+a|0,d=t,l=r[t],p=i,m=n[i],h=f;;){var g=h,E=p,_=l,x=d,y=s(_,m);if(y<0){u[g]=_;var b=g+1|0,T=x+1|0;if(T>=c)return b;h=b,l=r[T],d=T}else if(0!==y){var A=E+1|0;if(!(A<v))return o.blitUnsafe(r,x,u,g,c-x|0),(g+c|0)-x|0;m=n[A],p=A}else{var S=x+1|0,k=E+1|0;if(!(S<c&&k<v))return S===c?g:(o.blitUnsafe(r,S,u,g,c-S|0),(g+c|0)-S|0);m=n[k],p=k,l=r[S],d=S}}}function v(r,t,e,n,o,i){for(var a=0;a<o;++a){for(var u=r[t+a|0],f=(n+a|0)-1|0;f>=n&&i(e[f],u)>0;)e[f+1|0]=e[f],f=f-1|0;e[f+1|0]=u}}function d(r,t,e,n,o,i){if(o<=5)return v(r,t,e,n,o,i);var a=o/2|0,f=o-a|0;d(r,t+a|0,e,n+a|0,f,i),d(r,t,r,t+f|0,a,i),u(r,t+f|0,a,e,n+a|0,f,e,n,i)}function l(r,t){var e=r.length;if(e<=5)return v(r,0,r,0,e,t);var n=e/2|0,o=e-n|0,i=new Array(o);d(r,n,i,0,o,t),d(r,0,r,o,n,t),u(r,o,n,i,0,o,r,0,t)}function p(r,t){var e=r.slice(0);return l(e,t),e}function m(r,t,e){var n=r.length;if(0===n)return-1;if(e(t,r[0])<0)return-1;if(e(t,r[n-1|0])>0)return 0|-(n+1|0);for(var o=0,i=n-1|0;;){var a=i,u=o,f=(u+a|0)/2|0,s=e(t,r[f]);if(0===s)return f;if(s<0){if(a===f)return 0===e(r[u],t)?u:0|-(a+1|0);i=f}else{if(u===f)return 0===e(r[a],t)?a:0|-(a+1|0);o=f}}}t.Int=void 0,t.$$String=void 0,t.strictlySortedLengthU=i,t.strictlySortedLength=function(r,t){return i(r,n.__2(t))},t.isSortedU=a,t.isSorted=function(r,t){return a(r,n.__2(t))},t.stableSortInPlaceByU=l,t.stableSortInPlaceBy=function(r,t){l(r,n.__2(t))},t.stableSortByU=p,t.stableSortBy=function(r,t){return p(r,n.__2(t))},t.binarySearchByU=m,t.binarySearchBy=function(r,t,e){return m(r,t,n.__2(e))},t.unionU=f,t.union=function(r,t,e,o,i,a,u,s,c){return f(r,t,e,o,i,a,u,s,n.__2(c))},t.intersectU=s,t.intersect=function(r,t,e,o,i,a,u,f,c){return s(r,t,e,o,i,a,u,f,n.__2(c))},t.diffU=c,t.diff=function(r,t,e,o,i,a,u,f,s){return c(r,t,e,o,i,a,u,f,n.__2(s))}},3282:function(r,t,e){var n=e(2971);function o(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<=g){u[h]=_;var y=x+1|0;if(y>=s)return n.blitUnsafe(o,E,u,h+1|0,c-E|0);m=h+1|0,d=r[y],v=y}else{u[h]=g;var b=E+1|0;if(b>=c)return n.blitUnsafe(r,x,u,h+1|0,s-x|0);m=h+1|0,p=o[b],l=b}}}function i(r,t,e,n,o){for(var i=0;i<o;++i){for(var a=r[t+i|0],u=(n+i|0)-1|0;u>=n&&e[u]>a;)e[u+1|0]=e[u],u=u-1|0;e[u+1|0]=a}}function a(r,t,e,n,u){if(u<=5)return i(r,t,e,n,u);var f=u/2|0,s=u-f|0;a(r,t+f|0,e,n+f|0,s),a(r,t,r,t+s|0,f),o(r,t+s|0,f,e,n+f|0,s,e,n)}function u(r){var t=r.length;if(t<=5)return i(r,0,r,0,t);var e=t/2|0,n=t-e|0,u=new Array(n);a(r,e,u,0,n),a(r,0,r,n,e),o(r,n,e,u,0,n,r,0)}t.strictlySortedLength=function(r){var t=r.length;if(0===t||1===t)return t;var e=r[0],n=r[1];if(!(e<n))return e>n?0|-function(r,t,e,n){for(;;){var o=e,i=t;if(o>=n)return o;var a=r[o];if(i<=a)return o;e=o+1|0,t=a}}(r,n,2,t):1;for(var o=n,i=2;;){var a=i,u=o;if(a>=t)return a;var f=r[a];if(u>=f)return a;i=a+1|0,o=f}},t.isSorted=function(r){var t=r.length;if(0===t)return!0;for(var e=0,n=t-1|0;;){var o=e;if(o===n)return!0;if(r[o]>r[o+1|0])return!1;e=o+1|0}},t.stableSortInPlace=u,t.stableSort=function(r){var t=r.slice(0);return u(t),t},t.binarySearch=function(r,t){var e=r.length;if(0===e)return-1;if(t<r[0])return-1;if(t>r[e-1|0])return 0|-(e+1|0);for(var n=0,o=e-1|0;;){var i=o,a=n,u=(a+i|0)/2|0,f=r[u];if(t===f)return u;if(t<f){if(i===u)return r[a]===t?a:0|-(i+1|0);o=u}else{if(a===u)return r[i]===t?i:0|-(i+1|0);n=u}}},t.union=function(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<g){u[h]=_;var y=x+1|0,b=h+1|0;if(y<s){m=b,d=r[y],v=y;continue}return n.blitUnsafe(o,E,u,b,c-E|0),(b+c|0)-E|0}if(_!==g){u[h]=g;var T=E+1|0,A=h+1|0;if(!(T<c))return n.blitUnsafe(r,x,u,A,s-x|0),(A+s|0)-x|0;m=A,p=o[T],l=T}else{u[h]=_;var S=x+1|0,k=E+1|0,w=h+1|0;if(!(S<s&&k<c))return S===s?(n.blitUnsafe(o,k,u,w,c-k|0),(w+c|0)-k|0):(n.blitUnsafe(r,S,u,w,s-S|0),(w+s|0)-S|0);m=w,p=o[k],l=k,d=r[S],v=S}}},t.intersect=function(r,t,e,n,o,i,a,u){for(var f=t+e|0,s=o+i|0,c=t,v=r[t],d=o,l=n[o],p=u;;){var m=p,h=l,g=d,E=v,_=c;if(E<h){var x=_+1|0;if(x>=f)return m;v=r[x],c=x}else if(E!==h){var y=g+1|0;if(y>=s)return m;l=n[y],d=y}else{a[m]=E;var b=_+1|0,T=g+1|0,A=m+1|0;if(!(b<f&&T<s))return A;p=A,l=n[T],d=T,v=r[b],c=b}}},t.diff=function(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<g){u[h]=_;var y=h+1|0,b=x+1|0;if(b>=s)return y;m=y,d=r[b],v=b}else if(_!==g){var T=E+1|0;if(!(T<c))return n.blitUnsafe(r,x,u,h,s-x|0),(h+s|0)-x|0;p=o[T],l=T}else{var A=x+1|0,S=E+1|0;if(!(A<s&&S<c))return A===s?h:(n.blitUnsafe(r,A,u,h,s-A|0),(h+s|0)-A|0);p=o[S],l=S,d=r[A],v=A}}}},8466:function(r,t,e){var n=e(2971);function o(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<=g){u[h]=_;var y=x+1|0;if(y>=s)return n.blitUnsafe(o,E,u,h+1|0,c-E|0);m=h+1|0,d=r[y],v=y}else{u[h]=g;var b=E+1|0;if(b>=c)return n.blitUnsafe(r,x,u,h+1|0,s-x|0);m=h+1|0,p=o[b],l=b}}}function i(r,t,e,n,o){for(var i=0;i<o;++i){for(var a=r[t+i|0],u=(n+i|0)-1|0;u>=n&&e[u]>a;)e[u+1|0]=e[u],u=u-1|0;e[u+1|0]=a}}function a(r,t,e,n,u){if(u<=5)return i(r,t,e,n,u);var f=u/2|0,s=u-f|0;a(r,t+f|0,e,n+f|0,s),a(r,t,r,t+s|0,f),o(r,t+s|0,f,e,n+f|0,s,e,n)}function u(r){var t=r.length;if(t<=5)return i(r,0,r,0,t);var e=t/2|0,n=t-e|0,u=new Array(n);a(r,e,u,0,n),a(r,0,r,n,e),o(r,n,e,u,0,n,r,0)}t.strictlySortedLength=function(r){var t=r.length;if(0===t||1===t)return t;var e=r[0],n=r[1];if(!(e<n))return e>n?0|-function(r,t,e,n){for(;;){var o=e,i=t;if(o>=n)return o;var a=r[o];if(i<=a)return o;e=o+1|0,t=a}}(r,n,2,t):1;for(var o=n,i=2;;){var a=i,u=o;if(a>=t)return a;var f=r[a];if(u>=f)return a;i=a+1|0,o=f}},t.isSorted=function(r){var t=r.length;if(0===t)return!0;for(var e=0,n=t-1|0;;){var o=e;if(o===n)return!0;if(r[o]>r[o+1|0])return!1;e=o+1|0}},t.stableSortInPlace=u,t.stableSort=function(r){var t=r.slice(0);return u(t),t},t.binarySearch=function(r,t){var e=r.length;if(0===e)return-1;if(t<r[0])return-1;if(t>r[e-1|0])return 0|-(e+1|0);for(var n=0,o=e-1|0;;){var i=o,a=n,u=(a+i|0)/2|0,f=r[u];if(t===f)return u;if(t<f){if(i===u)return r[a]===t?a:0|-(i+1|0);o=u}else{if(a===u)return r[i]===t?i:0|-(i+1|0);n=u}}},t.union=function(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<g){u[h]=_;var y=x+1|0,b=h+1|0;if(y<s){m=b,d=r[y],v=y;continue}return n.blitUnsafe(o,E,u,b,c-E|0),(b+c|0)-E|0}if(_!==g){u[h]=g;var T=E+1|0,A=h+1|0;if(!(T<c))return n.blitUnsafe(r,x,u,A,s-x|0),(A+s|0)-x|0;m=A,p=o[T],l=T}else{u[h]=_;var S=x+1|0,k=E+1|0,w=h+1|0;if(!(S<s&&k<c))return S===s?(n.blitUnsafe(o,k,u,w,c-k|0),(w+c|0)-k|0):(n.blitUnsafe(r,S,u,w,s-S|0),(w+s|0)-S|0);m=w,p=o[k],l=k,d=r[S],v=S}}},t.intersect=function(r,t,e,n,o,i,a,u){for(var f=t+e|0,s=o+i|0,c=t,v=r[t],d=o,l=n[o],p=u;;){var m=p,h=l,g=d,E=v,_=c;if(E<h){var x=_+1|0;if(x>=f)return m;v=r[x],c=x}else if(E!==h){var y=g+1|0;if(y>=s)return m;l=n[y],d=y}else{a[m]=E;var b=_+1|0,T=g+1|0,A=m+1|0;if(!(b<f&&T<s))return A;p=A,l=n[T],d=T,v=r[b],c=b}}},t.diff=function(r,t,e,o,i,a,u,f){for(var s=t+e|0,c=i+a|0,v=t,d=r[t],l=i,p=o[i],m=f;;){var h=m,g=p,E=l,_=d,x=v;if(_<g){u[h]=_;var y=h+1|0,b=x+1|0;if(b>=s)return y;m=y,d=r[b],v=b}else if(_!==g){var T=E+1|0;if(!(T<c))return n.blitUnsafe(r,x,u,h,s-x|0),(h+s|0)-x|0;p=o[T],l=T}else{var A=x+1|0,S=E+1|0;if(!(A<s&&S<c))return A===s?h:(n.blitUnsafe(r,A,u,h,s-A|0),(h+s|0)-A|0);p=o[S],l=S,d=r[A],v=A}}}},4881:function(r,t,e){var n=e(1386),o=e(7175),i=e(2531);function a(r,t,e){var n=void 0!==r?r.h:0,o=void 0!==e?e.h:0;return{v:t,h:(n>=o?n:o)+1|0,l:r,r:e}}function u(r){return{v:r,h:1,l:void 0,r:void 0}}function f(r,t){return void 0===t||void 0!==r&&r.h>=t.h}function s(r,t,e){var n=void 0!==r?r.h:0,o=void 0!==e?e.h:0;if(n>(o+2|0)){var i=r.l,u=r.r;return f(i,u)?a(i,r.v,a(u,t,e)):a(a(i,r.v,u.l),u.v,a(u.r,t,e))}if(o<=(n+2|0))return{v:t,h:(n>=o?n:o)+1|0,l:r,r:e};var s=e.l,c=e.r;return f(c,s)?a(a(r,t,s),e.v,c):a(a(r,t,s.l),s.v,a(s.r,e.v,c))}function c(r){for(;;){var t=r,e=t.l;if(void 0===e)return t.v;r=e}}function v(r){for(;;){var t=r,e=t.r;if(void 0===e)return t.v;r=e}}function d(r,t){var e=r.l;return void 0!==e?s(d(e,t),r.v,r.r):(t.contents=r.v,r.r)}function l(r,t){for(;;){if(void 0===r)return t;t={hd:r,tl:t},r=r.l}}function p(r,t){for(;;){var e=r;if(void 0===e)return;p(e.l,t),t(e.v),r=e.r}}function m(r,t,e){for(;;){var n=t,o=r;if(void 0===o)return n;t=e(m(o.l,n,e),o.v),r=o.r}}function h(r,t){for(;;){var e=r;if(void 0===e)return!0;if(!t(e.v))return!1;if(!h(e.l,t))return!1;r=e.r}}function g(r,t){for(;;){var e=r;if(void 0===e)return!1;if(t(e.v))return!0;if(g(e.l,t))return!0;r=e.r}}function E(r,t){return void 0!==r?s(E(r.l,t),r.v,r.r):u(t)}function _(r,t){return void 0!==r?s(r.l,r.v,_(r.r,t)):u(t)}function x(r,t,e){if(void 0===r)return E(e,t);if(void 0===e)return _(r,t);var n=r.h,o=e.h;return n>(o+2|0)?s(r.l,r.v,x(r.r,t,e)):o>(n+2|0)?s(x(r,t,e.l),e.v,e.r):a(r,t,e)}function y(r,t){if(void 0===r)return t;if(void 0===t)return r;var e={contents:t.v},n=d(t,e);return x(r,e.contents,n)}function b(r,t){if(void 0===r)return[void 0,void 0];var e=r.v,n=b(r.l,t),o=n[1],i=n[0],a=t(e),u=b(r.r,t),f=u[1],s=u[0];return a?[x(i,e,s),y(o,f)]:[y(i,s),x(o,e,f)]}function T(r){var t=r.l,e=r.r;return(1+(void 0!==t?T(t):0)|0)+(void 0!==e?T(e):0)|0}function A(r){return void 0!==r?T(r):0}function S(r,t){for(;;){var e=t,n=r;if(void 0===n)return e;t={hd:n.v,tl:S(n.r,e)},r=n.l}}function k(r,t,e){for(;;){var n=t,o=r,i=o.v,a=o.l,u=o.r,f=void 0!==a?k(a,n,e):n;e[f]=i;var s=f+1|0;if(void 0===u)return s;t=s,r=u}}function w(r,t,e,n){for(;;){var o=r,i=o.v,a=o.l,u=o.r;if(void 0!==a&&w(a,t,e,n),n(i)){var f=t.forward;e[f]=i,t.forward=f+1|0}else{var s=t.backward;e[s]=i,t.backward=s-1|0}if(void 0===u)return;r=u}}function I(r,t,e,n){for(;;){var o=t,i=r,a=i.v,u=i.l,f=i.r,s=void 0!==u?I(u,o,e,n):o,c=n(a)?(e[s]=a,s+1|0):s;if(void 0===f)return c;t=c,r=f}}function G(r,t,e){switch(e){case 0:return;case 1:return u(r[t]);case 2:var n=r[t];return{v:r[t-1|0],h:2,l:u(n),r:void 0};case 3:var o=r[t],i=r[t-1|0],f=r[t-2|0];return{v:i,h:2,l:u(o),r:u(f)};default:var s=e/2|0;return a(G(r,t,s),r[t-s|0],G(r,(t-s|0)-1|0,(e-s|0)-1|0))}}function M(r,t,e){switch(e){case 0:return;case 1:return u(r[t]);case 2:var n=r[t];return{v:r[t+1|0],h:2,l:u(n),r:void 0};case 3:var o=r[t],i=r[t+1|0],f=r[t+2|0];return{v:i,h:2,l:u(o),r:u(f)};default:var s=e/2|0;return a(M(r,t,s),r[t+s|0],M(r,1+(t+s|0)|0,(e-s|0)-1|0))}}function N(r,t){if(void 0!==r){var e=r.v,n=r.l,o=r.r,i=N(n,t),a=t(e),u=N(o,t);return a?n===i&&o===u?r:x(i,e,u):y(i,u)}}function C(r,t){if(void 0!==r){var e=T(r),n=new Array(e);return M(n,0,I(r,0,n,t))}}function D(r,t){if(void 0===r)return[void 0,void 0];var e=T(r),n=new Array(e),o=e-1|0,i={forward:0,backward:o};w(r,i,n,t);var a=i.forward;return[M(n,0,a),G(n,o,e-a|0)]}function U(r,t,e){var n=A(r),o=A(t);if(n!==o)return n<o?-1:1;for(var i=l(r,0),a=l(t,0);;){var u=a,f=i;if(!f)return 0;if(!u)return 0;var s=u.hd,c=f.hd,v=e(c.v,s.v);if(0!==v)return v;a=l(s.r,u.tl),i=l(c.r,f.tl)}}function j(r){var t=r.l;r.l=t.r,t.r=r;var e=r.l,n=void 0!==e?e.h:0,o=r.r,i=void 0!==o?o.h:0;r.h=(n>i?n:i)+1|0;var a=t.l,u=void 0!==a?a.h:0,f=r.h;return t.h=(u>f?u:f)+1|0,t}function P(r){var t=r.r;r.r=t.l,t.l=r;var e=r.l,n=void 0!==e?e.h:0,o=r.r,i=void 0!==o?o.h:0;r.h=(n>i?n:i)+1|0;var a=t.r,u=void 0!==a?a.h:0,f=r.h;return t.h=(u>f?u:f)+1|0,t}function R(r){var t=r.l,e=void 0!==t?t.h:0,n=r.r,o=void 0!==n?n.h:0;return r.h=(e>o?e:o)+1|0,r}function O(r){var t,e,n=r.l,o=r.r,i=void 0!==n?n.h:0,a=void 0!==o?o.h:0;if(i>(2+a|0))return f(n.l,n.r)?R(j(r)):R((e=P((t=r).l),t.l=e,j(t)));if(a>(2+i|0)){var u=o.l;return f(o.r,u)?R(P(r)):R(function(r){var t=j(r.r);return r.r=t,P(r)}(r))}return r.h=(i>a?i:a)+1|0,r}function F(r,t,e){if(void 0===t)return u(e);var n=r(e,t.v);if(0===n)return t;var o=t.l,i=t.r;if(n<0){var a=F(r,o,e);t.l=a}else t.r=F(r,i,e);return O(t)}t.copy=function r(t){return void 0!==t?{v:t.v,h:t.h,l:r(t.l),r:r(t.r)}:t},t.create=a,t.bal=s,t.singleton=u,t.minimum=function(r){if(void 0!==r)return o.some(c(r))},t.minUndefined=function(r){if(void 0!==r)return c(r)},t.maximum=function(r){if(void 0!==r)return o.some(v(r))},t.maxUndefined=function(r){if(void 0!==r)return v(r)},t.removeMinAuxWithRef=d,t.isEmpty=function(r){return void 0===r},t.stackAllLeft=l,t.forEachU=p,t.forEach=function(r,t){p(r,n.__1(t))},t.reduceU=m,t.reduce=function(r,t,e){return m(r,t,n.__2(e))},t.everyU=h,t.every=function(r,t){return h(r,n.__1(t))},t.someU=g,t.some=function(r,t){return g(r,n.__1(t))},t.joinShared=x,t.concatShared=y,t.keepSharedU=N,t.keepShared=function(r,t){return N(r,n.__1(t))},t.keepCopyU=C,t.keepCopy=function(r,t){return C(r,n.__1(t))},t.partitionSharedU=b,t.partitionShared=function(r,t){return b(r,n.__1(t))},t.partitionCopyU=D,t.partitionCopy=function(r,t){return D(r,n.__1(t))},t.lengthNode=T,t.size=A,t.toList=function(r){return S(r,0)},t.checkInvariantInternal=function r(t){for(;;){var e=t;if(void 0===e)return;var n=e.l,o=e.r,i=(void 0!==n?n.h:0)-(void 0!==o?o.h:0)|0;if(!(i<=2&&i>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLset.ml",290,4],Error:new Error};r(n),t=o}},t.fillArray=k,t.toArray=function(r){if(void 0===r)return[];var t=T(r),e=new Array(t);return k(r,0,e),e},t.fromSortedArrayAux=M,t.fromSortedArrayRevAux=G,t.fromSortedArrayUnsafe=function(r){return M(r,0,r.length)},t.has=function(r,t,e){for(;;){var n=r;if(void 0===n)return!1;var o=e(t,n.v);if(0===o)return!0;r=o<0?n.l:n.r}},t.cmp=U,t.eq=function(r,t,e){return 0===U(r,t,e)},t.subset=function r(t,e,n){for(;;){var o=e,i=t;if(void 0===i)return!0;if(void 0===o)return!1;var u=i.v,f=i.l,s=i.r,c=o.v,v=o.l,d=o.r,l=n(u,c);if(0!==l)if(l<0){if(!r(a(f,u,void 0),v,n))return!1;t=s}else{if(!r(a(void 0,u,s),d,n))return!1;t=f}else{if(!r(f,v,n))return!1;e=d,t=s}}},t.get=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var i=n.v,a=e(t,i);if(0===a)return o.some(i);r=a<0?n.l:n.r}},t.getUndefined=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var o=n.v,i=e(t,o);if(0===i)return o;r=i<0?n.l:n.r}},t.getExn=function(r,t,e){for(;;){var n=r;if(void 0===n)throw{RE_EXN_ID:"Not_found",Error:new Error};var o=n.v,i=e(t,o);if(0===i)return o;r=i<0?n.l:n.r}},t.fromArray=function(r,t){var e=r.length;if(0!==e){var n,o=i.strictlySortedLengthU(r,(function(r,e){return t(r,e)<0}));n=o>=0?M(r,0,o):G(r,(o=0|-o)-1|0,o);for(var a=o;a<e;++a)n=F(t,n,r[a]);return n}},t.addMutate=F,t.balMutate=O,t.removeMinAuxWithRootMutate=function r(t,e){var n=e.l,o=e.r;return void 0!==n?(e.l=r(t,n),O(e)):(t.v=e.v,o)}},6144:function(r,t,e){var n=e(1386),o=e(7175),i=e(2531);function a(r){return void 0!==r?r.h:0}function u(r,t,e,n){var o=a(r),i=a(n);return{k:t,v:e,h:o>=i?o+1|0:i+1|0,l:r,r:n}}function f(r,t){return{k:r,v:t,h:1,l:void 0,r:void 0}}function s(r,t){return void 0===t||void 0!==r&&r.h>=t.h}function c(r,t,e,n){var o=void 0!==r?r.h:0,i=void 0!==n?n.h:0;if(o>(i+2|0)){var f=r.l,s=r.r;return a(f)>=a(s)?u(f,r.k,r.v,u(s,t,e,n)):u(u(f,r.k,r.v,s.l),s.k,s.v,u(s.r,t,e,n))}if(i<=(o+2|0))return{k:t,v:e,h:o>=i?o+1|0:i+1|0,l:r,r:n};var c=n.l,v=n.r;return a(v)>=a(c)?u(u(r,t,e,c),n.k,n.v,v):u(u(r,t,e,c.l),c.k,c.v,u(c.r,n.k,n.v,v))}function v(r){for(;;){var t=r,e=t.l;if(void 0===e)return t.k;r=e}}function d(r){for(;;){var t=r,e=t.r;if(void 0===e)return t.k;r=e}}function l(r){for(;;){var t=r,e=t.l;if(void 0===e)return[t.k,t.v];r=e}}function p(r){for(;;){var t=r,e=t.r;if(void 0===e)return[t.k,t.v];r=e}}function m(r,t,e){var n=r.l;return void 0!==n?c(m(n,t,e),r.k,r.v,r.r):(t.contents=r.k,e.contents=r.v,r.r)}function h(r,t){for(;;){if(void 0===r)return t;t={hd:r,tl:t},r=r.l}}function g(r,t){if(void 0!==r){var e=g(r.l,t);if(void 0!==e)return e;var n=r.k,o=r.v;if(t(n,o))return[n,o];var i=g(r.r,t);return void 0!==i?i:void 0}}function E(r,t){for(;;){var e=r;if(void 0===e)return;E(e.l,t),t(e.k,e.v),r=e.r}}function _(r,t){if(void 0!==r){var e=_(r.l,t),n=t(r.v),o=_(r.r,t);return{k:r.k,v:n,h:r.h,l:e,r:o}}}function x(r,t){if(void 0!==r){var e=r.k,n=x(r.l,t),o=t(e,r.v),i=x(r.r,t);return{k:e,v:o,h:r.h,l:n,r:i}}}function y(r,t,e){for(;;){var n=t,o=r;if(void 0===o)return n;var i=o.k,a=o.v,u=o.l,f=o.r;t=e(y(u,n,e),i,a),r=f}}function b(r,t){for(;;){var e=r;if(void 0===e)return!0;if(!t(e.k,e.v))return!1;if(!b(e.l,t))return!1;r=e.r}}function T(r,t){for(;;){var e=r;if(void 0===e)return!1;if(t(e.k,e.v))return!0;if(T(e.l,t))return!0;r=e.r}}function A(r,t,e){return void 0!==r?c(A(r.l,t,e),r.k,r.v,r.r):f(t,e)}function S(r,t,e){return void 0!==r?c(r.l,r.k,r.v,S(r.r,t,e)):f(t,e)}function k(r,t,e,n){if(void 0===r)return A(n,t,e);if(void 0===n)return S(r,t,e);var o=r.k,i=r.v,a=r.h,f=r.l,s=r.r,v=n.k,d=n.v,l=n.h,p=n.l,m=n.r;return a>(l+2|0)?c(f,o,i,k(s,t,e,n)):l>(a+2|0)?c(k(r,t,e,p),v,d,m):u(r,t,e,n)}function w(r,t){if(void 0===r)return t;if(void 0===t)return r;var e={contents:t.k},n={contents:t.v},o=m(t,e,n);return k(r,e.contents,n.contents,o)}function I(r,t){if(void 0!==r){var e=r.k,n=r.v,o=I(r.l,t),i=t(e,n),a=I(r.r,t);return i?k(o,e,n,a):w(o,a)}}function G(r,t){if(void 0!==r){var e=r.k,n=r.v,i=G(r.l,t),a=t(e,n),u=G(r.r,t);return void 0!==a?k(i,e,o.valFromOption(a),u):w(i,u)}}function M(r,t){if(void 0===r)return[void 0,void 0];var e=r.k,n=r.v,o=M(r.l,t),i=o[1],a=o[0],u=t(e,n),f=M(r.r,t),s=f[1],c=f[0];return u?[k(a,e,n,c),w(i,s)]:[w(a,c),k(i,e,n,s)]}function N(r){var t=r.l,e=r.r;return(1+(void 0!==t?N(t):0)|0)+(void 0!==e?N(e):0)|0}function C(r){return void 0!==r?N(r):0}function D(r,t){for(;;){var e=t,n=r;if(void 0===n)return e;var o=n.k,i=n.v,a=n.l;t={hd:[o,i],tl:D(n.r,e)},r=a}}function U(r,t,e){for(;;){var n=t,o=r,i=o.k,a=o.l,u=o.r,f=void 0!==a?U(a,n,e):n;e[f]=i;var s=f+1|0;if(void 0===u)return s;t=s,r=u}}function j(r,t,e){for(;;){var n=t,o=r,i=o.l,a=o.r,u=void 0!==i?j(i,n,e):n;e[u]=o.v;var f=u+1|0;if(void 0===a)return f;t=f,r=a}}function P(r,t,e){for(;;){var n=t,o=r,i=o.l,a=o.k,u=o.r,f=void 0!==i?P(i,n,e):n;e[f]=[a,o.v];var s=f+1|0;if(void 0===u)return s;t=s,r=u}}function R(r,t,e){switch(e){case 0:return;case 1:var n=r[t];return f(n[0],n[1]);case 2:var o=r[t],i=r[t-1|0],a=o;return{k:i[0],v:i[1],h:2,l:f(a[0],a[1]),r:void 0};case 3:var s=r[t],c=r[t-1|0],v=r[t-2|0],d=c,l=s;return{k:d[0],v:d[1],h:2,l:f(l[0],l[1]),r:f(v[0],v[1])};default:var p=e/2|0,m=R(r,t,p),h=r[t-p|0],g=R(r,(t-p|0)-1|0,(e-p|0)-1|0);return u(m,h[0],h[1],g)}}function O(r,t,e){switch(e){case 0:return;case 1:var n=r[t];return f(n[0],n[1]);case 2:var o=r[t],i=r[t+1|0],a=o;return{k:i[0],v:i[1],h:2,l:f(a[0],a[1]),r:void 0};case 3:var s=r[t],c=r[t+1|0],v=r[t+2|0],d=c,l=s;return{k:d[0],v:d[1],h:2,l:f(l[0],l[1]),r:f(v[0],v[1])};default:var p=e/2|0,m=O(r,t,p),h=r[t+p|0],g=O(r,1+(t+p|0)|0,(e-p|0)-1|0);return u(m,h[0],h[1],g)}}function F(r,t,e,n){var o=C(r),i=C(t);if(o!==i)return o<i?-1:1;for(var a=h(r,0),u=h(t,0);;){var f=u,s=a;if(!s)return 0;if(!f)return 0;var c=f.hd,v=s.hd,d=e(v.k,c.k);if(0!==d)return d;var l=n(v.v,c.v);if(0!==l)return l;u=h(c.r,f.tl),a=h(v.r,s.tl)}}function V(r,t,e,n){if(C(r)!==C(t))return!1;for(var o=h(r,0),i=h(t,0);;){var a=i,u=o;if(!u)return!0;if(!a)return!0;var f=a.hd,s=u.hd;if(0!==e(s.k,f.k)||!n(s.v,f.v))return!1;i=h(f.r,a.tl),o=h(s.r,u.tl)}}function B(r){var t=r.l;r.l=t.r,t.r=r;var e=a(r.l),n=a(r.r);r.h=(e>n?e:n)+1|0;var o=a(t.l),i=r.h;return t.h=(o>i?o:i)+1|0,t}function L(r){var t=r.r;r.r=t.l,t.l=r;var e=a(r.l),n=a(r.r);r.h=(e>n?e:n)+1|0;var o=a(t.r),i=r.h;return t.h=(o>i?o:i)+1|0,t}function X(r){var t=a(r.l),e=a(r.r);return r.h=(t>e?t:e)+1|0,r}function z(r){var t,e,n=r.l,o=r.r,i=a(n),u=a(o);if(i>(2+u|0))return s(n.l,n.r)?X(B(r)):X((e=L((t=r).l),t.l=e,B(t)));if(u>(2+i|0)){var f=o.l;return s(o.r,f)?X(L(r)):X(function(r){var t=B(r.r);return r.r=t,L(r)}(r))}return r.h=(i>u?i:u)+1|0,r}function W(r,t,e,n){if(void 0===r)return f(t,e);var o=n(t,r.k);if(0===o)return r.v=e,r;var i=r.l,a=r.r;if(o<0){var u=W(i,t,e,n);r.l=u}else r.r=W(a,t,e,n);return z(r)}t.copy=function r(t){return void 0!==t?{k:t.k,v:t.v,h:t.h,l:r(t.l),r:r(t.r)}:t},t.create=u,t.bal=c,t.singleton=f,t.updateValue=function(r,t){return r.v===t?r:{k:r.k,v:t,h:r.h,l:r.l,r:r.r}},t.minKey=function(r){if(void 0!==r)return o.some(v(r))},t.minKeyUndefined=function(r){if(void 0!==r)return v(r)},t.maxKey=function(r){if(void 0!==r)return o.some(d(r))},t.maxKeyUndefined=function(r){if(void 0!==r)return d(r)},t.minimum=function(r){if(void 0!==r)return l(r)},t.minUndefined=function(r){if(void 0!==r)return l(r)},t.maximum=function(r){if(void 0!==r)return p(r)},t.maxUndefined=function(r){if(void 0!==r)return p(r)},t.removeMinAuxWithRef=m,t.isEmpty=function(r){return void 0===r},t.stackAllLeft=h,t.findFirstByU=g,t.findFirstBy=function(r,t){return g(r,n.__2(t))},t.forEachU=E,t.forEach=function(r,t){E(r,n.__2(t))},t.mapU=_,t.map=function(r,t){return _(r,n.__1(t))},t.mapWithKeyU=x,t.mapWithKey=function(r,t){return x(r,n.__2(t))},t.reduceU=y,t.reduce=function(r,t,e){return y(r,t,n.__3(e))},t.everyU=b,t.every=function(r,t){return b(r,n.__2(t))},t.someU=T,t.some=function(r,t){return T(r,n.__2(t))},t.join=k,t.concat=w,t.concatOrJoin=function(r,t,e,n){return void 0!==e?k(r,t,o.valFromOption(e),n):w(r,n)},t.keepSharedU=I,t.keepShared=function(r,t){return I(r,n.__2(t))},t.keepMapU=G,t.keepMap=function(r,t){return G(r,n.__2(t))},t.partitionSharedU=M,t.partitionShared=function(r,t){return M(r,n.__2(t))},t.lengthNode=N,t.size=C,t.toList=function(r){return D(r,0)},t.checkInvariantInternal=function r(t){for(;;){var e=t;if(void 0===e)return;var n=e.l,o=e.r,i=a(n)-a(o)|0;if(!(i<=2&&i>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLtree.ml",373,4],Error:new Error};r(n),t=o}},t.fillArray=P,t.toArray=function(r){if(void 0===r)return[];var t=N(r),e=new Array(t);return P(r,0,e),e},t.keysToArray=function(r){if(void 0===r)return[];var t=N(r),e=new Array(t);return U(r,0,e),e},t.valuesToArray=function(r){if(void 0===r)return[];var t=N(r),e=new Array(t);return j(r,0,e),e},t.fromSortedArrayAux=O,t.fromSortedArrayRevAux=R,t.fromSortedArrayUnsafe=function(r){return O(r,0,r.length)},t.cmpU=F,t.cmp=function(r,t,e,o){return F(r,t,e,n.__2(o))},t.eqU=V,t.eq=function(r,t,e,o){return V(r,t,e,n.__2(o))},t.get=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var i=e(t,n.k);if(0===i)return o.some(n.v);r=i<0?n.l:n.r}},t.getUndefined=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var o=e(t,n.k);if(0===o)return n.v;r=o<0?n.l:n.r}},t.getWithDefault=function(r,t,e,n){for(;;){var o=r;if(void 0===o)return e;var i=n(t,o.k);if(0===i)return o.v;r=i<0?o.l:o.r}},t.getExn=function(r,t,e){for(;;){var n=r;if(void 0===n)throw{RE_EXN_ID:"Not_found",Error:new Error};var o=e(t,n.k);if(0===o)return n.v;r=o<0?n.l:n.r}},t.has=function(r,t,e){for(;;){var n=r;if(void 0===n)return!1;var o=e(t,n.k);if(0===o)return!0;r=o<0?n.l:n.r}},t.fromArray=function(r,t){var e=r.length;if(0!==e){var n,o=i.strictlySortedLengthU(r,(function(r,e){return t(r[0],e[0])<0}));n=o>=0?O(r,0,o):R(r,(o=0|-o)-1|0,o);for(var a=o;a<e;++a){var u=r[a];n=W(n,u[0],u[1],t)}return n}},t.updateMutate=W,t.balMutate=z,t.removeMinAuxWithRootMutate=function r(t,e){var n=e.r,o=e.l;return void 0!==o?(e.l=r(t,o),z(e)):(t.k=e.k,t.v=e.v,n)}},5252:function(r,t,e){var n=e(1386),o=e(2971),i=e(7175);function a(r){if(void 0===r)return r;var t={key:r.key,value:r.value,next:void 0};return function(r,t){for(;;){var e=t,n=r;if(void 0===n)return;var o={key:n.key,value:n.value,next:void 0};e.next=o,t=o,r=n.next}}(r.next,t),t}function u(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=a(r[n]);return e}function f(r,t){for(;;){var e=r;if(void 0===t)return e;t=t.next,r=e+1|0}}function s(r,t){for(;;){var e=t;if(void 0===e)return;r(e.key,e.value),t=e.next}}function c(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n)s(t,e[n])}function v(r,t,e){for(;;){var n=t;if(void 0===n)return e;e=r(e,n.key,n.value),t=n.next}}function d(r,t,e){for(var n=r.buckets,o=t,i=0,a=n.length;i<a;++i)o=v(e,n[i],o);return o}function l(r){var t=function(r){return o.reduceU(r.buckets,0,(function(r,t){var e=f(0,t);return r>e?r:e}))}(r),e=o.makeByU(t+1|0,(function(r){return 0}));return o.forEachU(r.buckets,(function(r){var t=f(0,r);e[t]=e[t]+1|0})),e}function p(r,t,e,n,o){for(;;){var a=o,u=n,f=a.next,s=r(a.key,a.value);if(void 0===s){if(t.size=t.size-1|0,void 0===f)return void(void 0!==u?u.next=f:t.buckets[e]=u);o=f}else{if(void 0!==u?a.next=a:t.buckets[e]=a,a.value=i.valFromOption(s),void 0===f)return void(a.next=f);o=f,n=a}}}function m(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n){var i=e[n];void 0!==i&&p(t,r,n,void 0,i)}}function h(r,t,e,n){for(;;){var o=e,i=r;t[i]=n(o);var a=o.next;if(void 0===a)return i+1|0;e=a,r=i+1|0}}function g(r,t){for(var e=r.buckets,n=0,o=new Array(r.size),i=0,a=e.length;i<a;++i){var u=e[i];void 0!==u&&(n=h(n,o,u,t))}return o}t.C=void 0,t.copy=function(r){return{size:r.size,buckets:u(r.buckets),hash:r.hash,eq:r.eq}},t.forEachU=c,t.forEach=function(r,t){c(r,n.__2(t))},t.reduceU=d,t.reduce=function(r,t,e){return d(r,t,n.__3(e))},t.logStats=function(r){var t=l(r);console.log({bindings:r.size,buckets:r.buckets.length,histogram:t})},t.keepMapInPlaceU=m,t.keepMapInPlace=function(r,t){m(r,n.__2(t))},t.fillArray=function(r,t,e){for(;;){var n=e,o=r;t[o]=[n.key,n.value];var i=n.next;if(void 0===i)return o+1|0;e=i,r=o+1|0}},t.keysToArray=function(r){return g(r,(function(r){return r.key}))},t.valuesToArray=function(r){return g(r,(function(r){return r.value}))},t.toArray=function(r){return g(r,(function(r){return[r.key,r.value]}))},t.getBucketHistogram=l},354:function(r,t){t.emptyOpt=void 0,t.make=function(r,t,e){var n=function(r,t){for(;;){if(r>=t)return r;if(r<<1<r)return r;r<<=1}}(16,e);return{size:0,buckets:new Array(n),hash:r,eq:t}},t.clear=function(r){r.size=0;for(var t=r.buckets,e=t.length,n=0;n<e;++n)t[n]=void 0},t.isEmpty=function(r){return 0===r.size}},3163:function(r,t,e){var n=e(6253),o=e(1386),i=e(7175),a=e(2531),u=e(6144);function f(r,t){var e=t.k,n=t.v,o=t.l,a=t.r;if(r===e)return[o,i.some(n),a];if(r<e){if(void 0===o)return[void 0,void 0,t];var s=f(r,o);return[s[0],s[1],u.join(s[2],e,n,a)]}if(void 0===a)return[t,void 0,void 0];var c=f(r,a);return[u.join(o,e,n,c[0]),c[1],c[2]]}function s(r,t){return void 0!==t?f(r,t):[void 0,void 0,void 0]}function c(r,t,e){if(void 0!==r){if(r.h>=(void 0!==t?t.h:0)){var n=r.k,o=r.v,a=r.l,f=r.r,v=s(n,t);return u.concatOrJoin(c(a,v[0],e),n,e(n,i.some(o),v[1]),c(f,v[2],e))}}else if(void 0===t)return;var d=t.k,l=t.v,p=t.l,m=t.r,h=s(d,r);return u.concatOrJoin(c(h[0],p,e),d,e(d,h[1],i.some(l)),c(h[2],m,e))}function v(r,t,e){for(;;){var o=t,i=r;if(!i)return 0;if(!o)return 0;var a=o.hd,f=i.hd,s=n.int_compare(f.k,a.k);if(0!==s)return s;var c=e(f.v,a.v);if(0!==c)return c;t=u.stackAllLeft(a.r,o.tl),r=u.stackAllLeft(f.r,i.tl)}}function d(r,t,e){var n=u.size(r),o=u.size(t);return n===o?v(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e):n<o?-1:1}function l(r,t,e){for(;;){var n=t,o=r;if(!o)return!0;if(!n)return!0;var i=n.hd,a=o.hd;if(a.k!==i.k||!e(a.v,i.v))return!1;t=u.stackAllLeft(i.r,n.tl),r=u.stackAllLeft(a.r,o.tl)}}function p(r,t,e){return u.size(r)===u.size(t)&&l(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e)}function m(r,t,e){if(void 0===r)return u.singleton(t,e);var n=r.k;if(t===n)return r.k=t,r.v=e,r;var o=r.l,i=r.r;if(t<n){var a=m(o,t,e);r.l=a}else r.r=m(i,t,e);return u.balMutate(r)}t.N=void 0,t.A=void 0,t.S=void 0,t.add=function r(t,e,n){if(void 0===t)return u.singleton(e,n);var o=t.k;if(e===o)return u.updateValue(t,n);var i=t.v;return e<o?u.bal(r(t.l,e,n),o,i,t.r):u.bal(t.l,o,i,r(t.r,e,n))},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return i.some(e.v);r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getWithDefault=function(r,t,e){for(;;){var n=r;if(void 0===n)return e;var o=n.k;if(t===o)return n.v;r=t<o?n.l:n.r}},t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.k;if(t===n)return!0;r=t<n?e.l:e.r}},t.remove=function r(t,e){if(void 0===t)return t;var n=t.k,o=t.l,i=t.r;if(e!==n)return e<n?u.bal(r(o,e),n,t.v,i):u.bal(o,n,t.v,r(i,e));if(void 0===o)return i;if(void 0===i)return o;var a={contents:i.k},f={contents:i.v},s=u.removeMinAuxWithRef(i,a,f);return u.bal(o,a.contents,f.contents,s)},t.splitAux=f,t.split=s,t.mergeU=c,t.merge=function(r,t,e){return c(r,t,o.__3(e))},t.compareAux=v,t.cmpU=d,t.cmp=function(r,t,e){return d(r,t,o.__2(e))},t.eqAux=l,t.eqU=p,t.eq=function(r,t,e){return p(r,t,o.__2(e))},t.addMutate=m,t.fromArray=function(r){var t=r.length;if(0!==t){var e,n=a.strictlySortedLengthU(r,(function(r,t){return r[0]<t[0]}));n>=0?e=u.fromSortedArrayAux(r,0,n):(n=0|-n,e=u.fromSortedArrayRevAux(r,n-1|0,n));for(var o=n;o<t;++o){var i=r[o];e=m(e,i[0],i[1])}return e}}},2459:function(r,t,e){var n=e(6253),o=e(1386),i=e(7175),a=e(2531),u=e(6144);function f(r,t){var e=t.k,n=t.v,o=t.l,a=t.r;if(r===e)return[o,i.some(n),a];if(r<e){if(void 0===o)return[void 0,void 0,t];var s=f(r,o);return[s[0],s[1],u.join(s[2],e,n,a)]}if(void 0===a)return[t,void 0,void 0];var c=f(r,a);return[u.join(o,e,n,c[0]),c[1],c[2]]}function s(r,t){return void 0!==t?f(r,t):[void 0,void 0,void 0]}function c(r,t,e){if(void 0!==r){if(r.h>=(void 0!==t?t.h:0)){var n=r.k,o=r.v,a=r.l,f=r.r,v=s(n,t);return u.concatOrJoin(c(a,v[0],e),n,e(n,i.some(o),v[1]),c(f,v[2],e))}}else if(void 0===t)return;var d=t.k,l=t.v,p=t.l,m=t.r,h=s(d,r);return u.concatOrJoin(c(h[0],p,e),d,e(d,h[1],i.some(l)),c(h[2],m,e))}function v(r,t,e){for(;;){var o=t,i=r;if(!i)return 0;if(!o)return 0;var a=o.hd,f=i.hd,s=n.string_compare(f.k,a.k);if(0!==s)return s;var c=e(f.v,a.v);if(0!==c)return c;t=u.stackAllLeft(a.r,o.tl),r=u.stackAllLeft(f.r,i.tl)}}function d(r,t,e){var n=u.size(r),o=u.size(t);return n===o?v(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e):n<o?-1:1}function l(r,t,e){for(;;){var n=t,o=r;if(!o)return!0;if(!n)return!0;var i=n.hd,a=o.hd;if(a.k!==i.k||!e(a.v,i.v))return!1;t=u.stackAllLeft(i.r,n.tl),r=u.stackAllLeft(a.r,o.tl)}}function p(r,t,e){return u.size(r)===u.size(t)&&l(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e)}function m(r,t,e){if(void 0===r)return u.singleton(t,e);var n=r.k;if(t===n)return r.k=t,r.v=e,r;var o=r.l,i=r.r;if(t<n){var a=m(o,t,e);r.l=a}else r.r=m(i,t,e);return u.balMutate(r)}t.N=void 0,t.A=void 0,t.S=void 0,t.add=function r(t,e,n){if(void 0===t)return u.singleton(e,n);var o=t.k;if(e===o)return u.updateValue(t,n);var i=t.v;return e<o?u.bal(r(t.l,e,n),o,i,t.r):u.bal(t.l,o,i,r(t.r,e,n))},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return i.some(e.v);r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getWithDefault=function(r,t,e){for(;;){var n=r;if(void 0===n)return e;var o=n.k;if(t===o)return n.v;r=t<o?n.l:n.r}},t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.k;if(t===n)return!0;r=t<n?e.l:e.r}},t.remove=function r(t,e){if(void 0===t)return t;var n=t.k,o=t.l,i=t.r;if(e!==n)return e<n?u.bal(r(o,e),n,t.v,i):u.bal(o,n,t.v,r(i,e));if(void 0===o)return i;if(void 0===i)return o;var a={contents:i.k},f={contents:i.v},s=u.removeMinAuxWithRef(i,a,f);return u.bal(o,a.contents,f.contents,s)},t.splitAux=f,t.split=s,t.mergeU=c,t.merge=function(r,t,e){return c(r,t,o.__3(e))},t.compareAux=v,t.cmpU=d,t.cmp=function(r,t,e){return d(r,t,o.__2(e))},t.eqAux=l,t.eqU=p,t.eq=function(r,t,e){return p(r,t,o.__2(e))},t.addMutate=m,t.fromArray=function(r){var t=r.length;if(0!==t){var e,n=a.strictlySortedLengthU(r,(function(r,t){return r[0]<t[0]}));n>=0?e=u.fromSortedArrayAux(r,0,n):(n=0|-n,e=u.fromSortedArrayRevAux(r,n-1|0,n));for(var o=n;o<t;++o){var i=r[o];e=m(e,i[0],i[1])}return e}}},9167:function(r,t,e){var n=e(1386),o=e(2971);function i(r){if(void 0===r)return r;var t={key:r.key,next:void 0};return function(r,t){for(;;){var e=t,n=r;if(void 0===n)return;var o={key:n.key,next:void 0};e.next=o,t=o,r=n.next}}(r.next,t),t}function a(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=i(r[n]);return e}function u(r,t){for(;;){var e=r;if(void 0===t)return e;t=t.next,r=e+1|0}}function f(r,t){for(;;){var e=t;if(void 0===e)return;r(e.key),t=e.next}}function s(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n)f(t,e[n])}function c(r,t,e){for(;;){var n=e,o=r;t[o]=n.key;var i=n.next;if(void 0===i)return o+1|0;e=i,r=o+1|0}}function v(r,t,e){for(;;){var n=t;if(void 0===n)return e;e=r(e,n.key),t=n.next}}function d(r,t,e){for(var n=r.buckets,o=t,i=0,a=n.length;i<a;++i)o=v(e,n[i],o);return o}function l(r){var t=function(r){return o.reduceU(r.buckets,0,(function(r,t){var e=u(0,t);return r>e?r:e}))}(r),e=o.makeByU(t+1|0,(function(r){return 0}));return o.forEachU(r.buckets,(function(r){var t=u(0,r);e[t]=e[t]+1|0})),e}t.C=void 0,t.copy=function(r){return{size:r.size,buckets:a(r.buckets),hash:r.hash,eq:r.eq}},t.forEachU=s,t.forEach=function(r,t){s(r,n.__1(t))},t.fillArray=c,t.toArray=function(r){for(var t=r.buckets,e=0,n=new Array(r.size),o=0,i=t.length;o<i;++o){var a=t[o];void 0!==a&&(e=c(e,n,a))}return n},t.reduceU=d,t.reduce=function(r,t,e){return d(r,t,n.__2(e))},t.logStats=function(r){var t=l(r);console.log({bindings:r.size,buckets:r.buckets.length,histogram:t})},t.getBucketHistogram=l},9113:function(r,t,e){var n=e(3282),o=e(4881);function i(r,t){for(;;){var e=t,n=r;if(!n)return 0;if(!e)return 0;var i=e.hd,a=n.hd,u=a.v,f=i.v;if(u!==f)return u<f?-1:1;t=o.stackAllLeft(i.r,e.tl),r=o.stackAllLeft(a.r,n.tl)}}function a(r,t){var e=o.size(r),n=o.size(t);return e===n?i(o.stackAllLeft(r,0),o.stackAllLeft(t,0)):e<n?-1:1}function u(r,t){if(void 0===r)return o.singleton(t);var e=r.v;if(t===e)return r;var n=r.l,i=r.r;return t<e?r.l=u(n,t):r.r=u(i,t),o.balMutate(r)}t.S=void 0,t.N=void 0,t.A=void 0,t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.v;if(t===n)return!0;r=t<n?e.l:e.r}},t.compareAux=i,t.cmp=a,t.eq=function(r,t){return 0===a(r,t)},t.subset=function r(t,e){for(;;){var n=e,i=t;if(void 0===i)return!0;if(void 0===n)return!1;var a=i.v,u=i.l,f=i.r,s=n.v,c=n.l,v=n.r;if(a!==s)if(a<s){if(!r(o.create(u,a,void 0),c))return!1;t=f}else{if(!r(o.create(void 0,a,f),v))return!1;t=u}else{if(!r(u,c))return!1;e=v,t=f}}},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.addMutate=u,t.fromArray=function(r){var t=r.length;if(0!==t){var e,i=n.strictlySortedLength(r);i>=0?e=o.fromSortedArrayAux(r,0,i):(i=0|-i,e=o.fromSortedArrayRevAux(r,i-1|0,i));for(var a=i;a<t;++a)e=u(e,r[a]);return e}}},1572:function(r,t,e){var n=e(4881),o=e(8466);function i(r,t){for(;;){var e=t,o=r;if(!o)return 0;if(!e)return 0;var i=e.hd,a=o.hd,u=a.v,f=i.v;if(u!==f)return u<f?-1:1;t=n.stackAllLeft(i.r,e.tl),r=n.stackAllLeft(a.r,o.tl)}}function a(r,t){var e=n.size(r),o=n.size(t);return e===o?i(n.stackAllLeft(r,0),n.stackAllLeft(t,0)):e<o?-1:1}function u(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,i=r.r;return t<e?r.l=u(o,t):r.r=u(i,t),n.balMutate(r)}t.S=void 0,t.N=void 0,t.A=void 0,t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.v;if(t===n)return!0;r=t<n?e.l:e.r}},t.compareAux=i,t.cmp=a,t.eq=function(r,t){return 0===a(r,t)},t.subset=function r(t,e){for(;;){var o=e,i=t;if(void 0===i)return!0;if(void 0===o)return!1;var a=i.v,u=i.l,f=i.r,s=o.v,c=o.l,v=o.r;if(a!==s)if(a<s){if(!r(n.create(u,a,void 0),c))return!1;t=f}else{if(!r(n.create(void 0,a,f),v))return!1;t=u}else{if(!r(u,c))return!1;e=v,t=f}}},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.addMutate=u,t.fromArray=function(r){var t=r.length;if(0!==t){var e,i=o.strictlySortedLength(r);i>=0?e=n.fromSortedArrayAux(r,0,i):(i=0|-i,e=n.fromSortedArrayRevAux(r,i-1|0,i));for(var a=i;a<t;++a)e=u(e,r[a]);return e}}},6253:function(r,t){function e(r,t){return r[1]===t[1]&&r[0]===t[0]}function n(r,t){var e=t[0],n=r[0];return n>e||!(n<e)&&r[1]>=t[1]}function o(r,t){return r[0]>t[0]||!(r[0]<t[0])&&r[1]>t[1]}t.int_compare=function(r,t){return r<t?-1:r===t?0:1},t.bool_compare=function(r,t){return r?t?0:1:t?-1:0},t.float_compare=function(r,t){return r===t?0:r<t?-1:r>t||r==r?1:t==t?-1:0},t.string_compare=function(r,t){return r===t?0:r<t?-1:1},t.bool_min=function(r,t){return r?t:r},t.int_min=function(r,t){return r<t?r:t},t.float_min=function(r,t){return r<t?r:t},t.string_min=function(r,t){return r<t?r:t},t.bool_max=function(r,t){return r||t},t.int_max=function(r,t){return r>t?r:t},t.float_max=function(r,t){return r>t?r:t},t.string_max=function(r,t){return r>t?r:t},t.i64_eq=e,t.i64_neq=function(r,t){return!e(r,t)},t.i64_lt=function(r,t){return!n(r,t)},t.i64_gt=o,t.i64_le=function(r,t){return!o(r,t)},t.i64_ge=n,t.i64_min=function(r,t){return n(r,t)?t:r},t.i64_max=function(r,t){return o(r,t)?r:t}},1748:function(r,t){t.dup=function(r){return r.slice(0)},t.sub=function(r,t,e){for(var n=new Array(e),o=0,i=t;o<e;)n[o]=r[i],o=o+1|0,i=i+1|0;return n},t.concat=function(r){var t=function(r,t){for(;;){var e=t,n=r;if(!e)return n;t=e.tl,r=e.hd.length+n|0}}(0,r),e=new Array(t);return function(r,t,e){for(;;){var n=e,o=t;if(!n)return;for(var i=n.hd,a=i.length,u=o,f=0;f<a;)r[u]=i[f],u=u+1|0,f=f+1|0;e=n.tl,t=u}}(e,0,r),e},t.make=function(r,t){for(var e=new Array(r),n=0;n<r;++n)e[n]=t;return e},t.make_float=function(r){for(var t=new Array(r),e=0;e<r;++e)t[e]=0;return t},t.blit=function(r,t,e,n,o){if(n<=t)for(var i=0;i<o;++i)e[i+n|0]=r[i+t|0];else for(var a=o-1|0;a>=0;--a)e[a+n|0]=r[a+t|0]},t.get=function(r,t){if(t<0||t>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[t]},t.set=function(r,t,e){if(t<0||t>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};r[t]=e}},6181:function(r,t){var e={contents:0};t.id=e,t.create=function(r){return e.contents=e.contents+1|0,r+"/"+e.contents},t.is_extension=function(r){return null!=r&&"string"==typeof r.RE_EXN_ID},t.exn_slot_name=function(r){return r.RE_EXN_ID}},1863:function(r,t){function e(r,t){return r<<t|r>>>(32-t|0)|0}function n(r,t){var n=t;n=e(n=Math.imul(n,-862048943),15);var o=r^(n=Math.imul(n,461845907));return((o=e(o,13))+(o<<2)|0)-430675100|0}t.hash_mix_int=n,t.hash_mix_string=function(r,t){for(var e=t.length,o=(e/4|0)-1|0,i=r,a=0;a<=o;++a){var u=a<<2;i=n(i,t.charCodeAt(u)|t.charCodeAt(u+1|0)<<8|t.charCodeAt(u+2|0)<<16|t.charCodeAt(u+3|0)<<24)}var f=3&e;return 0!==f&&(i=n(i,3===f?t.charCodeAt(e-1|0)<<16|t.charCodeAt(e-2|0)<<8|t.charCodeAt(e-3|0):2===f?t.charCodeAt(e-1|0)<<8|t.charCodeAt(e-2|0):t.charCodeAt(e-1|0))),i^e},t.hash_final_mix=function(r){var t=r^r>>>16;return t=Math.imul(t,-2048144789),t^=t>>>13,(t=Math.imul(t,-1028477387))^t>>>16}},8723:function(r,t){t.div=function(r,t){if(0===t)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r/t|0},t.mod_=function(r,t){if(0===t)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r%t}},4518:function(r,t,e){var n=e(7175),o=e(6181),i="JsError";t.$$Error=i,t.internalToOCamlException=function(r){return o.is_extension(r)?r:{RE_EXN_ID:"JsError",_1:r}},t.as_js_exn=function(r){if(r.RE_EXN_ID===i)return n.some(r._1)}},4923:function(r,t,e){var n=e(6253),o=function(r,t){for(var e in r)t(e)};function i(r,t){if(r===t)return 0;var e=typeof r,o=typeof t;switch(e){case"boolean":if("boolean"===o)return n.bool_compare(r,t);break;case"function":if("function"===o)throw{RE_EXN_ID:"Invalid_argument",_1:"compare: functional value",Error:new Error};break;case"number":if("number"===o)return n.float_compare(r,t);break;case"string":return"string"===o?n.string_compare(r,t):1;case"undefined":return-1}switch(o){case"string":return-1;case"undefined":return 1;default:if("boolean"===e)return 1;if("boolean"===o)return-1;if("function"===e)return 1;if("function"===o)return-1;if("number"===e)return null===t||void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if("number"===o)return null===r||void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(null===r)return void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if(null===t)return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(void 0!==r.BS_PRIVATE_NESTED_SOME_NONE)return void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?a(r,t):-1;var u=0|r.TAG,f=0|t.TAG;if(248===u)return n.int_compare(r[1],t[1]);if(251===u)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(u!==f)return u<f?-1:1;var s=0|r.length,c=0|t.length;if(s===c){if(!Array.isArray(r))return r instanceof Date&&t instanceof Date?r-t:a(r,t);for(var v=0;;){var d=v;if(d===s)return 0;var l=i(r[d],t[d]);if(0!==l)return l;v=d+1|0}}else if(s<c)for(var p=0;;){var m=p;if(m===s)return-1;var h=i(r[m],t[m]);if(0!==h)return h;p=m+1|0}else for(var g=0;;){var E=g;if(E===c)return 1;var _=i(r[E],t[E]);if(0!==_)return _;g=E+1|0}}}function a(r,t){var e={contents:void 0},a={contents:void 0},u=function(r,t){var e=r[2],n=r[1];if(!Object.prototype.hasOwnProperty.call(n,t)||i(r[0][t],n[t])>0){var o=e.contents;return void 0!==o&&t>=o?void 0:void(e.contents=t)}},f=[r,t,a],s=[t,r,e];o(r,(function(r){return u(f,r)})),o(t,(function(r){return u(s,r)}));var c=e.contents,v=a.contents;return void 0!==c?void 0!==v?n.string_compare(c,v):-1:void 0!==v?1:0}function u(r,t){if(r===t)return!0;var e=typeof r;if("string"===e||"number"===e||"boolean"===e||"undefined"===e||null===r)return!1;var n=typeof t;if("function"===e||"function"===n)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if("number"===n||"undefined"===n||null===t)return!1;var i=0|r.TAG,a=0|t.TAG;if(248===i)return r[1]===t[1];if(251===i)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(i!==a)return!1;var f=0|r.length;if(f!==(0|t.length))return!1;if(!Array.isArray(r)){if(r instanceof Date&&t instanceof Date)return!(r>t||r<t);var s={contents:!0};return o(r,(function(r){Object.prototype.hasOwnProperty.call(t,r)||(s.contents=!1)})),s.contents&&o(t,(function(e){Object.prototype.hasOwnProperty.call(r,e)&&u(t[e],r[e])||(s.contents=!1)})),s.contents}for(var c=0;;){var v=c;if(v===f)return!0;if(!u(r[v],t[v]))return!1;c=v+1|0}}t.obj_dup=function(r){if(Array.isArray(r)){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=r[n];return void 0!==r.TAG&&(e.TAG=r.TAG),e}return Object.assign({},r)},t.update_dummy=function(r,t){if(Array.isArray(t)){for(e=0;e<t.length;++e)r[e]=t[e];void 0!==t.TAG&&(r.TAG=t.TAG)}else for(var e in t)r[e]=t[e]},t.compare=i,t.equal=u,t.equal_null=function(r,t){return null!==t?u(r,t):r===t},t.equal_undefined=function(r,t){return void 0!==t?u(r,t):r===t},t.equal_nullable=function(r,t){return null==t?r===t:u(r,t)},t.notequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r!==t:!u(r,t)},t.greaterequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r>=t:i(r,t)>=0},t.greaterthan=function(r,t){return"number"==typeof r&&"number"==typeof t?r>t:i(r,t)>0},t.lessthan=function(r,t){return"number"==typeof r&&"number"==typeof t?r<t:i(r,t)<0},t.lessequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r<=t:i(r,t)<=0},t.min=function(r,t){return i(r,t)<=0?r:t},t.max=function(r,t){return i(r,t)>=0?r:t}},7175:function(r,t){function e(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function n(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var t=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===t?void 0:{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}t.nullable_to_opt=function(r){return null==r?void 0:e(r)},t.undefined_to_opt=function(r){return void 0===r?void 0:e(r)},t.null_to_opt=function(r){return null===r?void 0:e(r)},t.valFromOption=n,t.some=e,t.isNested=function(r){return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE},t.option_get=function(r){return void 0===r?void 0:n(r)},t.option_unwrap=function(r){return void 0!==r?r.VAL:r}},3533:function(r,t){t.spliceApply=function(r,t){var e,n;n=t.length;var o=[];for(e=0;e<n-1;++e)o.push(t[e]);var i=t[n-1];for(e=0;e<i.length;++e)o.push(i[e]);return r.apply(null,o)},t.spliceNewApply=function(r,t){var e,n;n=t.length;var o=[null];for(e=0;e<n-1;++e)o.push(t[e]);var i=t[n-1];for(e=0;e<i.length;++e)o.push(i[e]);return new(Function.prototype.bind.apply(r,o))},t.spliceObjApply=function(r,t,e){var n,o;o=e.length;var i=[];for(n=0;n<o-1;++n)i.push(e[n]);var a=e[o-1];for(n=0;n<a.length;++n)i.push(a[n]);return r[t].apply(r,i)}},1386:function(r,t,e){var n=e(1748);function o(r,t){for(;;){var e=t,i=r,a=i.length,u=0===a?1:a,f=u-e.length|0;if(0===f)return i.apply(null,e);if(f>=0)return function(r,t){return function(e){return o(r,t.concat([e]))}}(i,e);t=n.sub(e,u,0|-f),r=i.apply(null,n.sub(e,0,u))}}function i(r,t){var e=r.length;if(1===e)return r(t);switch(e){case 1:return r(t);case 2:return function(e){return r(t,e)};case 3:return function(e,n){return r(t,e,n)};case 4:return function(e,n,o){return r(t,e,n,o)};case 5:return function(e,n,o,i){return r(t,e,n,o,i)};case 6:return function(e,n,o,i,a){return r(t,e,n,o,i,a)};case 7:return function(e,n,o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t])}}function a(r,t,e){var n=r.length;if(2===n)return r(t,e);switch(n){case 1:return o(r(t),[e]);case 2:return r(t,e);case 3:return function(n){return r(t,e,n)};case 4:return function(n,o){return r(t,e,n,o)};case 5:return function(n,o,i){return r(t,e,n,o,i)};case 6:return function(n,o,i,a){return r(t,e,n,o,i,a)};case 7:return function(n,o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t,e])}}function u(r,t,e,n){var i=r.length;if(3===i)return r(t,e,n);switch(i){case 1:return o(r(t),[e,n]);case 2:return o(r(t,e),[n]);case 3:return r(t,e,n);case 4:return function(o){return r(t,e,n,o)};case 5:return function(o,i){return r(t,e,n,o,i)};case 6:return function(o,i,a){return r(t,e,n,o,i,a)};case 7:return function(o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t,e,n])}}function f(r,t,e,n,i){var a=r.length;if(4===a)return r(t,e,n,i);switch(a){case 1:return o(r(t),[e,n,i]);case 2:return o(r(t,e),[n,i]);case 3:return o(r(t,e,n),[i]);case 4:return r(t,e,n,i);case 5:return function(o){return r(t,e,n,i,o)};case 6:return function(o,a){return r(t,e,n,i,o,a)};case 7:return function(o,a,u){return r(t,e,n,i,o,a,u)};default:return o(r,[t,e,n,i])}}function s(r,t,e,n,i,a){var u=r.length;if(5===u)return r(t,e,n,i,a);switch(u){case 1:return o(r(t),[e,n,i,a]);case 2:return o(r(t,e),[n,i,a]);case 3:return o(r(t,e,n),[i,a]);case 4:return o(r(t,e,n,i),[a]);case 5:return r(t,e,n,i,a);case 6:return function(o){return r(t,e,n,i,a,o)};case 7:return function(o,u){return r(t,e,n,i,a,o,u)};default:return o(r,[t,e,n,i,a])}}function c(r,t,e,n,i,a,u){var f=r.length;if(6===f)return r(t,e,n,i,a,u);switch(f){case 1:return o(r(t),[e,n,i,a,u]);case 2:return o(r(t,e),[n,i,a,u]);case 3:return o(r(t,e,n),[i,a,u]);case 4:return o(r(t,e,n,i),[a,u]);case 5:return o(r(t,e,n,i,a),[u]);case 6:return r(t,e,n,i,a,u);case 7:return function(o){return r(t,e,n,i,a,u,o)};default:return o(r,[t,e,n,i,a,u])}}function v(r,t,e,n,i,a,u,f){var s=r.length;if(7===s)return r(t,e,n,i,a,u,f);switch(s){case 1:return o(r(t),[e,n,i,a,u,f]);case 2:return o(r(t,e),[n,i,a,u,f]);case 3:return o(r(t,e,n),[i,a,u,f]);case 4:return o(r(t,e,n,i),[a,u,f]);case 5:return o(r(t,e,n,i,a),[u,f]);case 6:return o(r(t,e,n,i,a,u),[f]);case 7:return r(t,e,n,i,a,u,f);default:return o(r,[t,e,n,i,a,u,f])}}function d(r,t,e,n,i,a,u,f,s){var c=r.length;if(8===c)return r(t,e,n,i,a,u,f,s);switch(c){case 1:return o(r(t),[e,n,i,a,u,f,s]);case 2:return o(r(t,e),[n,i,a,u,f,s]);case 3:return o(r(t,e,n),[i,a,u,f,s]);case 4:return o(r(t,e,n,i),[a,u,f,s]);case 5:return o(r(t,e,n,i,a),[u,f,s]);case 6:return o(r(t,e,n,i,a,u),[f,s]);case 7:return o(r(t,e,n,i,a,u,f),[s]);default:return o(r,[t,e,n,i,a,u,f,s])}}t.app=o,t._1=i,t.__1=function(r){return 1===r.length?r:function(t){return i(r,t)}},t._2=a,t.__2=function(r){return 2===r.length?r:function(t,e){return a(r,t,e)}},t._3=u,t.__3=function(r){return 3===r.length?r:function(t,e,n){return u(r,t,e,n)}},t._4=f,t.__4=function(r){return 4===r.length?r:function(t,e,n,o){return f(r,t,e,n,o)}},t._5=s,t.__5=function(r){return 5===r.length?r:function(t,e,n,o,i){return s(r,t,e,n,o,i)}},t._6=c,t.__6=function(r){return 6===r.length?r:function(t,e,n,o,i,a){return c(r,t,e,n,o,i,a)}},t._7=v,t.__7=function(r){return 7===r.length?r:function(t,e,n,o,i,a,u){return v(r,t,e,n,o,i,a,u)}},t._8=d,t.__8=function(r){return 8===r.length?r:function(t,e,n,o,i,a,u,f){return d(r,t,e,n,o,i,a,u,f)}}},2900:function(r,t){t.$$Error="JsError",t.raiseError=function(r){throw new Error(r)},t.raiseEvalError=function(r){throw new EvalError(r)},t.raiseRangeError=function(r){throw new RangeError(r)},t.raiseReferenceError=function(r){throw new ReferenceError(r)},t.raiseSyntaxError=function(r){throw new SyntaxError(r)},t.raiseTypeError=function(r){throw new TypeError(r)},t.raiseUriError=function(r){throw new URIError(r)}},1589:function(r,t){t.equal=function(r,t){return r===t},t.max=2147483647,t.min=-2147483648},4763:function(r,t,e){var n=e(1589);function o(r){return r>n.max?n.max:r<n.min?n.min:Math.ceil(r)}function i(r){return r>n.max?n.max:r<n.min?n.min:Math.floor(r)}var a=o,u=i;t.unsafe_ceil=function(r){return Math.ceil(r)},t.ceil_int=o,t.ceil=a,t.unsafe_floor=function(r){return Math.floor(r)},t.floor_int=i,t.floor=u,t.random_int=function(r,t){return i(Math.random()*(t-r|0))+r|0}},194:function(r,t,e){var n=e(1386);t.then_=function(r,t){return t.then(n.__1(r))},t.$$catch=function(r,t){return t.catch(n.__1(r))}},3192:function(r,t,e){var n=e(1748),o=e(6517),i=e(335),a=e(519);function u(r,t,e,a){for(var u,f=0,s={contents:0},c=r.hyps.length-1|0;f<=c&&o.isNone(u);){var v=n.get(r.hyps,f);1===v.typ&&(o.getWithDefault(o.map(e,function(r){return function(t){return t===r.label}}(v)),!1)||o.getWithDefault(o.map(a,(function(r){return r===s.contents})),!1)?u=i.pnGetExpr(n.get(t,f)):s.contents=s.contents+1|0),f=f+1|0}return u}function f(r,t,e,o,i){if(o===e.frm.numOfHypsE)return!0;if(-1===o){var s={contents:!1},c=e.frm;return a.iterateSubstitutions(c.frame.asrt,r,n.get(c.frmConstParts,c.numOfHypsE),n.get(c.constParts,c.numOfHypsE),n.get(c.varGroups,c.numOfHypsE),c.subs,i,(function(n){return f(r,t,e,o+1|0,i)?(s.contents=!0,1):0})),s.contents}var v=function(r,t,e){if("number"!=typeof e&&1===e.TAG){var o=e.frame,i=e.args,a=n.get(r.hypMatchers,t);return 0===a.TAG?u(o,i,a._0,void 0):u(o,i,void 0,a._0)}}(e,o,t);if(void 0===v)return!1;var d={contents:!1},l=e.frm;return a.iterateSubstitutions(n.get(l.hypsE,o).expr,v,n.get(l.frmConstParts,o),n.get(l.constParts,o),n.get(l.varGroups,o),l.subs,i,(function(n){return f(r,t,e,o+1|0,i)?(d.contents=!0,1):0})),d.contents}t.exprSrcMatches=function(r,t,e,n){return e.matchAsrt?f(r,t,e,-1,n):f(r,t,e,0,n)}},8753:function(r,t,e){var n=e(1386),o=e(6638),i=e(8371),a=e(2971),u=e(1748),f=e(6517),s=e(9775),c=e(519),v=e(3216),d=e(4125);function l(r,t){return!(!f.isNone(r.err)||!f.isNone(t.err)||r.frame.label!==t.frame.label)&&c.subsEq(r.subs,t.subs)}function p(r){return v.hash2(v.hashStr(r.frame.label),c.subsHash(r.subs))}var m=o.MakeHashable({hash:p,eq:l});function h(r,t,e,o,i,a,f,s,c){if(e===t.length)return a.contents=a.contents+1|0,a.contents>f?n._1(s,void 0):t.some((function(r){return-1===r}))?o?0:n._1(c,t):i?0:n._1(c,t);for(var v=0,d=0,l=u.get(r,e).length-1|0;0===v&&d<=l&&a.contents<=f;)u.set(t,e,u.get(u.get(r,e),d)),-1===u.get(t,e)&&o||(v=h(r,t,e+1|0,o,i,a,f,s,c)),d=d+1|0;return v}function g(r,t,e,o,i,f,s){for(var c=a.makeBy(t,(function(r){return[]})),v=t-1|0,d=r-1|0,l=0;l<=v;++l)for(var p=-1;p<=d;++p)n._2(e,p,l)&&u.get(c,l).push(p);var m=c.findIndex((function(r){return 0===r.length}));if(-1!==m)return i>=2?n._1(s,{TAG:4,args:[],errArgIdx:m}):0;var g=a.make(t,0),E={contents:!1},_=h(c,g,0,!0,!1,{contents:0},o,(function(r){return E.contents=!0,n._1(s,{TAG:6,frmLabels:void 0})}),f);return 0===_?h(c,g,0,!1,!0,{contents:0},o,(function(r){return E.contents?0:n._1(s,{TAG:6,frmLabels:void 0})}),f):_}function E(r,t,e,o,i){var a=r.newVars.length,f=t.subs.isDefined.slice(),s={contents:(r.maxVar+1|0)+r.newVars.length|0},v=[],d=[],l=[];c.applySubs(o<t.hypsE.length?u.get(t.hypsE,o).expr:t.frame.asrt,t.subs,(function(r){var e=v.indexOf(r);if(-1!==e)return u.get(d,e);var n=s.contents;return s.contents=s.contents+1|0,v.push(r),d.push(n),l.push(u.get(t.frame.varTypes,r)),n}));for(var p=v.length-1|0,m=0;m<=p;++m){var h=u.get(v,m),g=u.get(d,m),E=u.get(l,m);u.set(t.subs.exprs,h,[g]),u.set(t.subs.begins,h,0),u.set(t.subs.ends,h,0),u.set(t.subs.isDefined,h,!0),r.newVars.push(g),r.newVarTypes.push(E)}var _=e||0===r.newVars.length?n._1(i,void 0):0;return f.forEach((function(r,e){u.set(t.subs.isDefined,e,r)})),r.newVars.splice(a),r.newVarTypes.splice(a),_}function _(r,t){for(var e=r+1|0;e<t.length&&u.get(t,e)>=0;)e=e+1|0;if(e<t.length&&u.get(t,e)<0)return e}function x(r,t){if(r>=t.length)throw{RE_EXN_ID:i.MmException,_1:{msg:"getNextHypIdxToMatch: hypIdx >= comb->Js_array2.length"},Error:new Error};if(r<0||u.get(t,r)>=0){var e=function(r,t){for(var e=r+1|0;e<t.length&&u.get(t,e)<0;)e=e+1|0;if(e<t.length&&u.get(t,e)>=0)return e}(r,t);if(void 0!==e)return e;var n=_(-1,t);return void 0!==n?n:t.length}var o=_(r,t);return void 0!==o?o:t.length}function y(r,t,e,o,i,a,f,s,v,d){var l=function(r){return a.map((function(r){return r>=0?u.get(o,r):[]}))};if(f===a.length){var p={contents:!1},m=E(r,t,i,f,(function(r){return p.contents=!0,n._1(v,void 0)}));return s>=2&&!p.contents?n._1(d,{TAG:5,args:l(),errArgIdx:f}):m}if(u.get(a,f)>=0){var h={contents:!1},g=c.iterateSubstitutions(u.get(t.hypsE,f).expr,u.get(o,u.get(a,f)),u.get(t.frmConstParts,f),u.get(t.constParts,f),u.get(t.varGroups,f),t.subs,e,(function(n){return h.contents=!0,y(r,t,e,o,i,a,x(f,a),s,v,d)}));return s>=2&&!h.contents?n._1(d,{TAG:4,args:l(),errArgIdx:f}):g}var _={contents:!1},b=E(r,t,i,f,(function(n){return _.contents=!0,y(r,t,e,o,i,a,x(f,a),s,v,d)}));return s>=2&&!_.contents?n._1(d,{TAG:5,args:l(),errArgIdx:f}):b}t.applyAssertionResultEq=l,t.applyAssertionResultHash=p,t.ApplyAssertionResultHash=m,t.applyAssertions=function(r,t,e,o,i,a,v,l,p,h,E,_,b,T,A,S,k){var w=void 0!==v&&v,I=void 0===l||l,G=void 0===p||p,M=void 0!==_&&_,N=void 0!==b?b:1e4,C=void 0!==A?A:0,D=function(r){return void 0!==h?n._1(T,{newVars:[],newVarTypes:[],frame:r.frame,subs:c.subsClone(r.subs),err:{TAG:3,asrtExpr:r.frame.asrt,expr:h}}):0},U=a.length,j=function(r,t,e){if(void 0!==t)return t.length;if(void 0===e)return c.frmsGetAll(r).length;var n=c.frmsGetByType(r,u.get(e,0));return void 0!==n?n.length:0}(t,e,h),P=d.progressTrackerMake(.01,void 0,S,void 0,void 0),R={contents:0},O={contents:0},F=s.make(16,m),V=function(t){if(0===O.contents)if(f.getWithDefault(f.map(h,(function(r){return u.get(r,0)!==u.get(t.frame.asrt,0)})),!1))C>=2&&(O.contents=D(t));else{var e={contents:!1};O.contents=function(r,t,e,o){return void 0!==t?c.iterateSubstitutions(r.frame.asrt,t,u.get(r.frmConstParts,r.numOfHypsE),u.get(r.constParts,r.numOfHypsE),u.get(r.varGroups,r.numOfHypsE),r.subs,e,o):n._1(o,r.subs)}(t,h,E,(function(o){e.contents=!0;var f=t.numOfHypsE,v=[],d=[],l={maxVar:r,newVars:v,newVarTypes:d};return g(U,f,(function(r,e){return-1===r?!w&&I:(!w||r===e)&&function(r,t,e,n,o){if(u.get(n,0)!==u.get(e,0))return!1;var i={contents:!1};return c.iterateSubstitutions(n,e,u.get(r.frmConstParts,t),u.get(r.constParts,t),u.get(r.varGroups,t),r.subs,o,(function(r){return i.contents=!0,1})),i.contents}(t,e,u.get(a,r),u.get(t.hypsE,e).expr,E)}),N,C,(function(e){return y(l,t,E,a,G,e,x(-1,e),C,(function(e){var o=function(r,t,e,o,i,a){return c.verifyDisjoints(r,t,(function(r,t){return!(r<=e&&t<=e&&!n._2(i,r,t))||o}),a)}(t.frame.disj,t.subs,r,M,i,C);if(void 0!==o)return 0===C?0:n._1(T,{newVars:v.slice(),newVarTypes:d.slice(),frame:t.frame,subs:c.subsClone(t.subs),err:o});var a={newVars:v.slice(),newVarTypes:d.slice(),frame:t.frame,subs:c.subsClone(t.subs),err:void 0};return s.has(F,a)?0:(s.add(F,a),n._1(T,a))}),(function(r){return n._1(T,{newVars:[],newVarTypes:[],frame:t.frame,subs:c.subsClone(t.subs),err:r})}))}),(function(r){return n._1(T,{newVars:[],newVarTypes:[],frame:t.frame,subs:c.subsClone(t.subs),err:r})}))})),C>=2&&!e.contents&&(O.contents=D(t))}R.contents=R.contents+1,d.progressTrackerSetCurrPct(P,R.contents/j)};return void 0!==e?void e.forEach((function(r){f.forEach(c.frmsGetByLabel(t,r),(function(r){if(n._1(o,r.frame))return n._1(V,r)}))})):c.frmsForEach(t,f.map(h,(function(r){return u.get(r,0)})),(function(r){if(n._1(o,r.frame))return n._1(V,r)}))},t.iterateCombinations=g,t.getNextHypIdxToMatch=x},3942:function(r,t,e){var n=e(1386),o=e(9232),i=e(6638),a=e(8371),u=e(2971),f=e(1748),s=e(1094),c=e(6517),v=e(303),d=e(7175),l=e(5082),p=e(7356),m=e(7659),h=e(3533),g=e(2275),E=e(8615),_=e(3216),x=e(4125),y=e(8674);function b(r,t){var e=r.length;if(e!==t.length)return!1;for(var n=!0,o=0;n&&o<e;)n=f.get(r,o)===f.get(t,o),o=o+1|0;return n}function T(r,t){var e=r.length,n=t.length,o=_.intCmp(e,n);if(0!==o)return o;for(var i=0,a=0;a<e&&0===i;)i=_.intCmp(f.get(r,a),f.get(t,a)),a=a+1|0;return i}var A=i.MakeComparable({cmp:T}),S=i.MakeHashable({hash:_.hashArrInt,eq:b});function k(r,t,e){if(t!==e){var n=t<=e?t:e,o=t<=e?e:t,i=p.get(r,n);return void 0!==i?m.add(d.valFromOption(i),o):p.set(r,n,m.fromArray([o]))}}function w(r,t){var e=r.parent;if(void 0===e)return n._1(t,r);var o=w(e,t);return void 0!==o?d.some(d.valFromOption(o)):n._1(t,r)}function I(r,t){for(;;){var e=r,o=n._1(t,e);if(void 0!==o)return d.some(d.valFromOption(o));var i=e.parent;if(void 0===i)return;r=i}}function G(r,t){return I(r.contents,(function(r){var e=g.get(r.frames,t);if(void 0!==e)return c.isNone(e.proof)?4:5;var n=g.get(r.labelToHyp,t);if(void 0!==n)return 0===n.typ?2:3;var o=g.get(r.symToInt,t);return void 0!==o?o<0?0:1:void 0}))}function M(r,t){return c.getWithDefault(c.map(g.get(c.getExn(r.contents.root).symToInt,t),(function(r){return r<0})),!1)}function N(r,t){return c.getWithDefault(c.map(I(r.contents,(function(r){return g.get(r.symToInt,t)})),(function(r){return 0<=r})),!1)}function C(r,t){return c.isSome(I(r.contents,(function(r){return g.get(r.labelToHyp,t)})))}function D(r,t,e){var n=t<=e?t:e,o=t<=e?e:t,i=p.get(r,n);return void 0!==i&&m.has(d.valFromOption(i),o)}function U(r,t){p.forEach(r,(function(r,e){m.forEach(e,(function(e){n._2(t,r,e)}))}))}function j(r){var t=m.make(100);return p.forEach(r,(function(r,e){m.add(t,r),m.forEach(e,(function(r){m.add(t,r)}))})),t}function P(r,t,e,i,a,u){var s=void 0!==t&&t,v=[];U(r,(function(r,t){v.push([r,t])}));for(var l,h=function(t,e){var n={contents:!0};return t.forEach((function(t){n.contents&&e.forEach((function(e){n.contents&&t!==e&&(n.contents=D(r,t,e))}))})),n.contents},g=function(r,t){v.splice(v.findIndex((function(r){return b(r,t)})),1),t.forEach((function(t){r.includes(t)||r.push(t)}))},E=function(r){for(var t,e=0,n=v.length-2|0;e<=n;++e)if(c.isNone(t))for(var o=e+1|0,i=v.length;o<i;++o)if(c.isNone(t)){var a=f.get(v,e),u=f.get(v,o);h(a,u)&&(t=[a,u])}return t},x=!0;x;){var y=E();void 0!==y?g(y[0],y[1]):x=!1}if(s&&void 0!==i&&void 0!==a&&void 0!==e){var A=j(r),S=p.make(m.size(A)),k=p.make(m.size(A));m.forEach(A,(function(r){var t=n._1(i,r);void 0!==t&&p.set(S,r,t);var o=n._1(e,r);if(void 0!==o)return p.set(k,r,o)}));var w=o.createVarTypeComparator(S,d.valFromOption(a)),I=function(r,t){return o.createVarNameComparator(k,r,t)};l=function(r,t){return _.comparatorAndThen(w,I,r,t)}}else l=_.intCmp;return v.forEach((function(r){r.sort(n.__2(l))})),v.sort(T)}function R(r,t){var e=t.expr,n=e.length,o=n>0?f.get(e,0):0,i=n>1?f.get(e,1):0,a=p.get(r.exprToHyp,n);if(void 0===a)return p.set(r.exprToHyp,n,p.fromArray([[o,p.fromArray([[i,[t]]])]]));var u=d.valFromOption(a),s=p.get(u,o);if(void 0===s)return p.set(u,o,p.fromArray([[i,[t]]]));var c=d.valFromOption(s),v=p.get(c,i);return void 0===v?p.set(c,i,[t]):void 0!==v.find((function(r){return b(r.expr,t.expr)}))?void 0:void v.push(t)}function O(r,t){return I(r.contents,(function(r){return g.get(r.frames,t)}))}function F(r,t){return w(r.contents,(function(r){return _.arrForEach(r.hyps,t)}))}function V(r,t){return I(r.contents,(function(r){return g.get(r.symToInt,t)}))}function B(r,t){var e=V(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+t+"' is not declared."},Error:new Error}}function L(r,t){return t.map((function(t){return B(r,t)}))}function X(r,t){return t<0?u.get(c.getExn(r.contents.root).consts,0|-t):I(r.contents,(function(r){return t<r.varsBaseIdx?void 0:f.get(r.vars,t-r.varsBaseIdx|0)}))}function z(r,t){var e=X(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot convert "+String(t)+" to a symbol."},Error:new Error}}function W(r,t){return t.map((function(t){return z(r,t)}))}function q(r,t){return t.map((function(t){return z(r,t)})).join(" ")}function H(r,t,e){return e<0?X(r,e):u.get(t.frameVarToSymb,e)}function $(r,t,e){var n=H(r,t,e);if(void 0!==n)return n;throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not convert from int "+String(e)+" to a symbol."},Error:new Error}}function K(r,t,e){return e.map((function(e){return $(r,t,e)}))}function J(r,t){return I(r.contents,(function(r){return p.get(r.varTypes,t)}))}function Q(r,t){var e=J(r,t);if(void 0!==e)return e;var n=X(r,t),o=void 0!==n?"'"+n+"'":String(t);throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot determine type of the variable "+o},Error:new Error}}function Z(r,t,e,n,o){var i=void 0!==e&&e,a=m.make(16);return i||(void 0!==n?n.forEach((function(r){r.forEach((function(r){if(r>=0)return m.add(a,r)}))})):F(r,(function(r){1===r.typ&&r.expr.forEach((function(r){if(r>=0)return m.add(a,r)}))}))),t.forEach((function(r){if(r>=0)return m.add(a,r)})),a}function Y(r,t,e,n,o){var i=void 0!==e&&e,a=[];return F(r,(function(r){(1===r.typ&&!i&&c.isNone(n)||0===r.typ&&m.has(t,f.get(r.expr,1)))&&a.push(r)})),void 0!==n&&n.forEach((function(r,t){a.push({typ:1,label:String(t),expr:r})})),a}function rr(r){return c.getExn(r.contents.root).consts.slice(1)}function tr(r,t){return w(r.contents,(function(r){var e={contents:void 0};return g.forEach(r.frames,(function(r,o){c.isNone(e.contents)&&(e.contents=n._1(t,o))})),e.contents}))}function er(r){var t=r.parent;return void 0!==t?1+er(t)|0:0}function nr(r,t,e){var n=void 0!==t&&t,o=void 0!==r?r.contents:void 0,i={contents:{root:void 0,parent:o,consts:void 0!==o?[]:[""],varsBaseIdx:void 0!==o?o.varsBaseIdx+o.vars.length|0:0,vars:[],symToInt:g.make(0),disj:p.make(16),hyps:[],labelToHyp:g.make(4),exprToHyp:p.make(4),varTypes:p.make(4),lastComment:void 0,frames:g.make(1),totalNumOfFrames:void 0!==o?o.totalNumOfFrames:0,deprOrTranDeprFrms:E.make(1),debug:c.getWithDefault(c.map(o,(function(r){return r.debug})),n)}};return i.contents.root=void 0!==o?o.root:i.contents,i}function or(r){r.contents=nr(r,void 0).contents}function ir(r){var t,e=r.contents,n=e.parent;if(void 0===n)throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot close the root context."},Error:new Error};n.totalNumOfFrames=n.totalNumOfFrames+g.size(e.frames)|0,g.forEach(e.frames,(function(r,t){g.set(n.frames,r,t)}));var o=n.deprOrTranDeprFrms;E.forEach(e.deprOrTranDeprFrms,(function(r){return E.add(o,r)})),t=n,r.contents=t}function ar(r,t,e){if(""===t.trim())throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot use an empty string as a name of "+e+"."},Error:new Error};var n=G(r,t);if(void 0!==n)switch(n){case 0:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare the constant '"+t+"' as "+e+"."},Error:new Error};case 1:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare the variable '"+t+"' as "+e+"."},Error:new Error};case 2:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare a floating label '"+t+"' as "+e+"."},Error:new Error};case 3:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare an essential label '"+t+"' as "+e+"."},Error:new Error};case 4:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare an axiom label '"+t+"' as "+e+"."},Error:new Error};case 5:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare a provable label '"+t+"' as "+e+"."},Error:new Error}}}function ur(r,t){if(t<0)return t;var e=p.get(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot determine frame variable for the context variable "+String(t)+"."},Error:new Error}}function fr(r,t){return t.map((function(t){return ur(r,t)}))}function sr(r,t){var e=p.make(16);return U(t,(function(t,n){k(e,ur(r,t),ur(r,n))})),s.fromArray(p.toArray(e).map((function(r){return[r[0],v.fromArray(m.toArray(r[1]))]})))}function cr(r,t){return c.getWithDefault(c.map(t,(function(t){return t.test(r)})),!1)}function vr(r,t,e,n){return!!c.getWithDefault(c.map(r,(function(r){return cr(r,e)})),!1)||cr(t,n)}function dr(r,t){if(void 0===t)return!1;var e=t.labels;return c.getWithDefault(w(r.contents,(function(r){if(e.some((function(t){return E.has(r.deprOrTranDeprFrms,t)})))return!0})),!1)}function lr(r,t){var e=u.make(r,-1);if(t.forEach((function(t,n){if(0===t.typ){var o=f.get(t.expr,1);if(o>=r)throw{RE_EXN_ID:a.MmException,_1:{msg:"Internal error: hyp.expr[1] >= numOfVars"},Error:new Error};f.set(e,o,n)}})),e.some((function(r){return r<0})))throw{RE_EXN_ID:a.MmException,_1:{msg:"Internal error: varHyps->Js.Array2.some(idx => idx < 0)"},Error:new Error};return e}function pr(r,t,e,n,o,i,u,s,v,d,l,h,g,E,_,x){var y=void 0!==s&&s,b=void 0!==v&&v,T=void 0!==d&&d;if(ar(r,n,void 0!==u?u:"a frame"),o.length<1)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of an assertion expression must be at least 1."},Error:new Error};if(!b&&!M(r,f.get(o,0)))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in an assertion expression must be a constant."},Error:new Error};var A=o.find((function(t){return c.isNone(V(r,t))}));if(void 0!==A)throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+A+"' must be either a constant or a variable."},Error:new Error};var S=o.map((function(t){return B(r,t)})),w=Z(r,S,y,l),G=m.toArray(w),N=T?p.make(16):function(r,t){var e=p.make(16);return I(r.contents,(function(r){p.forEach(r.disj,(function(r,n){if(m.has(t,r))return m.forEach(n,(function(n){if(m.has(t,n))return k(e,r,n)}))}))})),e}(r,w),C=Y(r,w,y,l),D=p.fromArray(G.map((function(r,t){return[r,t]}))),U=r.contents.lastComment,j=C.map((function(r){return{typ:r.typ,label:r.label,expr:fr(D,r.expr)}})),R=G.length;return{ord:t,isAxiom:e,disj:sr(D,N),hyps:j,asrt:fr(D,S),label:n,frameVarToSymb:G.map((function(t){return z(r,t)})),varTypes:G.map((function(t){return Q(r,t)})),varHyps:lr(R,j),numOfVars:R,numOfArgs:C.length,descr:U,proof:i,isDisc:vr(U,n,h,g),isDepr:vr(U,n,E,_),isTranDepr:dr(r,i),dbg:r.contents.debug?{disj:P(N,void 0,void 0,void 0,void 0).map((function(t){return q(r,t)})),hyps:C.map((function(t){return q(r,t.expr)})),asrt:q(r,S)}:void 0}}function mr(r,t,e,n,o,i,a,u,f,s){var v=r.contents,d=pr(r,v.totalNumOfFrames,t,e,n,o,c.isNone(o)?"an axiom":"a theorem",void 0,void 0,void 0,void 0,i,a,u,f);if(g.set(v.frames,e,d),v.totalNumOfFrames=v.totalNumOfFrames+1|0,d.isDepr||d.isTranDepr)return E.add(v.deprOrTranDeprFrms,e)}function hr(r,t,e,n,o,i,u){switch(0|t.TAG){case 0:var s=t.text;return void(r.contents.lastComment=s);case 1:return void t.symbols.forEach((function(t){if(c.isSome(r.contents.parent))throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to declare a constant '"+t+"' in an inner block."},Error:new Error};ar(r,t,"a constant");var e=r.contents;g.set(e.symToInt,t,0|-e.consts.length),e.consts.push(t)}));case 2:throw{RE_EXN_ID:a.MmException,_1:{msg:"Block statements are not accepted by applySingleStmt()."},Error:new Error};case 3:return void t.symbols.forEach((function(t){ar(r,t,"a variable");var e=r.contents;g.set(e.symToInt,t,e.varsBaseIdx+e.vars.length|0),e.vars.push(t)}));case 4:var v=t.vars,d=v.find((function(t){return!N(r,t)}));if(void 0!==d)throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+d+"' is not a variable but it is used in a disjoint statement."},Error:new Error};for(var l=v.map((function(t){return B(r,t)})),m=l.length-1|0,h=0;h<=m;++h)for(var E=h+1|0;E<=m;++E)k(r.contents.disj,f.get(l,h),f.get(l,E));return;case 5:var _=t.label,x=t.expr;if(2!==x.length)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of a floating expression must be 2."},Error:new Error};ar(r,_,"a floating label");var y=f.get(x,0),b=f.get(x,1);if(!M(r,y))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in the floating '"+y+"' must be a constant."},Error:new Error};if(!N(r,b))throw{RE_EXN_ID:a.MmException,_1:{msg:"The second symbol in the floating '"+b+"' must be a variable."},Error:new Error};var T=B(r,b);if(c.isSome(J(r,T)))throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot redefine typecode for the variable '"+b+"'"},Error:new Error};var A=B(r,y),S={typ:0,label:_,expr:[A,T]},w=r.contents;return w.hyps.push(S),g.set(w.labelToHyp,_,S),R(w,S),p.set(w.varTypes,T,A);case 6:var I=t.label,G=t.expr;if(G.length<1)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of an essential expression must be at least 1."},Error:new Error};if(!M(r,f.get(G,0)))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in an essential expression must be a constant."},Error:new Error};var C={typ:1,label:I,expr:L(r,G)},D=r.contents;return D.hyps.push(C),g.set(D.labelToHyp,I,C),R(D,C);case 7:return mr(r,!0,t.label,t.expr,void 0,e,n,o,i);case 8:return mr(r,!1,t.label,t.expr,t.proof,e,n,o,i)}}function gr(r,t){return c.getWithDefault(p.get(r,t),t)}function Er(r,t){for(var e=t.length-1|0,n=0;n<=e;++n){var o=f.get(t,n);o<0&&f.set(t,n,gr(r,o))}}function _r(r,t,e){return{ord:r.ord,isAxiom:r.isAxiom,disj:r.disj,hyps:r.hyps,asrt:r.asrt,label:r.label,frameVarToSymb:r.frameVarToSymb,varTypes:r.varTypes,varHyps:r.varHyps,numOfVars:r.numOfVars,numOfArgs:r.numOfArgs,descr:t?void 0:r.descr,proof:e?void 0:r.proof,isDisc:r.isDisc,isDepr:r.isDepr,isTranDepr:r.isTranDepr,dbg:r.dbg}}function xr(r,t,e){var n=function(r){var n=r.parent;return{root:r.root,parent:r.parent,consts:r.consts,varsBaseIdx:r.varsBaseIdx,vars:r.vars,symToInt:r.symToInt,disj:r.disj,hyps:r.hyps,labelToHyp:r.labelToHyp,exprToHyp:r.exprToHyp,varTypes:r.varTypes,lastComment:t?void 0:r.lastComment,frames:g.fromArray(g.toArray(r.frames).map((function(r){return[r[0],_r(r[1],t,e)]}))),totalNumOfFrames:void 0!==n?n.totalNumOfFrames+g.size(r.frames)|0:g.size(r.frames),deprOrTranDeprFrms:E.make(0),debug:r.debug}},o=r.parent;if(void 0!==o){var i=xr(o,t,e),a=i[0],u=n(r);return[a,{root:a,parent:i[1],consts:u.consts,varsBaseIdx:u.varsBaseIdx,vars:u.vars,symToInt:u.symToInt,disj:u.disj,hyps:u.hyps,labelToHyp:u.labelToHyp,exprToHyp:u.exprToHyp,varTypes:u.varTypes,lastComment:u.lastComment,frames:u.frames,totalNumOfFrames:u.totalNumOfFrames,deprOrTranDeprFrms:u.deprOrTranDeprFrms,debug:u.debug}]}var f=n(r);return f.root=f,[f,f]}function yr(r,t){return L(r,W(r,t).sort())}function br(r,t){var e=m.fromArray(L(r,rr(r))),n=m.size(e),i=m.make(n),a=m.make(n);tr(r,(function(r){var t=f.get(r.asrt,1);t<0&&m.add(i,t);var e=f.get(r.asrt,r.asrt.length-1|0);e<0&&m.add(a,e)}));var s=m.fromArray(m.toArray(i).filter((function(r){return m.has(a,r)})));m.forEach(s,(function(r){return m.remove(i,r)})),m.forEach(s,(function(r){return m.remove(a,r)}));var v=o.getSpaceSeparatedValuesAsArray(t).map((function(t){return V(r,t)})).filter((function(r){return c.mapWithDefault(r,!1,(function(r){return r<0}))})).map(c.getExn);v.forEach((function(r){m.remove(i,r),m.remove(s,r),m.remove(a,r)}));var d=m.fromArray(m.toArray(e).filter((function(r){return!(v.includes(r)||m.has(i,r)||m.has(s,r)||m.has(a,r))}))),l=u.concatMany([v,yr(r,m.toArray(i)),yr(r,m.toArray(s)),yr(r,m.toArray(a)),yr(r,m.toArray(d))]),p=0|-v.length,h=p-1|0,g=(1+(h-m.size(i)|0)|0)-1|0,E=1+(g-m.size(s)|0)|0,_=1+((E-1|0)-m.size(a)|0)|0;return{allConsts:W(r,l),parenMin:p,canBeFirstMin:E,canBeFirstMax:h,canBeLastMin:_,canBeLastMax:g}}t.createContext=nr,t.applySingleStmt=hr,t.openChildContext=or,t.closeChildContext=ir,t.resetToParentContext=function(r){var t,e=r.contents.parent;if(void 0===e)throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot reset the root context."},Error:new Error};t=e,r.contents=t},t.loadContext=function(r,t,e,o,i,u,f,s,c,v,l,p,m){var h=void 0!==e?e:"",g=void 0!==o?o:"",E=void 0!==u?u:-1,_=void 0!==l?l:function(r){},y=void 0!==p&&p,b={contents:0},T=x.progressTrackerMake(.1,void 0,_,void 0,void 0);return a.traverseAst(void 0!==t?t:nr(void 0,y),r,(function(r,t){void 0!==i&&n._2(i,r,t.stmt);var e=t.stmt;switch(0|e.TAG){case 2:return e.level>0&&or(r),void(r.contents.lastComment=void 0);case 7:case 8:break;default:return}if(E>0&&(b.contents=b.contents+1,x.progressTrackerSetCurrPct(T,b.contents/E)),h===e.label)return d.some(void 0)}),(function(r,t){var e=t.stmt;2!==e.TAG&&hr(r,e,f,s,c,v)}),(function(r,t){var e=t.stmt;switch(0|e.TAG){case 2:return void(e.level>0&&ir(r));case 7:case 8:break;default:return}if(g===e.label)return d.some(void 0)}),void 0)[0]},t.ctxOptimizeForProver=function(r,t,e,n,o){var i=void 0===e||e,a=void 0===n||n,u={contents:xr(r.contents,i,a)[1]};return function(r,t){for(var e=c.getExn(r.contents.root),n=t.slice(),o=-1,i=0|-(e.consts.length-1|0);o>=i;--o)n.includes(o)||n.push(o);var a=e.consts.slice(),u=p.make(e.consts.length);n.forEach((function(r,t){var n=f.get(a,0|-r),o=0|-(t+1|0);p.set(u,r,o),f.set(e.consts,0|-o,n),g.set(e.symToInt,n,o)})),F(r,(function(r){Er(u,r.expr)})),tr(r,(function(r){r.hyps.forEach((function(r){Er(u,r.expr)})),Er(u,r.asrt),Er(u,r.varTypes)})),w(r.contents,(function(r){for(var t=r.vars.length-1|0,e=0;e<=t;++e){var n=r.varsBaseIdx+e|0,o=p.get(r.varTypes,n);void 0!==o&&p.set(r.varTypes,n,gr(u,o))}p.clear(r.exprToHyp),r.hyps.forEach((function(t){return R(r,t)}))}))}(u,L(u,br(u,t).allConsts)),u},t.ctxGetOptimizedConstsOrder=br,t.isDebug=function(r){return r.contents.debug},t.isConst=M,t.isVar=N,t.isHyp=C,t.isAsrt=function(r,t){return c.isSome(I(r.contents,(function(r){return g.get(r.frames,t)})))},t.isDisj=function(r,t,e){return c.getWithDefault(I(r.contents,(function(r){if(D(r.disj,t,e))return!0})),!1)},t.getAllConsts=rr,t.getHypothesis=function(r,t){return I(r.contents,(function(r){return g.get(r.labelToHyp,t)}))},t.getHypByExpr=function(r,t){return I(r.contents,(function(r){var e=t.length,n=p.get(r.exprToHyp,e);if(void 0!==n){var o=e>0?f.get(t,0):0,i=p.get(d.valFromOption(n),o);if(void 0!==i){var a=e>1?f.get(t,1):0,u=p.get(d.valFromOption(i),a);return void 0!==u?d.undefined_to_opt(u.find((function(r){return b(r.expr,t)}))):void 0}}}))},t.getMandHyps=function(r,t,e,n,o){var i=void 0!==e&&e;return Y(r,Z(r,t,i,n),i,n)},t.getAllHyps=function(r){var t=[];return F(r,(function(r){t.push(r)})),l.fromArray(t.map((function(r){return[r.label,r]})))},t.getAllFrames=function(r){var t=[];return I(r.contents,(function(r){g.forEach(r.frames,(function(r,e){t.push([r,e])}))})),l.fromArray(t)},t.getAllFramesArr=function(r){var t=[];return I(r.contents,(function(r){h.spliceObjApply(t,"push",[g.valuesToArray(r.frames)])})),t},t.getAllDisj=function(r){var t=p.make(16);return I(r.contents,(function(r){p.forEach(r.disj,(function(r,e){m.forEach(e,(function(e){k(t,r,e)}))}))})),t},t.getLocalDisj=function(r){var t=p.make(16);return p.forEach(r.contents.disj,(function(r,e){m.forEach(e,(function(e){k(t,r,e)}))})),t},t.getFrame=O,t.getFrameExn=function(r,t){var e=O(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not find a frame by the label '"+t+"'"},Error:new Error}},t.frameIsAllowed=function(r,t){return!(r.isDisc&&!t.useDisc||r.isDepr&&!t.useDepr)&&(!r.isTranDepr||t.useTranDepr)},t.getLocalVars=function(r){return r.contents.vars.slice()},t.getLocalHyps=function(r){return r.contents.hyps.slice()},t.getNumOfVars=function(r){return r.contents.varsBaseIdx+r.contents.vars.length|0},t.forEachFrame=tr,t.forEachHypothesisInDeclarationOrder=F,t.getNestingLevel=function(r){return er(r.contents)},t.findParentheses=function(r,t,e){for(var n=function(r,t,e){for(var n=!0,o=!1,i=!1,a=y.parenCntMake([t,e],!1,void 0),u=0,s=r.length,c=0;c<s&&n;){for(var v=f.get(r,c),d=v.length,l=0;l<d&&n;){var p=f.get(v,l);o||p!==t||(o=!0),i||p!==e||(i=!0),n=2!==(u=y.parenCntPut(a,p)),l=l+1|0}n=0===u,c=c+1|0}return!(!n||!o)&&i},i=function(r){var t=[];return tr(r,(function(r){r.hyps.forEach((function(r){1!==r.typ||t.push(r.expr)})),t.push(r.asrt)})),t}(r),a=L(r,o.getSpaceSeparatedValuesAsArray('( ) [ ] { } [. ]. [_ ]_ <. >. <" "> << >> [s ]s (. ). (( ))').filter((function(t){return M(r,t)}))).concat(u.range(1,c.getExn(r.contents.root).consts.length-1|0).map((function(r){return 0|-r}))),s=a.length-2|0,v=x.progressTrackerMake(.01,void 0,t,void 0,void 0),d=[],l=0;l<=s;++l){var p=f.get(a,l),m=f.get(a,l+1|0);d.includes(p)||d.includes(m)||!n(i,p,m)||(d.push(p),d.push(m)),x.progressTrackerSetCurrPct(v,l/s)}return d},t.getTypeOfVar=J,t.getTypeOfVarExn=Q,t.getTokenType=G,t.ctxSymToInt=V,t.ctxIntToSym=X,t.ctxSymToIntExn=B,t.ctxSymsToIntsExn=L,t.ctxStrToIntsExn=function(r,t){return L(r,o.getSpaceSeparatedValuesAsArray(t))},t.ctxIntToSymExn=z,t.ctxIntsToSymsExn=W,t.ctxIntsToStrExn=q,t.frmIntToSym=H,t.frmIntToSymExn=$,t.frmIntsToStrExn=function(r,t,e){return K(r,t,e).join(" ")},t.frmIntsToSymsExn=K,t.createFrame=pr,t.generateNewVarNames=function(r,t,e,n,o){for(var i=void 0!==e?d.valFromOption(e):void 0,a=g.make(l.size(i)),u=function(r){return c.getWithDefault(g.get(a,r),0)},s=function(r){g.set(a,r,u(r)+1|0)},v=t.length-1|0,p=[],m=0;m<=v;++m){var h=z(r,f.get(t,m)),_=l.getWithDefault(i,h,h);s(_);for(var x={contents:_+String(u(_))};c.isSome(G(r,x.contents))||c.getWithDefault(c.map(n,function(r){return function(t){return E.has(t,r.contents)}}(x)),!1);)s(_),x.contents=_+String(u(_));p.push(x.contents)}return p},t.generateNewLabels=function(r,t,e,n,o,i){for(var a=void 0!==o&&o,u=function(t){return!!(c.getWithDefault(c.map(n,(function(r){return E.has(r,t)})),!1)||!a&&c.isSome(G(r,t)))||!!a&&C(r,t)},f=e-1|0,s=0,v=[],d=0;d<=f;++d){s=s+1|0;for(var l=t+String(s);u(l);)s=s+1|0,l=t+String(s);v.push(l)}return v},t.disjMake=function(r){return p.make(16)},t.disjAddPair=k,t.disjContains=D,t.disjImmContains=function(r,t,e){var n=t<=e?t:e,o=t<=e?e:t,i=s.get(r,n);return void 0!==i&&v.has(d.valFromOption(i),o)},t.disjToArr=P,t.disjForEachArr=function(r,t,e,o,i,a){P(r,void 0!==t&&t,e,o,i).forEach(n.__1(a))},t.disjForEach=U,t.disjIsEmpty=function(r){return 0===p.size(r)},t.disjMutToDisjImm=function(r){return s.fromArray(p.toArray(r).map((function(r){return[r[0],v.fromArray(m.toArray(r[1]))]})))},t.disjGetAllVars=j,t.exprEq=b,t.ExprCmp=A,t.ExprHash=S},1854:function(r,t,e){var n=e(8371),o=e(1748);t.parenCntMake=function(r,t,e,o,i){if(r%2!=0)throw{RE_EXN_ID:n.MmException,_1:{msg:"mod(parenMin, 2)  != 0 in parenCntMake"},Error:new Error};return{stack:new Array(1e3),len:0,failed:!1,parenMin:r,canBeFirstMin:t,canBeFirstMax:e,canBeLastMin:o,canBeLastMax:i}},t.parenCntReset=function(r){r.len=0,r.failed=!1},t.parenCntPut=function(r,t){return r.failed?2:r.parenMin<=t&&t<0?t%2==-1?(function(r,t){if(r.stack.length===r.len)for(var e=1;e<=1e3;++e)r.stack.push(0);o.set(r.stack,r.len,t),r.len=r.len+1|0}(r,t),1):0===r.len||o.get(r.stack,r.len-1|0)!==(t+1|0)?(r.failed=!0,2):(r.len=r.len-1|0,0===r.len?0:1):0===r.len?0:1},t.parenCntCanBeFirst=function(r,t){return 0<=t||r.parenMin<t&&t%2==-1||r.canBeFirstMin<=t&&t<=r.canBeFirstMax},t.parenCntCanBeLast=function(r,t){return 0<=t||r.parenMin<=t&&t%2==0||r.canBeLastMin<=t&&t<=r.canBeLastMax}},8674:function(r,t,e){var n=e(8371),o=e(1748),i=e(3216);t.parenCntMake=function(r,t,e){var i=void 0===t||t,a=r.length;if(a%2!=0)throw{RE_EXN_ID:n.MmException,_1:{msg:"mod(parenLen, 2)  != 0 in parenCntMake"},Error:new Error};if(0===a)return{min:0,parens:[],parentStack:[],failed:!1};for(var u=[],f=(a/2|0)-1|0,s=0;s<=f;++s){var c=o.get(r,s<<1),v=o.get(r,1+(s<<1)|0);u.push({code:c,isOpen:!0,opposite:v}),u.push({code:v,isOpen:!1,opposite:c})}var d=r.reduce((function(r,t){return r<=t?r:t}),o.get(r,0));return i&&Math.abs(d)!==a&&console.log("Warning: parentheses are not optimized (this may slow down the unification process)."),{min:d,parens:u,parentStack:[],failed:!1}},t.parenCntReset=function(r){i.clearArray(r.parentStack),r.failed=!1},t.parenCntPut=function(r,t){if(!r.failed&&r.min<=t&&t<0){var e=r.parens.find((function(r){return r.code===t}));if(void 0!==e)if(e.isOpen)r.parentStack.push(e);else{var n=r.parentStack.pop();void 0!==n&&n.opposite===e.code||(r.failed=!0)}}return r.failed?2:0===r.parentStack.length?0:1}},8371:function(r,t,e){var n=e(6517),o=e(7175),i=e(6181),a=e(3533),u=e(1611),f=e(4125),s=i.create("MM_parser.MmException");function c(r){return" "===r||"\t"===r||"\n"===r||"\r"===r}function v(r,t){var e=(t+20|0)<r.length?"...":"";return"'"+r.substr(t,20)+e+"'"}function d(r,t,e,n,o,i){return u.traverseTree(r,t,(function(r,t){var e=t.stmt;if(2===e.TAG)return e.statements}),e,n,o,void 0)}function l(r){return void 0!==r?0===r.TAG?r.labels.join(" "):"( "+r.labels.join(" ")+" ) "+r.compressedProofBlock:"?"}function p(r){var t=r.stmt;switch(0|t.TAG){case 0:return"$( "+t.text+" $)";case 1:return"$c "+t.symbols.join(" ")+" $.";case 2:return"block(level="+String(t.level)+")";case 3:return"$v "+t.symbols.join(" ")+" $.";case 4:return"$d "+t.vars.join(" ")+" $.";case 5:return t.label+" $f "+t.expr.join(" ")+" $.";case 6:return t.label+" $e "+t.expr.join(" ")+" $.";case 7:return t.label+" $a "+t.expr.join(" ")+" $.";case 8:return t.label+" $p "+t.expr.join(" ")+" $= "+l(t.proof)+" $."}}t.MmException=s,t.parseMmFile=function(r,t,e,i,u){var d=void 0!==t&&t,l=void 0!==e&&e,p=void 0!==i?i:function(r){},m=r.length,h={contents:0},g={contents:!1},E={contents:""},_=f.progressTrackerMake(.1,void 0,p,!0,void 0),x=[],y=function(t){h.contents=t,h.contents>=m?(g.contents=!0,E.contents=""):(g.contents=!1,E.contents=r.charAt(h.contents))};y(0);var b=function(t){if(!g.contents)return h.contents=h.contents+1|0,void(h.contents>=m?(g.contents=!0,E.contents=""):E.contents=r.charAt(h.contents))},T=function(t){var e=function(t){for(var e,i=h.contents;n.isNone(e);){var a=r.indexOf("$)",h.contents);if(a<0)e=o.some(void 0);else y(a+2|0),g.contents||c(E.contents)?e=o.some(r.substring(i,a)):y(a+1|0)}return n.getExn(e)}();if(void 0!==e)return{begin:t,end:h.contents-1|0,stmt:{TAG:0,text:e}};throw{RE_EXN_ID:s,_1:{msg:"A comment is not closed at "+v(r,t)},Error:new Error}},A=function(t,e){if(void 0===t||t){for(var n=A(!1,void 0);"$("===n;)T(h.contents),n=A(!1,void 0);return n}!function(r){for(;!g.contents&&c(E.contents);)b()}();for(var o=h.contents;!g.contents&&!c(E.contents);)b();return r.substring(o,h.contents)},S=function(r){for(var t,e=[];n.isNone(t);){var i=A(void 0,void 0);""===i?t=o.some(void 0):"$("===i?T(h.contents):i===r?t=o.some(e):e.push(i)}return n.getExn(t)},k=function(t){var e=S("$.");if(void 0!==e)return{begin:t,end:h.contents-1|0,stmt:{TAG:1,symbols:e}};throw{RE_EXN_ID:s,_1:{msg:"A constant statement is not closed at "+v(r,t)},Error:new Error}},w=function(t){var e=S("$.");if(void 0!==e)return{begin:t,end:h.contents-1|0,stmt:{TAG:3,symbols:e}};throw{RE_EXN_ID:s,_1:{msg:"A variable statement is not closed at "+v(r,t)},Error:new Error}},I=function(t){var e=S("$.");if(void 0!==e)return{begin:t,end:h.contents-1|0,stmt:{TAG:4,vars:e}};throw{RE_EXN_ID:s,_1:{msg:"A disjoint statement is not closed at "+v(r,t)},Error:new Error}},G=function(t,e){var n=S("$.");if(void 0!==n)return{begin:t,end:h.contents-1|0,stmt:{TAG:5,label:e,expr:n}};throw{RE_EXN_ID:s,_1:{msg:"A floating statement is not closed at "+v(r,t)},Error:new Error}},M=function(t,e){var n=S("$.");if(void 0!==n)return{begin:t,end:h.contents-1|0,stmt:{TAG:6,label:e,expr:n}};throw{RE_EXN_ID:s,_1:{msg:"An essential statement is not closed at "+v(r,t)},Error:new Error}},N=function(t,e){var n=S("$.");if(void 0!==n)return{begin:t,end:h.contents-1|0,stmt:{TAG:7,label:e,expr:n}};throw{RE_EXN_ID:s,_1:{msg:"An axiom statement is not closed at "+v(r,t)},Error:new Error}},C=function(t,e){var n=S("$=");if(void 0!==n){var o=A(void 0,void 0);if("("===o){var i=S(")");if(void 0!==i){var u=S("$.");if(void 0!==u)return{begin:t,end:h.contents-1|0,stmt:{TAG:8,label:e,expr:n,proof:l?void 0:{TAG:1,labels:i,compressedProofBlock:a.spliceObjApply("","concat",[u])}}};throw{RE_EXN_ID:s,_1:{msg:"A probale statement is not closed[3] at "+v(r,t)},Error:new Error}}throw{RE_EXN_ID:s,_1:{msg:"A provable statement is not closed[2] at "+v(r,t)},Error:new Error}}var f=S("$.");if(void 0!==f)return{begin:t,end:h.contents-1|0,stmt:{TAG:8,label:e,expr:n,proof:l?void 0:{TAG:0,labels:[o].concat(f)}}};throw{RE_EXN_ID:s,_1:{msg:"A provable statement is not closed[4] at "+v(r,t)},Error:new Error}}throw{RE_EXN_ID:s,_1:{msg:"A provable statement is not closed[1] at "+v(r,t)},Error:new Error}},D=function(t,e){for(var o,i=[];n.isNone(o);){var a=A(!1,void 0),u=h.contents-a.length|0;if(""===a){if(0!==e)throw{RE_EXN_ID:s,_1:{msg:"Unexpected end of a block. The block begins at "+v(r,t)+" and is not closed."},Error:new Error};o={begin:t,end:h.contents-1|0,stmt:{TAG:2,level:e,statements:i}}}else if("$}"===a)o={begin:t,end:h.contents-1|0,stmt:{TAG:2,level:e,statements:i}};else if("${"===a){var c=D(u,e+1|0);i.push(c)}else if("$("===a){var l=T(u);d||i.push(l)}else if("$c"===a){var p=k(u);i.push(p)}else if("$v"===a){var g=w(u);i.push(g)}else if("$d"===a){var E=I(u);i.push(E)}else{var y=A(void 0,void 0),b=h.contents-y.length|0;if(""===y)throw{RE_EXN_ID:s,_1:{msg:"Unexpected end of file at "+v(r,u)},Error:new Error};if("$f"===y){var S=G(u,a);i.push(S)}else if("$e"===y){var U=M(u,a);i.push(U)}else if("$a"===y){x.push(a);var j=N(u,a);i.push(j)}else{if("$p"!==y)throw{RE_EXN_ID:s,_1:{msg:"Unexpected token '"+y+"' at "+v(r,b)},Error:new Error};x.push(a);var P=C(u,a);i.push(P)}}f.progressTrackerSetCurrPct(_,u/m)}return n.getExn(o)};return[D(h.contents,0),x]},t.textAt=v,t.traverseAst=d,t.stmtToStr=p,t.stmtToStrRec=function(r){return d([{contents:0},[]],r,(function(r,t){var e=r[0],n=t.stmt;if(2===n.TAG){var o=n.level;0!==o&&r[1].push("    ".repeat(e.contents)+"${"),e.contents=o}}),(function(r,t){var e;""!==(e=2===t.stmt.TAG?"":p(t))&&r[1].push("    ".repeat(r[0].contents)+e)}),(function(r,t){var e=r[0],n=t.stmt;if(2===n.TAG){var o=n.level;e.contents=o-1|0,0!==o&&r[1].push("    ".repeat(e.contents)+"$}")}}))[0][1]},t.astToStr=function(r){var t=[];return d(void 0,r,(function(r,e){var n=e.stmt;2===n.TAG&&n.level>0&&t.push("${")}),(function(r,e){var n=e.stmt;switch(0|n.TAG){case 0:t.push("$( "+n.text+" $)");break;case 1:var o="$c "+n.symbols.join(" ")+" $.";t.push(o);break;case 2:break;case 3:var i="$v "+n.symbols.join(" ")+" $.";t.push(i);break;case 4:var a="$d "+n.vars.join(" ")+" $.";t.push(a);break;case 5:var u=n.label+" $f "+n.expr.join(" ")+" $.";t.push(u);break;case 6:var f=n.label+" $e "+n.expr.join(" ")+" $.";t.push(f);break;case 7:var s=n.label+" $a "+n.expr.join(" ")+" $.";t.push(s);break;case 8:var c=n.label+" $p "+n.expr.join(" ")+" $= "+l(n.proof)+" $.";t.push(c)}}),(function(r,e){var n=e.stmt;2===n.TAG&&n.level>0&&t.push("$}")})),t.join("\n")}},4530:function(r,t,e){var n=e(1386),o=e(4763),i=e(4923),a=e(8371),u=e(1748),f=e(3942),s=e(6517),c=e(7356),v=e(7659),d=e(1611),l=e(6310),p=e(2275);function m(r,t,e){var n=r.length;return e<=n?r:r+t.repeat(e-n|0)}function h(r){return r.map((function(r){return r.length})).reduce((function(r,t){return Math.max(r,t)}),0)}function g(r,t){var e=t.map((function(r){var t=r.proof;return 0===t.TAG?"":t.args.map((function(r){return r+1|0})).join(",")})),n=t.map((function(r){var t=r.proof;return t.TAG,t.label})),i=t.map((function(t){return f.ctxIntsToStrExn(r,t.expr)})),a=1+(o.floor_int(Math.log10(t.length))+1|0)|0,s=h(e)+1|0,c=h(n)+1|0;return t.map((function(r,t){return o=String(t+1|0)," ",((f=a)<=(v=o.length)?o:" ".repeat(f-v|0)+o)+"| "+m(u.get(e,t)," ",s)+"| "+m(u.get(n,t)," ",c)+"| "+u.get(i,t);var o,f,v}))}function E(r,t,e){var n=g(r,t);return m("--- "+e+" ","-",h(n))+"\n"+n.join("\n")+"\n"+m("","-",h(n))}function _(r,t,e,o){var i=v.make(64);d.traverseTree(void 0,t,(function(t,e){var n=u.get(r,e).proof;return 0===n.TAG||v.has(i,e)?void 0:n.args}),void 0,void 0,(function(t,a){0===u.get(r,a).proof.TAG?n._1(e,a):v.has(i,a)?n._1(o,a):(v.add(i,a),n._1(e,a))}),void 0)}t.createProof=function(r,t,e){if(t.length<=e)throw{RE_EXN_ID:a.MmException,_1:{msg:"tblLen <= rootIdx"},Error:new Error};var n=r.length,o=p.fromArray(r.map((function(r,t){return[r.label,t+1|0]}))),i=[],f=p.make(64),d=function(r,t){var e=v.make(64);return _(r,t,(function(r){}),(function(r){v.add(e,r)})),e}(t,e),m=c.make(64),h=[];_(t,e,(function(r){var e,a=u.get(t,r).proof;if(a.TAG,e=function(r){var t=p.get(o,r);if(void 0!==t)return t;var e=p.get(f,r);if(void 0!==e)return e;i.push(r);var a=n+i.length|0;return p.set(f,r,a),a}(a.label),h.push(e),v.has(d,r))return h.push(0),c.set(m,r,c.size(m)+1|0)}),(function(r){h.push(0|-s.getExn(c.get(m,r)))}));var g=n+i.length|0;return{TAG:1,labels:i,compressedProofBlock:h.map((function(r){return 0===r?"Z":r<0?l.intToCompressedProofStr(g-r|0):l.intToCompressedProofStr(r)})).join("")}},t.createProofTableFromProof=function(r,t,e){var n=void 0===t||t,o=c.make(l.proofNodeGetId(r)),u=[],v=function(r,t,e){var n=u.push({expr:t,proof:e})-1|0;c.set(o,r,n)},p=function(r,t,e){if(s.isSome(c.get(o,r)))throw{RE_EXN_ID:a.MmException,_1:{msg:"getIdxByNodeId(nodeId)->Belt_Option.isSome in createProofTableFromProof()"},Error:new Error};if(!n)return v(r,t,e);var d=u.findIndex((function(r){return!!f.exprEq(r.expr,t)&&i.equal(r.proof,e)}));return-1!==d?c.set(o,r,d):v(r,t,e)};return d.traverseTree(void 0,r,(function(r,t){return 0===t.TAG?void 0:t.args}),void 0,void 0,(function(r,t){if(0===t.TAG){var e=t.id;s.isNone(c.get(o,e))&&p(e,t.expr,{TAG:0,label:t.hypLabel})}else{var n=t.id;s.isNone(c.get(o,n))&&p(n,t.expr,{TAG:1,args:t.args.map((function(r){var t=l.proofNodeGetId(r),e=c.get(o,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not determine idx by nodeId in createProofTableFromProof()."},Error:new Error}})),label:t.asrtLabel})}}),void 0),u},t.proofTableToArrStr=g,t.proofTableToStr=E,t.proofTablePrint=function(r,t,e){console.log(E(r,t,e))}},335:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(1748),u=e(3942),f=e(6517),s=e(7175),c=e(2815),v=e(9775),d=e(5082),l=e(5650),p=e(2275);function m(r){if("number"==typeof r)return!0;switch(0|r.TAG){case 0:return!0;case 1:return r.args.every((function(r){return f.isSome(r.proof)}));case 2:return!1}}function h(r){var t=r.pnDbg;return void 0!==t?t.exprStr:r.expr.map((function(r){return String(r)})).join(" ")}function g(r){var t=r.fParents,e=void 0!==t?s.undefined_to_opt(t.find(m)):void 0;return f.isSome(e)?e:s.undefined_to_opt(r.eParents.find(m))}t.ptMake=function(r,t,e,n,o,i){var a=d.toArray(t);return{frms:r,hypsByExpr:c.fromArray(a.map((function(r){var t=r[1];return[t.expr,t]})),u.ExprHash),hypsByLabel:p.fromArray(a),ctxMaxVar:e,ctxDisj:n,maxVar:e,newVars:v.make(16,u.ExprHash),parenCnt:o,nextNodeId:0,nodes:c.make(128,u.ExprHash),rootStmts:[],syntaxProofs:c.make(128,u.ExprHash),ptDbg:f.map(i,(function(r){return{newVars:[],exprToStr:r}}))}},t.ptGetFrms=function(r){return r.frms},t.ptGetHypByExpr=function(r,t){return c.get(r.hypsByExpr,t)},t.ptGetHypByLabel=function(r,t){return p.get(r.hypsByLabel,t)},t.ptGetMaxVar=function(r){return r.maxVar},t.ptGetCtxMaxVar=function(r){return r.ctxMaxVar},t.ptGetParenCnt=function(r){return r.parenCnt},t.ptIsDisjInCtx=function(r,t,e){return u.disjContains(r.ctxDisj,t,e)},t.ptIsNewVarDef=function(r,t){return v.has(r.newVars,t)},t.ptGetRootStmts=function(r){return r.rootStmts},t.ptGetNode=function(r,t){var e=c.get(r.nodes,t);if(void 0!==e)return e;var o={id:r.nextNodeId,expr:t,fParents:void 0,eParents:[],children:[],proof:void 0,isInvalidFloating:!1,dist:void 0,pnDbg:f.map(r.ptDbg,(function(r){return{exprStr:n._1(r.exprToStr,t)}}))};return c.set(r.nodes,t,o),r.nextNodeId=r.nextNodeId+1|0,o},t.ptAddNewVar=function(r,t){r.maxVar=r.maxVar+1|0;var e=r.maxVar;v.add(r.newVars,[t,e]);var o=r.ptDbg;return void 0!==o&&o.newVars.push(n._1(o.exprToStr,[t,e])),e},t.ptAddRootStmt=function(r,t){return void 0!==r.rootStmts.find((function(r){return u.exprEq(r.expr,t.expr)}))?void 0:void r.rootStmts.push(t)},t.ptAddSyntaxProof=function(r,t,e){c.set(r.syntaxProofs,t,e)},t.ptGetSyntaxProof=function(r,t){return c.get(r.syntaxProofs,t)},t.ptGetAllSyntaxProofs=function(r){return c.toArray(r.syntaxProofs)},t.ptClearDists=function(r){c.forEach(r.nodes,(function(r,t){t.dist=void 0}))},t.ptGetDbg=function(r){return r.ptDbg},t.ptGetCopyOfNewVars=function(r){return v.toArray(r.newVars)},t.ptGetCtxDisj=function(r){return r.ctxDisj},t.pnGetId=function(r){return r.id},t.pnGetExpr=function(r){return r.expr},t.pnGetProof=function(r){return r.proof},t.pnGetFParents=function(r){return r.fParents},t.pnGetEParents=function(r){return r.eParents},t.pnAddParent=function(r,t,e,n){if(f.isNone(r.proof)||n){var o,u=!1;if(e)o=r.eParents;else{var s=r.fParents;if(void 0!==s)o=s;else{var c=[t];r.fParents=c,u=!0,o=c}}if(!u){var v=o.find((function(r){if("number"==typeof r)return"number"==typeof t;switch(0|r.TAG){case 0:return"number"!=typeof t&&0===t.TAG&&r.label===t.label;case 1:var e=r.args;if("number"==typeof t)return!1;if(1!==t.TAG)return!1;var n=t.args;return r.frame.label===t.frame.label&&e.length===n.length&&e.every((function(r,t){return r.id===a.get(n,t).id}));case 2:return!1}}));if(void 0!==v){if(m(v))throw{RE_EXN_ID:i.MmException,_1:{msg:"Unexpected: an unproved node '"+h(r)+"' has a proved parent."},Error:new Error}}else o.push(t),u=!0}if(u)return"number"!=typeof t&&1===t.TAG&&t.args.forEach((function(t){if(t.id!==r.id)return void 0!==t.children.find((function(t){return t.id===r.id}))?void 0:void t.children.push(r)})),m(t)?(function(r){if(f.isNone(r.proof)){var t=g(r);if(void 0!==t){r.proof=t;for(var e=l.fromArray(r.children);!l.isEmpty(e);){var n=f.getExn(l.pop(e));if(f.isNone(n.proof)){var o=g(n);void 0!==o&&(n.proof=o,n.children.forEach((function(r){return l.add(e,r)})))}}}}}(r),n?void(r.proof=t):void 0):void 0}},t.pnIsInvalidFloating=function(r){return r.isInvalidFloating},t.pnSetInvalidFloating=function(r){r.isInvalidFloating=!0},t.pnGetDist=function(r){return r.dist},t.pnSetDist=function(r,t){r.dist=t},t.pnGetDbg=function(r){return r.pnDbg},t.jstfEqSrc=function(r,t,e){if("number"==typeof e)return!1;if(1!==e.TAG)return!1;var n=e.frame;if(t!==n.label)return!1;var o=e.args,i=r.length,f=n.hyps.length;if(i>f)return!1;for(var s=0,c=0,v=!0;v&&s<i&&c<f;)0===a.get(n.hyps,c).typ||(v=u.exprEq(a.get(r,s),a.get(o,c).expr),s=s+1|0),c=c+1|0;for(;v&&c<f;)0===a.get(n.hyps,c).typ?c=c+1|0:v=!1;return!(!v||s!==i)&&c===f},t.ptPrintStats=function(r){var t=c.toArray(r.nodes).map((function(r){return r[1]})),e=t.length;console.log("nodeCnt",e);var i=t.filter((function(r){return f.isSome(r.proof)})).length;console.log("provedNodeCnt",i,o.floatToPctStr(i/e));var a=t.filter((function(r){return r.isInvalidFloating})).length;console.log("invalidFloatingCnt",a,o.floatToPctStr(a/e));var u=r.ptDbg;if(void 0===u)return"Debug is off";var s=t.filter((function(r){return!!f.isNone(r.proof)&&!r.isInvalidFloating}));s.sort((function(r,t){return r.expr.length-t.expr.length|0}));var v=s.map((function(r){return r.expr})),d=u.exprToStr;return v.map(n.__1(d)).join("\n")}},3021:function(r,t,e){var n=e(8371),o=e(1748),i=e(3942),a=e(6517),u=e(2815),f=e(9775),s=e(335),c=e(1611),v=e(6601);function d(r,t){var e=function(r){var e=u.get(t,s.pnGetExpr(r));if(void 0!==e)return e;throw{RE_EXN_ID:n.MmException,_1:{msg:"exprSrcToDto: cannot get idx by expr."},Error:new Error}};if("number"==typeof r)return 0;switch(0|r.TAG){case 0:return{TAG:0,label:r.label};case 1:return{TAG:1,args:r.args.map(e),label:r.frame.label};case 2:return{TAG:2,args:r.args.map(e),label:r.frame.label,err:r.err}}}function l(r,t,e){return s.ptGetAllSyntaxProofs(r).map((function(r){var i,a=u.get(t,s.pnGetExpr(r[1]));if(void 0===a)throw{RE_EXN_ID:n.MmException,_1:{msg:"Could not convert proofNode to proofNodeDto for a syntax proof."},Error:new Error};return i=o.get(e,a),[r[0],i]}))}t.proofTreeToDto=function(r,t){var e=function(r,t){var e=v.make(void 0);s.ptGetAllSyntaxProofs(r).forEach((function(r){v.push(e,r[1])})),t.forEach((function(t){v.push(e,s.ptGetNode(r,t))}));for(var n=f.make(100,i.ExprHash),o=u.make(100,i.ExprHash),c=function(r){"number"!=typeof r&&0!=(0|r.TAG)&&r.args.forEach((function(r){v.push(e,r)}))};!v.isEmpty(e);){var d=a.getExn(v.pop(e)),l=s.pnGetExpr(d);f.has(n,l)||(f.add(n,l),u.set(o,l,u.size(o)),s.pnGetEParents(d).forEach(c),a.forEach(s.pnGetProof(d),c))}return o}(r,t),n=new Array(u.size(e));return u.forEach(e,(function(t,i){o.set(n,i,function(r,t){return{expr:s.pnGetExpr(r),parents:s.pnGetEParents(r).map((function(r){return d(r,t)})),proof:a.map(s.pnGetProof(r),(function(r){return d(r,t)})),dbg:a.map(s.pnGetDbg(r),(function(r){return{exprStr:r.exprStr}}))}}(s.ptGetNode(r,t),e))})),{newVars:s.ptGetCopyOfNewVars(r),nodes:n,syntaxProofs:l(r,e,n),dbg:a.map(s.ptGetDbg(r),(function(r){return{newVars:r.newVars}}))}},t.createProofTable=function(r,t,e,f,s){var v=void 0!==e&&e;if(v&&a.isNone(f))throw{RE_EXN_ID:n.MmException,_1:{msg:"Error in createProofTable: ctx must be set when essentialsOnly == true."},Error:new Error};var d=function(r,t){if(!(v&&r.length>0))return r;var e=[];return i.getFrameExn(a.getExn(f),t).hyps.forEach((function(t,n){1!==t.typ||e.push(o.get(r,n))})),e},l=u.make(64,i.ExprHash),p=[],m=function(r,t){if(a.isSome(u.get(l,r)))throw{RE_EXN_ID:n.MmException,_1:{msg:"getIdxByExpr(expr)->Belt_Option.isSome in createProofTable()."},Error:new Error};var e=p.push({expr:r,proof:t})-1|0;u.set(l,r,e)};return c.traverseTree(void 0,t,(function(t,e){var i=e.proof;if(void 0===i)throw{RE_EXN_ID:n.MmException,_1:{msg:"Cannot create proofTable from an unproved proofNodeDto [1]."},Error:new Error};if("number"==typeof i)throw{RE_EXN_ID:n.MmException,_1:{msg:"VarType is not supported in createProofTable [1]."},Error:new Error};switch(0|i.TAG){case 0:return;case 1:return d(i.args,i.label).map((function(t){return o.get(r.nodes,t)}));case 2:throw{RE_EXN_ID:n.MmException,_1:{msg:"AssertionWithErr is not supported in createProofTable [1]."},Error:new Error}}}),void 0,void 0,(function(t,e){var i=e.proof;if(void 0===i)throw{RE_EXN_ID:n.MmException,_1:{msg:"Cannot create proofTable from an unproved proofNodeDto [2]."},Error:new Error};if("number"==typeof i)throw{RE_EXN_ID:n.MmException,_1:{msg:"VarType is not supported in createProofTable [2]."},Error:new Error};switch(0|i.TAG){case 0:a.isNone(u.get(l,e.expr))&&m(e.expr,{TAG:0,label:i.label});break;case 1:var f=i.label;a.isNone(u.get(l,e.expr))&&m(e.expr,{TAG:1,args:d(i.args,f).map((function(t){var e=o.get(r.nodes,t).expr,i=u.get(l,e);if(void 0!==i)return i;throw{RE_EXN_ID:n.MmException,_1:{msg:"Could not determine idx by expr in createProofTable()."},Error:new Error}})),label:f});break;case 2:throw{RE_EXN_ID:n.MmException,_1:{msg:"AssertionWithErr is not supported in createProofTable [2]."},Error:new Error}}}),void 0),p}},6310:function(r,t,e){var n=e(1386),o=e(4923),i=e(8371),a=e(2971),u=e(1748),f=e(3942),s=e(1094),c=e(6517),v=e(303),d=e(3216),l=e(9898);function p(r){return r.TAG,r.expr}function m(r,t){return p(u.get(r.nodes,t))}function h(r,t,e,n,i){var a=t,f=n,s=r.length,c=e.length;if(s<(t+i|0)||c<(n+i|0))return!1;for(var v=(t+i|0)-1|0;a<=v&&o.equal(u.get(r,a),u.get(e,f));)f=f+1|0,a=a+1|0;return a>v}var g=c.getExn("Z".codePointAt(0)),E=c.getExn("A".codePointAt(0)),_=E-1|0,x=c.getExn("T".codePointAt(0)),y=c.getExn("U".codePointAt(0)),b=y-1|0;function T(r){for(var t=r.length,e=[],n=0,o=0;o<t;){var i=c.getExn(r.codePointAt(o));i===g?(e.push("Z"),n=o=o+1|0):E<=i&&i<=x?(e.push(r.substring(n,o+1|0)),n=o=o+1|0):o=o+1|0}return e}function A(r){return r<=x?r-_|0:r-b|0}function S(r){for(var t=0,e=1,n=r.length,o=n-2|0;o>=0;--o)t=t+Math.imul(e,A(c.getExn(r.codePointAt(o))))|0,e=Math.imul(e,5);return Math.imul(t,20)+A(c.getExn(r.codePointAt(n-1|0)))|0}function k(r,t,e){var o={contents:void 0};return s.forEach(t,(function(t,i){if(c.isNone(o.contents))return v.forEach(i,(function(i){if(c.isNone(o.contents))for(var a=u.get(r,t),f=a.length-1|0,s=u.get(r,i),v=s.length-1|0,d=1;d<=f;++d)if(c.isNone(o.contents)){var l=u.get(a,d);if(l>=0)for(var p=1;p<=v;++p)if(c.isNone(o.contents)){var m=u.get(s,p);m>=0&&(l===m?o.contents={TAG:0,frmVar1:t,expr1:a.slice(1,f+1|0),frmVar2:i,expr2:s.slice(1,v+1|0),commonVar:l}:n._2(e,l,m)||(o.contents={TAG:1,frmVar1:t,expr1:a.slice(1,f+1|0),var1:l,frmVar2:i,expr2:s.slice(1,v+1|0),var2:m}))}}}))})),o.contents}function w(r,t,e,n){var o=r.nodes.length;if(o<t.numOfArgs)throw{RE_EXN_ID:i.MmException,_1:{msg:"stackLength < numOfArgs"},Error:new Error};var s=function(r,t){var e=new Array(t.numOfVars),n=a.make(t.numOfVars,!1),o=r.nodes.length-t.numOfArgs|0;if(t.hyps.forEach((function(t,a){if(0===t.typ){var f=u.get(t.expr,0),s=u.get(t.expr,1);if(u.get(n,s))throw{RE_EXN_ID:i.MmException,_1:{msg:"subsLock[v]"},Error:new Error};var c=m(r,o+a|0);if(c.length<2)throw{RE_EXN_ID:i.MmException,_1:{msg:"subsExpr->Js_array2.length < 2"},Error:new Error};if(u.get(c,0)!==f)throw{RE_EXN_ID:i.MmException,_1:{msg:"subsExpr[0] != t"},Error:new Error};u.set(n,s,!0),u.set(e,s,c)}})),n.some((function(r){return!r})))throw{RE_EXN_ID:i.MmException,_1:{msg:"subsLock->Js_array2.some(lock => !lock)"},Error:new Error};return e}(r,t),c=k(s,t.disj,n);if(void 0!==c){var v=l.unifErrToStr(c,(function(r){return f.ctxIntsToStrExn(e,r)}),(function(r){return f.frmIntsToStrExn(e,t,r)}));throw{RE_EXN_ID:i.MmException,_1:{msg:"Disjoint verification failed: "+v},Error:new Error}}!function(r,t,e){var n=r.nodes.length-t.numOfArgs|0;t.hyps.forEach((function(t,o){if(1===t.typ&&!function(r,t,e){for(var n=0,o=0,i=!0,a=r.length,f=e.length;i&&n<a&&o<f;){var s=u.get(r,n);if(s<0)i=s===u.get(e,o),o=o+1|0;else{var c=u.get(t,s),v=c.length-1|0;i=h(c,1,e,o,v),o=o+v|0}n=n+1|0}return!(!i||n!==a)&&o===f}(t.expr,e,m(r,n+o|0)))throw{RE_EXN_ID:i.MmException,_1:{msg:"!compareExprAfterSubstitution(ess, subs, stack->stGetExpr(baseIdx+i))"},Error:new Error}}))}(r,t,s);var p=function(r,t){var e={contents:0};r.forEach((function(r){e.contents=r<0?e.contents+1|0:(e.contents+u.get(t,r).length|0)-1|0}));for(var n=new Array(e.contents),o=0,i=0;i<e.contents;){var a=u.get(r,o);if(a<0)u.set(n,i,a),i=i+1|0;else{var f=u.get(t,a),s=f.length-1|0;d.copySubArray(f,1,n,i,s),i=i+s|0}o=o+1|0}return n}(t.asrt,s),g={TAG:1,id:r.nextId,args:r.nodes.slice(o-t.numOfArgs|0),asrtLabel:t.label,expr:p,dbg:f.isDebug(e)?{exprStr:f.ctxIntsToStrExn(e,p)}:void 0};r.nextId=r.nextId+1|0;for(var E=1,_=t.numOfArgs;E<=_;++E)r.nodes.pop();r.nodes.push(g)}t.proofNodeGetId=function(r){return r.id},t.proofNodeGetExpr=p,t.verifyProof=function(r,t,e,n){var o={nextId:0,nodes:[]};if(0===e.TAG?function(r,t,e,n){e.forEach((function(e){var o=f.getHypothesis(r,e);if(void 0!==o)return t.nodes.push({TAG:0,id:t.nextId,hypLabel:o.label,expr:o.expr,dbg:f.isDebug(r)?{exprStr:f.ctxIntsToStrExn(r,o.expr)}:void 0}),void(t.nextId=t.nextId+1|0);var a=f.getFrame(r,e);if(void 0!==a)return w(t,a,r,n);throw{RE_EXN_ID:i.MmException,_1:{msg:"The proof step '"+e+"' doesn't refer to a hypothesis or assertion (in uncompressed proof)."},Error:new Error}}))}(r,o,e.labels,n):function(r,t,e,n,o,s){var c=function(r){n.nodes.push({TAG:0,id:n.nextId,hypLabel:r.label,expr:r.expr,dbg:f.isDebug(e)?{exprStr:f.ctxIntsToStrExn(e,r.expr)}:void 0}),n.nextId=n.nextId+1|0},v=T(t),d=f.getMandHyps(e,r,void 0,void 0,void 0),l=d.length,p=l+s.length|0,m=[];a.forEach(v,(function(r){if("Z"!==r){var t=S(r);if(t<1)throw{RE_EXN_ID:i.MmException,_1:{msg:"Unexpected condition when applying compressed proof: i < 1."},Error:new Error};if(t<=l)return c(u.get(d,t-1|0));if(t<=p){var v=u.get(s,(t-l|0)-1|0),h=f.getHypothesis(e,v);if(void 0!==h)return c(h);var g=f.getFrame(e,v);if(void 0!==g)return w(n,g,e,o);throw{RE_EXN_ID:i.MmException,_1:{msg:"The proof step '"+v+"' doesn't refer to a hypothesis or assertion (in compressed proof)."},Error:new Error}}var E=a.get(m,(t-p|0)-1|0);if(void 0===E)throw{RE_EXN_ID:i.MmException,_1:{msg:"Compressed proof refers to a saved step by the index which is out of bounds."},Error:new Error};n.nodes.push(E)}else{var _=n.nodes.length;if(0===_)throw{RE_EXN_ID:i.MmException,_1:{msg:"Cannot execute 'Z' command because the stack is empty."},Error:new Error};m.push(u.get(n.nodes,_-1|0))}}))}(t,e.compressedProofBlock,r,o,n,e.labels),1!==o.nodes.length)throw{RE_EXN_ID:i.MmException,_1:{msg:"stack->Js_array2.length is "+String(o.nodes.length)+" but must be 1."},Error:new Error};if(!f.exprEq(m(o,0),t))throw{RE_EXN_ID:i.MmException,_1:{msg:"stack[0] != expr\nstack[0] is '"+f.ctxIntsToStrExn(r,m(o,0))+"'\nexpr is     '"+f.ctxIntsToStrExn(r,t)+"'"},Error:new Error};return u.get(o.nodes,0)},t.compressedProofBlockToArray=T,t.compressedProofStrToInt=S,t.intToCompressedProofStr=function(r){if(r<1)throw{RE_EXN_ID:i.MmException,_1:{msg:"intToCompressedProofStr: i < 1"},Error:new Error};for(var t=[String.fromCharCode(E+(r-1|0)%20|0)],e=(r-1|0)/20|0;e>0;)t.push(String.fromCharCode(y+(e-1|0)%5|0)),e=(e-1|0)/5|0;return t.reverse().join("")},t.verifyDisjoints=k},2694:function(r,t,e){var n=e(1386),o=e(9232),i=e(4923),a=e(8371),u=e(2971),f=e(1748),s=e(3942),c=e(6517),v=e(7175),d=e(8753),l=e(335),p=e(5082),m=e(7659),h=e(1854),g=e(519),E=e(5650),_=e(5981),x=e(3216),y=e(4125),b=e(3192);function T(r){switch(r){case"Less":return 2;case"LessEq":return 1;case"No":return 0;default:return}}function A(r,t){if(l.ptIsNewVarDef(r,t))return 0;var e=l.ptGetHypByExpr(r,t);return void 0!==e?{TAG:0,label:e.label}:void 0}function S(r,t,e,o,i){var u=t.length;g.frmsForEach(l.ptGetFrms(r),f.get(t,0),(function(v){if(s.frameIsAllowed(v.frame,o)){var d=v.frame.asrt;g.iterateSubstitutions(d,t,f.get(v.frmConstParts,v.numOfHypsE),f.get(v.constParts,v.numOfHypsE),f.get(v.varGroups,v.numOfHypsE),v.subs,l.ptGetParenCnt(r),(function(t){if(t.isDefined.every((function(r){return r}))&&c.isNone(g.verifyDisjoints(v.frame.disj,t,(function(t,e){return l.ptIsDisjInCtx(r,t,e)}),0))){for(var o=v.frame.hyps,s=o.length,d=new Array(s),p=!0,m=0,h=s-1|0;m<=h&&p;){var E,_=g.applySubs(f.get(o,m).expr,t,(function(r){throw{RE_EXN_ID:a.MmException,_1:{msg:"Work variables are not supported in findAsrtParentsWithoutNewVars()."},Error:new Error}}));switch(e){case 0:E=!0;break;case 1:E=_.length<=u;break;case 2:E=_.length<u}if(p=E){var x=l.ptGetNode(r,_);f.set(d,m,x),p=!l.pnIsInvalidFloating(x)}m=m+1|0}p&&n._1(i,{TAG:1,args:d,frame:v.frame})}return 0}))}}))}function k(r,t,e,n){if(c.isNone(l.pnGetProof(t))&&!l.pnIsInvalidFloating(t)){o.arrayQueueReset(n);var i=m.make(128),a=function(r){if(void 0===l.pnGetProof(r)){var t=l.pnGetId(r);return m.has(i,t)?void 0:(m.add(i,t),o.arrayQueueAdd(n,r))}},u=function(r){"number"!=typeof r&&1===r.TAG&&r.args.forEach(a)},f=function(r){for(var t=o.arrayQueuePop(n);c.mapWithDefault(t,!1,(function(r){return!!c.isSome(l.pnGetProof(r))||l.pnIsInvalidFloating(r)}));)t=o.arrayQueuePop(n);return t};a(t);for(var s={contents:!1},v=f();c.isNone(l.pnGetProof(t))&&c.isSome(v);){var d=c.getExn(v),p=l.pnGetFParents(d);if(void 0!==p)p.forEach(u);else{var h=l.pnGetExpr(d),g=A(r,h);void 0!==g?l.pnAddParent(d,g,!1,!1):(s.contents=!1,S(r,h,1,e,function(r){return function(t){l.pnAddParent(r,t,!1,!1),u(t),s.contents=!0}}(d)),s.contents||l.pnSetInvalidFloating(d))}v=f()}return c.isNone(l.pnGetProof(t))?l.pnSetInvalidFloating(t):void 0}}function w(r,t,e,i,u,v,p,m,h,E,x,y,b,T){var A=void 0!==x?x:0,S=o.arrayQueueMake(1e3),w=[],I=c.isSome(y),G=c.getWithDefault(y,0),M=l.ptGetMaxVar(r);d.applyAssertions(M,l.ptGetFrms(r),m,(function(r){return s.frameIsAllowed(r,h.inEssen)}),(function(t,e){return l.ptIsDisjInCtx(r,t,e)}),e,i,u,v,t,l.ptGetParenCnt(r),p,E,(function(r){w.push(r);var t=w.length;return void 0!==b&&t%100==0&&n._1(b,t),I&&t>=G?1:0}),A,void 0,void 0);var N=[];return w.forEach((function(t){var e=t.frame,n=t.err,o=0;if(void 0!==n&&"number"!=typeof n)switch(0|n.TAG){case 3:case 4:case 5:o=1;break;case 6:return void N.push({TAG:2,args:[],frame:e,err:c.getExn(t.err)});default:o=2}else o=2;switch(o){case 1:return 0!==A?void N.push({TAG:2,args:[],frame:e,err:c.getExn(t.err)}):void 0;case 2:var i=_.make(void 0);t.newVars.forEach((function(e,n){var o=f.get(t.newVarTypes,n),a=l.ptAddNewVar(r,o);_.set(i,e,a)}));for(var u,s=e.hyps.length,v=new Array(s),d=0,p=s-1|0;d<=p&&(c.isNone(u)||0!==A);){for(var m=g.applySubs(f.get(e.hyps,d).expr,t.subs,(function(r){throw{RE_EXN_ID:a.MmException,_1:{msg:"New work variables are not expected here [findAsrtParentsWithNewVars]."},Error:new Error}})),E=m.length-1|0,x=0;x<=E;++x){var y=f.get(m,x);if(y>M){var b,T=_.get(i,y);if(void 0===T)throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not replace an applVar with a treeVar."},Error:new Error};b=T,f.set(m,x,b)}}var w=l.ptGetNode(r,m);f.set(v,d,w),0===f.get(e.hyps,d).typ&&c.isNone(t.err)&&c.isNone(u)&&(k(r,w,h.inSyntax,S),c.isNone(l.pnGetProof(w))&&(u=l.pnGetExpr(w))),d=d+1|0}var I=void 0!==t.err?t.err:c.map(u,(function(r){return{TAG:2,expr:r}}));return void 0!==I?0!==A?void N.push({TAG:2,args:v,frame:e,err:I}):void 0:void N.push({TAG:1,args:v,frame:e})}})),N}function I(r,t){return"number"!=typeof t&&1===t.TAG&&t.args.some((function(t){return s.exprEq(r,l.pnGetExpr(t))}))}function G(r,t,e){return void 0!==r?r<=t&&(void 0===e||t<=e):void 0===e||t<=e}function M(r,t,e){return void 0===t||t.some((function(t){if(!t.matchAsrt)return!0;var n=t.frm;if(f.get(r,0)!==f.get(n.frame.asrt,0))return!1;var o={contents:!1};return g.iterateSubstitutions(n.frame.asrt,r,f.get(n.frmConstParts,n.numOfHypsE),f.get(n.constParts,n.numOfHypsE),f.get(n.varGroups,n.numOfHypsE),n.subs,e,(function(r){return o.contents=!0,1})),o.contents}))}function N(r,t,e,o,i,s,d,p){void 0!==o?function(r,t,e,o,i,s,v){(function(r,t,e,o,i){var u=E.make(void 0),f=String(o),s=y.progressTrackerMake(.01,void 0,(function(r){}),void 0,void 0);l.ptClearDists(r);var v=l.ptGetNode(r,t);l.pnSetDist(v,0),E.add(u,v);for(var d=0,p=1,m=0,h=c.map(i,(function(r,t){n._1(r,"Proving bottom-up: 0/"+f+" "+String(t))}));c.isNone(l.pnGetProof(v))&&!E.isEmpty(u);){var g=c.getExn(E.pop(u));if(c.isNone(l.pnGetProof(g))){var _,x=l.pnGetDist(g);if(void 0===x)throw{RE_EXN_ID:a.MmException,_1:{msg:"Encountered a node without dist."},Error:new Error};if(_=x,void 0!==i){if(d!==_){h=void 0,d=_;var b=String(_);s=y.progressTrackerMake(.01,void 0,function(r){return function(t){var e=String(0|Math.round(100*t));n._1(i,"Proving bottom-up: "+r+"/"+f+" "+e+"%")}}(b),void 0,void 0),p=E.size(u)+1|0,m=0}y.progressTrackerSetCurrPct(s,m/p),m=m+1|0}var T=l.pnGetExpr(g),S=A(r,T);if(void 0!==S)l.pnAddParent(g,S,!0,!1);else{var k=_+1|0;k<=o&&n._3(e,T,_,h).forEach(function(r,t,e){return function(n){I(t,n)||(l.pnAddParent(r,n,!0,!1),"number"!=typeof n&&1===n.TAG&&n.args.forEach((function(r){if(c.isNone(l.pnGetProof(r))&&c.isNone(l.pnGetDist(r)))return l.pnSetDist(r,e),E.add(u,r)})))}}(g,T,k))}}}})(r,t,(function(t,n,a){for(var c=[],v=0,d=e.frameParams.length;v<d;++v){var p=f.get(e.frameParams,v);if(G(p.minDist,n,p.maxDist)&&M(t,p.matches,l.ptGetParenCnt(r))){var m,h=w(r,t,p.args,!1,p.allowNewStmts,p.allowNewVars,p.allowNewDisjForExistingVars,p.frmsToUse,o,i,s,p.maxNumberOfBranches,a);if(0!==p.lengthRestrict){var g=t.length;m=h.filter(function(r,t){return function(e){if("number"==typeof e)return!0;if(1!==e.TAG)return!0;for(var n=e.frame,o=e.args,i=!0,a=n.hyps.length-1|0,u=0;u<=a&&i;){var s=f.get(o,u);if(1===f.get(n.hyps,u).typ){var c;switch(r.lengthRestrict){case 0:c=!0;break;case 1:c=l.pnGetExpr(s).length<=t;break;case 2:c=l.pnGetExpr(s).length<t}i=c}u=u+1|0}return i}}(p,g))}else m=h;var E=p.matches,_=void 0!==E?m.filter(function(e){return function(n){return e.some((function(e){return b.exprSrcMatches(t,n,e,l.ptGetParenCnt(r))}))}}(E)):m;c.push(_)}}return u.concatMany(c)}),e.maxSearchDepth,v),l.ptGetNode(r,t)}(r,t,o,i,s,d,p):void 0!==e?function(r,t,e,n,o){var i=function(i,a){return w(r,t,i,!0,!1,!1,!1,[e.label],n,o,a,void 0,void 0)},a=l.ptGetNode(r,t),u=function(r,t){var e=t.args.map((function(t){var e=l.ptGetRootStmts(r).find((function(r){return r.label===t}));if(void 0!==e)return e.expr;var n=l.ptGetHypByLabel(r,t);return void 0!==n?n.expr:void 0})).filter(c.isSome).map(c.getExn);if(e.length===t.args.length)return e}(r,e);void 0!==u&&c.getWithDefault(c.map(l.pnGetProof(a),(function(r){return!l.jstfEqSrc(u,e.label,r)})),!0)&&(x.arrForEach(i(u,0),(function(r){var t=l.jstfEqSrc(u,e.label,r);if(l.pnAddParent(a,r,!0,t),t)return v.some(void 0)})),c.isNone(l.pnGetProof(a))&&x.arrForEach(i(u,2),(function(r){var t=l.jstfEqSrc(u,e.label,r);if(l.pnAddParent(a,r,!0,t),t)return v.some(void 0)})))}(r,t,e,i,s):function(r,t,e,n){var o=l.ptGetNode(r,t);if(c.isNone(l.pnGetProof(o))){var i=w(r,t,l.ptGetRootStmts(r).map((function(r){return r.expr})),!1,!1,!1,!1,void 0,e,n,void 0,void 0,void 0);x.arrForEach(i,(function(r){return l.pnAddParent(o,r,!0,!1),l.pnGetProof(o)}))}}(r,t,i,s)}function C(r,t,e){var n=s.getNumOfVars(r)-1|0,o=s.getAllHyps(r),i=l.ptMake(t,o,n,s.getAllDisj(r),e,function(r,t){if(s.isDebug(r)){var e=function(e){return e<=t?s.ctxIntToSymExn(r,e):"&"+String(e)};return function(r){return r.map(e).join(" ")}}}(r,n));return p.forEach(o,(function(r,t){if(1===t.typ){var e=l.ptGetNode(i,t.expr);l.pnAddParent(e,{TAG:0,label:r},!0,!1),l.ptAddRootStmt(i,{isHyp:!0,label:r,expr:t.expr,jstf:void 0})}})),i}function D(r,t,e,n,i,u,s,d,p){if(c.isNone(r)&&(c.isNone(t)||c.isNone(e)||c.isNone(i)))throw{RE_EXN_ID:a.MmException,_1:{msg:"Either proofTree or (wrkCtx and frms and parenCnt) should be passed."},Error:new Error};var m=y.progressTrackerMake(.01,void 0,d,void 0,void 0),h=void 0!==r?v.valFromOption(r):C(c.getExn(t),c.getExn(e),c.getExn(i));if(0===s.length)return h;for(var g=o.arrayQueueMake(1e3),E=f.get(s,0),_=0,x=u.length;_<x;++_){var b=f.get(u,_),T=l.ptGetNode(h,[E].concat(b));k(h,T,n,g);for(var A=0;c.isNone(l.pnGetProof(T))&&A<s.length;){var S=f.get(s,A);A=A+1|0,S!==E&&k(h,T=l.ptGetNode(h,[S].concat(b)),n,g)}void 0!==l.pnGetProof(T)&&(l.ptAddSyntaxProof(h,b,T),E=f.get(l.pnGetExpr(T),0)),y.progressTrackerSetCurrPct(m,(_+1|0)/u.length)}return h}function U(r,t){var e=s.createContext(v.some(r),void 0,void 0);return t.forEach((function(t){if(t.isHyp)return s.applySingleStmt(e,{TAG:6,label:t.label,expr:s.ctxIntsToSymsExn(r,t.expr)},void 0,void 0,void 0,void 0,void 0)})),e}function j(r,t,e){return r.slice(t,e).sort()}function P(r,t,e,n){return i.equal(j(r,e,n),j(t,e,n))}t.bottomUpProverParamsMakeDefault=function(r,t,e,n,o,i,a,u,f,s){var v=void 0!==e?e:2,d=void 0===n||n,l=void 0===o||o,p=void 0!==i&&i,m=void 0!==a?a:[],h=void 0!==u?u:[];return{maxSearchDepth:void 0!==t?t:4,frameParams:[{minDist:0,maxDist:0,frmsToUse:c.map(r,(function(r){return[r]})),matches:void 0,args:m,allowNewDisjForExistingVars:d,allowNewStmts:l,allowNewVars:p,lengthRestrict:0,maxNumberOfBranches:f},{minDist:1,maxDist:void 0,frmsToUse:void 0,matches:void 0,args:h,allowNewDisjForExistingVars:d,allowNewStmts:l,allowNewVars:!1,lengthRestrict:v,maxNumberOfBranches:f}]}},t.lengthRestrictToStr=function(r){switch(r){case 0:return"No";case 1:return"LessEq";case 2:return"Less"}},t.lengthRestrictFromStr=T,t.lengthRestrictFromStrExn=function(r){var t=T(r);if(void 0!==t)return t;throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot convert '"+r+"' to lengthRestrict."},Error:new Error}},t.createProofCtx=U,t.proveFloatings=function(r,t,e,n,i){var a=C(r,t,i),u=o.arrayQueueMake(1e3);return n.forEach((function(r){k(a,l.ptGetNode(a,r),e,u)})),a},t.proveSyntaxTypes=D,t.unifyAll=function(r,t,e,i,a,u,f,s,d,p,m,h){var g=void 0!==p?p:0,E=y.progressTrackerMake(.01,void 0,c.map(m,(function(r,t){n._1(r,"Unifying all: "+o.floatToPctStr(t))})),void 0,void 0),_=C(U(r,e),t,i);void 0!==s&&s.length>0&&void 0!==d&&D(v.some(_),void 0,void 0,u.inSyntax,void 0,d,s,c.map(m,(function(r,t){n._1(r,"Checking syntax: "+o.floatToPctStr(t))})));var x=e.filter((function(r){return!r.isHyp})),b=x.length,T=b-1|0;return x.forEach((function(r,t){N(_,r.expr,r.jstf,t===T?a:void 0,u,f,g,t!==T||c.isNone(a)?void 0:m),l.ptAddRootStmt(_,r),y.progressTrackerSetCurrPct(E,(t+1|0)/b)})),_},t.makeParenCnt=function(r,t){var e=s.ctxGetOptimizedConstsOrder(r,t),n=e.canBeLastMax,o=e.canBeLastMin,u=e.canBeFirstMax,f=e.canBeFirstMin,c=e.parenMin,v=e.allConsts,d=s.getAllConsts(r);if(v.length!==d.length)throw{RE_EXN_ID:a.MmException,_1:{msg:"allConsts.length != allConstsActual.length"},Error:new Error};if(c<0&&i.notequal(v.slice(0,0|-c),d.slice(0,0|-c)))throw{RE_EXN_ID:a.MmException,_1:{msg:"allConsts.parens != allConstsActual.parens"},Error:new Error};if(f<=u&&!P(v,d,(0|-u)-1|0,0|-f))throw{RE_EXN_ID:a.MmException,_1:{msg:"allConsts.canBeFirst != allConstsActual.canBeFirst"},Error:new Error};if(o<=n&&!P(v,d,(0|-n)-1|0,0|-o))throw{RE_EXN_ID:a.MmException,_1:{msg:"allConsts.canBeLast != allConstsActual.canBeLast"},Error:new Error};if(!P(v,d,0,v.length))throw{RE_EXN_ID:a.MmException,_1:{msg:"allConsts.remaining != allConstsActual.remaining"},Error:new Error};return h.parenCntMake(c,f,u,o,n)}},8099:function(r,t,e){var n=e(4923);t.jstfEq=function(r,t){return r.label===t.label&&n.equal(r.args,t.args)},t.jstfToStr=function(r){return(r.args.join(" ")+" : "+r.label).trim()}},519:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(3942),u=e(1094),f=e(6517),s=e(303),c=e(7356),v=e(1854),d=e(2275),l=e(3216);function p(r,t,e){return r<0?i.get(i.get(t,0),0):r<(t.length-1|0)?(i.get(i.get(t,r+1|0),0)-i.get(i.get(t,r),1)|0)-1|0:(e-i.get(i.get(t,r),1)|0)-1|0}function m(r,t,e){return r<0?i.get(t.begins,0):r<(t.length-1|0)?(i.get(t.begins,r+1|0)-i.get(t.ends,r)|0)-1|0:(e-i.get(t.ends,r)|0)-1|0}function h(r){for(var t=[],e=0,n=r.length;e<n;++e){var o=t.length;i.get(r,e)<0?(0===o||i.get(i.get(t,o-1|0),1)>=0)&&t.push([e,-1]):o>0&&i.get(i.get(t,o-1|0),1)<0&&i.set(i.get(t,o-1|0),1,e-1|0)}var a=t.length,u=r.length;a>0&&i.get(i.get(t,a-1|0),1)<0&&i.set(i.get(t,a-1|0),1,u-1|0);for(var f=new Array(a),s=new Array(a),c=new Array(a),v={length:a,begins:f,ends:s,remainingMinLength:c},d=0,l=a-1|0;l>=0;--l)i.set(f,l,i.get(i.get(t,l),0)),i.set(s,l,i.get(i.get(t,l),1)),d=(d+(1+(i.get(s,l)-i.get(f,l)|0)|0)|0)+p(l,t,u)|0,i.set(c,l,d);return v}function g(r){return{length:r.length,begins:new Array(r.length),ends:new Array(r.length),remainingMinLength:[]}}function E(r,t,e,o,a,u,s){var c=function(n){return E(r,t,e,o,a+1|0,u,s)},d=t.length,l=r.length;if(d<l)return 0;if(a===e.length){if(e.length<=0)return v.parenCntCanBeFirst(u,i.get(t,0))&&v.parenCntCanBeLast(u,i.get(t,d-1|0))?n._1(s,o):0;if(i.get(o.ends,a-1|0)===(d-1|0))return n._1(s,o);if(i.get(e.ends,a-1|0)===(l-1|0))return 0;var p=m(a-1|0,e,l);if(m(a-1|0,o,d)<p)return 0;if(!v.parenCntCanBeFirst(u,i.get(t,i.get(o.ends,a-1|0)+1|0))||!v.parenCntCanBeLast(u,i.get(t,d-1|0)))return 0;v.parenCntReset(u);for(var h=0,g=i.get(o.ends,a-1|0)+1|0;g<d&&2!==h;)h=v.parenCntPut(u,i.get(t,g)),g=g+1|0;return 0===h?n._1(s,o):0}if(0===a&&0===i.get(e.begins,0)){if((d-1|0)<i.get(e.ends,0))return 0;for(var _,x=i.get(e.ends,0),y=0;f.isNone(_)&&y<=x;)i.get(r,y)!==i.get(t,y)&&(_=0),y=y+1|0;return void 0!==_?_:x===(d-1|0)||v.parenCntCanBeFirst(u,i.get(t,x+1|0))?(i.set(o.begins,0,0),i.set(o.ends,0,x),c()):0}var b=0===a?0:i.get(o.ends,a-1|0)+1|0,T=d-i.get(e.remainingMinLength,a)|0;v.parenCntReset(u);for(var A=0,S=m(a-1|0,e,l),k=1;k<=S;++k)A=v.parenCntPut(u,i.get(t,b)),b=b+1|0;for(var w=1+(i.get(e.ends,a)-i.get(e.begins,a)|0)|0,I=0;b<=T&&2!==A&&0===I;){if(0===A){for(var G=0,M=!0;G<w&&M;)M=i.get(r,i.get(e.begins,a)+G|0)===i.get(t,b+G|0),G=G+1|0;var N=(b+w|0)-1|0;G===w&&M&&v.parenCntCanBeLast(u,i.get(t,b-1|0))&&(N===(d-1|0)||v.parenCntCanBeFirst(u,i.get(t,N+1|0)))&&(i.set(o.begins,a,b),i.set(o.ends,a,N),I=c(),v.parenCntReset(u))}A=v.parenCntPut(u,i.get(t,b)),b=b+1|0}return I}function _(r,t){var e=r.length;if(0===t.length)return[{leftConstPartIdx:-1,frmExpr:r,varsBeginIdx:0,numOfVars:e,exprBeginIdx:0,exprEndIdx:0}];var n=[];0!==i.get(t.begins,0)&&n.push({leftConstPartIdx:-1,frmExpr:r,varsBeginIdx:0,numOfVars:i.get(t.begins,0),exprBeginIdx:0,exprEndIdx:0});for(var o=0,a=t.length-2|0;o<=a;++o)n.push({leftConstPartIdx:o,frmExpr:r,varsBeginIdx:i.get(t.ends,o)+1|0,numOfVars:m(o,t,e),exprBeginIdx:0,exprEndIdx:0});var u=t.length-1|0;return i.get(t.ends,u)!==(e-1|0)&&n.push({leftConstPartIdx:u,frmExpr:r,varsBeginIdx:i.get(t.ends,u)+1|0,numOfVars:m(u,t,e),exprBeginIdx:0,exprEndIdx:0}),n}function x(r,t,e,o,a,u,f,s){var c=i.get(e,o),d=i.get(c.frmExpr,c.varsBeginIdx+a|0),l=(1+(c.exprEndIdx-u|0)|0)-((c.numOfVars-a|0)-1|0)|0,p=function(v){return a<(c.numOfVars-1|0)?x(r,t,e,o,a+1|0,u+v|0,f,s):o<(e.length-1|0)?x(r,t,e,o+1|0,0,i.get(e,o+1|0).exprBeginIdx,f,s):n._1(s,t)},m=0;if(i.get(t.isDefined,d)){var h=i.get(t.exprs,d),g=i.get(t.begins,d),E=1+(i.get(t.ends,d)-g|0)|0;if(E<=l&&(a<(c.numOfVars-1|0)||E===l)){for(var _=0;_<E&&i.get(h,g+_|0)===i.get(r,u+_|0);)_=_+1|0;_===E&&(m=p(E))}}else{if(i.set(t.isDefined,d,!0),i.set(t.exprs,d,r),i.set(t.begins,d,u),a===(c.numOfVars-1|0))i.set(t.ends,d,c.exprEndIdx),m=p(l);else if(v.parenCntCanBeFirst(f,i.get(r,u))){var y=1,b=u;v.parenCntReset(f);for(var T=0;y<=l&&0===m&&2!==T;)i.set(t.ends,d,b),0===(T=v.parenCntPut(f,i.get(r,b)))&&v.parenCntCanBeLast(f,i.get(r,b))&&(m=p(y),v.parenCntReset(f)),y=y+1|0,b=b+1|0}i.set(t.isDefined,d,!1)}return m}function y(r,t,e,o,u,f,s,c){if(0===f.size)return a.exprEq(r,t)?n._1(c,f):0;var v=t.length,d=r.length;if(v<d||0===v||0===d)return 0;var l=r[d-1|0];if(l<0&&l!==t[v-1|0])return 0;var p=r[0];return p<0&&p!==t[0]?0:E(r,t,e,o,0,s,(function(r){return u.length>0?(function(r,t,e){var n=e.length;0===t.length?(i.get(r,0).exprBeginIdx=0,i.get(r,0).exprEndIdx=n-1|0):(r.forEach((function(r){-1===r.leftConstPartIdx?(r.exprBeginIdx=0,r.exprEndIdx=i.get(t.begins,0)-1|0):r.leftConstPartIdx===(t.length-1|0)?(r.exprBeginIdx=i.get(t.ends,r.leftConstPartIdx)+1|0,r.exprEndIdx=n-1|0):(r.exprBeginIdx=i.get(t.ends,r.leftConstPartIdx)+1|0,r.exprEndIdx=i.get(t.begins,r.leftConstPartIdx+1|0)-1|0)})),r.sort((function(r,t){return r.numOfVars-t.numOfVars|0})))}(u,r,t),x(t,f,u,0,0,i.get(u,0).exprBeginIdx,s,c)):n._1(c,f)}))}function b(r){return{size:r,begins:o.make(r,0),ends:o.make(r,0),exprs:o.make(r,[]),isDefined:o.make(r,!1)}}function T(r){var t=r.hyps.filter((function(r){return 1===r.typ})),e=[],n=[],o=[];t.forEach((function(r){var t=h(r.expr),i=g(t),a=_(r.expr,t);e.push(t),n.push(i),o.push(a)}));var i=h(r.asrt),a=g(i),u=_(r.asrt,i);e.push(i),n.push(a),o.push(u);var f=b(r.numOfVars);return{frame:r,hypsE:t,numOfHypsE:t.length,frmConstParts:e,constParts:n,varGroups:o,subs:f}}t.subsClone=function(r){return{size:r.size,begins:r.begins.slice(),ends:r.ends.slice(),exprs:r.exprs.slice(),isDefined:r.isDefined.slice()}},t.subsEq=function(r,t){if(r.size!==t.size||!r.isDefined.every((function(r){return r}))||!t.isDefined.every((function(r){return r})))return!1;for(var e=!0,n=0;e&&n<r.size;){var o=i.get(r.exprs,n),a=i.get(r.begins,n),u=i.get(r.ends,n),f=1+(u-a|0)|0,s=i.get(t.exprs,n),c=i.get(t.begins,n);if(f===(1+(i.get(t.ends,n)-c|0)|0))for(var v=a,d=c;e&&v<=u;)e=i.get(o,v)===i.get(s,d),v=v+1|0,d=d+1|0;else e=!1;n=n+1|0}return e},t.subsHash=function(r){if(!r.isDefined.every((function(r){return r})))return 0;for(var t=0,e=0;e<r.size;)t=l.hash2(t,l.hashArrIntFromTo(i.get(r.exprs,e),i.get(r.begins,e),i.get(r.ends,e))),e=e+1|0;return t},t.createConstParts=h,t.createMatchingConstParts=g,t.createSubs=b,t.prepareFrmSubsDataForFrame=T,t.prepareFrmSubsData=function(r,t){var e=a.getAllFramesArr(r).map(T).sort((function(r,t){return l.comparatorAndThen((function(r,t){return l.comparatorBy((function(r){return r.hypsE.length}),r,t)}),(function(r,t){return l.comparatorBy((function(r){return r.frame.ord}),r,t)}),r,t)})),n=d.make(1e3),o=c.make(16);return e.forEach((function(r){d.set(n,r.frame.label,r);var t=i.get(r.frame.asrt,0),e=c.get(o,t);return void 0!==e?void e.push(r):c.set(o,t,[r])})),{all:e,byType:o,byLabel:n}},t.iterateSubstitutions=y,t.applySubs=function(r,t,e){var o={contents:0};r.forEach((function(r){r<0||!i.get(t.isDefined,r)?o.contents=o.contents+1|0:o.contents=o.contents+(1+(i.get(t.ends,r)-i.get(t.begins,r)|0)|0)|0}));for(var a=new Array(o.contents),u=0,f=0;f<o.contents;){var s=i.get(r,u);if(s<0)i.set(a,f,s),f=f+1|0;else if(i.get(t.isDefined,s)){var c=i.get(t.exprs,s),v=1+(i.get(t.ends,s)-i.get(t.begins,s)|0)|0;l.copySubArray(c,i.get(t.begins,s),a,f,v),f=f+v|0}else i.set(a,f,n._1(e,s)),f=f+1|0;u=u+1|0}return a},t.verifyDisjoints=function(r,t,e,o){var a={contents:void 0};return u.forEach(r,(function(r,u){if(f.isNone(a.contents))return s.forEach(u,(function(u){if(f.isNone(a.contents))for(var s=i.get(t.exprs,r),c=i.get(t.begins,r),v=i.get(t.ends,r),d=i.get(t.exprs,u),l=i.get(t.begins,u),p=i.get(t.ends,u),m=c;m<=v;++m)if(f.isNone(a.contents)){var h=i.get(s,m);if(h>=0)for(var g=l;g<=p;++g)if(f.isNone(a.contents)){var E=i.get(d,g);E>=0&&(h===E?a.contents=0===o?0:{TAG:0,frmVar1:r,expr1:s.slice(c,v+1|0),frmVar2:u,expr2:d.slice(l,p+1|0),commonVar:h}:n._2(e,h,E)||(a.contents=0===o?0:{TAG:1,frmVar1:r,expr1:s.slice(c,v+1|0),var1:h,frmVar2:u,expr2:d.slice(l,p+1|0),var2:E}))}}}))})),a.contents},t.frmsEmpty=function(r){return{all:[],byType:c.make(0),byLabel:d.make(0)}},t.frmsSize=function(r){return r.all.length},t.frmsForEach=function(r,t,e){return void 0!==t?f.forEach(c.get(r.byType,t),(function(r){r.forEach(n.__1(e))})):void r.all.forEach(n.__1(e))},t.frmsGetAll=function(r){return r.all},t.frmsGetByLabel=function(r,t){return d.get(r.byLabel,t)},t.frmsGetByType=function(r,t){return c.get(r.byType,t)},t.frmsSelect=function(r,t,e,n){if(void 0!==t){if(void 0!==e){var o=f.keep(d.get(r.byLabel,e),(function(r){return i.get(r.frame.asrt,0)===t}));return void 0!==o?[o]:[]}var a=c.get(r.byType,t);return void 0!==a?a.slice():[]}if(void 0===e)return r.all.slice();var u=d.get(r.byLabel,e);return void 0!==u?[u]:[]},t.frmsGetAllTypes=function(r){return c.keysToArray(r.byType)},t.frmsGetAllGroupedByLabel=function(r){return r.byLabel},t.test_iterateConstParts=function(r,t,e){var n=function(r){return r.begins.map((function(t,e){return[t,i.get(r.ends,e)]}))},o=h(r),a=g(o),u=[];return E(r,t,o,a,0,e,(function(r){return u.push(n(r)),0})),[n(o),u]},t.test_iterateSubstitutions=function(r,t,e){var n=h(r),o=g(n),a=_(r,n),u=s.size(s.fromArray(r.filter((function(r){return r>=0})))),f=b(u),c=[];return y(r,t,n,o,a,f,e,(function(r){for(var t=[],e=0;e<u;++e)t.push(i.get(r.exprs,e).slice(i.get(r.begins,e),i.get(r.ends,e)+1|0));return c.push(t),0})),c}},7566:function(r,t,e){var n=e(1386),o=e(4923),i=e(2971),a=e(1748),u=e(3942),f=e(6517),s=e(303),c=e(3533),v=e(1611),d=e(3021),l=e(2275),p=e(3216);function m(r){return r.reduce((function(r,t){return Math.max(r,function(r){return 0===r.TAG?r._0.height:0}(t))}),0)}function h(r,t,e,o,s){var c=s.proof;if(0===c.TAG){for(var v=c.label,d=s.expr.length-1|0,l=n._1(r,void 0),p=a.get(s.expr,0),g=new Array(d),E={id:l,parent:o,typ:p,label:v,children:g,height:0},_=1;_<=d;++_)a.set(g,_-1|0,{TAG:1,id:n._1(r,void 0),parent:E,symInt:a.get(s.expr,_),sym:u.ctxIntToSymExn(t,a.get(s.expr,_)),color:void 0,isVar:a.get(s.expr,_)>=0});return{TAG:0,_0:{id:l,parent:o,typ:p,label:v,children:g,height:m(g)+1|0}}}var x=c.label,y=u.getFrame(t,x);if(void 0===y)return{TAG:1,_0:"Cannot find a frame by label '"+x+"' in buildSyntaxTreeInner."};var b=function(r,t){var e=new Array(t.numOfVars),n=i.make(t.numOfVars,!1);if(r.length!==t.numOfArgs)return{TAG:1,_0:"extractVarToRecIdxMapping: args.Js_array2.length != frame.numOfArgs"};var o={contents:void 0};t.hyps.forEach((function(t,i){if(f.isNone(o.contents)&&0===t.typ){var u=a.get(t.expr,1);return a.get(n,u)?void(o.contents={TAG:1,_0:"extractVarToRecIdxMapping: locks[v]"}):(a.set(n,u,!0),a.set(e,u,a.get(r,i)))}}));var u=o.contents;return void 0!==u?u:n.some((function(r){return!r}))?{TAG:1,_0:"extractVarToRecIdxMapping: locks->Js_array2.some(lock => !lock)"}:{TAG:0,_0:e}}(c.args,y);if(0!==b.TAG)return{TAG:1,_0:b._0};var T=b._0,A=n._1(r,void 0),S=a.get(y.asrt,0),k=new Array(y.asrt.length-1|0),w={id:A,parent:o,typ:S,label:x,children:k,height:0},I={contents:void 0};y.asrt.forEach((function(o,i){if(i>0&&f.isNone(I.contents)){if(o<0)return a.set(k,i-1|0,{TAG:1,id:n._1(r,void 0),parent:w,symInt:o,sym:u.ctxIntToSymExn(t,o),color:void 0,isVar:!1});var s=h(r,t,e,w,a.get(e,a.get(T,o)));return 0===s.TAG?a.set(k,i-1|0,{TAG:0,_0:s._0}):void(I.contents={TAG:1,_0:s._0})}}));var G=I.contents;return void 0!==G?G:{TAG:0,_0:{id:A,parent:o,typ:S,label:x,children:k,height:m(k)+1|0}}}function g(r,t,e){var n={contents:0};return h((function(r){return n.contents=n.contents+1|0,n.contents-1|0}),r,t,void 0,a.get(t,e))}function E(r,t,e){var n=t.nodes.find((function(r){return u.exprEq(r.expr,e)}));return void 0!==n?{TAG:0,_0:d.createProofTable(t,n,void 0,void 0,void 0)}:{TAG:1,_0:"buildSyntaxProofTableFromProofTreeDto: could not find a proof for: "+u.ctxIntsToStrExn(r,e)}}function _(r,t){if(1===r.children.length){var e=a.get(r.children,0);if(0!==e.TAG){var o=e.sym;return e.isVar&&n._1(t,o)?[e.symInt,o]:void 0}}}function x(r,t){l.forEachU(t,(function(t,e){for(var n=0;n<r.length;)a.get(r,n)===t?(c.spliceObjApply(r,"splice",[n,1,e]),n=n+e.length|0):n=n+1|0}))}function y(r,t,e){if(e.includes(t))return!1;x(e,r);var n=l.get(r,t);return void 0!==n?o.equal(e,n):(l.set(r,t,e),l.forEachU(r,(function(t,e){x(e,r)})),!0)}function b(r){return p.arrFlatMap(r.children,(function(r){return 0===r.TAG?b(r._0):[r.sym]}))}function T(r,t){return v.traverseTree(void 0,r,(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(r,e){return n._1(t,e)}),void 0,void 0)[1]}t.buildSyntaxTree=g,t.buildSyntaxProofTableFromProofTreeDto=E,t.buildSyntaxTreeFromProofTreeDto=function(r,t,e){var n=E(r,t,e);if(0!==n.TAG)return{TAG:1,_0:n._0};var o=n._0;return g(r,o,o.length-1|0)},t.syntaxTreeToSymbols=function r(t){return i.concatMany(t.children.map((function(t){return 0===t.TAG?r(t._0):[t.sym]})))},t.syntaxTreeIsEmpty=function(r){return 0===r.children.length},t.getNodeById=function(r,t){return v.traverseTree(void 0,{TAG:0,_0:r},(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(r,e){if((0===e.TAG?e._0.id:e.id)===t)return e}),void 0,void 0)[1]},t.syntaxTreeForEachNode=T,t.syntaxTreeGetIdsOfAllChildSymbols=function(r){var t=[];return T(r,(function(r){0!==r.TAG&&t.push(r.id)})),s.fromArray(t)},t.syntaxTreeToText=function(r){var t=[];return T(r,(function(r){0!==r.TAG&&t.push(r.sym)})),t.join(" ")},t.syntaxTreeGetNumberOfSymbols=function(r){var t={contents:0};return T(r,(function(r){0!==r.TAG&&(t.contents=t.contents+1|0)})),t.contents},t.isVar=_,t.unify=function r(t,e,n,o,i){if(t.typ===e.typ){var u=_(t,n);if(void 0!==u){var f=u[1],s=_(e,n);return void 0!==s&&f===s[1]?void 0:void(i.contents=y(o,f,b(e)))}var c=_(e,n);if(void 0===c)if(t.children.length===e.children.length)for(var v=t.children.length-1|0,d=0;i.contents&&d<=v;){var l=a.get(t.children,d);if(0===l.TAG){var p=a.get(e.children,d);0===p.TAG?r(l._0,p._0,n,o,i):i.contents=!1}else{var m=a.get(e.children,d);(0===m.TAG||l.isVar||m.isVar||l.sym!==m.sym)&&(i.contents=!1)}d=d+1|0}else i.contents=!1;else i.contents=y(o,c[1],b(t))}else i.contents=!1}},9898:function(r,t,e){var n=e(1386);function o(r,t){return r.map((function(r,e){return String(e+1|0)+": "+(0===r.length?"?":n._1(t,r))})).join("\n")}t.unifErrToStr=function(r,t,e){if("number"==typeof r)return"Details of the error were not stored.";switch(0|r.TAG){case 0:var i=String.fromCharCode(8594);return"Unsatisfied disjoint, common variable "+n._1(t,[r.commonVar])+":\n"+n._1(e,[r.frmVar1])+" "+i+" "+n._1(t,r.expr1)+"\n"+n._1(e,[r.frmVar2])+" "+i+" "+n._1(t,r.expr2);case 1:var a=String.fromCharCode(8594);return"Missing disjoint "+n._1(t,[r.var1])+","+n._1(t,[r.var2])+":\n"+n._1(e,[r.frmVar1])+" "+a+" "+n._1(t,r.expr1)+"\n"+n._1(e,[r.frmVar2])+" "+a+" "+n._1(t,r.expr2);case 2:return"Could not prove this floating statement:\n"+n._1(t,r.expr);case 3:var u=String.fromCharCode(8594);return"Could not find a match for assertion:\n"+n._1(e,r.asrtExpr)+"\n"+u+"\n"+n._1(t,r.expr);case 4:var f=r.args,s=0===f.length?"":":";return"Could not match essential hypothesis #"+String(r.errArgIdx+1|0)+s+"\n"+o(f,t);case 5:var c=r.errArgIdx,v=r.args;return"New variables are not allowed, but one had to be created when unifying "+(v.length===c?"assertion":"essential hypothesis #"+String(c+1|0))+(0===v.length?"":":")+"\n"+o(v,t);case 6:var d=r.frmLabels;return void 0!==d?"Some assertions produce too big search space. Only part of that search space was examined. Those assertions are: "+d.join(", ")+" .":"This assertion produces too big search space. Only part of that search space was examined."}}},9232:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(6517),u=e(7175),f=e(7356),s=e(4518),c=e(3216),v=String.fromCharCode(160),d=String.fromCharCode(9679);function l(r,t){var e=r.depVer;if(void 0!==e&&n._2(r.depVerEq,u.valFromOption(e),t))return r.data}function p(r,t){return r.split(t).map((function(r){return a.getWithDefault(r,"").trim()})).filter((function(r){return r.length>0}))}var m=/[\n\r]/,h=/[\s\n\r]/;function g(r){return p(r,h)}var E=/\+/g,_=/-/g,x=/\//g,y=/_/g;t.nbsp=v,t.circleChar=d,t.currTimeStr=function(r){return new Date(Date.now()).toISOString()},t.compareDates=function(r,t){var e=r.getTime(),n=t.getTime();return e<n?-1:n<e?1:0},t.floatToPctStr=function(r){return String(0|Math.round(100*r))+"%"},t.cacheMake=function(r,t){return{recalc:r,depVerEq:t,depVer:void 0,data:void 0}},t.cacheGetByDepVer=l,t.cacheGet=function(r,t,e){var o=l(r,t);if(void 0!==o)return u.valFromOption(o);r.depVer=u.some(t);var i=n._1(r.recalc,e);return r.data=u.some(i),i},t.multilineTextToNonEmptyLines=function(r){return p(r,m)},t.getSpaceSeparatedValuesAsArray=g,t.strToBase64=function(r){return btoa(r)},t.base64ToStr=function(r){return atob(r)},t.strToSafeBase64=function(r){return btoa(r).replace(E,"-").replace(x,"_")},t.safeBase64ToStr=function(r){return atob(r.replace(y,"/").replace(_,"+"))},t.strToRegex=function(r){try{return{TAG:0,_0:new RegExp(r)}}catch(e){var t=s.internalToOCamlException(e);return{TAG:1,_0:a.getWithDefault(a.flatMap(s.as_js_exn(t),(function(r){return r.message})),"could not create a regular expression from string '"+r+"'")}}},t.$$setTimeout=function(r,t){return setTimeout(r,t)},t.$$clearTimeout=function(r){clearTimeout(r)},t.stubTimeoutId=0,t.versionMake=function(r){return{ver:0,val:r}},t.versionSet=function(r,t){return{ver:r.ver+1|0,val:t}},t.arrayQueueMake=function(r){var t=new Array(r);return{begin:0,end:-1,maxEnd:t.length-1|0,data:t}},t.arrayQueueAdd=function(r,t){r.end===r.maxEnd&&(console.log("q.end == q.maxEnd"),r.data=o.concat(r.data,new Array(r.data.length)),r.maxEnd=r.data.length-1|0),r.end=r.end+1|0,i.set(r.data,r.end,t)},t.arrayQueuePop=function(r){if(!(r.begin>r.end)){var t=i.get(r.data,r.begin);return r.begin=r.begin+1|0,u.some(t)}},t.arrayQueueReset=function(r){r.begin=0,r.end=-1},t.createVarTypeComparator=function(r,t){var e=f.make(f.size(r));return f.forEach(r,(function(r,n){var o=f.get(t,n);if(void 0!==o)return f.set(e,r,o)})),function(r,t){var n=f.get(e,r);if(void 0!==n){var o=f.get(e,t);return void 0!==o?c.intCmp(n,o):-1}return void 0!==f.get(e,t)?1:0}},t.createVarNameComparator=function(r,t,e){var n=f.get(r,t);if(void 0!==n){var o=f.get(r,e);return void 0!==o?0|n.localeCompare(o):-1}return void 0!==f.get(r,e)?1:0},t.createTypeOrderFromStr=function(r,t){var e=f.make(4);return g(r).forEach((function(r){var o=n._1(t,r);if(void 0!==o)return f.set(e,o,f.size(e))})),e}},4125:function(r,t,e){var n=e(1386),o=e(8723);function i(r,t){return o.div(1e5*r|0,t)}function a(r,t,e,n,o){var a=void 0!==n&&n,u=1e5*r|0,f=i(void 0!==t?t:0,u);return{step:u,numOfSteps:f,lastSentNumOfSteps:f,onProgress:e,dontDecrease:a}}function u(r,t){var e=r.onProgress;if(void 0!==e){var o,a,u=i(t,r.step);return r.dontDecrease&&u>r.lastSentNumOfSteps||!r.dontDecrease&&u!==r.lastSentNumOfSteps?(n._1(e,(o=u,a=r.step,Math.imul(o,a)/1e5)),void(r.lastSentNumOfSteps=u)):void 0}}t.progressTrackerMake=a,t.progressTrackerSetCurrPct=u,t.progressTrackerIntMake=function(r,t,e,n,o,i){var u=void 0!==t?t:0;return{progressState:a(r,u/e,n,void 0!==o&&o),cnt:u,maxCnt:e,stepInt:Math.max(e*r/2|0,1)}},t.progressTrackerIntIncCnt=function(r){if(r.cnt=r.cnt+1|0,0===o.mod_(r.cnt,r.stepInt))return u(r.progressState,r.cnt/r.maxCnt)}},256:function(r,t,e){var n=e(1386),o=e(3942),i=e(6891),a="MM_wrk_FindParens";t.procName=a,t.beginFindParens=function(r,t,e){i.beginWorkerInteraction(a,{ctx:r},(function(r,o,i){if(0===r.TAG)return n._1(t,r.pct);n._1(i,void 0),n._1(e,r.parens)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){var e=r.ctx;n._1(t,{TAG:1,parens:o.ctxIntsToStrExn(e,o.findParentheses(e,(function(r){n._1(t,{TAG:0,pct:r})}),void 0))})},t.reqToStr=function(r){return"FindParens"},t.respToStr=function(r){return 0===r.TAG?"FindParensProgress(pct="+String(r.pct)+")":'FindParensDone(parens="'+r.parens+'")'}},1618:function(r,t,e){var n=e(1386),o=e(9232),i=e(2900),a=e(8371),u=e(1748),f=e(3942),s=e(6517),c=e(7175),v=e(6891),d=e(8488),l=e(4518),p="MM_wrk_LoadCtx";function m(r){var t=r.trim();if(0!==t.length){var e=o.strToRegex(t);if(0===e.TAG)return c.some(e._0);throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not parse a regex: "+e._0},Error:new Error}}}t.procName=p,t.beginLoadingMmContext=function(r,t,e,o,i,a,u){v.beginWorkerInteraction(p,{scopes:r,descrRegexToDisc:t,labelRegexToDisc:e,descrRegexToDepr:o,labelRegexToDepr:i},(function(r,t,e){if(0===r.TAG)return n._1(a,r.pct);n._1(e,void 0),n._1(u,r.ctx)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){var e=r.labelRegexToDepr,o=r.descrRegexToDepr,v=r.labelRegexToDisc,d=r.descrRegexToDisc,p=r.scopes,h=p.reduce((function(r,t){return r+t.expectedNumOfAssertions|0}),0),g=p.map((function(r){return r.expectedNumOfAssertions/h}));try{for(var E=f.createContext(void 0,void 0,void 0),_=0,x=p.length;_<x;++_){var y=u.get(p,_),b=g.reduce(function(r){return function(t,e,n){return n<r?t+e:t}}(_),0),T=u.get(g,_);if(f.loadContext(u.get(p,_).ast,c.some(E),y.stopBefore,y.stopAfter,void 0,y.expectedNumOfAssertions,m(d),m(v),m(o),m(e),function(r,e){return function(o){n._1(t,{TAG:0,pct:r+o*e})}}(b,T),void 0,void 0),y.resetNestingLevel)for(;0!==f.getNestingLevel(E);)f.closeChildContext(E)}return n._1(t,{TAG:0,pct:1}),n._1(t,{TAG:1,ctx:{TAG:0,_0:E}})}catch(r){var A=l.internalToOCamlException(r);if(A.RE_EXN_ID===a.MmException)return n._1(t,{TAG:1,ctx:{TAG:1,_0:A._1.msg}});if(A.RE_EXN_ID===i.$$Error)return n._1(t,{TAG:1,ctx:{TAG:1,_0:s.getWithDefault(A._1.message,"Internal error.")}});throw A}},t.reqToStr=function(r){return"LoadMmContext"},t.respToStr=function(r){return 0===r.TAG?"MmContextLoadProgress(pct="+String(r.pct)+")":"MmContextLoaded"},t.createMmScopesForFrame=function(r,t){var e=[];return r.reduce((function(r,n){if(r)return r;var o=function(r){switch(d.readInstrFromStr(r.readInstr)){case 0:return[void 0,void 0,r.allLabels];case 1:var t=r.allLabels.findIndex((function(t){return t===r.label}));return-1!==t?[r.label,void 0,r.allLabels.slice(0,t)]:[void 0,void 0,r.allLabels];case 2:var e=r.allLabels.findIndex((function(t){return t===r.label}));return-1!==e?[void 0,r.label,r.allLabels.slice(0,e+1|0)]:[void 0,void 0,r.allLabels]}}(n),i=o[2],u=i.includes(t)?[t,void 0,i.indexOf(t),!1]:[o[0],o[1],i.length,!0],f=u[2],s=n.ast;if(void 0===s)throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot create MM context for a frame without ast."},Error:new Error};var c={ast:s,expectedNumOfAssertions:f,stopBefore:u[0],stopAfter:u[1],resetNestingLevel:u[3]};return e.push(c),i.length!==f}),!1),e}},1317:function(r,t,e){var n=e(1386),o=e(8371),i=e(6891),a=e(4518),u="MM_wrk_ParseMmFile";t.procName=u,t.beginParsingMmFile=function(r,t,e){i.beginWorkerInteraction(u,{mmFileText:r},(function(r,o,i){if(0===r.TAG)return n._1(t,r.pct);n._1(i,void 0),n._1(e,r.parseResult)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){try{var e=o.parseMmFile(r.mmFileText,void 0,void 0,(function(r){n._1(t,{TAG:0,pct:r})}),void 0);return n._1(t,{TAG:0,pct:1}),n._1(t,{TAG:1,parseResult:{TAG:0,_0:e}})}catch(r){var i=a.internalToOCamlException(r);if(i.RE_EXN_ID===o.MmException)return n._1(t,{TAG:1,parseResult:{TAG:1,_0:i._1.msg}});throw i}},t.reqToStr=function(r){return"ParseMmFile"},t.respToStr=function(r){return 0===r.TAG?"MmFileParseProgress(pct="+String(r.pct)+")":"MmFileParsed"}},2436:function(r,t,e){var n=e(1386),o=e(9232),i=e(6517);t.serialize=function(r){return r},t.deserialize=function(r){return r},t.logClientIsSendingRequest=function(r,t,e,a){var u=i.getWithDefault(i.map(a,(function(r){return n._1(r,e)})),"");console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] C~> "+u)},t.logClientReceivedResponse=function(r,t,e,a){var u=i.getWithDefault(i.map(a,(function(r){return n._1(r,e)})),"");console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] ->C "+u)},t.logWorkerIsSendingResponse=function(r,t,e,i){console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] W~> "+n._1(i,e))},t.logWorkerReceivedRequest=function(r,t,e,i){console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] ->W "+n._1(i,e))}},6891:function(r,t,e){var n=e(1386),o=e(1748),i=e(2436),a=e(6517),u=e(7175),f=e(6181),s=e(3216),c=f.create("MM_wrk_client.WorkerException"),v={contents:void 0},d=[],l={contents:0};t.beginWorkerInteraction=function(r,t,e,f,p,m,h){var g=void 0!==f&&f,E={contents:-1},_={contents:function(r){}};E.contents=function(r,t){var e=(l.contents=l.contents+1|0,l.contents-1|0);return d.push({id:e,callback:r,traceEnabled:t}),e}((function(t){var a=i.deserialize(t);g&&i.logClientReceivedResponse(E.contents,r,a,m),n._3(e,a,_.contents,(function(r){for(var t=E.contents,e=0;e<d.length;)o.get(d,e).id===t?d.splice(e,1):e=e+1|0}))}),g),_.contents=function(t){g&&i.logClientIsSendingRequest(E.contents,r,t,p);var e={clientId:E.contents,procName:r,body:i.serialize(t),traceEnabled:g};if(a.isNone(v.contents)){var o=new Worker("./webworker-main.js");o.onmessage=function(r){var t=r.data;s.arrForEach(d,(function(r){if(r.id===t.clientId)return n._1(r.callback,t.body),u.some(void 0)}))},v.contents=u.some(o)}var f=v.contents;if(void 0!==f)return u.valFromOption(f).postMessage(e);throw{RE_EXN_ID:c,_1:"Could not instantiate a webworker.",Error:new Error}},n._1(_.contents,t)},t.terminateWorker=function(r){var t=v.contents;if(void 0!==t)return u.valFromOption(t).terminate(),v.contents=void 0,void d.splice(0,d.length)}},5768:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(1748),u=e(3942),f=e(7175),s=e(4518);function c(r){var t=o.multilineTextToNonEmptyLines(r);return 0===t.length?{TAG:0,_0:[]}:t.reduce((function(r,t){if(0!==r.TAG)return r;var e=r._0,n=function(r){var t=o.getSpaceSeparatedValuesAsArray(r);return 3!==t.length?{TAG:1,_0:"A line representing a variable definition should consist of exactly three parts separated with a whitespace."}:{TAG:0,_0:t}}(t);return 0!==n.TAG?{TAG:1,_0:n._0}:(e.push(n._0),{TAG:0,_0:e})}),{TAG:0,_0:[]})}t.prepareParenInts=function(r,t){for(var e=o.getSpaceSeparatedValuesAsArray(t),n=[],i=(e.length/2|0)-1|0,f=0;f<=i;++f){var s=a.get(e,f<<1),c=a.get(e,1+(f<<1)|0),v=u.ctxSymToInt(r,s);if(void 0!==v&&u.isConst(r,s)){var d=u.ctxSymToInt(r,c);void 0!==d&&u.isConst(r,c)&&(n.push(v),n.push(d))}}return n},t.textToVarDefs=c,t.createWrkCtx=function(r,t,e){var v=u.createContext(f.some(r),void 0,void 0),d=[function(r){var e=c(t);if(0!==e.TAG)return{varsErr:e._0,disjErr:void 0};try{return void e._0.forEach((function(r){u.applySingleStmt(v,{TAG:3,symbols:[a.get(r,2)]},void 0,void 0,void 0,void 0,void 0),u.applySingleStmt(v,{TAG:5,label:a.get(r,0),expr:[a.get(r,1),a.get(r,2)]},void 0,void 0,void 0,void 0,void 0)}))}catch(r){var n=s.internalToOCamlException(r);if(n.RE_EXN_ID===i.MmException)return{varsErr:n._1.msg,disjErr:void 0};throw n}},function(r){try{return void o.multilineTextToNonEmptyLines(e).forEach((function(r){return u.applySingleStmt(v,{TAG:4,vars:r.split(",").map((function(r){return r.trim()}))},void 0,void 0,void 0,void 0,void 0)}))}catch(r){var t=s.internalToOCamlException(r);if(t.RE_EXN_ID===i.MmException)return{varsErr:void 0,disjErr:t._1.msg};throw t}}].reduce((function(r,t){return void 0!==r?r:n._1(t,void 0)}),void 0);return void 0!==d?{TAG:1,_0:d}:{TAG:0,_0:v}}},8887:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(2694),u=e(7175),f=e(6891),s=e(519),c=e(5768),v="MM_wrk_ctx",d={contents:void 0},l=o.cacheMake((function(r){return r}),(function(r,t){return r===t})),p=o.cacheMake((function(r){return r}),(function(r,t){return r===t})),m=o.cacheMake((function(r){return s.prepareFrmSubsData(r[1],void 0)}),(function(r,t){return r[0]===t[0]&&r[1]===t[1]})),h=o.cacheMake((function(r){return a.makeParenCnt(r[1],r[0].parens)}),(function(r,t){return r[0]===t[0]&&r[1]===t[1]}));t.procName=v,t.beginWorkerInteractionUsingCtx=function(r,t,e,o,i,a,u,s,c,d,l){var p=void 0!==d&&d,m={TAG:0,settingsVer:r,preCtxVer:e,varsText:i,disjText:a};f.beginWorkerInteraction(v,m,(function(i,a,v){if("number"!=typeof i)return 0===i.TAG?i.settingsVer===r?(n._1(a,{TAG:1,settingsVer:r,settings:t}),n._1(a,m)):void 0:i.preCtxVer===e?(n._1(a,{TAG:2,preCtxVer:e,preCtx:o}),n._1(a,m)):void 0;n._1(v,void 0),f.beginWorkerInteraction(u,s,c,p,void 0,void 0,void 0)}),p,void 0,void 0,void 0)},t.getWrkCtxExn=function(r){var t=d.contents;if(void 0!==t)return t.wrkCtx;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkCtx is not created in the worker thread."},Error:new Error}},t.getWrkParenCntExn=function(r){var t=d.contents;if(void 0!==t)return t.wrkParenCnt;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkParenCnt is not created in the worker thread."},Error:new Error}},t.getWrkFrmsExn=function(r){var t=d.contents;if(void 0!==t)return t.wrkFrms;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkFrms is not created in the worker thread."},Error:new Error}},t.processOnWorkerSide=function(r,t){switch(0|r.TAG){case 0:d.contents=void 0;var e=function(r,t,e,n){var a=o.cacheGetByDepVer(l,r);if(void 0===a)return{TAG:1,_0:{TAG:0,settingsVer:r}};var f=o.cacheGetByDepVer(p,t);if(void 0===f)return{TAG:1,_0:{TAG:1,preCtxVer:t}};var s=u.valFromOption(f),v=c.createWrkCtx(s,e,n);if(0===v.TAG)return{TAG:0,_0:{wrkFrms:o.cacheGet(m,[r,t],[a,s]),wrkParenCnt:o.cacheGet(h,[r,t],[a,s]),wrkCtx:v._0}};throw{RE_EXN_ID:i.MmException,_1:{msg:"There was an error creating wrkCtx in the worker thread."},Error:new Error}}(r.settingsVer,r.preCtxVer,r.varsText,r.disjText);return 0!==e.TAG?n._1(t,e._0):(d.contents=e._0,n._1(t,0));case 1:return void o.cacheGet(l,r.settingsVer,r.settings);case 2:return void o.cacheGet(p,r.preCtxVer,r.preCtx)}},t.reqToStr=function(r){switch(0|r.TAG){case 0:return"PrepareWrkPrecalcData";case 1:return"SetSettings(settingsVer="+String(r.settingsVer)+")";case 2:return"SetPreCtx(preCtxVer="+String(r.preCtxVer)+")"}},t.respToStr=function(r){return"number"==typeof r?"Ok":0===r.TAG?"GetSettings(settingsVer="+String(r.settingsVer)+")":"GetPreCtx(preCtxVer="+String(r.preCtxVer)+")"}},8488:function(r,t,e){var n=e(1386),o=e(9232),i=e(4763),a=e(4923),u=e(8371),f=e(2971),s=e(1748),c=e(3942),v=e(2694),d=e(6517),l=e(6369),p=e(7175),m=e(2815),h=e(9775),g=e(335),E=e(5082),_=e(4530),x=e(7566),y=e(7659),b=e(1854),T=e(519),A=e(5768),S=e(7712),k=e(5650),w=e(3021),I=e(6310),G=e(8099),M=e(2275),N=e(8615),C=e(5981),D=e(4518),U=e(3216),j=e(9898),P=e(2867);function R(r){return 0===r.TAG?o.getSpaceSeparatedValuesAsArray(r.text):o.getSpaceSeparatedValuesAsArray(r._0.text)}function O(r){return 0===r.TAG?r.text:r._0.text}function F(r,t,e,n){var i=o.getSpaceSeparatedValuesAsArray(r);return{TAG:0,text:i.join(" "),syms:i.map((function(r){var n,o=d.flatMap(t,(function(t){return M.get(t,r)}));if(void 0!==o)n=o;else{var i=d.flatMap(e,(function(t){return M.get(t,r)}));n=void 0!==i?i:void 0}return{sym:r,color:n}}))}}function V(r){switch(r){case 0:return[0,!1];case 1:return[1,!1];case 2:return[1,!0]}}function B(r,t,e,n){return{id:r,label:e,labelEditMode:!1,typ:t,typEditMode:!1,isGoal:n,isBkm:!1,cont:{TAG:0,text:"",syms:[]},contEditMode:!0,isDuplicated:!1,jstfText:"",jstfEditMode:!1,stmtErr:void 0,expr:void 0,jstf:void 0,proofTreeDto:void 0,src:void 0,proof:void 0,proofStatus:void 0,unifErr:void 0,syntaxErr:void 0}}function L(r){var t,e=r.expr;if(void 0===e)throw{RE_EXN_ID:u.MmException,_1:{msg:"Expr must be set for a userStmt before converting to rootStmt."},Error:new Error};return t=e,{isHyp:0===r.typ,label:r.label,expr:t,jstf:r.jstf}}function X(r){var t=r.cont;if(0===t.TAG)return r;var e=t._0;if(void 0===e.clickedNodeId)return r;var n=a.obj_dup(r);return n.cont={TAG:1,_0:{text:e.text,exprTyp:e.exprTyp,root:e.root,clickedNodeId:void 0,expLvl:e.expLvl}},n}function z(r,t){return p.undefined_to_opt(r.stmts.find((function(r){return r.id===t})))}function W(r,t){return p.undefined_to_opt(r.stmts.find((function(r){return r.label===t})))}function q(r,t){var e=z(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:u.MmException,_1:{msg:"editorGetStmtByIdExn: Cannot find a step by id."},Error:new Error}}function H(r,t,e){var o=a.obj_dup(r);return o.stmts=r.stmts.map((function(r){return r.id===t?n._1(e,r):r})),o}function $(r,t){return r.checkedStmtIds.some((function(r){return r[0]===t}))}function K(r,t){if($(r,t)){var e=a.obj_dup(r);return e.checkedStmtIds=r.checkedStmtIds.filter((function(r){return r[0]!==t})),e}var n=a.obj_dup(r);return n.checkedStmtIds=r.checkedStmtIds.concat([[t,new Date]]),n}function J(r){var t=a.obj_dup(r);return t.checkedStmtIds=[],t.stmts=r.stmts.map(X),t}function Q(r,t){var e=a.obj_dup(r);return e.checkedStmtIds=r.checkedStmtIds.filter((function(r){return r[0]!==t})),e.stmts=r.stmts.filter((function(r){return r.id!==t})),e}function Z(r,t){var e=r.stmts.length;return 0!==e&&0!==r.checkedStmtIds.length&&(!(!t||$(r,s.get(r.stmts,0).id))||!t&&!$(r,s.get(r.stmts,e-1|0).id))}function Y(r,t){if(!Z(r,t))return r;var e=r.stmts.length,n=r.stmts.slice();if(t){for(var o=e-2|0,i=0;i<=o;++i)if(!$(r,s.get(n,i).id)&&$(r,s.get(n,i+1|0).id)){var u=s.get(n,i);s.set(n,i,s.get(n,i+1|0)),s.set(n,i+1|0,u)}}else for(var f=e-1|0;f>=1;--f)if($(r,s.get(n,f-1|0).id)&&!$(r,s.get(n,f).id)){var c=s.get(n,f);s.set(n,f,s.get(n,f-1|0)),s.set(n,f-1|0,c)}var v=a.obj_dup(r);return v.stmts=n,v}function rr(r,t,e,n){var o,i=void 0!==e&&e,a=N.fromArray(r.stmts.map((function(r){return r.label}))),u=A.textToVarDefs(r.varsText);if(0===u.TAG&&u._0.forEach((function(r){N.add(a,s.get(r,0))})),void 0!==t)o=t;else if(i){var f=r.stmts.find((function(r){return r.isGoal}));o=void 0!==f?f.label+".":""}else o="";for(var v,l=1,p=o+String(l);v=p,N.has(a,v)||c.isHyp(r.preCtx,v)||i&&d.isSome(c.getTokenType(r.preCtx,v));)l=l+1|0,p=o+String(l);return p}function tr(r){return 0===r.checkedStmtIds.length?void 0:p.undefined_to_opt(r.stmts.find((function(t){return $(r,t.id)})))}function er(r,t,e,n){var o,i=void 0!==t&&t,u=String(r.nextStmtId),s=r.stmts.reduce((function(r,t){return 1===t.typ?r+1|0:r}),0),c=r.settings.defaultStmtLabel.trim(),v=0===s&&c.length>0?r.stmts.some((function(r){return r.label===c}))?rr(r,c,i):c:rr(r,"",i),l=0===s&&r.settings.initStmtIsGoal,p=d.map(tr(r),(function(r){return r.id})),m=a.obj_dup(r);if(void 0!==p)o=f.concatMany(r.stmts.map((function(r){if(r.id!==p)return[r];var t=a.obj_dup(B(u,1,v,l));return[(t.isBkm=d.getWithDefault(e,r.isBkm),t),r]})));else{var h=a.obj_dup(B(u,1,v,l));o=r.stmts.concat([(h.isBkm=d.getWithDefault(e,!1),h)])}return m.stmts=o,[(m.nextStmtId=r.nextStmtId+1|0,m),u]}function nr(r,t,e,n){var o=void 0!==e&&e,i=r.checkedStmtIds,u=J(r),f=er(0<=t&&t<u.stmts.length?K(u,s.get(u.stmts,t).id):u,o,void 0),c=a.obj_dup(f[0]);return c.checkedStmtIds=i,[c,f[1]]}function or(r){return 1===r.checkedStmtIds.length}function ir(r,t){return!r.stmts.some((function(r){return r.id===t&&(!!(r.labelEditMode||r.typEditMode||r.contEditMode)||r.jstfEditMode)}))}function ar(r,t){var e=a.obj_dup(r);return e.disjEditMode=!1,e.disjText=t,e}function ur(r,t,e){return H(r,t,(function(r){if(""===e.trim())return r;var t=a.obj_dup(r);return t.labelEditMode=!1,t.label=e,t}))}function fr(r,t,e){return H(r,t,(function(t){if(""===e.trim())return t;var n=a.obj_dup(t);return n.isDuplicated=!1,n.contEditMode=!1,n.cont=F(e,p.some(r.preCtxColors),p.some(r.wrkCtxColors)),n}))}function sr(r,t){var e=M.make(100);return c.forEachHypothesisInDeclarationOrder(r,(function(n){if(0===n.typ){var o=c.ctxIntToSym(r,s.get(n.expr,0));if(void 0!==o){var i=M.get(t,o);void 0!==i&&M.set(e,c.ctxIntToSymExn(r,s.get(n.expr,1)),i)}}})),e}function cr(r){var t,e,n,o,i=a.obj_dup(r);return i.wrkCtxColors=(t=r.varsText,e=r.typeColors,n=M.make(16),0===(o=A.textToVarDefs(t)).TAG&&o._0.forEach((function(r){var t=s.get(r,2),o=s.get(r,1),i=M.get(e,o);if(void 0!==i)return M.set(n,t,i)})),n),i}function vr(r){var t=a.obj_dup(r);return t.stmts=r.stmts.map((function(t){var e=a.obj_dup(t);return e.cont=F(O(t.cont),p.some(r.preCtxColors),p.some(r.wrkCtxColors)),e})),t}function dr(r){return vr(cr(r))}function lr(r,t){var e=a.obj_dup(r);return e.varsEditMode=!1,e.varsText=t,dr(e)}function pr(r){var t=function(t){return t.typ?r.settings.stickGoalToBottom&&t.isGoal?3:2:1},e=function(r,e){return t(r)-t(e)|0},o=r.stmts.length;if(o<2)return r;for(var i=r.stmts.slice(),u=!0,f=o-2|0;f>=0&&u;){u=!1;for(var c=0;c<=f;++c)if(n._2(e,s.get(i,c),s.get(i,c+1|0))>0){var v=s.get(i,c);s.set(i,c,s.get(i,c+1|0)),s.set(i,c+1|0,v),u=!0}f=f-1|0}var d=a.obj_dup(r);return d.stmts=i,d}function mr(r){var t=a.obj_dup(r);return t.stmts=r.stmts.map((function(r){var t=a.obj_dup(r);return t.syntaxErr=void 0,t.unifErr=void 0,t.proofStatus=void 0,t.proof=void 0,t.src=void 0,t.proofTreeDto=void 0,t.jstf=void 0,t.expr=void 0,t.stmtErr=void 0,t})),t.disjErr=void 0,t.varsErr=void 0,t}function hr(r){return d.isSome(r.stmtErr)}function gr(r){return!(!d.isSome(r.stmtErr)&&!d.isSome(r.syntaxErr))||d.isSome(r.unifErr)}function Er(r){return!(!d.isSome(r.varsErr)&&!d.isSome(r.disjErr))||r.stmts.some(hr)}function _r(r){var t=A.createWrkCtx(r.preCtx,r.varsText,r.disjText);if(0!==t.TAG){var e,n=t._0,o=n.varsErr;if(void 0!==o){var i=a.obj_dup(r);i.varsErr=o,e=i}else e=r;var u=n.disjErr;if(void 0===u)return e;var f=a.obj_dup(e);return f.disjErr=u,f}var s=a.obj_dup(r);return s.wrkCtx=p.some(t._0),s}function xr(r){var t=r.trim();if(0===t.length)return{TAG:0,_0:void 0};var e=t.split(":");return 2!==e.length?{TAG:1,_0:"Cannot parse justification: '"+t+"'. A justification must contain exactly one colon symbol."}:""===s.get(e,1).trim()?{TAG:1,_0:"Cannot parse justification: '"+t+"'. Reference must not be empty."}:{TAG:0,_0:{args:o.getSpaceSeparatedValuesAsArray(s.get(e,0)),label:s.get(e,1).trim()}}}function yr(r){if(d.isSome(r.stmtErr)||0===r.typ)return r;var t=xr(r.jstfText);if(0===t.TAG){var e=a.obj_dup(r);return e.jstf=t._0,e}var n=a.obj_dup(r);return n.stmtErr={code:-1,msg:t._0},n}function br(r,t,e){return!!N.has(e,r)||c.isHyp(t,r)}function Tr(r){var t=r.wrkCtx;if(void 0!==t){var e=p.valFromOption(t),o=r.stmts.length,i=N.make(o),f=m.make(o,c.ExprHash),s={contents:void 0},v=[function(r){if(d.isSome(r.stmtErr))return r;if(0===r.typ||1===r.typ&&r.isGoal){var t=c.getTokenType(e,r.label);if(void 0!==t){if(0===r.typ){var n=a.obj_dup(r);return n.stmtErr={code:-1,msg:"[1] Cannot reuse label '"+r.label+"'."},n}if(t>=4)return r;var o=a.obj_dup(r);return o.stmtErr={code:-1,msg:"[2] Cannot reuse label '"+r.label+"'."},o}if(!br(r.label,e,i))return r;var u=a.obj_dup(r);return u.stmtErr={code:-1,msg:"[3] Cannot reuse label '"+r.label+"'."},u}if(!br(r.label,e,i))return r;var f=a.obj_dup(r);return f.stmtErr={code:-1,msg:"[4] Cannot reuse label '"+r.label+"'."},f},function(r){if(d.isSome(r.stmtErr))return r;try{var t=a.obj_dup(r);return t.expr=c.ctxSymsToIntsExn(e,R(r.cont)),t}catch(t){var n=D.internalToOCamlException(t);if(n.RE_EXN_ID===u.MmException){var o=a.obj_dup(r);return o.stmtErr={code:-1,msg:n._1.msg},o}throw n}},function(r){if(d.isSome(r.stmtErr))return r;var t=s.contents;if(void 0===t)return r;if(!r.isGoal)return r;var e=a.obj_dup(r);return e.stmtErr={code:-1,msg:"Cannot re-define the goal. Previously defined goal is the step labeled '"+t+"'"},e},yr,function(t){var n=r.frms;if(d.isSome(t.stmtErr))return t;var o=t.jstf;if(void 0===o)return t;var f=o.label,s=o.args,v=s.find((function(r){return!br(r,e,i)}));if(void 0!==v){var l=a.obj_dup(t);return l.stmtErr={code:-1,msg:"The label '"+v+"' is not defined."},l}if(c.isAsrt(e,f)){var p=T.frmsGetByLabel(n,f);if(void 0!==p){var m=p.numOfHypsE,h=s.length;if(h===m)return t;var g=1===m?"essential hypothesis":"essential hypotheses",E=1===h?"is":"are",_=a.obj_dup(t);return _.stmtErr={code:-1,msg:"'"+f+"' assertion expects "+String(m)+" "+g+" but "+String(h)+" "+E+" provided."},_}throw{RE_EXN_ID:u.MmException,_1:{msg:"Could not get frame by label '"+f+"'"},Error:new Error}}var x=a.obj_dup(t);return x.stmtErr={code:-1,msg:"The label '"+f+"' doesn't refer to any assertion."},x},function(r){if(d.isSome(r.stmtErr))return r;var t=r.expr;if(void 0!==t){var n=c.getHypByExpr(e,t);if(void 0!==n){var o=a.obj_dup(r);return o.stmtErr={code:1,msg:"This statement is the same as the previously defined hypothesis - '"+n.label+"'"},o}var i=m.get(f,t);if(void 0===i)return r;var s=a.obj_dup(r);return s.stmtErr={code:1,msg:"This statement is the same as the previous one - '"+i+"'"},s}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot validateStmtExpr without expr."},Error:new Error}}];return r.stmts.reduce((function(r,t){if(Er(r))return r;var e=v.reduce((function(r,t){return d.isSome(r.stmtErr)?r:n._1(t,r)}),t);if(N.add(i,e.label),!d.isSome(e.stmtErr)){var o=e.expr;if(void 0===o)throw{RE_EXN_ID:u.MmException,_1:{msg:"Expr must be set in prepareUserStmtsForUnification."},Error:new Error};m.set(f,o,e.label),e.isGoal&&(s.contents=e.label)}return H(r,e.id,(function(r){return e}))}),r)}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot prepareUserStmtsForUnification without wrkCtx."},Error:new Error}}function Ar(r){var t=mr(r);return[pr,_r,Tr].reduce((function(r,t){return Er(r)?r:n._1(t,r)}),t)}function Sr(r,t,e,n,o){var i=void 0!==n&&n,f=r.wrkCtx;if(void 0!==f){var v,d=p.valFromOption(f),l=t.length;if(0===l)return[r,[]];if(void 0!==e){if(t.length!==e.length)throw{RE_EXN_ID:u.MmException,_1:{msg:"varTypes->Js_array2.length != varNames->Js_array2.length"},Error:new Error};v=e}else{var m=E.fromArray(r.settings.typeSettings.map((function(r){return[r.typ,r.prefix]})));v=c.generateNewVarNames(d,t,p.some(m),void 0,void 0)}var h=c.generateNewLabels(d,"var",l,void 0,void 0,void 0),g=c.ctxIntsToSymsExn(d,t);i||(c.applySingleStmt(d,{TAG:3,symbols:v},void 0,void 0,void 0,void 0,void 0),h.forEach((function(r,t){c.applySingleStmt(d,{TAG:5,label:r,expr:[s.get(g,t),s.get(v,t)]},void 0,void 0,void 0,void 0,void 0)})));var _=c.ctxSymsToIntsExn(d,v),x=h.map((function(r,t){return r+" "+s.get(g,t)+" "+s.get(v,t)})).join("\n"),y=a.obj_dup(r);return y.varsText=[r.varsText,x].join("\n").trim(),[cr(y),_]}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot create new variables without wrkCtx."},Error:new Error}}function kr(r,t){var e=r.wrkCtx;if(void 0!==e){var n=p.valFromOption(e),o=[];if(c.disjForEachArr(t,void 0,void 0,void 0,void 0,(function(r){var t=c.ctxIntsToSymsExn(n,r);c.applySingleStmt(n,{TAG:4,vars:t},void 0,void 0,void 0,void 0,void 0),o.push(t.join(","))})),0===o.length)return r;var i=o.join("\n"),f=a.obj_dup(r);return f.disjText=[r.disjText,i].join("\n").trim(),f}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot create new disjoints without wrkCtx."},Error:new Error}}function wr(r,t){var e=r.expr;if(void 0!==e)return c.exprEq(e,t.expr);throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot compare steps without expr."},Error:new Error}}function Ir(r){var t=r.wrkCtx;if(void 0!==t){var e=p.valFromOption(t),n=N.fromArray(U.arrFlatMap(r.stmts,(function(r){return R(r.cont)})));c.getLocalHyps(e).forEach((function(r){if(0===r.typ&&r.label.startsWith("."))return N.add(n,c.ctxIntToSymExn(e,s.get(r.expr,1)))}));var o,i=c.getLocalVars(e).filter((function(r){return!N.has(n,r)}));if(0===i.length)o=r;else{var a=y.fromArray(c.ctxSymsToIntsExn(e,i));o=lr(r,c.getLocalHyps(e).filter((function(r){return 0===r.typ&&!y.has(a,s.get(r.expr,1))})).map((function(r){return r.label+" "+c.ctxIntToSymExn(e,s.get(r.expr,0))+" "+c.ctxIntToSymExn(e,s.get(r.expr,1))})).join("\n"))}var f=c.disjMake(void 0);c.disjForEach(c.getLocalDisj(e),(function(r,t){if(N.has(n,c.ctxIntToSymExn(e,r))&&N.has(n,c.ctxIntToSymExn(e,t)))return c.disjAddPair(f,r,t)}));var v=c.disjToArr(f,!0,(function(r){return c.ctxIntToSym(e,r)}),(function(r){return c.getTypeOfVar(e,r)}),p.some(o.typeOrderInDisj),void 0).map((function(r){return c.ctxIntsToSymsExn(e,r).join(",")})).join("\n");return o.disjText!==v?ar(o,v):o}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot remove unused variables without wrkCtx."},Error:new Error}}function Gr(r,t,e,n){if("number"!=typeof e&&1===e.TAG){var o=e.label,i=e.args,a=c.getFrame(r,o);if(void 0!==a){var v=[],d={contents:!0};return a.hyps.forEach((function(r,e){if(1===r.typ&&d.contents){var a=f.get(i,e);if(void 0===a)throw{RE_EXN_ID:u.MmException,_1:{msg:"Too few arguments for '"+o+"' in srcToJstf."},Error:new Error};var c=m.get(n,s.get(t.nodes,a).expr);void 0!==c?v.push(c.label):d.contents=!1}})),d.contents?{args:v,label:o}:void 0}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot find an assertion '"+o+"' in srcToJstf."},Error:new Error}}}function Mr(r,t,e){if(void 0===t)return d.flatMap(e,(function(t){return M.get(t,r)}));var n=M.get(p.valFromOption(t),r);return void 0!==n?n:d.flatMap(e,(function(t){return M.get(t,r)}))}function Nr(r,t,e,n){return{id:r.id,parent:r.parent,typ:r.typ,label:r.label,children:r.children.map((function(r){return 0===r.TAG?{TAG:0,_0:Nr(r._0,t,e)}:{TAG:1,id:r.id,parent:r.parent,symInt:r.symInt,sym:r.sym,color:Mr(r.sym,t,e),isVar:r.isVar}})),height:r.height}}function Cr(r,t,e,n,o,a,u){if(0===u.TAG)return"Error: only compressed proofs are supported.";var f=function(r,t){var e=r.length;if(e<=50)return[r];for(var n=[],o=i.ceil_int(e/50),a=1;a<=o;++a){var u=Math.imul(a-1|0,50);n.push(r.substr(u,50))}return n}(u.compressedProofBlock).join(" "),v=a.label+" $p "+O(a.cont)+" $= ( "+u.labels.join(" ")+" ) "+f+" $.",d=0===o.trim().length,l=e.length>0||!c.disjIsEmpty(n)||!d,m=[];l&&m.push("${");var h=e.filter((function(r){return 0===r.typ})).map((function(t){return c.ctxIntToSymExn(r,s.get(t.expr,1))}));return h.length>0&&m.push("$v "+h.join(" ")+" $."),e.forEach((function(t){0!==t.typ||m.push(t.label+" $f "+c.ctxIntsToStrExn(r,t.expr)+" $.")})),c.disjForEachArr(n,!0,(function(t){return c.ctxIntToSym(r,t)}),(function(t){return c.getTypeOfVar(r,t)}),p.some(t),(function(t){m.push("$d "+c.ctxIntsToStrExn(r,t)+" $.")})),e.forEach((function(t){1!==t.typ||m.push(t.label+" $e "+c.ctxIntsToStrExn(r,t.expr)+" $.")})),d||m.push("$( "+o+" $)"),m.push(v),l&&m.push("$}"),m.join("\r\n")}function Dr(r,t,e){return r.stmts.reduce((function(r,n){if(0!==r.TAG)return r;var o=r._0;if(0===n.typ)return{TAG:0,_0:o};var i=xr(n.jstfText);if(0!==i.TAG)return{TAG:1,_0:"Cannot parse justification '"+n.jstfText+"' for the step '"+n.label+"'"};var u=i._0;if(void 0===u)return{TAG:0,_0:o};if(!u.args.includes(t))return{TAG:0,_0:o};var f={args:u.args.map((function(r){return r===t?e:r})),label:u.label};return{TAG:0,_0:H(o,n.id,(function(r){var t=a.obj_dup(r);return t.jstfText=G.jstfToStr(f),t}))}}),{TAG:0,_0:r})}var Ur=/[\s:]+/g;function jr(r,t,e){var n=e.replace(Ur,"");if(""===n)return{TAG:1,_0:"label must not be empty."};var o=r.stmts.find((function(r){return r.id!==t&&r.label===n}));if(void 0!==o)return{TAG:1,_0:"label '"+n+"' is used by another step."};var i=z(r,t);if(void 0===i)return{TAG:0,_0:r};if(i.label===n)return{TAG:0,_0:r};var u=Dr(r,i.label,n);return 0===u.TAG?{TAG:0,_0:H(u._0,t,(function(r){var t=a.obj_dup(r);return t.label=n,t}))}:{TAG:1,_0:u._0}}function Pr(r,t,e){var n=z(r,t);if(void 0===n)return{TAG:1,_0:"Cannot find a step with id = '"+t+"'"};var o=z(r,e);if(void 0===o)return{TAG:1,_0:"Cannot find a step with id = '"+e+"'"};if(O(n.cont)!==O(o.cont))return{TAG:1,_0:"Steps to merge must have identical expressions."};var i=Dr(r,o.label,n.label);if(0!==i.TAG)return{TAG:1,_0:i._0};var u=Q(i._0,e);return 1===o.typ&&o.isGoal&&0!==n.typ?jr(H(u,t,(function(r){var t=a.obj_dup(r);return t.isGoal=!0,t.typ=1,t})),t,o.label):{TAG:0,_0:u}}var Rr=/^\d+$/;function Or(r){return d.isSome(p.null_to_opt(r.match(Rr)))}function Fr(r,t,e){if(t.id!==e.id)throw{RE_EXN_ID:u.MmException,_1:{msg:"renameHypToMatchGoal: oldStmt.id != newStmt.id"},Error:new Error};var n=t.id;if(1!==t.typ||0!==e.typ||!Or(e.label))return r;var o=d.isSome(p.undefined_to_opt(r.stmts.find((function(r){return r.isGoal}))))||d.isSome(c.getTokenType(r.preCtx,e.label))?rr(r,void 0,!0):e.label;if(o===e.label)return r;var i=jr(r,n,o);return 0===i.TAG?i._0:r}function Vr(r,t,e,n){var o=q(r,t),i=H(r,t,(function(r){var t=a.obj_dup(r);return t.isGoal=!!e&&n,t.typEditMode=!1,t.typ=e,t}));return Fr(i,o,q(i,t))}var Br="HYP";function Lr(r,t,e){var n=q(r,t),o=H(r,t,(function(n){var o=e.trim().toLocaleUpperCase(),i=o===Br?0:1,u=o===Br?"":e.trim(),f=r.stmts.reduce((function(r,e){return e.id!==t&&1===e.typ?r+1|0:r}),0),s=0!==i&&(n.isGoal||r.settings.initStmtIsGoal&&0===f),c=s&&!n.isGoal&&r.settings.defaultStmtLabel.length>0?r.settings.defaultStmtLabel:n.label,v=a.obj_dup(n);return v.jstfEditMode=!1,v.jstfText=u,v.isGoal=s,v.typ=i,v.label=c,v}));return Fr(o,n,q(o,t))}function Xr(r){return void 0!==r&&0===r}function zr(r,t,e,o){var i=[function(r,t,e){var n=e.cont;return void 0!==n&&""!==n.trim()?{TAG:0,_0:fr(r,t,n)}:{TAG:1,_0:"Steps must not have empty statements."}},function(r,t,e){var n=e.label;return void 0!==n?""===n.trim()?{TAG:1,_0:"Steps must not have empty labels."}:{TAG:0,_0:ur(r,t,n)}:{TAG:0,_0:r}},function(r,t,e){var n=e.typ;if(void 0===n)return{TAG:0,_0:r};var o=V(n);return{TAG:0,_0:Vr(r,t,o[0],o[1])}},function(r,t,e){var n=e.jstf;return void 0!==n?{TAG:0,_0:Lr(r,t,n)}:{TAG:0,_0:r}},function(r,t,e){var n=e.isBkm;return void 0!==n?{TAG:0,_0:H(r,t,(function(r){var t=a.obj_dup(r);return t.isBkm=n,t}))}:{TAG:0,_0:r}}],u=[],f=e.reduce((function(r,e,o){if(0!==r.TAG)return r;var a=r._0,f=void 0!==t?nr(a,t+o|0,Xr(e.typ)):er(a,Xr(e.typ),void 0),s=f[1];return u.push(s),i.reduce((function(r,t){return l.flatMap(r,(function(r){return n._3(t,r,s,e)}))}),{TAG:0,_0:f[0]})}),{TAG:0,_0:r});return 0===f.TAG?{TAG:0,_0:[f._0,u]}:{TAG:1,_0:f._0}}function Wr(r){return p.undefined_to_opt(r.stmts.find((function(r){return!r.isDuplicated&&d.getWithDefault(d.map(r.stmtErr,(function(r){return 1===r.code})),!1)})))}function qr(r,t){var e=O(t.cont);return p.undefined_to_opt(r.stmts.find((function(r){return!r.isDuplicated&&r.id!==t.id&&O(r.cont)===e})))}function Hr(r,t){for(var e=[],n=r,o=!0;o;){var i=Wr(n);if(void 0!==i){var a=qr(n,i);if(void 0!==a){var u=i.jstfText.trim(),f=a.jstfText.trim();if(t)if(""===u)o=!1;else{var s=Pr(n,a.id,i.id);0===s.TAG?(e.push([i.label,a.label]),n=Ar(s._0)):o=!1}else if(""!==u&&""===f){var c=Pr(n,i.id,a.id);0===c.TAG?(e.push([a.label,i.label]),n=Ar(c._0)):o=!1}else if(""===f||""!==u&&u!==f)o=!1;else{var v=Pr(n,a.id,i.id);0===v.TAG?(e.push([i.label,a.label]),n=Ar(v._0)):o=!1}}else o=!1}else o=!1}return[n,e]}function $r(r){var t=r.clickedNodeId;if(void 0!==t){var e=x.getNodeById(r.root,t[0]);if(void 0!==e&&0!==e.TAG){var n=e.parent;if(0===r.expLvl)return{TAG:1,id:e.id,parent:n,symInt:e.symInt,sym:e.sym,color:e.color,isVar:e.isVar};for(var o=n,i=r.expLvl;i>1&&d.isSome(o);)i=i-1|0,o=d.getExn(o).parent;return void 0!==o?{TAG:0,_0:o}:{TAG:0,_0:r.root}}}}function Kr(r){return d.getWithDefault(d.map($r(r),x.syntaxTreeGetNumberOfSymbols),0)}function Jr(r){return{text:r.text,exprTyp:r.exprTyp,root:r.root,clickedNodeId:r.clickedNodeId,expLvl:Math.min(r.expLvl+1|0,r.root.height)}}function Qr(r){return{text:r.text,exprTyp:r.exprTyp,root:r.root,clickedNodeId:r.clickedNodeId,expLvl:Math.max(r.expLvl-1|0,0)}}function Zr(r,t){for(var e=t?Jr:Qr,o=r,i=Kr(o),a=n._1(e,o),u=Kr(a);i===u&&(t&&a.expLvl<a.root.height||!t&&a.expLvl>0);)i=Kr(o=a),u=Kr(a=n._1(e,o));return a}function Yr(r,t,e,o){var i=Ar(r);if(Er(i))return{TAG:1,_0:"Cannot perform renumbering because there is an error in the editor content. Please resolve the error before renumbering."};var a=i.stmts.filter(n.__1(t)).map((function(r){return r.id})),u=N.fromArray(a),f=i.stmts.reduce((function(r,t){if(0!==r.TAG)return r;var e=r._0;return N.has(u,t.id)?jr(e,t.id,"###tmp###"+t.label):{TAG:0,_0:e}}),{TAG:0,_0:i}),s=a.reduce((function(r,t){if(0!==r.TAG)return r;var n=r._0;return jr(n,t,rr(n,e,o))}),f);if(0!==s.TAG)return s;var c=Ar(s._0);return Er(c)?{TAG:1,_0:"Cannot renumber steps: there was an internal error during renumbering."}:{TAG:0,_0:c}}function rt(r,t,e,o,i,a,u,l){if(0===e.length)return{TAG:1,_0:"Could not determine syntax types."};var m=function(t){return p.undefined_to_opt(t.find((function(t){return d.isNone(c.ctxSymToInt(r,t))})))}(f.concatMany(t));if(void 0!==m)return{TAG:1,_0:"Unrecognized symbol: '"+m+"'"};var h=d.getWithDefault(d.flatMap(u,(function(t){return c.ctxSymToInt(r,t)})),0),E=e.slice().sort((function(r,t){return r===h?-1:t===h?1:r-t|0})),_=t.map((function(t){return c.ctxSymsToIntsExn(r,t)})),y=v.proveSyntaxTypes(void 0,p.some(r),p.some(o),i,p.some(a),_,E,void 0,void 0),b=_.map((function(r){var t=g.ptGetSyntaxProof(y,r);if(void 0!==t)return g.pnGetExpr(p.valFromOption(t))})),T=w.proofTreeToDto(y,b.filter(d.isSome).map(d.getExn)),A=b.find(d.isSome);return void 0!==A&&void 0!==A&&(void 0!==u?d.forEach(c.ctxIntToSym(r,s.get(A,0)),(function(r){if(u!==r)return n._1(l,r)})):d.forEach(c.ctxIntToSym(r,s.get(A,0)),l)),{TAG:0,_0:b.map((function(t){return void 0!==t?x.buildSyntaxProofTableFromProofTreeDto(r,T,t):{TAG:1,_0:"Could not prove this statement is of any of the types: "+c.ctxIntsToSymsExn(r,E).join(", ")}}))}}t.defaultJstfForHyp=Br,t.contIsEmpty=function(r){return 0===r.TAG?0===r.text.length:0===r._0.text.length},t.contToArrStr=R,t.contToStr=O,t.strToCont=F,t.userStmtTypeFromStr=function(r){switch(r){case"e":return 0;case"p":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert '"+r+"' to userStmtType"},Error:new Error}}},t.userStmtTypeToStr=function(r){return r?"p":"e"},t.userStmtTypeExtendedFromStrExn=function(r){switch(r){case"g":return 2;case"h":return 0;case"p":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert '"+r+"' to userStmtTypeExtended. Possible values are h, p, g."},Error:new Error}}},t.readInstrToStr=function(r){switch(r){case 0:return"ReadAll";case 1:return"StopBefore";case 2:return"StopAfter"}},t.readInstrFromStr=function(r){switch(r){case"ReadAll":return 0;case"StopAfter":return 2;case"StopBefore":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert string '"+r+"' to a readInstr."},Error:new Error}}},t.mmFileSourceTypeToStr=function(r){return r?"Web":"Local"},t.mmFileSourceTypeFromStr=function(r){switch(r){case"Local":return 0;case"Web":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert string '"+r+"' to an mmFileSourceType."},Error:new Error}}},t.mmFileSourceTypeFromStrOpt=function(r){switch(r){case"Local":return 0;case"Web":return 1;default:return}},t.someStmtErrCode=-1,t.duplicatedStmtErrCode=1,t.createEmptyUserStmt=B,t.userStmtToRootStmt=L,t.updateStmt=H,t.isStmtChecked=$,t.toggleStmtChecked=K,t.checkAllStmts=function(r){var t=a.obj_dup(r);return t.checkedStmtIds=r.stmts.map((function(r){return[r.id,new Date]})),t},t.uncheckAllStmts=J,t.deleteCheckedStmts=function(r){var t=a.obj_dup(r);return t.checkedStmtIds=[],t.stmts=r.stmts.filter((function(t){return!$(r,t.id)})),t},t.deleteStmt=Q,t.canMoveCheckedStmts=Z,t.moveCheckedStmts=Y,t.getRootStmtsForUnification=function(r){var t,e=N.fromArray(r.checkedStmtIds.map((function(r){return r[0]})));if(0===N.size(e))return r.stmts;for(var n=r.stmts.length-1|0;n>=0&&d.isNone(t);){var o=s.get(r.stmts,n);N.has(e,o.id)&&(t=n),n=n-1|0}var i=t;return void 0!==i?r.stmts.slice(0,i+1|0):r.stmts},t.addNewStmt=er,t.addNewStatements=function(r,t,e,n){var o=void 0!==e&&e,i=Sr(r,t.newVarTypes,void 0,void 0),f=i[1],v=C.make(void 0);t.newVars.forEach((function(r,t){C.set(v,r,s.get(f,t))}));var l=function(r,t){return{newVars:r.newVars,newVarTypes:r.newVarTypes,newDisj:r.newDisj,newDisjStr:r.newDisjStr,stmts:r.stmts.map((function(r){return{label:r.label,expr:r.expr.map((function(r){return C.getWithDefault(t,r,r)})),exprStr:r.exprStr,jstf:r.jstf,isProved:r.isProved}}))}}(t,v),m=c.disjMake(void 0);c.disjForEach(l.newDisj,(function(r,t){c.disjAddPair(m,C.getWithDefault(v,r,r),C.getWithDefault(v,t,t))}));var h=kr(i[0],m),g=function(r){return 0===r.checkedStmtIds.length?void 0:p.undefined_to_opt(r.stmts.slice().reverse().find((function(t){return $(r,t.id)})))}(h),E=P.make(void 0),_=function(r){return{args:r.args.map((function(r){return P.getWithDefault(E,r,r)})),label:r.label}},x=l.stmts.some((function(r){return h.stmts.some((function(t){return wr(t,r)}))})),y=d.isSome(g)&&!x,b={contents:h};return l.stmts.forEach((function(r){if(d.isSome(g)&&wr(d.getExn(g),r)){var t=d.getExn(g);return b.contents=H(b.contents,t.id,(function(t){var e=a.obj_dup(t),n=r.jstf;return e.jstfText=void 0!==n?G.jstfToStr(_(n)):t.jstfText,e})),P.set(E,r.label,t.label)}var e=function(r,t,e,n,o,i){var f=r.wrkCtx;if(void 0!==f){var s,v,l=p.valFromOption(f),m=c.getHypByExpr(l,t);if(void 0!==m)return[r,m.label];if(void 0!==n){var h=r.stmts.findIndex((function(r){return r.id===n}));s=-1!==h?h:r.stmts.length}else s=r.stmts.length;if(void 0!==e){var g=N.fromArray(e.args),E=r.stmts.reduce((function(r,t,e){return N.isEmpty(g)?r:(N.remove(g,t.label),e+1|0)}),0);v=s<E?s:E}else v=0;var _=function(r,n){var u;if(void 0!==n){var f=function(r,t){return r.stmts.findIndex((function(r){return r.id===t}))}(r,n.id)+1|0;u=v<=f&&f<=s?f:v}else u=o?s:v;var m=nr(r,u,void 0),h=m[1],g=m[0],E=H(g,h,(function(r){var n=a.obj_dup(r);return n.expr=t,n.jstfText=d.mapWithDefault(e,"",G.jstfToStr),n.contEditMode=!1,n.cont=F(c.ctxIntsToStrExn(l,t),p.some(g.preCtxColors),p.some(g.wrkCtxColors)),n.isBkm=i,n.typ=1,n}));return[E,q(E,h).label]},x=function(r,t){return p.undefined_to_opt(r.stmts.find((function(r){var e=r.expr;if(void 0!==e)return c.exprEq(e,t);throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot getUserStmtByExpr without stmt.expr."},Error:new Error}})))}(r,t);if(void 0===x)return _(r,void 0);if(0===x.typ||d.isNone(e))return[r,x.label];var y=xr(x.jstfText);if(0!==y.TAG)return _(r,x);var b=y._0;return void 0!==b?function(r){return void 0!==e&&G.jstfEq(r,e)}(b)?[r,x.label]:_(r,x):[void 0!==e?H(r,x.id,(function(r){var t=a.obj_dup(r);return t.jstfText=G.jstfToStr(e),t})):r,x.label]}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot insertStmt without wrkCtx."},Error:new Error}}(b.contents,r.expr,d.map(r.jstf,_),d.map(g,(function(r){return r.id})),y,o);b.contents=e[0],P.set(E,r.label,e[1])})),b.contents},t.isSingleStmtChecked=or,t.duplicateCheckedStmt=function(r,t){if(!or(r))return r;var e=String(r.nextStmtId),n=s.get(r.checkedStmtIds,0)[0],o=a.obj_dup(r);return o.checkedStmtIds=[[e,new Date]],o.stmts=f.concatMany(r.stmts.map((function(t){if(t.id!==n)return[t];var o=a.obj_dup(t);return[t,(o.jstfText="",o.isDuplicated=!0,o.isGoal=!1,o.label=rr(r,void 0,0===t.typ),o.id=e,o)]}))),o.nextStmtId=r.nextStmtId+1|0,t?Y(o,!0):o},t.bookmarkCheckedStmts=function(r,t){var e=r.checkedStmtIds.map((function(r){return r[0]})),n=a.obj_dup(r);return n.stmts=r.stmts.map((function(r){if(!e.includes(r.id))return r;var n=a.obj_dup(r);return n.isBkm=t,n})),n},t.canGoEditModeForStmt=ir,t.setDescrEditMode=function(r){var t=a.obj_dup(r);return t.descrEditMode=!0,t},t.completeDescrEditMode=function(r,t){var e=a.obj_dup(r);return e.descrEditMode=!1,e.descr=t,e},t.setVarsEditMode=function(r){var t=a.obj_dup(r);return t.varsEditMode=!0,t},t.completeVarsEditMode=lr,t.setDisjEditMode=function(r){var t=a.obj_dup(r);return t.disjEditMode=!0,t},t.completeDisjEditMode=ar,t.setLabelEditMode=function(r,t){return ir(r,t)?H(r,t,(function(r){var t=a.obj_dup(r);return t.labelEditMode=!0,t})):r},t.completeLabelEditMode=ur,t.setContEditMode=function(r,t){return ir(r,t)?H(r,t,(function(r){var t=a.obj_dup(r);return t.contEditMode=!0,t})):r},t.completeContEditMode=fr,t.setStmtCont=function(r,t,e){var n=O(e),o=r.settings.autoMergeStmts&&r.stmts.some((function(r){return O(r.cont)===n}));return H(r,t,(function(r){var t=a.obj_dup(r);return t.isDuplicated=o,t.cont=e,t}))},t.setTypEditMode=function(r,t){return ir(r,t)?H(r,t,(function(r){var t=a.obj_dup(r);return t.typEditMode=!0,t})):r},t.completeTypEditMode=Vr,t.setJstfEditMode=function(r,t){return ir(r,t)?H(r,t,(function(r){var t=a.obj_dup(r);return t.jstfEditMode=!0,t})):r},t.completeJstfEditMode=Lr,t.setNextAction=function(r,t){var e=a.obj_dup(r);return e.nextAction=t,e},t.setPreCtxData=function(r,t){for(var e=t.settingsV.val,n=c.ctxOptimizeForProver(t.ctxV.val,e.parens,!0,!0,void 0),i=A.prepareParenInts(n,e.parens),u=i.length/2|0,f=M.make(u),v=0;v<u;++v)M.set(f,c.ctxIntToSymExn(n,s.get(i,v<<1)),c.ctxIntToSymExn(n,s.get(i,1+(v<<1)|0)));var d=o.createTypeOrderFromStr(e.sortDisjByType,(function(r){return c.ctxSymToInt(n,r)})),l=a.obj_dup(r);return l.typeOrderInDisj=d,l.parensMap=f,l.syntaxTypes=t.syntaxTypes,l.allTypes=t.allTypes,l.parenCnt=t.parenCnt,l.frms=t.frms,l.preCtx=n,l.preCtxV=t.ctxV.ver,l.srcs=t.srcs,l.settings=e,l.settingsV=t.settingsV.ver,vr(cr(function(r){var t=a.obj_dup(r);return t.preCtxColors=sr(r.preCtx,r.typeColors),t}(function(r){var t=a.obj_dup(r);return t.typeColors=S.settingsGetTypeColors(r.settings),t}(l))))},t.editorStateHasCriticalErrors=Er,t.editorStateHasAnyErrors=function(r){return!!Er(r)||r.stmts.some(gr)},t.editorStateHasDuplicatedStmts=function(r){return r.stmts.some((function(r){return d.getWithDefault(d.map(r.stmtErr,(function(r){return 1===r.code})),!1)}))},t.createNewDisj=kr,t.removeUnusedVars=Ir,t.applyUnifyAllResults=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=p.valFromOption(e),o=m.fromArray(t.nodes.map((function(r){return[r.expr,r]})),c.ExprHash),i=m.fromArray(r.stmts.map((function(r){var t=r.expr;if(void 0!==t)return[t,r];throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without stmt.expr [1]."},Error:new Error}})),c.ExprHash),f=m.fromArray(t.syntaxProofs,c.ExprHash);return r.stmts.reduce((function(r,e){var v=a.obj_dup(e);return v.proofStatus=void 0,v.proof=void 0,H(r,v.id,(function(e){var v=e.expr;if(void 0!==v){var l=function(r,t,e,n,o,i){var u=t.cont;if(0!==u.TAG)return t;var f=m.get(o,e.slice(1)),c=void 0!==f?x.buildSyntaxTreeFromProofTreeDto(n,i,f.expr):void 0;if(void 0!==c){if(0===c.TAG){var v=a.obj_dup(t);return v.cont={TAG:1,_0:{text:u.text,exprTyp:s.get(u.syms,0).sym,root:Nr(c._0,p.some(r.preCtxColors),p.some(r.wrkCtxColors)),clickedNodeId:void 0,expLvl:0}},v}var d=a.obj_dup(t);return d.syntaxErr=c._0,d}if(!r.settings.checkSyntax)return t;var l=a.obj_dup(t);return l.syntaxErr=function(r,t){var e=0;b.parenCntReset(t);for(var n=0;n<r.length&&2!==e;)e=b.parenCntPut(t,s.get(r,n)),n=n+1|0;return 0===e}(e,r.parenCnt)?"":"parentheses mismatch",l}(r,e,v,n,f,t);if(1!==l.typ)return l;var h=m.get(o,v);if(void 0!==h){var g=function(r,t,e,n,o){var i,u=n.proof;if(void 0!==u){var f=Gr(t,e,u,o);if(void 0!==f){var s=r.jstf;if(void 0!==s)if(G.jstfEq(f,s)){var c=a.obj_dup(r);c.proof=n,c.proofTreeDto=e,i=c}else i=r;else{var v=a.obj_dup(r);v.proof=n,v.proofTreeDto=e,v.jstfText=G.jstfToStr(f),i=v}}else i=r}else i=r;var d=a.obj_dup(i);return d.proofTreeDto=e,d}(l,n,t,h,i),E=g.proof;if(void 0!==E){var _=a.obj_dup(g);return _.proofStatus=0,_.src=E.proof,_}var y=g.jstf;if(void 0!==y){var T=h.parents.find((function(r){var e=Gr(n,t,r,i);return void 0!==e&&G.jstfEq(y,e)}));if(void 0!==T){var A=a.obj_dup(g);return A.proofStatus=1,A.src=T,A}var S=h.parents.map((function(r){return"number"==typeof r||2!==r.TAG?void 0:[r.label,r.err]})).filter(d.isSome).map(d.getExn),k=S.length>0?S.map((function(r){var t=r[0];return j.unifErrToStr(r[1],(function(r){return c.ctxIntsToStrExn(n,r)}),(function(r){return c.frmIntsToStrExn(n,c.getFrameExn(n,t),r)}))})).join("\n\n"):void 0,w=a.obj_dup(g);return w.unifErr=d.orElse(g.unifErr,k),w.proofStatus=3,w}var I=h.parents.map((function(r){if("number"!=typeof r&&2===r.TAG){var t=r.err;return"number"==typeof t||6!==t.TAG?void 0:r.label}})).filter(d.isSome).map(d.getExn),M=I.length>0?j.unifErrToStr({TAG:6,frmLabels:I},(function(r){return c.ctxIntsToStrExn(n,r)}),(function(r){return"<frmExprToStr is not defined>"})):void 0,N=a.obj_dup(g);return N.unifErr=d.orElse(g.unifErr,M),N.proofStatus=2,N}throw{RE_EXN_ID:u.MmException,_1:{msg:"exprToNode->Belt_HashMap.get(expr) is None"},Error:new Error}}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without stmt.expr [2]."},Error:new Error}}))}),r)}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without wrkCtx."},Error:new Error}},t.verifyEditorState=function(r){var t=Ar(r);if(!d.isSome(t.wrkCtx))return t;var e=Ir(t);return Ar(e.settings.autoMergeStmts?Hr(e,!1)[0]:e)},t.generateCompressedProof=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=p.valFromOption(e),o=z(r,t);if(void 0!==o){var i=o.proofTreeDto;if(void 0!==i){var a=o.proof;if(void 0!==a){var f=r.preCtx,l=L(o).expr,m=w.createProofTable(i,a,void 0,void 0,void 0),g=w.createProofTable(i,a,!0,p.some(n),void 0),E=h.fromArray(m.map((function(r){return r.expr})),c.ExprHash),x=r.stmts.map(L),b=v.createProofCtx(n,x.filter((function(r){return!!r.isHyp&&h.has(E,r.expr)}))),T=c.getMandHyps(b,l,void 0,void 0,void 0),A=_.createProof(T,m,m.length-1|0),S=[];T.forEach((function(r){d.isNone(c.getHypByExpr(f,r.expr))&&S.push(r)}));var k=y.make(16);h.forEach(E,(function(r){r.forEach((function(r){if(r>=0)return y.add(k,r)}))}));var G=y.fromArray(T.map((function(r){return s.get(r.expr,1)})));c.getLocalHyps(n).forEach((function(r){if(0===r.typ){var t=s.get(r.expr,1);!y.has(k,t)||y.has(G,t)||S.push(r)}}));var M=c.disjMake(void 0);return I.verifyProof(b,l,A,(function(r,t){if(!c.isDisj(n,r,t))throw{RE_EXN_ID:u.MmException,_1:{msg:"!(wrkCtx->isDisj(n,m))"},Error:new Error};return c.isDisj(f,r,t)||c.disjAddPair(M,r,t),!0})),[Cr(n,r.typeOrderInDisj,S,M,r.descr,o,A),_.proofTableToStr(n,m,o.label),_.proofTableToStr(n,g,o.label)]}}}}},t.updateColorsInAllStmts=vr,t.getTheOnlyCheckedStmt=function(r){return 1!==r.checkedStmtIds.length?void 0:tr(r)},t.editorGetStmtById=z,t.editorGetStmtByIdExn=q,t.editorGetStmtByLabel=W,t.getAllExprsToSyntaxCheck=function(r,t){var e=[];return r.stmts.forEach((function(r,n){0===r.cont.TAG&&e.push(s.get(t,n).expr.slice(1))})),e},t.mergeStmts=Pr,t.renameStmt=jr,t.findStmtsToMerge=function(r){var t;if(0===r.checkedStmtIds.length)t=p.undefined_to_opt(r.stmts.find((function(r){return d.getWithDefault(d.map(r.stmtErr,(function(r){return 1===r.code})),!1)})));else{var e=s.get(r.checkedStmtIds,0);t=z(r,e[0])}if(void 0===t)return{TAG:1,_0:"[1] Cannot determine a duplicated step."};var n=O(t.cont),o=r.stmts.find((function(r){return r.id!==t.id&&O(r.cont)===n}));return void 0===o?{TAG:1,_0:"[2] Cannot find another step to merge with."}:r.stmts.findIndex((function(r){return r.id===t.id}))<r.stmts.findIndex((function(r){return r.id===o.id}))?{TAG:0,_0:[t,o]}:{TAG:0,_0:[o,t]}},t.parseJstf=xr,t.removeAllTempData=mr,t.isEditMode=function(r){return!!(r.descrEditMode||r.varsEditMode||r.disjEditMode)||r.stmts.some((function(r){return!!(r.labelEditMode||r.typEditMode||r.contEditMode)||r.jstfEditMode}))},t.resetEditorContent=function(r){var t=a.obj_dup(r);return t.checkedStmtIds=[],t.stmts=[],t.disjEditMode=!1,t.disjText="",t.varsEditMode=!1,t.varsText="",t.descrEditMode=!1,t.descr="",t},t.deleteUnrelatedSteps=function(r,t,e){var n=Ar(r);if(Er(n))return{TAG:1,_0:"Cannot perform deletion because there is an error in the editor content. Please resolve the error before deleting steps."};var o=k.fromArray(t);n.stmts.forEach((function(r){if(!e&&0===r.typ||r.isGoal||r.isBkm)return k.add(o,r.id)}));for(var i=N.make(Math.imul(t.length,5));!k.isEmpty(o);){var u=d.getExn(k.pop(o));if(!N.has(i,u)){N.add(i,u);var f=z(n,u);if(void 0!==f){var s=f.jstf;void 0!==s&&s.args.forEach((function(r){var t=W(n,r);if(void 0!==t)return k.add(o,t.id)}))}}}var c,v,l,p=n.stmts.map((function(r){return r.id})).filter((function(r){return!N.has(i,r)}));return{TAG:0,_0:(c=n,v=p,l=a.obj_dup(c),l.checkedStmtIds=c.checkedStmtIds.filter((function(r){return!v.includes(r[0])})),l.stmts=c.stmts.filter((function(r){return!v.includes(r.id)})),l)}},t.autoMergeDuplicatedStatements=Hr,t.userStmtHasCriticalErrors=hr,t.userStmtHasAnyErrors=gr,t.createNewVars=Sr,t.addSteps=function(r,t,e,n,o,i){var a=void 0!==n?n:[];if(0===a.length)return zr(r,t,e);var u=r.wrkCtx;if(void 0===u)return{TAG:1,_0:"Cannot add new variables because of errors in the editor."};var f=p.valFromOption(u),v=a.map((function(r){return r[0]})),l=v.map((function(r){return c.ctxSymToInt(f,r)})),m=l.findIndex(d.isNone);if(m>=0)return{TAG:1,_0:"Unknown type - "+s.get(v,m)};var h,g=l.map(d.getExn);if(!function(r){return!!r.every((function(r){return d.isNone(r[1])}))||r.every((function(r){return d.isSome(r[1])}))}(a))return{TAG:1,_0:"All variable names must be either defined or undefined."};if(a.some((function(r){return d.isNone(r[1])})))h=Sr(r,g,void 0,o)[0];else{var E=a.map((function(r){return d.getExn(r[1])}));h=Sr(r,g,E,o)[0]}return zr(h,t,e)},t.updateSteps=function(r,t){var e=[function(t,e){var n=e.cont;if(void 0===n)return{TAG:0,_0:t};if(""===n.trim())return{TAG:1,_0:"Steps must not have empty statements."};var o=a.obj_dup(t);return{TAG:0,_0:(o.isDuplicated=!1,o.contEditMode=!1,o.cont=F(n,p.some(r.preCtxColors),p.some(r.wrkCtxColors)),o)}},function(r,t){var e=t.typ;if(void 0===e)return{TAG:0,_0:r};var n=V(e),o=a.obj_dup(r);return{TAG:0,_0:(o.isGoal=n[1],o.typEditMode=!1,o.typ=n[0],o)}},function(r,t){var e=t.jstf;if(void 0===e)return{TAG:0,_0:r};var n=a.obj_dup(r);return{TAG:0,_0:(n.jstfEditMode=!1,n.jstfText=e,n)}},function(r,t){var e=t.isBkm;if(void 0===e)return{TAG:0,_0:r};var n=a.obj_dup(r);return{TAG:0,_0:(n.isBkm=e,n)}}],o=M.fromArray(t.filter((function(r){return d.isSome(r.id)})).map((function(r){return[d.getExn(r.id),r]}))),i=r.stmts.reduce((function(r,t){if(0!==r.TAG)return r;var i=r._0,a=M.get(o,t.id),u=void 0!==a?e.reduce((function(r,t){return l.flatMap(r,(function(r){return n._2(t,r,a)}))}),{TAG:0,_0:t}):{TAG:0,_0:t};return 0!==u.TAG?{TAG:1,_0:u._0}:(i.push(u._0),{TAG:0,_0:i})}),{TAG:0,_0:[]});if(0!==i.TAG)return{TAG:1,_0:i._0};var u=a.obj_dup(r);return{TAG:0,_0:(u.stmts=i._0,u)}},t.getSelectedSubtree=$r,t.getSelectedSubtreeFromStmtCont=function(r){return d.flatMap(function(r){return 0===r.TAG?void 0:r._0}(r),$r)},t.getIdsOfSelectedNodes=function(r){if(0===r.TAG)return[-1,void 0];var t=r._0,e=t.clickedNodeId;if(void 0===e)return[-1,void 0];var n=$r(t);return void 0!==n?[e[0],x.syntaxTreeGetIdsOfAllChildSymbols(n)]:[-1,void 0]},t.hasSelectedText=function(r){return 0!==r.TAG&&void 0!==r._0.clickedNodeId},t.getSelectedText=function(r){return 0===r.TAG?void 0:d.map($r(r._0),x.syntaxTreeToText)},t.getNodeIdBySymIdx=function(r,t){var e={contents:0};return x.syntaxTreeForEachNode({TAG:0,_0:t},(function(t){if(0!==t.TAG)return e.contents=e.contents+1|0,e.contents===r?t.id:void 0}))},t.incExpLvl=Jr,t.decExpLvl=Qr,t.incExpLvlIfConstClicked=function(r){if(0!==r.expLvl)return r;var t=r.clickedNodeId;if(void 0===t)return r;var e=x.getNodeById(r.root,t[0]);return void 0!==e&&0!==e.TAG&&1!==x.syntaxTreeGetNumberOfSymbols({TAG:0,_0:e.parent})?Zr(r,!0):r},t.getNumberOfSelectedSymbols=Kr,t.updateExpLevel=Zr,t.addColorsToSyntaxTree=Nr,t.getColorForSymbol=Mr,t.createSymbolColors=sr,t.renumberProvableSteps=function(r){return Yr(r,(function(r){return 1===r.typ&&Or(r.label)}),"",!1)},t.renumberHypothesisSteps=function(r,t){return Yr(r,(function(r){return 0===r.typ}),t+".",!0)},t.textToSyntaxProofTable=rt,t.textToSyntaxTree=function(r,t,e,n,o,i,a,u){var f=rt(r,t,e,n,o,i,a,u);return 0===f.TAG?{TAG:0,_0:f._0.map((function(t){if(0!==t.TAG)return{TAG:1,_0:t._0};var e=t._0;return x.buildSyntaxTree(r,e,e.length-1|0)}))}:{TAG:1,_0:f._0}},t.recalcWrkColors=dr},3350:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(3942),u=e(1094),f=e(303),s=e(7356),c=e(519),v=e(8887),d=e(140),l=e(4125),p="MM_wrk_search_asrt";function m(r,t,e,n,o,a){if(o===t.length)return!0;for(var u={contents:a},f=function(i){return m(r,t,e,n,o+1|0,u.contents+1|0)},c=!1,v=r.asrt.length-(t.length-o|0)|0;!c&&u.contents<=v;){var d=i.get(r.asrt,u.contents),l=i.get(t,o);if(d<0&&d===l)c=f();else if(d>=0&&i.get(r.varTypes,d)===i.get(e,o))if(l<0)c=f();else{var p=s.get(n,l);void 0!==p?p===d&&(c=f()):(s.set(n,l,d),c=f(),s.remove(n,l))}u.contents=u.contents+1|0}return c}function h(r,t,e,n){return!!function(r,t){for(var e=t.length,n=r.asrt.length,o=0,a=0;o<e&&a<n;){var u=i.get(r.asrt,a);(u<0&&u===i.get(t,o)||u>=0&&i.get(r.varTypes,u)===i.get(t,o))&&(o=o+1|0),a=a+1|0}return o===e}(r,e)&&m(r,t,e,n,0,0)}function g(r,t,e,n,v,d,p){var m=l.progressTrackerMake(.01,void 0,d,void 0,void 0),g={contents:0},E=c.frmsSize(t),_=v.map((function(t){return t<0?t:a.getTypeOfVarExn(r,t)})),x=[];return c.frmsSelect(t,void 0,void 0,void 0).sort((function(r,t){return r.frame.ord-t.frame.ord|0})).forEach((function(t){var c=t.frame;if(c.label.toLowerCase().includes(e)&&i.get(c.asrt,0)===n&&h(c,v,_,s.make(v.length))){var d=a.disjMake(void 0);u.forEach(c.disj,(function(r,t){f.forEach(t,(function(t){a.disjAddPair(d,r,t)}))}));var p=[];a.disjForEachArr(d,void 0,void 0,void 0,void 0,(function(t){p.push(a.frmIntsToStrExn(r,c,t))}));var y=[],b=[];c.hyps.forEach((function(t){if(1===t.typ){var e=t.label;b.push(e),y.push({label:e,expr:t.expr,exprStr:a.frmIntsToStrExn(r,c,t.expr),jstf:void 0,isProved:!1})}})),y.push({label:c.label,expr:c.asrt,exprStr:a.frmIntsToStrExn(r,c,c.asrt),jstf:{args:b,label:c.label},isProved:!1}),x.push({newVars:o.range(0,c.numOfVars-1|0),newVarTypes:c.varTypes,newDisj:d,newDisjStr:p,stmts:y})}g.contents=g.contents+1,l.progressTrackerSetCurrPct(m,g.contents/E)})),x}t.procName=p,t.doSearchAssertions=g,t.searchAssertions=function(r,t,e,o,i,a,u,f,s,c){return d.promise((function(d){v.beginWorkerInteractionUsingCtx(r,t,e,o,i,a,p,{label:u.toLowerCase(),typ:f,pattern:s},(function(r,t,e){if(0===r.TAG)return n._1(c,r._0);n._1(e,void 0),n._1(d,r.found)}),!1,void 0)}))},t.processOnWorkerSide=function(r,t){var e=g(v.getWrkCtxExn(void 0),v.getWrkFrmsExn(void 0),r.label,r.typ,r.pattern,(function(r){n._1(t,{TAG:0,_0:r})}));n._1(t,{TAG:1,found:e})},t.frameMatchesVarPattern=h,t.reqToStr=function(r){return'FindAssertions(label="'+r.label+'", typ='+String(r.typ)+", pattern=["+r.pattern.map((function(r){return String(r)})).join(", ")+"])"},t.respToStr=function(r){return 0===r.TAG?"OnProgress(pct="+String(r._0)+")":"SearchResult"}},7712:function(r,t,e){var n=e(4923),o=e(6517),i=e(7175),a=e(2275);t.markUrlAsTrusted=function(r,t){if(o.isSome(i.undefined_to_opt(r.webSrcSettings.find((function(r){return r.url===t}))))){var e=n.obj_dup(r);return e.webSrcSettings=r.webSrcSettings.map((function(r){return r.url===t?{alias:r.alias,url:r.url,trusted:!0}:r})),e}var a=n.obj_dup(r);return a.webSrcSettings=r.webSrcSettings.concat([{alias:"",url:t,trusted:!0}]),a},t.settingsGetTypeColors=function(r){return a.fromArray(r.typeSettings.map((function(r){return[r.typ,r.color]})))}},2500:function(r,t,e){var n=e(1386),o=e(8371),i=e(1748),a=e(3942),u=e(2694),f=e(6517),s=e(7175),c=e(2815),v=e(9775),d=e(7356),l=e(8887),p=e(1611),m=e(3021),h=e(6310),g=e(8615),E=e(140),_="MM_wrk_unify";function x(r,t,e){var n=new Array(r.numOfVars);return r.hyps.forEach((function(r,o){if(0===r.typ)return i.set(n,i.get(r.expr,1),i.get(e.nodes,i.get(t,o)).expr)})),n}t.procName=_,t.unify=function(r,t,e,o,i,a,u,f,s,c,v,d,p){return E.promise((function(m){l.beginWorkerInteractionUsingCtx(r,t,e,o,i,a,_,{rootStmts:u,bottomUpProverParams:f,allowedFrms:s,combCntMax:t.combCntMax,syntaxTypes:c,exprsToSyntaxCheck:v,debugLevel:d},(function(r,t,e){if(0===r.TAG)return n._1(p,r._0);n._1(e,void 0),n._1(m,r._0)}),!1,void 0)}))},t.processOnWorkerSide=function(r,t){var e=r.rootStmts,o=u.unifyAll(l.getWrkCtxExn(void 0),l.getWrkFrmsExn(void 0),e,l.getWrkParenCntExn(void 0),r.bottomUpProverParams,r.allowedFrms,r.combCntMax,r.syntaxTypes,r.exprsToSyntaxCheck,r.debugLevel,(function(r){n._1(t,{TAG:0,_0:r})}),void 0);n._1(t,{TAG:1,_0:m.proofTreeToDto(o,e.map((function(r){return r.expr})))})},t.proofTreeDtoToNewStmtsDto=function(r,t,e,n,u,l){var m=d.fromArray(r.newVars.map((function(r){if(2!==r.length)throw{RE_EXN_ID:"Match_failure",_1:["MM_wrk_unify.res",394,67],Error:new Error};var t=r[0];return[r[1],t]}))),E=r.nodes.find((function(r){return a.exprEq(r.expr,t)}));if(void 0===E)throw{RE_EXN_ID:o.MmException,_1:{msg:"the proof tree DTO doesn't contain the node to prove."},Error:new Error};return E.parents.map((function(E){if("number"!=typeof E&&1===E.TAG){var _=E.args,y={contents:!1},b={contents:!1},T=[],A=[],S=a.disjMake(void 0),k=[],w=[],I={newVars:T,newVarTypes:A,newDisj:S,newDisjStr:k,stmts:w},G=c.toArray(u),M=c.fromArray(G,a.ExprHash),N=g.fromArray(l),C=function(r,t,n){var u=c.get(M,r);if(void 0!==u)return u;var f=a.getHypByExpr(e,r);if(void 0!==f)return f.label;if(n){var v=i.get(a.generateNewLabels(e,t,1,s.some(N),!0,void 0),0);return c.set(M,r,v),g.add(N,v),v}throw{RE_EXN_ID:o.MmException,_1:{msg:"Could not find a label for an expr."},Error:new Error}},D=d.make(8),U=g.make(8),j=a.getNumOfVars(e)-1|0,P=function(r){if(r<=j){var t=a.ctxIntToSym(e,r);if(void 0!==t)return t;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine sym for an existing int in srcToNewStmts."},Error:new Error}}var n=d.get(D,r);if(void 0!==n)return n;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine name of a new var in srcToNewStmts."},Error:new Error}},R=function(r){var t=a.getFrame(e,r);if(void 0!==t)return t;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot get a frame by label '"+r+" in srcToNewStmts.'"},Error:new Error}},O=function(t,u,f,c){u.forEach((function(r){if(r>j&&!T.includes(r)){var t=d.get(m,r);if(void 0!==t){T.push(r),A.push(t);var u=i.get(a.generateNewVarNames(e,[t],s.some(n),s.some(U),void 0),0);return d.set(D,r,u),g.add(U,u),void C([t,r],"v",!0)}throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine type of a new var in srcToNewStmts."},Error:new Error}}}));var v,l=u.map(P).join(" ");if(void 0!==f&&"number"!=typeof f)switch(0|f.TAG){case 0:v=void 0;break;case 1:var p=f.label,h=f.args,E=[];R(p).hyps.forEach((function(t,e){1!==t.typ||E.push(C(i.get(r.nodes,i.get(h,e)).expr,"",!1))})),v={args:E,label:p};break;case 2:y.contents=!0,v=void 0}else v=void 0;w.push({label:t,expr:u,exprStr:l,jstf:v,isProved:c})},F=R(E.label),V=[];F.hyps.forEach((function(t,e){1!==t.typ||V.push(i.get(r.nodes,i.get(_,e)))}));var B=v.make(16,a.ExprHash),L=v.make(16,a.ExprHash);return V.forEach((function(n){p.traverseTree(v.fromArray([t],a.ExprHash),n,(function(t,e){if(!v.has(B,e.expr)){v.add(B,e.expr);var n=e.proof;if(void 0!==n&&"number"!=typeof n)switch(0|n.TAG){case 0:return;case 1:var o=n.args,a=[];return R(n.label).hyps.forEach((function(t,e){1!==t.typ||a.push(i.get(r.nodes,i.get(o,e)))})),a;case 2:return void(y.contents=!0)}}}),(function(r,t){return y.contents||b.contents?s.some(void 0):v.has(r,t.expr)?(b.contents=!0,s.some(void 0)):void v.add(r,t.expr)}),void 0,(function(t,n){if(v.remove(t,n.expr),y.contents||b.contents)return s.some(void 0);if(!v.has(L,n.expr)){v.add(L,n.expr);var o=n.proof;if(void 0!==o){if("number"!=typeof o)switch(0|o.TAG){case 0:return;case 1:var i=R(o.label);return h.verifyDisjoints(x(i,o.args,r),i.disj,(function(r,t){return a.isDisj(e,r,t)||a.disjAddPair(S,r,t),!0})),void O(C(n.expr,"",!0),n.expr,n.proof,!0);case 2:return y.contents=!0,s.some(void 0)}}else O(C(n.expr,"",!0),n.expr,void 0,!1)}}),void 0)})),y.contents||b.contents?void 0:(O(C(t,"",!1),t,E,_.every((function(t){return f.isSome(i.get(r.nodes,t).proof)}))),h.verifyDisjoints(x(F,_,r),F.disj,(function(r,t){return a.isDisj(e,r,t)||a.disjAddPair(S,r,t),!0})),a.disjForEachArr(S,void 0,void 0,void 0,void 0,(function(r){k.push("$d "+r.map(P).join(" ")+" $.")})),I)}})).filter(f.isSome).map(f.getExn)},t.reqToStr=function(r){return"Unify(debugLevel="+String(r.debugLevel)+", bottomUpProverParams="+(void 0!==(t=r.bottomUpProverParams)?t.frameParams.map((function(r){return"{allowNewDisjForExistingVars="+(r.allowNewDisjForExistingVars?"true":"false")+"}"})).join("; "):"None")+")";var t},t.respToStr=function(r){return 0===r.TAG?'OnProgress("'+r._0+'")':"Result"}},8594:function(r,t,e){var n=e(1386),o=e(2436),i=e(6517),a=e(2500),u=e(5082),f=e(1618),s=e(8887),c=e(256),v=e(1317),d=e(3350);function l(r,t,e,i,a){var u=o.deserialize(i.body);i.traceEnabled&&o.logWorkerReceivedRequest(i.clientId,i.procName,u,t),n._2(r,u,(function(r){i.traceEnabled&&o.logWorkerIsSendingResponse(i.clientId,i.procName,r,e),n._1(a,{clientId:i.clientId,body:o.serialize(r)})}))}var p=u.fromArray([[v.procName,function(r,t){return l(v.processOnWorkerSide,v.reqToStr,v.respToStr,r,t)}],[f.procName,function(r,t){return l(f.processOnWorkerSide,f.reqToStr,f.respToStr,r,t)}],[c.procName,function(r,t){return l(c.processOnWorkerSide,c.reqToStr,c.respToStr,r,t)}],[s.procName,function(r,t){return l(s.processOnWorkerSide,s.reqToStr,s.respToStr,r,t)}],[d.procName,function(r,t){return l(d.processOnWorkerSide,d.reqToStr,d.respToStr,r,t)}],[a.procName,function(r,t){return l(a.processOnWorkerSide,a.reqToStr,a.respToStr,r,t)}]]);t.U=function(r){i.forEach(u.get(p,r.procName),(function(t){n._2(t,r,(function(r){postMessage(r)}))}))}},3216:function(r,t,e){var n=e(1386),o=e(2900),i=e(4763),a=e(2971),u=e(1748),f=e(6517),s=e(303),c=e(1367),v=e(6181),d=o.raiseError;function l(r,t,e){return i.floor_int(Math.sign(n._2(r,t,e)))}function p(r,t){return l((function(r,t){return r.localeCompare(t)}),r,t)}var m=v.create("Expln_utils_common.ExplnUtilsException");t.exn=d,t.clearArray=r=>r.length=0,t.arrFlatMap=function(r,t){return a.concatMany(a.map(r,t))},t.arrStrDistinct=function(r){return c.toArray(c.fromArray(r))},t.arrIntDistinct=function(r){return s.toArray(s.fromArray(r))},t.arrForEach=function(r,t){for(var e,o=r.length,i=0;i<o&&f.isNone(e);)e=n._1(t,u.get(r,i)),i=i+1|0;return e},t.arrJoin=function(r,t){var e=r.length;if(e<2)return r;for(var n=new Array((e<<1)-1|0),o=e-1|0,i=0;i<=o;++i)u.set(n,i<<1,u.get(r,i)),i!==o&&u.set(n,1+(i<<1)|0,t);return n},t.copySubArray=function(r,t,e,n,o){for(var i=t,a=n,f=r.length,s=e.length,c=Math.min(f-1|0,(t+o|0)-1|0);i<=c&&a<s;)u.set(e,a,u.get(r,i)),a=a+1|0,i=i+1|0},t.toIntCmp=l,t.intCmp=function(r,t){return r<t?-1:r===t?0:1},t.floatCmp=function(r,t){return r<t?-1:r===t?0:1},t.strCmp=p,t.strCmpI=function(r,t){return p(r.toLocaleUpperCase(),t.toLocaleUpperCase())},t.cmpRev=function(r,t,e){return 0|-n._2(r,t,e)},t.stringify=function(r){var t=JSON.stringify(r);return void 0!==t?t:"undefined"},t.ExplnUtilsException=m,t.comparatorBy=function(r,t,e){var o=n._1(r,t),i=n._1(r,e);return o<i?-1:o===i?0:1},t.comparatorAndThen=function(r,t,e,o){var i=n._2(r,e,o);return 0!==i?i:n._2(t,e,o)},t.comparatorInverse=function(r,t,e){return 0|-n._2(r,t,e)},t.hashStr=r=>{let t=0;for(let e=0;e<r.length;e++)t=(t<<5)-t+r.charCodeAt(e),t|=0;return t},t.hashArrInt=r=>{let t=0;for(let e=0;e<r.length;e++)t=(t<<5)-t+r[e],t|=0;return t},t.hashArrIntFromTo=(r,t,e)=>{let n=0;for(let o=t;o<=e;o++)n=(n<<5)-n+r[o],n|=0;return n},t.hash2=(r,t)=>(r<<5)-r+t|0},1611:function(r,t,e){var n=e(1386),o=e(1748),i=e(6517),a=e(6601),u=e(3216);t.log=function(r){console.log(r)},t.log2=function(r,t){console.log(r,t)},t.traverseTree=function(r,t,e,f,s,c,v){var d,l=i.isSome(f),p=i.isSome(s),m=i.isSome(c),h=a.make(void 0);for(a.push(h,{node:t,nodesToPostProcess:m?[t]:void 0});!a.isEmpty(h)&&i.isNone(d);){var g=a.pop(h);if(void 0!==g&&(l&&(d=i.flatMap(f,function(t){return function(e){return n._2(e,r,t.node)}}(g))),p&&i.isNone(d)&&(d=i.flatMap(s,function(t){return function(e){return n._2(e,r,t.node)}}(g))),i.isNone(d))){var E=n._2(e,r,g.node),_=0;if(void 0!==E&&0!==E.length)for(var x=E.length-1|0,y=x;y>=0;--y){var b;if(m)if(y===x){var T=g.nodesToPostProcess;if(void 0===T)throw{RE_EXN_ID:u.ExplnUtilsException,_1:{msg:"this case is not possible, because each node has itself in its nodesToPostProcess (2)"},Error:new Error};T.push(o.get(E,y)),b=T}else b=[o.get(E,y)];else b=void 0;a.push(h,{node:o.get(E,y),nodesToPostProcess:b})}else _=1;if(1===_&&m){var A=g.nodesToPostProcess;if(void 0===A)throw{RE_EXN_ID:u.ExplnUtilsException,_1:{msg:"this case is not possible, because each node has itself in its nodesToPostProcess (1)"},Error:new Error};for(var S={contents:A.length-1|0};S.contents>=0&&i.isNone(d);)d=i.flatMap(c,function(t,e){return function(i){return n._2(i,r,o.get(e,t.contents))}}(S,A)),S.contents=S.contents-1|0}}}return[r,d]}},140:function(r,t,e){var n=e(1386),o=e(194),i=e(4518);function a(r){return new Promise((function(t,e){try{return n._1(r,(function(r){t(r)}))}catch(r){return e(i.internalToOCamlException(r))}}))}t.promise=a,t.promiseFlatMap=function(r,t){return o.then_(t,r)},t.promiseMap=function(r,t){return o.then_((function(r){return Promise.resolve(n._1(t,r))}),r)},t.promiseResolved=function(r){return a((function(t){n._1(t,r)}))}}},e={};r=function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(8594),onmessage=t=>{(0,r.U)(t.data)}}();