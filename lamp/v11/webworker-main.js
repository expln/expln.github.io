!function(){"use strict";var r,t={2971:function(r,t,e){var n=e(6253),o=e(1386),i=e(4763),a=e(7175);function u(r,t,e){var n=r[t];r[t]=r[e],r[e]=n}function s(r){for(var t=r.length,e=0;e<t;++e)u(r,e,i.random_int(e,t))}function f(r,t){if(r<=0)return[];for(var e=new Array(r),n=0;n<r;++n)e[n]=t(n);return e}function c(r,t){var e=f(r,t);return s(e),e}function d(r,t,e){for(var n=r.length,o=t.length,i=n<o?n:o,a=new Array(i),u=0;u<i;++u)a[u]=e(r[u],t[u]);return a}function v(r){for(var t=r.length,e=0,n=0;n<t;++n)e=e+r[n].length|0;var o=new Array(e);e=0;for(var i=0;i<t;++i)for(var a=r[i],u=0,s=a.length;u<s;++u)o[e]=a[u],e=e+1|0;return o}function l(r,t){for(var e=0,n=r.length;e<n;++e)t(r[e])}function p(r,t){for(var e=r.length,n=new Array(e),o=0;o<e;++o)n[o]=t(r[o]);return n}function m(r,t){for(var e,n=r.length,o=0;void 0===e&&o<n;){var i=r[o];t(i)&&(e=a.some(i)),o=o+1|0}return e}function E(r,t){for(var e,n=r.length,o=0;void 0===e&&o<n;)t(r[o])&&(e=o),o=o+1|0;return e}function h(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var a=r[i];t(a)&&(n[o]=a,o=o+1|0)}return n.length=o,n}function g(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var a=r[i];t(a,i)&&(n[o]=a,o=o+1|0)}return n.length=o,n}function x(r,t){for(var e=r.length,n=new Array(e),o=0,i=0;i<e;++i){var u=t(r[i]);void 0!==u&&(n[o]=a.valFromOption(u),o=o+1|0)}return n.length=o,n}function y(r,t){for(var e=0,n=r.length;e<n;++e)t(e,r[e])}function _(r,t){for(var e=r.length,n=new Array(e),o=0;o<e;++o)n[o]=t(o,r[o]);return n}function b(r,t,e){for(var n=t,o=0,i=r.length;o<i;++o)n=e(n,r[o]);return n}function T(r,t,e){for(var n=t,o=r.length-1|0;o>=0;--o)n=e(n,r[o]);return n}function S(r,t,e,o){for(var i=e,a=n.int_min(r.length,t.length)-1|0;a>=0;--a)i=o(i,r[a],t[a]);return i}function A(r,t,e){for(var n=t,o=0,i=r.length;o<i;++o)n=e(n,r[o],o);return n}function k(r,t){for(var e=r.length,n=0;;){var o=n;if(o===e)return!0;if(!t(r[o]))return!1;n=o+1|0}}function M(r,t){for(var e=r.length,n=0;;){var o=n;if(o===e)return!1;if(t(r[o]))return!0;n=o+1|0}}function w(r,t,e,n,o){for(;;){var i=e;if(i===o)return!0;if(!n(r[i],t[i]))return!1;e=i+1|0}}function j(r,t,e){return w(r,t,0,e,n.int_min(r.length,t.length))}function I(r,t,e){for(var o=0,i=n.int_min(r.length,t.length);;){var a=o;if(a===i)return!1;if(e(r[a],t[a]))return!0;o=a+1|0}}function G(r,t,e){var n=r.length;return n===t.length&&w(r,t,0,e,n)}function D(r,t,e){var n=r.length,o=t.length;if(n>o)return 1;if(n<o)return-1;for(var i=0;;){var a=i;if(a===n)return 0;var u=e(r[a],t[a]);if(0!==u)return u;i=a+1|0}}function N(r,t){for(var e=r.length,n=0,o=0,i=new Array(e),a=new Array(e),u=0;u<e;++u){var s=r[u];t(s)?(i[n]=s,n=n+1|0):(a[o]=s,o=o+1|0)}return i.length=n,a.length=o,[i,a]}function U(r,t,e){var n=r.length;if(0===n)return"";for(var o=n-1|0,i=0,a="";;){var u=a,s=i;if(s===o)return u+e(r[s]);a=u+(e(r[s])+t),i=s+1|0}}function C(r,t){for(var e=new Array(r),n=0;n<r;++n)e[n]=t(n);return e}t.get=function(r,t){if(t>=0&&t<r.length)return a.some(r[t])},t.getExn=function(r,t){if(!(t>=0&&t<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",35,2],Error:new Error};return r[t]},t.set=function(r,t,e){return t>=0&&t<r.length&&(r[t]=e,!0)},t.setExn=function(r,t,e){if(!(t>=0&&t<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",45,2],Error:new Error};r[t]=e},t.shuffleInPlace=s,t.shuffle=function(r){var t=r.slice(0);return s(t),t},t.reverseInPlace=function(r){for(var t=r.length,e=0,n=t/2|0;e<n;++e)u(r,0+e|0,((0+t|0)-e|0)-1|0)},t.reverse=function(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=r[(t-1|0)-n|0];return e},t.make=function(r,t){if(r<=0)return[];for(var e=new Array(r),n=0;n<r;++n)e[n]=t;return e},t.range=function(r,t){var e=t-r|0;if(e<0)return[];for(var n=new Array(e+1|0),o=0;o<=e;++o)n[o]=r+o|0;return n},t.rangeBy=function(r,t,e){var n=t-r|0;if(n<0||e<=0)return[];for(var o=1+(n/e|0)|0,i=new Array(o),a=r,u=0;u<o;++u)i[u]=a,a=a+e|0;return i},t.makeByU=f,t.makeBy=function(r,t){return f(r,o.__1(t))},t.makeByAndShuffleU=c,t.makeByAndShuffle=function(r,t){return c(r,o.__1(t))},t.zip=function(r,t){for(var e=r.length,n=t.length,o=e<n?e:n,i=new Array(o),a=0;a<o;++a)i[a]=[r[a],t[a]];return i},t.zipByU=d,t.zipBy=function(r,t,e){return d(r,t,o.__2(e))},t.unzip=function(r){for(var t=r.length,e=new Array(t),n=new Array(t),o=0;o<t;++o){var i=r[o];e[o]=i[0],n[o]=i[1]}return[e,n]},t.concat=function(r,t){for(var e=r.length,n=t.length,o=new Array(e+n|0),i=0;i<e;++i)o[i]=r[i];for(var a=0;a<n;++a)o[e+a|0]=t[a];return o},t.concatMany=v,t.slice=function(r,t,e){if(e<=0)return[];var o=r.length,i=t<0?n.int_max(o+t|0,0):t,a=o-i|0,u=a<e?a:e;if(u<=0)return[];for(var s=new Array(u),f=0;f<u;++f)s[f]=r[i+f|0];return s},t.sliceToEnd=function(r,t){for(var e=r.length,o=t<0?n.int_max(e+t|0,0):t,i=e>o?e-o|0:0,a=new Array(i),u=0;u<i;++u)a[u]=r[o+u|0];return a},t.fill=function(r,t,e,o){if(!(e<=0)){var i=r.length,a=t<0?n.int_max(i+t|0,0):t,u=i-a|0,s=u<e?u:e;if(!(s<=0))for(var f=a,c=a+s|0;f<c;++f)r[f]=o}},t.blit=function(r,t,e,o,i){var a=r.length,u=e.length,s=t<0?n.int_max(a+t|0,0):t,f=o<0?n.int_max(u+o|0,0):o,c=n.int_min(i,n.int_min(a-s|0,u-f|0));if(f<=s)for(var d=0;d<c;++d)e[d+f|0]=r[d+s|0];else for(var v=c-1|0;v>=0;--v)e[v+f|0]=r[v+s|0]},t.blitUnsafe=function(r,t,e,n,o){if(n<=t)for(var i=0;i<o;++i)e[i+n|0]=r[i+t|0];else for(var a=o-1|0;a>=0;--a)e[a+n|0]=r[a+t|0]},t.forEachU=l,t.forEach=function(r,t){l(r,o.__1(t))},t.mapU=p,t.map=function(r,t){return p(r,o.__1(t))},t.flatMapU=function(r,t){return v(p(r,t))},t.flatMap=function(r,t){return v(p(r,o.__1(t)))},t.getByU=m,t.getBy=function(r,t){return m(r,o.__1(t))},t.getIndexByU=E,t.getIndexBy=function(r,t){return E(r,o.__1(t))},t.keepU=h,t.keep=function(r,t){return h(r,o.__1(t))},t.keepWithIndexU=g,t.keepWithIndex=function(r,t){return g(r,o.__2(t))},t.keepMapU=x,t.keepMap=function(r,t){return x(r,o.__1(t))},t.forEachWithIndexU=y,t.forEachWithIndex=function(r,t){y(r,o.__2(t))},t.mapWithIndexU=_,t.mapWithIndex=function(r,t){return _(r,o.__2(t))},t.partitionU=N,t.partition=function(r,t){return N(r,o.__1(t))},t.reduceU=b,t.reduce=function(r,t,e){return b(r,t,o.__2(e))},t.reduceReverseU=T,t.reduceReverse=function(r,t,e){return T(r,t,o.__2(e))},t.reduceReverse2U=S,t.reduceReverse2=function(r,t,e,n){return S(r,t,e,o.__3(n))},t.reduceWithIndexU=A,t.reduceWithIndex=function(r,t,e){return A(r,t,o.__3(e))},t.joinWithU=U,t.joinWith=function(r,t,e){return U(r,t,o.__1(e))},t.someU=M,t.some=function(r,t){return M(r,o.__1(t))},t.everyU=k,t.every=function(r,t){return k(r,o.__1(t))},t.every2U=j,t.every2=function(r,t,e){return j(r,t,o.__2(e))},t.some2U=I,t.some2=function(r,t,e){return I(r,t,o.__2(e))},t.cmpU=D,t.cmp=function(r,t,e){return D(r,t,o.__2(e))},t.eqU=G,t.eq=function(r,t,e){return G(r,t,o.__2(e))},t.initU=C,t.init=function(r,t){return C(r,o.__1(t))}},2815:function(r,t,e){var n=e(7175),o=e(5252),i=e(354);function a(r,t,e,n){for(;;){var o=n;if(void 0===o)return;var i=r(o.key)&(t.length-1|0),a=e[i];void 0!==a?a.next=o:t[i]=o,e[i]=o,n=o.next}}function u(r,t,e,n,o){var i=r.buckets,u=i.length,s=o(t)&(u-1|0),f=i[s];if(void 0!==f?function(r,t,e,n){for(;;){var o=n;if(r(o.key,t))return o.value=e,!1;var i=o.next;if(void 0===i)return!0;n=i}}(n,t,e,f)&&(i[s]={key:t,value:e,next:f},r.size=r.size+1|0):(i[s]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>u<<1){var c=r.buckets,d=c.length,v=d<<1;if(v<d)return;var l=new Array(v),p=new Array(v);r.buckets=l;for(var m=0;m<d;++m)a(o,l,p,c[m]);for(var E=0;E<v;++E){var h=p[E];void 0!==h&&(h.next=void 0)}}}var s=i.clear,f=i.isEmpty,c=o.copy,d=o.forEachU,v=o.forEach,l=o.reduceU,p=o.reduce,m=o.keepMapInPlaceU,E=o.keepMapInPlace,h=o.toArray,g=o.keysToArray,x=o.valuesToArray,y=o.getBucketHistogram,_=o.logStats;t.Int=void 0,t.$$String=void 0,t.make=function(r,t){return i.make(t.hash,t.eq,r)},t.clear=s,t.isEmpty=f,t.set=function(r,t,e){u(r,t,e,r.eq,r.hash)},t.copy=c,t.get=function(r,t){var e=r.buckets,o=e[r.hash(t)&(e.length-1|0)];if(void 0!==o){var i=r.eq;if(i(t,o.key))return n.some(o.value);var a=o.next;if(void 0!==a){if(i(t,a.key))return n.some(a.value);var u=a.next;if(void 0!==u){if(i(t,u.key))return n.some(u.value);for(var s=u.next;;){var f=s;if(void 0===f)return;if(i(t,f.key))return n.some(f.value);s=f.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[r.hash(t)&(e.length-1|0)];if(void 0===n)return!1;for(var o=n,i=r.eq;;){var a=o;if(i(a.key,t))return!0;var u=a.next;if(void 0===u)return!1;o=u}},t.remove=function(r,t){var e=r.buckets,n=r.hash(t)&(e.length-1|0),o=e[n];if(void 0!==o){var i=r.eq;if(i(o.key,t))return e[n]=o.next,void(r.size=r.size-1|0);for(var a=o,u=o.next;;){var s=u,f=a;if(void 0===s)return;var c=s.next;if(i(s.key,t))return f.next=c,void(r.size=r.size-1|0);u=c,a=s}}},t.forEachU=d,t.forEach=v,t.reduceU=l,t.reduce=p,t.keepMapInPlaceU=m,t.keepMapInPlace=E,t.size=function(r){return r.size},t.toArray=h,t.keysToArray=g,t.valuesToArray=x,t.fromArray=function(r,t){for(var e=t.hash,n=t.eq,o=r.length,a=i.make(e,n,o),s=0;s<o;++s){var f=r[s];u(a,f[0],f[1],n,e)}return a},t.mergeMany=function(r,t){for(var e=r.hash,n=r.eq,o=t.length,i=0;i<o;++i){var a=t[i];u(r,a[0],a[1],n,e)}},t.getBucketHistogram=y,t.logStats=_},7356:function(r,t,e){var n=e(7175),o=e(1863),i=e(5252),a=e(354);function u(r,t,e){for(;;){var n=e;if(void 0===n)return;var i=o.hash_final_mix(o.hash_mix_int(0,n.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=n:r[i]=n,t[i]=n,e=n.next}}function s(r,t,e){var n=r.buckets,i=n.length,a=o.hash_final_mix(o.hash_mix_int(0,t))&(i-1|0),s=n[a];if(void 0!==s?function(r,t,e){for(;;){var n=e;if(n.key===r)return n.value=t,!1;var o=n.next;if(void 0===o)return!0;e=o}}(t,e,s)&&(n[a]={key:t,value:e,next:s},r.size=r.size+1|0):(n[a]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>i<<1){var f=r.buckets,c=f.length,d=c<<1;if(d<c)return;var v=new Array(d),l=new Array(d);r.buckets=v;for(var p=0;p<c;++p)u(v,l,f[p]);for(var m=0;m<d;++m){var E=l[m];void 0!==E&&(E.next=void 0)}}}var f=a.clear,c=a.isEmpty,d=i.copy,v=i.forEachU,l=i.forEach,p=i.reduceU,m=i.reduce,E=i.keepMapInPlaceU,h=i.keepMapInPlace,g=i.toArray,x=i.keysToArray,y=i.valuesToArray,_=i.getBucketHistogram,b=i.logStats;t.make=function(r){return a.make(void 0,void 0,r)},t.clear=f,t.isEmpty=c,t.set=s,t.copy=d,t.get=function(r,t){var e=r.buckets,i=e[o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0)];if(void 0!==i){if(t===i.key)return n.some(i.value);var a=i.next;if(void 0!==a){if(t===a.key)return n.some(a.value);var u=a.next;if(void 0!==u){if(t===u.key)return n.some(u.value);for(var s=u.next;;){var f=s;if(void 0===f)return;if(t===f.key)return n.some(f.value);s=f.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0)];if(void 0===n)return!1;for(var i=n;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,n=o.hash_final_mix(o.hash_mix_int(0,t))&(e.length-1|0),i=e[n];if(void 0!==i){if(i.key===t)return e[n]=i.next,void(r.size=r.size-1|0);for(var a=i,u=i.next;;){var s=u,f=a;if(void 0===s)return;var c=s.next;if(s.key===t)return f.next=c,void(r.size=r.size-1|0);u=c,a=s}}},t.forEachU=v,t.forEach=l,t.reduceU=p,t.reduce=m,t.keepMapInPlaceU=E,t.keepMapInPlace=h,t.size=function(r){return r.size},t.toArray=g,t.keysToArray=x,t.valuesToArray=y,t.fromArray=function(r){for(var t=r.length,e=a.make(void 0,void 0,t),n=0;n<t;++n){var o=r[n];s(e,o[0],o[1])}return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n){var o=t[n];s(r,o[0],o[1])}},t.getBucketHistogram=_,t.logStats=b},2275:function(r,t,e){var n=e(7175),o=e(1863),i=e(5252),a=e(354);function u(r,t,e){for(;;){var n=e;if(void 0===n)return;var i=o.hash_final_mix(o.hash_mix_string(0,n.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=n:r[i]=n,t[i]=n,e=n.next}}function s(r,t,e){var n=r.buckets,i=n.length,a=o.hash_final_mix(o.hash_mix_string(0,t))&(i-1|0),s=n[a];if(void 0!==s?function(r,t,e){for(;;){var n=e;if(n.key===r)return n.value=t,!1;var o=n.next;if(void 0===o)return!0;e=o}}(t,e,s)&&(n[a]={key:t,value:e,next:s},r.size=r.size+1|0):(n[a]={key:t,value:e,next:void 0},r.size=r.size+1|0),r.size>i<<1){var f=r.buckets,c=f.length,d=c<<1;if(d<c)return;var v=new Array(d),l=new Array(d);r.buckets=v;for(var p=0;p<c;++p)u(v,l,f[p]);for(var m=0;m<d;++m){var E=l[m];void 0!==E&&(E.next=void 0)}}}var f=a.clear,c=a.isEmpty,d=i.copy,v=i.forEachU,l=i.forEach,p=i.reduceU,m=i.reduce,E=i.keepMapInPlaceU,h=i.keepMapInPlace,g=i.toArray,x=i.keysToArray,y=i.valuesToArray,_=i.getBucketHistogram,b=i.logStats;t.make=function(r){return a.make(void 0,void 0,r)},t.clear=f,t.isEmpty=c,t.set=s,t.copy=d,t.get=function(r,t){var e=r.buckets,i=e[o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0)];if(void 0!==i){if(t===i.key)return n.some(i.value);var a=i.next;if(void 0!==a){if(t===a.key)return n.some(a.value);var u=a.next;if(void 0!==u){if(t===u.key)return n.some(u.value);for(var s=u.next;;){var f=s;if(void 0===f)return;if(t===f.key)return n.some(f.value);s=f.next}}}}},t.has=function(r,t){var e=r.buckets,n=e[o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0)];if(void 0===n)return!1;for(var i=n;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,n=o.hash_final_mix(o.hash_mix_string(0,t))&(e.length-1|0),i=e[n];if(void 0!==i){if(i.key===t)return e[n]=i.next,void(r.size=r.size-1|0);for(var a=i,u=i.next;;){var s=u,f=a;if(void 0===s)return;var c=s.next;if(s.key===t)return f.next=c,void(r.size=r.size-1|0);u=c,a=s}}},t.forEachU=v,t.forEach=l,t.reduceU=p,t.reduce=m,t.keepMapInPlaceU=E,t.keepMapInPlace=h,t.size=function(r){return r.size},t.toArray=g,t.keysToArray=x,t.valuesToArray=y,t.fromArray=function(r){for(var t=r.length,e=a.make(void 0,void 0,t),n=0;n<t;++n){var o=r[n];s(e,o[0],o[1])}return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n){var o=t[n];s(r,o[0],o[1])}},t.getBucketHistogram=_,t.logStats=b},9775:function(r,t,e){var n=e(9167),o=e(354);function i(r,t,e,n){for(;;){var o=n;if(void 0===o)return;var i=r(o.key)&(t.length-1|0),a=e[i];void 0!==a?a.next=o:t[i]=o,e[i]=o,n=o.next}}function a(r,t,e,n){var o=r.buckets,a=o.length,u=e(t)&(a-1|0),s=o[u];if(void 0!==s?function(r,t,e,n){for(;;){var o=e;if(n(o.key,t))return;var i=o.next;if(void 0===i)return r.size=r.size+1|0,void(o.next={key:t,next:void 0});e=i}}(r,t,s,n):(r.size=r.size+1|0,o[u]={key:t,next:void 0}),r.size>a<<1){var f=r.buckets,c=f.length,d=c<<1;if(d<c)return;var v=new Array(d),l=new Array(d);r.buckets=v;for(var p=0;p<c;++p)i(e,v,l,f[p]);for(var m=0;m<d;++m){var E=l[m];void 0!==E&&(E.next=void 0)}}}var u=o.clear,s=o.isEmpty,f=n.copy,c=n.forEachU,d=n.forEach,v=n.reduceU,l=n.reduce,p=n.logStats,m=n.toArray,E=n.getBucketHistogram;t.Int=void 0,t.$$String=void 0,t.make=function(r,t){return o.make(t.hash,t.eq,r)},t.clear=u,t.isEmpty=s,t.add=function(r,t){a(r,t,r.hash,r.eq)},t.copy=f,t.has=function(r,t){var e=r.eq,n=r.buckets,o=n[r.hash(t)&(n.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(e(a.key,t))return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.eq,n=r.buckets,o=r.hash(t)&(n.length-1|0),i=n[o];if(void 0!==i){var a=i.next;if(e(i.key,t))return r.size=r.size-1|0,void(n[o]=a);if(void 0!==a)for(var u=i,s=a;;){var f=s,c=u,d=f.next;if(e(f.key,t))return c.next=d,void(r.size=r.size-1|0);if(void 0===d)return;s=d,u=f}}},t.forEachU=c,t.forEach=d,t.reduceU=v,t.reduce=l,t.size=function(r){return r.size},t.logStats=p,t.toArray=m,t.fromArray=function(r,t){for(var e=t.eq,n=t.hash,i=r.length,u=o.make(n,e,i),s=0;s<i;++s)a(u,r[s],n,e);return u},t.mergeMany=function(r,t){for(var e=r.eq,n=r.hash,o=t.length,i=0;i<o;++i)a(r,t[i],n,e)},t.getBucketHistogram=E},7659:function(r,t,e){var n=e(1863),o=e(9167),i=e(354);function a(r,t,e){for(;;){var o=e;if(void 0===o)return;var i=n.hash_final_mix(n.hash_mix_int(0,o.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=o:r[i]=o,t[i]=o,e=o.next}}function u(r,t){var e=r.buckets,o=e.length,i=n.hash_final_mix(n.hash_mix_int(0,t))&(o-1|0),u=e[i];if(void 0!==u?function(r,t,e){for(;;){var n=e;if(n.key===t)return;var o=n.next;if(void 0===o)return r.size=r.size+1|0,void(n.next={key:t,next:void 0});e=o}}(r,t,u):(e[i]={key:t,next:void 0},r.size=r.size+1|0),r.size>o<<1){var s=r.buckets,f=s.length,c=f<<1;if(c<f)return;var d=new Array(c),v=new Array(c);r.buckets=d;for(var l=0;l<f;++l)a(d,v,s[l]);for(var p=0;p<c;++p){var m=v[p];void 0!==m&&(m.next=void 0)}}}var s=i.clear,f=i.isEmpty,c=o.copy,d=o.forEachU,v=o.forEach,l=o.reduceU,p=o.reduce,m=o.logStats,E=o.toArray,h=o.getBucketHistogram;t.make=function(r){return i.make(void 0,void 0,r)},t.clear=s,t.isEmpty=f,t.add=u,t.copy=c,t.has=function(r,t){var e=r.buckets,o=e[n.hash_final_mix(n.hash_mix_int(0,t))&(e.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,o=n.hash_final_mix(n.hash_mix_int(0,t))&(e.length-1|0),i=e[o];if(void 0!==i){var a=i.next;if(i.key===t)return r.size=r.size-1|0,void(e[o]=a);if(void 0!==a)for(var u=i,s=a;;){var f=s,c=u,d=f.next;if(f.key===t)return c.next=d,void(r.size=r.size-1|0);if(void 0===d)return;s=d,u=f}}},t.forEachU=d,t.forEach=v,t.reduceU=l,t.reduce=p,t.size=function(r){return r.size},t.logStats=m,t.toArray=E,t.fromArray=function(r){for(var t=r.length,e=i.make(void 0,void 0,t),n=0;n<t;++n)u(e,r[n]);return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n)u(r,t[n])},t.getBucketHistogram=h},8615:function(r,t,e){var n=e(1863),o=e(9167),i=e(354);function a(r,t,e){for(;;){var o=e;if(void 0===o)return;var i=n.hash_final_mix(n.hash_mix_string(0,o.key))&(r.length-1|0),a=t[i];void 0!==a?a.next=o:r[i]=o,t[i]=o,e=o.next}}function u(r,t){var e=r.buckets,o=e.length,i=n.hash_final_mix(n.hash_mix_string(0,t))&(o-1|0),u=e[i];if(void 0!==u?function(r,t,e){for(;;){var n=e;if(n.key===t)return;var o=n.next;if(void 0===o)return r.size=r.size+1|0,void(n.next={key:t,next:void 0});e=o}}(r,t,u):(e[i]={key:t,next:void 0},r.size=r.size+1|0),r.size>o<<1){var s=r.buckets,f=s.length,c=f<<1;if(c<f)return;var d=new Array(c),v=new Array(c);r.buckets=d;for(var l=0;l<f;++l)a(d,v,s[l]);for(var p=0;p<c;++p){var m=v[p];void 0!==m&&(m.next=void 0)}}}var s=i.clear,f=i.isEmpty,c=o.copy,d=o.forEachU,v=o.forEach,l=o.reduceU,p=o.reduce,m=o.logStats,E=o.toArray,h=o.getBucketHistogram;t.make=function(r){return i.make(void 0,void 0,r)},t.clear=s,t.isEmpty=f,t.add=u,t.copy=c,t.has=function(r,t){var e=r.buckets,o=e[n.hash_final_mix(n.hash_mix_string(0,t))&(e.length-1|0)];if(void 0===o)return!1;for(var i=o;;){var a=i;if(a.key===t)return!0;var u=a.next;if(void 0===u)return!1;i=u}},t.remove=function(r,t){var e=r.buckets,o=n.hash_final_mix(n.hash_mix_string(0,t))&(e.length-1|0),i=e[o];if(void 0!==i){var a=i.next;if(i.key===t)return r.size=r.size-1|0,void(e[o]=a);if(void 0!==a)for(var u=i,s=a;;){var f=s,c=u,d=f.next;if(f.key===t)return c.next=d,void(r.size=r.size-1|0);if(void 0===d)return;s=d,u=f}}},t.forEachU=d,t.forEach=v,t.reduceU=l,t.reduce=p,t.size=function(r){return r.size},t.logStats=m,t.toArray=E,t.fromArray=function(r){for(var t=r.length,e=i.make(void 0,void 0,t),n=0;n<t;++n)u(e,r[n]);return e},t.mergeMany=function(r,t){for(var e=t.length,n=0;n<e;++n)u(r,t[n])},t.getBucketHistogram=h},6638:function(r,t,e){var n=e(1386);t.MakeComparableU=function(r){return r},t.MakeComparable=function(r){var t=r.cmp;return{cmp:n.__2(t)}},t.comparableU=function(r){return{cmp:r}},t.comparable=function(r){return{cmp:n.__2(r)}},t.MakeHashableU=function(r){return r},t.MakeHashable=function(r){var t=r.hash,e=n.__1(t),o=r.eq;return{hash:e,eq:n.__2(o)}},t.hashableU=function(r,t){return{hash:r,eq:t}},t.hashable=function(r,t){return{hash:n.__1(r),eq:n.__2(t)}}},1094:function(r,t,e){var n=e(1386),o=e(7175),i=e(3163),a=e(6144);function u(r,t,e){if(void 0===r)return a.singleton(t,e);var n=r.k;if(t===n)return a.updateValue(r,e);var o=r.v;return t<n?a.bal(u(r.l,t,e),n,o,r.r):a.bal(r.l,n,o,u(r.r,t,e))}function s(r,t,e){if(void 0!==r){var n=r.k;if(t===n){var i=e(o.some(r.v));if(void 0!==i)return a.updateValue(r,o.valFromOption(i));var u=r.l,f=r.r;if(void 0===u)return f;if(void 0===f)return u;var c={contents:f.k},d={contents:f.v},v=a.removeMinAuxWithRef(f,c,d);return a.bal(u,c.contents,d.contents,v)}var l=r.v,p=r.l,m=r.r;if(t<n){var E=s(p,t,e);return p===E?r:a.bal(E,n,l,m)}var h=s(m,t,e);return m===h?r:a.bal(p,n,l,h)}var g=e(void 0);return void 0!==g?a.singleton(t,o.valFromOption(g)):r}function f(r,t){var e=r.k,n=r.l,o=r.r;if(t===e){if(void 0===n)return o;if(void 0===o)return n;var i={contents:o.k},u={contents:o.v},s=a.removeMinAuxWithRef(o,i,u);return a.bal(n,i.contents,u.contents,s)}if(t<e){if(void 0===n)return r;var c=f(n,t);return c===n?r:a.bal(c,e,r.v,o)}if(void 0===o)return r;var d=f(o,t);return a.bal(n,e,r.v,d)}var c=a.isEmpty,d=i.has,v=i.cmpU,l=i.cmp,p=i.eqU,m=i.eq,E=a.findFirstByU,h=a.findFirstBy,g=a.forEachU,x=a.forEach,y=a.reduceU,_=a.reduce,b=a.everyU,T=a.every,S=a.someU,A=a.some,k=a.size,M=a.toList,w=a.toArray,j=i.fromArray,I=a.keysToArray,G=a.valuesToArray,D=a.minKey,N=a.minKeyUndefined,U=a.maxKey,C=a.maxKeyUndefined,P=a.minimum,R=a.minUndefined,V=a.maximum,O=a.maxUndefined,F=i.get,L=i.getUndefined,X=i.getWithDefault,B=i.getExn,z=a.checkInvariantInternal,W=i.mergeU,q=i.merge,H=a.keepSharedU,$=a.keepShared,K=a.partitionSharedU,J=a.partitionShared,Z=i.split,Y=a.mapU,Q=a.map,rr=a.mapWithKeyU,tr=a.mapWithKey;t.empty=void 0,t.isEmpty=c,t.has=d,t.cmpU=v,t.cmp=l,t.eqU=p,t.eq=m,t.findFirstByU=E,t.findFirstBy=h,t.forEachU=g,t.forEach=x,t.reduceU=y,t.reduce=_,t.everyU=b,t.every=T,t.someU=S,t.some=A,t.size=k,t.toList=M,t.toArray=w,t.fromArray=j,t.keysToArray=I,t.valuesToArray=G,t.minKey=D,t.minKeyUndefined=N,t.maxKey=U,t.maxKeyUndefined=C,t.minimum=P,t.minUndefined=R,t.maximum=V,t.maxUndefined=O,t.get=F,t.getUndefined=L,t.getWithDefault=X,t.getExn=B,t.checkInvariantInternal=z,t.remove=function(r,t){if(void 0!==r)return f(r,t)},t.removeMany=function(r,t){var e=t.length;if(void 0!==r)for(var n=r,o=0;;){var i=o;if(i>=e)return n;var a=f(n,t[i]);if(void 0===a)return a;o=i+1|0,n=a}},t.set=u,t.updateU=s,t.update=function(r,t,e){return s(r,t,n.__1(e))},t.mergeU=W,t.merge=q,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o){var i=t[o];n=u(n,i[0],i[1])}return n},t.keepU=H,t.keep=$,t.partitionU=K,t.partition=J,t.split=Z,t.mapU=Y,t.map=Q,t.mapWithKeyU=rr,t.mapWithKey=tr},5082:function(r,t,e){var n=e(1386),o=e(7175),i=e(6144),a=e(2459);function u(r,t,e){if(void 0===r)return i.singleton(t,e);var n=r.k;if(t===n)return i.updateValue(r,e);var o=r.v;return t<n?i.bal(u(r.l,t,e),n,o,r.r):i.bal(r.l,n,o,u(r.r,t,e))}function s(r,t,e){if(void 0!==r){var n=r.k;if(t===n){var a=e(o.some(r.v));if(void 0!==a)return i.updateValue(r,o.valFromOption(a));var u=r.l,f=r.r;if(void 0===u)return f;if(void 0===f)return u;var c={contents:f.k},d={contents:f.v},v=i.removeMinAuxWithRef(f,c,d);return i.bal(u,c.contents,d.contents,v)}var l=r.v,p=r.l,m=r.r;if(t<n){var E=s(p,t,e);return p===E?r:i.bal(E,n,l,m)}var h=s(m,t,e);return m===h?r:i.bal(p,n,l,h)}var g=e(void 0);return void 0!==g?i.singleton(t,o.valFromOption(g)):r}function f(r,t){var e=r.k,n=r.l,o=r.r;if(t===e){if(void 0===n)return o;if(void 0===o)return n;var a={contents:o.k},u={contents:o.v},s=i.removeMinAuxWithRef(o,a,u);return i.bal(n,a.contents,u.contents,s)}if(t<e){if(void 0===n)return r;var c=f(n,t);return c===n?r:i.bal(c,e,r.v,o)}if(void 0===o)return r;var d=f(o,t);return i.bal(n,e,r.v,d)}var c=i.isEmpty,d=a.has,v=a.cmpU,l=a.cmp,p=a.eqU,m=a.eq,E=i.findFirstByU,h=i.findFirstBy,g=i.forEachU,x=i.forEach,y=i.reduceU,_=i.reduce,b=i.everyU,T=i.every,S=i.someU,A=i.some,k=i.size,M=i.toList,w=i.toArray,j=a.fromArray,I=i.keysToArray,G=i.valuesToArray,D=i.minKey,N=i.minKeyUndefined,U=i.maxKey,C=i.maxKeyUndefined,P=i.minimum,R=i.minUndefined,V=i.maximum,O=i.maxUndefined,F=a.get,L=a.getUndefined,X=a.getWithDefault,B=a.getExn,z=i.checkInvariantInternal,W=a.mergeU,q=a.merge,H=i.keepSharedU,$=i.keepShared,K=i.partitionSharedU,J=i.partitionShared,Z=a.split,Y=i.mapU,Q=i.map,rr=i.mapWithKeyU,tr=i.mapWithKey;t.empty=void 0,t.isEmpty=c,t.has=d,t.cmpU=v,t.cmp=l,t.eqU=p,t.eq=m,t.findFirstByU=E,t.findFirstBy=h,t.forEachU=g,t.forEach=x,t.reduceU=y,t.reduce=_,t.everyU=b,t.every=T,t.someU=S,t.some=A,t.size=k,t.toList=M,t.toArray=w,t.fromArray=j,t.keysToArray=I,t.valuesToArray=G,t.minKey=D,t.minKeyUndefined=N,t.maxKey=U,t.maxKeyUndefined=C,t.minimum=P,t.minUndefined=R,t.maximum=V,t.maxUndefined=O,t.get=F,t.getUndefined=L,t.getWithDefault=X,t.getExn=B,t.checkInvariantInternal=z,t.remove=function(r,t){if(void 0!==r)return f(r,t)},t.removeMany=function(r,t){var e=t.length;if(void 0!==r)for(var n=r,o=0;;){var i=o;if(i>=e)return n;var a=f(n,t[i]);if(void 0===a)return a;o=i+1|0,n=a}},t.set=u,t.updateU=s,t.update=function(r,t,e){return s(r,t,n.__1(e))},t.mergeU=W,t.merge=q,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o){var i=t[o];n=u(n,i[0],i[1])}return n},t.keepU=H,t.keep=$,t.partitionU=K,t.partition=J,t.split=Z,t.mapU=Y,t.map=Q,t.mapWithKeyU=rr,t.mapWithKey=tr},5981:function(r,t,e){var n=e(1386),o=e(7175),i=e(3163),a=e(6144);function u(r,t){return{data:a.mapU(r.data,t)}}function s(r,t){return{data:a.mapWithKeyU(r.data,t)}}function f(r,t,e){return a.reduceU(r.data,t,e)}function c(r,t){var e=r.k;if(t===e){var n=r.l,o=r.r;return void 0!==n?void 0!==o?(r.r=a.removeMinAuxWithRootMutate(r,o),a.balMutate(r)):n:o}if(t<e){var i=r.l;return void 0!==i?(r.l=c(i,t),a.balMutate(r)):r}var u=r.r;return void 0!==u?(r.r=c(u,t),a.balMutate(r)):r}function d(r,t,e){if(void 0!==r){var n=r.k;if(n===t){var i=e(o.some(r.v));if(void 0!==i)return r.v=o.valFromOption(i),r;var u=r.l,s=r.r;return void 0!==u?void 0!==s?(r.r=a.removeMinAuxWithRootMutate(r,s),a.balMutate(r)):u:s}var f=r.l,c=r.r;if(t<n){var v=d(f,t,e);r.l=v}else r.r=d(c,t,e);return a.balMutate(r)}var l=e(void 0);return void 0!==l?a.singleton(t,o.valFromOption(l)):r}function v(r,t,e){var n=r.data,o=d(n,t,e);o===n||(r.data=o)}function l(r,t,e){return i.cmpU(r.data,t.data,e)}function p(r,t,e){return i.eqU(r.data,t.data,e)}t.make=function(r){return{data:void 0}},t.clear=function(r){r.data=void 0},t.isEmpty=function(r){return void 0===r.data},t.has=function(r,t){return i.has(r.data,t)},t.cmpU=l,t.cmp=function(r,t,e){return l(r,t,n.__2(e))},t.eqU=p,t.eq=function(r,t,e){return p(r,t,n.__2(e))},t.forEachU=function(r,t){a.forEachU(r.data,t)},t.forEach=function(r,t){a.forEachU(r.data,n.__2(t))},t.reduceU=f,t.reduce=function(r,t,e){return f(r,t,n.__3(e))},t.everyU=function(r,t){return a.everyU(r.data,t)},t.every=function(r,t){return a.everyU(r.data,n.__2(t))},t.someU=function(r,t){return a.someU(r.data,t)},t.some=function(r,t){return a.someU(r.data,n.__2(t))},t.size=function(r){return a.size(r.data)},t.toList=function(r){return a.toList(r.data)},t.toArray=function(r){return a.toArray(r.data)},t.fromArray=function(r){return{data:i.fromArray(r)}},t.keysToArray=function(r){return a.keysToArray(r.data)},t.valuesToArray=function(r){return a.valuesToArray(r.data)},t.minKey=function(r){return a.minKey(r.data)},t.minKeyUndefined=function(r){return a.minKeyUndefined(r.data)},t.maxKey=function(r){return a.maxKey(r.data)},t.maxKeyUndefined=function(r){return a.maxKeyUndefined(r.data)},t.minimum=function(r){return a.minimum(r.data)},t.minUndefined=function(r){return a.minUndefined(r.data)},t.maximum=function(r){return a.maximum(r.data)},t.maxUndefined=function(r){return a.maxUndefined(r.data)},t.get=function(r,t){return i.get(r.data,t)},t.getUndefined=function(r,t){return i.getUndefined(r.data,t)},t.getWithDefault=function(r,t,e){return i.getWithDefault(r.data,t,e)},t.getExn=function(r,t){return i.getExn(r.data,t)},t.checkInvariantInternal=function(r){a.checkInvariantInternal(r.data)},t.remove=function(r,t){var e=r.data;if(void 0!==e){var n=c(e,t);n===e||(r.data=n)}},t.removeMany=function(r,t){var e=r.data;if(void 0!==e){var n=function(r,t,e,n){for(;;){var o=e;if(o>=n)return r;var i=c(r,t[o]);if(void 0===i)return;e=o+1|0,r=i}}(e,t,0,t.length);n===e||(r.data=n)}},t.set=function(r,t,e){var n=r.data,o=i.addMutate(n,t,e);o===n||(r.data=o)},t.updateU=v,t.update=function(r,t,e){v(r,t,n.__1(e))},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.mapWithKeyU=s,t.mapWithKey=function(r,t){return s(r,n.__2(t))}},2867:function(r,t,e){var n=e(1386),o=e(7175),i=e(6144),a=e(2459);function u(r,t){return{data:i.mapU(r.data,t)}}function s(r,t){return{data:i.mapWithKeyU(r.data,t)}}function f(r,t,e){return i.reduceU(r.data,t,e)}function c(r,t){var e=r.k;if(t===e){var n=r.l,o=r.r;return void 0!==n?void 0!==o?(r.r=i.removeMinAuxWithRootMutate(r,o),i.balMutate(r)):n:o}if(t<e){var a=r.l;return void 0!==a?(r.l=c(a,t),i.balMutate(r)):r}var u=r.r;return void 0!==u?(r.r=c(u,t),i.balMutate(r)):r}function d(r,t,e){if(void 0!==r){var n=r.k;if(n===t){var a=e(o.some(r.v));if(void 0!==a)return r.v=o.valFromOption(a),r;var u=r.l,s=r.r;return void 0!==u?void 0!==s?(r.r=i.removeMinAuxWithRootMutate(r,s),i.balMutate(r)):u:s}var f=r.l,c=r.r;if(t<n){var v=d(f,t,e);r.l=v}else r.r=d(c,t,e);return i.balMutate(r)}var l=e(void 0);return void 0!==l?i.singleton(t,o.valFromOption(l)):r}function v(r,t,e){var n=r.data,o=d(n,t,e);o===n||(r.data=o)}function l(r,t,e){return a.cmpU(r.data,t.data,e)}function p(r,t,e){return a.eqU(r.data,t.data,e)}t.make=function(r){return{data:void 0}},t.clear=function(r){r.data=void 0},t.isEmpty=function(r){return void 0===r.data},t.has=function(r,t){return a.has(r.data,t)},t.cmpU=l,t.cmp=function(r,t,e){return l(r,t,n.__2(e))},t.eqU=p,t.eq=function(r,t,e){return p(r,t,n.__2(e))},t.forEachU=function(r,t){i.forEachU(r.data,t)},t.forEach=function(r,t){i.forEachU(r.data,n.__2(t))},t.reduceU=f,t.reduce=function(r,t,e){return f(r,t,n.__3(e))},t.everyU=function(r,t){return i.everyU(r.data,t)},t.every=function(r,t){return i.everyU(r.data,n.__2(t))},t.someU=function(r,t){return i.someU(r.data,t)},t.some=function(r,t){return i.someU(r.data,n.__2(t))},t.size=function(r){return i.size(r.data)},t.toList=function(r){return i.toList(r.data)},t.toArray=function(r){return i.toArray(r.data)},t.fromArray=function(r){return{data:a.fromArray(r)}},t.keysToArray=function(r){return i.keysToArray(r.data)},t.valuesToArray=function(r){return i.valuesToArray(r.data)},t.minKey=function(r){return i.minKey(r.data)},t.minKeyUndefined=function(r){return i.minKeyUndefined(r.data)},t.maxKey=function(r){return i.maxKey(r.data)},t.maxKeyUndefined=function(r){return i.maxKeyUndefined(r.data)},t.minimum=function(r){return i.minimum(r.data)},t.minUndefined=function(r){return i.minUndefined(r.data)},t.maximum=function(r){return i.maximum(r.data)},t.maxUndefined=function(r){return i.maxUndefined(r.data)},t.get=function(r,t){return a.get(r.data,t)},t.getUndefined=function(r,t){return a.getUndefined(r.data,t)},t.getWithDefault=function(r,t,e){return a.getWithDefault(r.data,t,e)},t.getExn=function(r,t){return a.getExn(r.data,t)},t.checkInvariantInternal=function(r){i.checkInvariantInternal(r.data)},t.remove=function(r,t){var e=r.data;if(void 0!==e){var n=c(e,t);n===e||(r.data=n)}},t.removeMany=function(r,t){var e=r.data;if(void 0!==e){var n=function(r,t,e,n){for(;;){var o=e;if(o>=n)return r;var i=c(r,t[o]);if(void 0===i)return;e=o+1|0,r=i}}(e,t,0,t.length);n===e||(r.data=n)}},t.set=function(r,t,e){var n=r.data,o=a.addMutate(n,t,e);o===n||(r.data=o)},t.updateU=v,t.update=function(r,t,e){v(r,t,n.__1(e))},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.mapWithKeyU=s,t.mapWithKey=function(r,t){return s(r,n.__2(t))}},5650:function(r,t,e){var n=e(1386),o=e(7175);function i(r){r.length=0,r.first=void 0,r.last=void 0}function a(r,t){var e={content:t,next:void 0},n=r.last;void 0!==n?(r.length=r.length+1|0,n.next=e,r.last=e):(r.length=1,r.first=e,r.last=e)}function u(r,t){for(var e,n={length:r.length,first:void 0,last:void 0},o=r.first;;){var i=o,a=e;if(void 0===i)return n.last=a,n;var u={content:t(i.content),next:void 0};void 0!==a?a.next=u:n.first=u,o=i.next,e=u}}function s(r,t){for(var e=r.first;;){var n=e;if(void 0===n)return;t(n.content),e=n.next}}function f(r,t,e){for(var n=t,o=r.first;;){var i=o;if(void 0===i)return n;var a=e(n,i.content);o=i.next,n=a}}t.make=function(r){return{length:0,first:void 0,last:void 0}},t.clear=i,t.isEmpty=function(r){return 0===r.length},t.fromArray=function(r){for(var t={length:0,first:void 0,last:void 0},e=0,n=r.length;e<n;++e)a(t,r[e]);return t},t.add=a,t.peek=function(r){var t=r.first;if(void 0!==t)return o.some(t.content)},t.peekUndefined=function(r){var t=r.first;if(void 0!==t)return t.content},t.peekExn=function(r){var t=r.first;if(void 0!==t)return t.content;throw{RE_EXN_ID:"Not_found",Error:new Error}},t.pop=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),o.some(t.content)):(r.length=r.length-1|0,r.first=e,o.some(t.content))}},t.popUndefined=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),t.content):(r.length=r.length-1|0,r.first=e,t.content)}},t.popExn=function(r){var t=r.first;if(void 0!==t){var e=t.next;return void 0===e?(i(r),t.content):(r.length=r.length-1|0,r.first=e,t.content)}throw{RE_EXN_ID:"Not_found",Error:new Error}},t.copy=function(r){for(var t,e={length:r.length,first:void 0,last:void 0},n=r.first;;){var o=n,i=t;if(void 0===o)return e.last=i,e;var a={content:o.content,next:void 0};void 0!==i?i.next=a:e.first=a,n=o.next,t=a}},t.size=function(r){return r.length},t.mapU=u,t.map=function(r,t){return u(r,n.__1(t))},t.forEachU=s,t.forEach=function(r,t){s(r,n.__1(t))},t.reduceU=f,t.reduce=function(r,t,e){return f(r,t,n.__2(e))},t.transfer=function(r,t){if(!(r.length<=0)){var e=t.last;return void 0!==e?(t.length=t.length+r.length|0,e.next=r.first,t.last=r.last,i(r)):(t.length=r.length,t.first=r.first,t.last=r.last,i(r))}},t.toArray=function(r){var t=new Array(r.length);return function(r,t,e){for(;;){var n=e,o=r;if(void 0===n)return;t[o]=n.content,e=n.next,r=o+1|0}}(0,t,r.first),t}},6601:function(r,t,e){var n=e(1386),o=e(7175);function i(r,t){for(var e=r.root;;){var n=e;if(void 0===n)return;t(n.head),e=n.tail}}function a(r,t){for(;;){var e=r.root;if(void 0===e)return;r.root=e.tail,t(e.head)}}t.make=function(r){return{root:void 0}},t.clear=function(r){r.root=void 0},t.copy=function(r){return{root:r.root}},t.push=function(r,t){r.root={head:t,tail:r.root}},t.popUndefined=function(r){var t=r.root;if(void 0!==t)return r.root=t.tail,t.head},t.pop=function(r){var t=r.root;if(void 0!==t)return r.root=t.tail,o.some(t.head)},t.topUndefined=function(r){var t=r.root;if(void 0!==t)return t.head},t.top=function(r){var t=r.root;if(void 0!==t)return o.some(t.head)},t.isEmpty=function(r){return void 0===r.root},t.size=function(r){var t=r.root;if(void 0===t)return 0;for(var e=t,n=0;;){var o=n,i=e.tail;if(void 0===i)return o+1|0;n=o+1|0,e=i}},t.forEachU=i,t.forEach=function(r,t){i(r,n.__1(t))},t.dynamicPopIterU=a,t.dynamicPopIter=function(r,t){a(r,n.__1(t))}},6517:function(r,t,e){var n=e(1386),o=e(7175);function i(r,t){if(void 0!==r&&t(o.valFromOption(r)))return r}function a(r,t){if(void 0!==r)return t(o.valFromOption(r))}function u(r,t,e){return void 0!==r?e(o.valFromOption(r)):t}function s(r,t){if(void 0!==r)return o.some(t(o.valFromOption(r)))}function f(r,t){if(void 0!==r)return t(o.valFromOption(r))}function c(r,t,e){return void 0!==r?void 0!==t&&e(o.valFromOption(r),o.valFromOption(t)):void 0===t}function d(r,t,e){return void 0!==r?void 0!==t?e(o.valFromOption(r),o.valFromOption(t)):1:void 0!==t?-1:0}t.keepU=i,t.keep=function(r,t){return i(r,n.__1(t))},t.forEachU=a,t.forEach=function(r,t){a(r,n.__1(t))},t.getExn=function(r){if(void 0!==r)return o.valFromOption(r);throw{RE_EXN_ID:"Not_found",Error:new Error}},t.mapWithDefaultU=u,t.mapWithDefault=function(r,t,e){return u(r,t,n.__1(e))},t.mapU=s,t.map=function(r,t){return s(r,n.__1(t))},t.flatMapU=f,t.flatMap=function(r,t){return f(r,n.__1(t))},t.getWithDefault=function(r,t){return void 0!==r?o.valFromOption(r):t},t.orElse=function(r,t){return void 0!==r?r:t},t.isSome=function(r){return void 0!==r},t.isNone=function(r){return void 0===r},t.eqU=c,t.eq=function(r,t,e){return c(r,t,n.__2(e))},t.cmpU=d,t.cmp=function(r,t,e){return d(r,t,n.__2(e))}},303:function(r,t,e){var n=e(4881),o=e(9113);function i(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,a=r.r;if(t<e){var u=i(o,t);return u===o?r:n.bal(u,e,a)}var s=i(a,t);return s===a?r:n.bal(o,e,s)}function a(r,t){if(void 0===r)return r;var e=r.v,o=r.l,i=r.r;if(t===e){if(void 0===o)return i;if(void 0===i)return o;var u={contents:i.v},s=n.removeMinAuxWithRef(i,u);return n.bal(o,u.contents,s)}if(t<e){var f=a(o,t);return f===o?r:n.bal(f,e,i)}var c=a(i,t);return c===i?r:n.bal(o,e,c)}function u(r,t){var e=r.v,o=r.l,i=r.r;if(t===e)return[o,i];if(t<e){if(void 0===o)return[void 0,r];var a=u(o,t);return[a[0],n.joinShared(a[1],e,i)]}if(void 0===i)return[r,void 0];var s=u(i,t);return[n.joinShared(o,e,s[0]),s[1]]}function s(r,t,e){var o=r.v,i=r.l,a=r.r;if(t===o)return e.contents=!0,[i,a];if(t<o){if(void 0===i)return[void 0,r];var u=s(i,t,e);return[u[0],n.joinShared(u[1],o,a)]}if(void 0===a)return[r,void 0];var f=s(a,t,e);return[n.joinShared(i,o,f[0]),f[1]]}var f=o.fromArray,c=n.fromSortedArrayUnsafe,d=n.isEmpty,v=o.has,l=o.subset,p=o.cmp,m=o.eq,E=n.forEachU,h=n.forEach,g=n.reduceU,x=n.reduce,y=n.everyU,_=n.every,b=n.someU,T=n.some,S=n.keepSharedU,A=n.keepShared,k=n.partitionSharedU,M=n.partitionShared,w=n.size,j=n.toList,I=n.toArray,G=n.minimum,D=n.minUndefined,N=n.maximum,U=n.maxUndefined,C=o.get,P=o.getUndefined,R=o.getExn,V=n.checkInvariantInternal;t.empty=void 0,t.fromArray=f,t.fromSortedArrayUnsafe=c,t.isEmpty=d,t.has=v,t.add=i,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=i(n,t[o]);return n},t.remove=a,t.removeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=a(n,t[o]);return n},t.union=function r(t,e){if(void 0===t)return e;if(void 0===e)return t;var o=t.h,a=e.h;if(o>=a){if(1===a)return i(t,e.v);var s=t.v,f=t.l,c=t.r,d=u(e,s);return n.joinShared(r(f,d[0]),s,r(c,d[1]))}if(1===o)return i(e,t.v);var v=e.v,l=e.l,p=e.r,m=u(t,v);return n.joinShared(r(m[0],l),v,r(m[1],p))},t.intersect=function r(t,e){if(void 0!==t&&void 0!==e){var o=t.v,i=t.l,a=t.r,u={contents:!1},f=s(e,o,u),c=r(i,f[0]),d=r(a,f[1]);return u.contents?n.joinShared(c,o,d):n.concatShared(c,d)}},t.diff=function r(t,e){if(void 0===t)return t;if(void 0===e)return t;var o=t.v,i=t.l,a=t.r,u={contents:!1},f=s(e,o,u),c=r(i,f[0]),d=r(a,f[1]);return u.contents?n.concatShared(c,d):n.joinShared(c,o,d)},t.subset=l,t.cmp=p,t.eq=m,t.forEachU=E,t.forEach=h,t.reduceU=g,t.reduce=x,t.everyU=y,t.every=_,t.someU=b,t.some=T,t.keepU=S,t.keep=A,t.partitionU=k,t.partition=M,t.size=w,t.toList=j,t.toArray=I,t.minimum=G,t.minUndefined=D,t.maximum=N,t.maxUndefined=U,t.get=C,t.getUndefined=P,t.getExn=R,t.split=function(r,t){if(void 0===r)return[[void 0,void 0],!1];var e={contents:!1};return[s(r,t,e),e.contents]},t.checkInvariantInternal=V},1367:function(r,t,e){var n=e(4881),o=e(1572);function i(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,a=r.r;if(t<e){var u=i(o,t);return u===o?r:n.bal(u,e,a)}var s=i(a,t);return s===a?r:n.bal(o,e,s)}function a(r,t){if(void 0===r)return r;var e=r.v,o=r.l,i=r.r;if(t===e){if(void 0===o)return i;if(void 0===i)return o;var u={contents:i.v},s=n.removeMinAuxWithRef(i,u);return n.bal(o,u.contents,s)}if(t<e){var f=a(o,t);return f===o?r:n.bal(f,e,i)}var c=a(i,t);return c===i?r:n.bal(o,e,c)}function u(r,t){var e=r.v,o=r.l,i=r.r;if(t===e)return[o,i];if(t<e){if(void 0===o)return[void 0,r];var a=u(o,t);return[a[0],n.joinShared(a[1],e,i)]}if(void 0===i)return[r,void 0];var s=u(i,t);return[n.joinShared(o,e,s[0]),s[1]]}function s(r,t,e){var o=r.v,i=r.l,a=r.r;if(t===o)return e.contents=!0,[i,a];if(t<o){if(void 0===i)return[void 0,r];var u=s(i,t,e);return[u[0],n.joinShared(u[1],o,a)]}if(void 0===a)return[r,void 0];var f=s(a,t,e);return[n.joinShared(i,o,f[0]),f[1]]}var f=o.fromArray,c=n.fromSortedArrayUnsafe,d=n.isEmpty,v=o.has,l=o.subset,p=o.cmp,m=o.eq,E=n.forEachU,h=n.forEach,g=n.reduceU,x=n.reduce,y=n.everyU,_=n.every,b=n.someU,T=n.some,S=n.keepSharedU,A=n.keepShared,k=n.partitionSharedU,M=n.partitionShared,w=n.size,j=n.toList,I=n.toArray,G=n.minimum,D=n.minUndefined,N=n.maximum,U=n.maxUndefined,C=o.get,P=o.getUndefined,R=o.getExn,V=n.checkInvariantInternal;t.empty=void 0,t.fromArray=f,t.fromSortedArrayUnsafe=c,t.isEmpty=d,t.has=v,t.add=i,t.mergeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=i(n,t[o]);return n},t.remove=a,t.removeMany=function(r,t){for(var e=t.length,n=r,o=0;o<e;++o)n=a(n,t[o]);return n},t.union=function r(t,e){if(void 0===t)return e;if(void 0===e)return t;var o=t.h,a=e.h;if(o>=a){if(1===a)return i(t,e.v);var s=t.v,f=t.l,c=t.r,d=u(e,s);return n.joinShared(r(f,d[0]),s,r(c,d[1]))}if(1===o)return i(e,t.v);var v=e.v,l=e.l,p=e.r,m=u(t,v);return n.joinShared(r(m[0],l),v,r(m[1],p))},t.intersect=function r(t,e){if(void 0!==t&&void 0!==e){var o=t.v,i=t.l,a=t.r,u={contents:!1},f=s(e,o,u),c=r(i,f[0]),d=r(a,f[1]);return u.contents?n.joinShared(c,o,d):n.concatShared(c,d)}},t.diff=function r(t,e){if(void 0===t)return t;if(void 0===e)return t;var o=t.v,i=t.l,a=t.r,u={contents:!1},f=s(e,o,u),c=r(i,f[0]),d=r(a,f[1]);return u.contents?n.concatShared(c,d):n.joinShared(c,o,d)},t.subset=l,t.cmp=p,t.eq=m,t.forEachU=E,t.forEach=h,t.reduceU=g,t.reduce=x,t.everyU=y,t.every=_,t.someU=b,t.some=T,t.keepU=S,t.keep=A,t.partitionU=k,t.partition=M,t.size=w,t.toList=j,t.toArray=I,t.minimum=G,t.minUndefined=D,t.maximum=N,t.maxUndefined=U,t.get=C,t.getUndefined=P,t.getExn=R,t.split=function(r,t){if(void 0===r)return[[void 0,void 0],!1];var e={contents:!1};return[s(r,t,e),e.contents]},t.checkInvariantInternal=V},2531:function(r,t,e){var n=e(1386),o=e(2971);function i(r,t){var e=r.length;if(0===e||1===e)return e;var n=r[0],o=r[1];if(!t(n,o))return t(o,n)?0|-function(r,t,e,n,o){for(;;){var i=e,a=t;if(i>=n)return i;var u=r[i];if(!o(u,a))return i;e=i+1|0,t=u}}(r,o,2,e,t):1;for(var i=o,a=2;;){var u=a,s=i;if(u>=e)return u;var f=r[u];if(!t(s,f))return u;a=u+1|0,i=f}}function a(r,t){var e=r.length;if(0===e)return!0;for(var n=0,o=e-1|0;;){var i=n;if(i===o)return!0;if(t(r[i],r[i+1|0])>0)return!1;n=i+1|0}}function u(r,t,e,n,i,a,u,s,f){for(var c=t+e|0,d=i+a|0,v=t,l=r[t],p=i,m=n[i],E=s;;){var h=E,g=m,x=p,y=l,_=v;if(f(y,g)<=0){u[h]=y;var b=_+1|0;if(b>=c)return o.blitUnsafe(n,x,u,h+1|0,d-x|0);E=h+1|0,l=r[b],v=b}else{u[h]=g;var T=x+1|0;if(T>=d)return o.blitUnsafe(r,_,u,h+1|0,c-_|0);E=h+1|0,m=n[T],p=T}}}function s(r,t,e,n,i,a,u,s,f){for(var c=t+e|0,d=i+a|0,v=t,l=r[t],p=i,m=n[i],E=s;;){var h=E,g=m,x=p,y=l,_=v,b=f(y,g);if(b<0){u[h]=y;var T=_+1|0,S=h+1|0;if(T<c){E=S,l=r[T],v=T;continue}return o.blitUnsafe(n,x,u,S,d-x|0),(S+d|0)-x|0}if(0!==b){u[h]=g;var A=x+1|0,k=h+1|0;if(!(A<d))return o.blitUnsafe(r,_,u,k,c-_|0),(k+c|0)-_|0;E=k,m=n[A],p=A}else{u[h]=y;var M=_+1|0,w=x+1|0,j=h+1|0;if(!(M<c&&w<d))return M===c?(o.blitUnsafe(n,w,u,j,d-w|0),(j+d|0)-w|0):(o.blitUnsafe(r,M,u,j,c-M|0),(j+c|0)-M|0);E=j,m=n[w],p=w,l=r[M],v=M}}}function f(r,t,e,n,o,i,a,u,s){for(var f=t+e|0,c=o+i|0,d=t,v=r[t],l=o,p=n[o],m=u;;){var E=m,h=l,g=v,x=d,y=s(g,p);if(y<0){var _=x+1|0;if(_>=f)return E;v=r[_],d=_}else if(0!==y){var b=h+1|0;if(b>=c)return E;p=n[b],l=b}else{a[E]=g;var T=x+1|0,S=h+1|0,A=E+1|0;if(!(T<f&&S<c))return A;m=A,p=n[S],l=S,v=r[T],d=T}}}function c(r,t,e,n,i,a,u,s,f){for(var c=t+e|0,d=i+a|0,v=t,l=r[t],p=i,m=n[i],E=s;;){var h=E,g=p,x=l,y=v,_=f(x,m);if(_<0){u[h]=x;var b=h+1|0,T=y+1|0;if(T>=c)return b;E=b,l=r[T],v=T}else if(0!==_){var S=g+1|0;if(!(S<d))return o.blitUnsafe(r,y,u,h,c-y|0),(h+c|0)-y|0;m=n[S],p=S}else{var A=y+1|0,k=g+1|0;if(!(A<c&&k<d))return A===c?h:(o.blitUnsafe(r,A,u,h,c-A|0),(h+c|0)-A|0);m=n[k],p=k,l=r[A],v=A}}}function d(r,t,e,n,o,i){for(var a=0;a<o;++a){for(var u=r[t+a|0],s=(n+a|0)-1|0;s>=n&&i(e[s],u)>0;)e[s+1|0]=e[s],s=s-1|0;e[s+1|0]=u}}function v(r,t,e,n,o,i){if(o<=5)return d(r,t,e,n,o,i);var a=o/2|0,s=o-a|0;v(r,t+a|0,e,n+a|0,s,i),v(r,t,r,t+s|0,a,i),u(r,t+s|0,a,e,n+a|0,s,e,n,i)}function l(r,t){var e=r.length;if(e<=5)return d(r,0,r,0,e,t);var n=e/2|0,o=e-n|0,i=new Array(o);v(r,n,i,0,o,t),v(r,0,r,o,n,t),u(r,o,n,i,0,o,r,0,t)}function p(r,t){var e=r.slice(0);return l(e,t),e}function m(r,t,e){var n=r.length;if(0===n)return-1;if(e(t,r[0])<0)return-1;if(e(t,r[n-1|0])>0)return 0|-(n+1|0);for(var o=0,i=n-1|0;;){var a=i,u=o,s=(u+a|0)/2|0,f=e(t,r[s]);if(0===f)return s;if(f<0){if(a===s)return 0===e(r[u],t)?u:0|-(a+1|0);i=s}else{if(u===s)return 0===e(r[a],t)?a:0|-(a+1|0);o=s}}}t.Int=void 0,t.$$String=void 0,t.strictlySortedLengthU=i,t.strictlySortedLength=function(r,t){return i(r,n.__2(t))},t.isSortedU=a,t.isSorted=function(r,t){return a(r,n.__2(t))},t.stableSortInPlaceByU=l,t.stableSortInPlaceBy=function(r,t){l(r,n.__2(t))},t.stableSortByU=p,t.stableSortBy=function(r,t){return p(r,n.__2(t))},t.binarySearchByU=m,t.binarySearchBy=function(r,t,e){return m(r,t,n.__2(e))},t.unionU=s,t.union=function(r,t,e,o,i,a,u,f,c){return s(r,t,e,o,i,a,u,f,n.__2(c))},t.intersectU=f,t.intersect=function(r,t,e,o,i,a,u,s,c){return f(r,t,e,o,i,a,u,s,n.__2(c))},t.diffU=c,t.diff=function(r,t,e,o,i,a,u,s,f){return c(r,t,e,o,i,a,u,s,n.__2(f))}},3282:function(r,t,e){var n=e(2971);function o(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<=h){u[E]=x;var _=y+1|0;if(_>=f)return n.blitUnsafe(o,g,u,E+1|0,c-g|0);m=E+1|0,v=r[_],d=_}else{u[E]=h;var b=g+1|0;if(b>=c)return n.blitUnsafe(r,y,u,E+1|0,f-y|0);m=E+1|0,p=o[b],l=b}}}function i(r,t,e,n,o){for(var i=0;i<o;++i){for(var a=r[t+i|0],u=(n+i|0)-1|0;u>=n&&e[u]>a;)e[u+1|0]=e[u],u=u-1|0;e[u+1|0]=a}}function a(r,t,e,n,u){if(u<=5)return i(r,t,e,n,u);var s=u/2|0,f=u-s|0;a(r,t+s|0,e,n+s|0,f),a(r,t,r,t+f|0,s),o(r,t+f|0,s,e,n+s|0,f,e,n)}function u(r){var t=r.length;if(t<=5)return i(r,0,r,0,t);var e=t/2|0,n=t-e|0,u=new Array(n);a(r,e,u,0,n),a(r,0,r,n,e),o(r,n,e,u,0,n,r,0)}t.strictlySortedLength=function(r){var t=r.length;if(0===t||1===t)return t;var e=r[0],n=r[1];if(!(e<n))return e>n?0|-function(r,t,e,n){for(;;){var o=e,i=t;if(o>=n)return o;var a=r[o];if(i<=a)return o;e=o+1|0,t=a}}(r,n,2,t):1;for(var o=n,i=2;;){var a=i,u=o;if(a>=t)return a;var s=r[a];if(u>=s)return a;i=a+1|0,o=s}},t.isSorted=function(r){var t=r.length;if(0===t)return!0;for(var e=0,n=t-1|0;;){var o=e;if(o===n)return!0;if(r[o]>r[o+1|0])return!1;e=o+1|0}},t.stableSortInPlace=u,t.stableSort=function(r){var t=r.slice(0);return u(t),t},t.binarySearch=function(r,t){var e=r.length;if(0===e)return-1;if(t<r[0])return-1;if(t>r[e-1|0])return 0|-(e+1|0);for(var n=0,o=e-1|0;;){var i=o,a=n,u=(a+i|0)/2|0,s=r[u];if(t===s)return u;if(t<s){if(i===u)return r[a]===t?a:0|-(i+1|0);o=u}else{if(a===u)return r[i]===t?i:0|-(i+1|0);n=u}}},t.union=function(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<h){u[E]=x;var _=y+1|0,b=E+1|0;if(_<f){m=b,v=r[_],d=_;continue}return n.blitUnsafe(o,g,u,b,c-g|0),(b+c|0)-g|0}if(x!==h){u[E]=h;var T=g+1|0,S=E+1|0;if(!(T<c))return n.blitUnsafe(r,y,u,S,f-y|0),(S+f|0)-y|0;m=S,p=o[T],l=T}else{u[E]=x;var A=y+1|0,k=g+1|0,M=E+1|0;if(!(A<f&&k<c))return A===f?(n.blitUnsafe(o,k,u,M,c-k|0),(M+c|0)-k|0):(n.blitUnsafe(r,A,u,M,f-A|0),(M+f|0)-A|0);m=M,p=o[k],l=k,v=r[A],d=A}}},t.intersect=function(r,t,e,n,o,i,a,u){for(var s=t+e|0,f=o+i|0,c=t,d=r[t],v=o,l=n[o],p=u;;){var m=p,E=l,h=v,g=d,x=c;if(g<E){var y=x+1|0;if(y>=s)return m;d=r[y],c=y}else if(g!==E){var _=h+1|0;if(_>=f)return m;l=n[_],v=_}else{a[m]=g;var b=x+1|0,T=h+1|0,S=m+1|0;if(!(b<s&&T<f))return S;p=S,l=n[T],v=T,d=r[b],c=b}}},t.diff=function(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<h){u[E]=x;var _=E+1|0,b=y+1|0;if(b>=f)return _;m=_,v=r[b],d=b}else if(x!==h){var T=g+1|0;if(!(T<c))return n.blitUnsafe(r,y,u,E,f-y|0),(E+f|0)-y|0;p=o[T],l=T}else{var S=y+1|0,A=g+1|0;if(!(S<f&&A<c))return S===f?E:(n.blitUnsafe(r,S,u,E,f-S|0),(E+f|0)-S|0);p=o[A],l=A,v=r[S],d=S}}}},8466:function(r,t,e){var n=e(2971);function o(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<=h){u[E]=x;var _=y+1|0;if(_>=f)return n.blitUnsafe(o,g,u,E+1|0,c-g|0);m=E+1|0,v=r[_],d=_}else{u[E]=h;var b=g+1|0;if(b>=c)return n.blitUnsafe(r,y,u,E+1|0,f-y|0);m=E+1|0,p=o[b],l=b}}}function i(r,t,e,n,o){for(var i=0;i<o;++i){for(var a=r[t+i|0],u=(n+i|0)-1|0;u>=n&&e[u]>a;)e[u+1|0]=e[u],u=u-1|0;e[u+1|0]=a}}function a(r,t,e,n,u){if(u<=5)return i(r,t,e,n,u);var s=u/2|0,f=u-s|0;a(r,t+s|0,e,n+s|0,f),a(r,t,r,t+f|0,s),o(r,t+f|0,s,e,n+s|0,f,e,n)}function u(r){var t=r.length;if(t<=5)return i(r,0,r,0,t);var e=t/2|0,n=t-e|0,u=new Array(n);a(r,e,u,0,n),a(r,0,r,n,e),o(r,n,e,u,0,n,r,0)}t.strictlySortedLength=function(r){var t=r.length;if(0===t||1===t)return t;var e=r[0],n=r[1];if(!(e<n))return e>n?0|-function(r,t,e,n){for(;;){var o=e,i=t;if(o>=n)return o;var a=r[o];if(i<=a)return o;e=o+1|0,t=a}}(r,n,2,t):1;for(var o=n,i=2;;){var a=i,u=o;if(a>=t)return a;var s=r[a];if(u>=s)return a;i=a+1|0,o=s}},t.isSorted=function(r){var t=r.length;if(0===t)return!0;for(var e=0,n=t-1|0;;){var o=e;if(o===n)return!0;if(r[o]>r[o+1|0])return!1;e=o+1|0}},t.stableSortInPlace=u,t.stableSort=function(r){var t=r.slice(0);return u(t),t},t.binarySearch=function(r,t){var e=r.length;if(0===e)return-1;if(t<r[0])return-1;if(t>r[e-1|0])return 0|-(e+1|0);for(var n=0,o=e-1|0;;){var i=o,a=n,u=(a+i|0)/2|0,s=r[u];if(t===s)return u;if(t<s){if(i===u)return r[a]===t?a:0|-(i+1|0);o=u}else{if(a===u)return r[i]===t?i:0|-(i+1|0);n=u}}},t.union=function(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<h){u[E]=x;var _=y+1|0,b=E+1|0;if(_<f){m=b,v=r[_],d=_;continue}return n.blitUnsafe(o,g,u,b,c-g|0),(b+c|0)-g|0}if(x!==h){u[E]=h;var T=g+1|0,S=E+1|0;if(!(T<c))return n.blitUnsafe(r,y,u,S,f-y|0),(S+f|0)-y|0;m=S,p=o[T],l=T}else{u[E]=x;var A=y+1|0,k=g+1|0,M=E+1|0;if(!(A<f&&k<c))return A===f?(n.blitUnsafe(o,k,u,M,c-k|0),(M+c|0)-k|0):(n.blitUnsafe(r,A,u,M,f-A|0),(M+f|0)-A|0);m=M,p=o[k],l=k,v=r[A],d=A}}},t.intersect=function(r,t,e,n,o,i,a,u){for(var s=t+e|0,f=o+i|0,c=t,d=r[t],v=o,l=n[o],p=u;;){var m=p,E=l,h=v,g=d,x=c;if(g<E){var y=x+1|0;if(y>=s)return m;d=r[y],c=y}else if(g!==E){var _=h+1|0;if(_>=f)return m;l=n[_],v=_}else{a[m]=g;var b=x+1|0,T=h+1|0,S=m+1|0;if(!(b<s&&T<f))return S;p=S,l=n[T],v=T,d=r[b],c=b}}},t.diff=function(r,t,e,o,i,a,u,s){for(var f=t+e|0,c=i+a|0,d=t,v=r[t],l=i,p=o[i],m=s;;){var E=m,h=p,g=l,x=v,y=d;if(x<h){u[E]=x;var _=E+1|0,b=y+1|0;if(b>=f)return _;m=_,v=r[b],d=b}else if(x!==h){var T=g+1|0;if(!(T<c))return n.blitUnsafe(r,y,u,E,f-y|0),(E+f|0)-y|0;p=o[T],l=T}else{var S=y+1|0,A=g+1|0;if(!(S<f&&A<c))return S===f?E:(n.blitUnsafe(r,S,u,E,f-S|0),(E+f|0)-S|0);p=o[A],l=A,v=r[S],d=S}}}},4881:function(r,t,e){var n=e(1386),o=e(7175),i=e(2531);function a(r,t,e){var n=void 0!==r?r.h:0,o=void 0!==e?e.h:0;return{v:t,h:(n>=o?n:o)+1|0,l:r,r:e}}function u(r){return{v:r,h:1,l:void 0,r:void 0}}function s(r,t){return void 0===t||void 0!==r&&r.h>=t.h}function f(r,t,e){var n=void 0!==r?r.h:0,o=void 0!==e?e.h:0;if(n>(o+2|0)){var i=r.l,u=r.r;return s(i,u)?a(i,r.v,a(u,t,e)):a(a(i,r.v,u.l),u.v,a(u.r,t,e))}if(o<=(n+2|0))return{v:t,h:(n>=o?n:o)+1|0,l:r,r:e};var f=e.l,c=e.r;return s(c,f)?a(a(r,t,f),e.v,c):a(a(r,t,f.l),f.v,a(f.r,e.v,c))}function c(r){for(;;){var t=r,e=t.l;if(void 0===e)return t.v;r=e}}function d(r){for(;;){var t=r,e=t.r;if(void 0===e)return t.v;r=e}}function v(r,t){var e=r.l;return void 0!==e?f(v(e,t),r.v,r.r):(t.contents=r.v,r.r)}function l(r,t){for(;;){if(void 0===r)return t;t={hd:r,tl:t},r=r.l}}function p(r,t){for(;;){var e=r;if(void 0===e)return;p(e.l,t),t(e.v),r=e.r}}function m(r,t,e){for(;;){var n=t,o=r;if(void 0===o)return n;t=e(m(o.l,n,e),o.v),r=o.r}}function E(r,t){for(;;){var e=r;if(void 0===e)return!0;if(!t(e.v))return!1;if(!E(e.l,t))return!1;r=e.r}}function h(r,t){for(;;){var e=r;if(void 0===e)return!1;if(t(e.v))return!0;if(h(e.l,t))return!0;r=e.r}}function g(r,t){return void 0!==r?f(g(r.l,t),r.v,r.r):u(t)}function x(r,t){return void 0!==r?f(r.l,r.v,x(r.r,t)):u(t)}function y(r,t,e){if(void 0===r)return g(e,t);if(void 0===e)return x(r,t);var n=r.h,o=e.h;return n>(o+2|0)?f(r.l,r.v,y(r.r,t,e)):o>(n+2|0)?f(y(r,t,e.l),e.v,e.r):a(r,t,e)}function _(r,t){if(void 0===r)return t;if(void 0===t)return r;var e={contents:t.v},n=v(t,e);return y(r,e.contents,n)}function b(r,t){if(void 0===r)return[void 0,void 0];var e=r.v,n=b(r.l,t),o=n[1],i=n[0],a=t(e),u=b(r.r,t),s=u[1],f=u[0];return a?[y(i,e,f),_(o,s)]:[_(i,f),y(o,e,s)]}function T(r){var t=r.l,e=r.r;return(1+(void 0!==t?T(t):0)|0)+(void 0!==e?T(e):0)|0}function S(r){return void 0!==r?T(r):0}function A(r,t){for(;;){var e=t,n=r;if(void 0===n)return e;t={hd:n.v,tl:A(n.r,e)},r=n.l}}function k(r,t,e){for(;;){var n=t,o=r,i=o.v,a=o.l,u=o.r,s=void 0!==a?k(a,n,e):n;e[s]=i;var f=s+1|0;if(void 0===u)return f;t=f,r=u}}function M(r,t,e,n){for(;;){var o=r,i=o.v,a=o.l,u=o.r;if(void 0!==a&&M(a,t,e,n),n(i)){var s=t.forward;e[s]=i,t.forward=s+1|0}else{var f=t.backward;e[f]=i,t.backward=f-1|0}if(void 0===u)return;r=u}}function w(r,t,e,n){for(;;){var o=t,i=r,a=i.v,u=i.l,s=i.r,f=void 0!==u?w(u,o,e,n):o,c=n(a)?(e[f]=a,f+1|0):f;if(void 0===s)return c;t=c,r=s}}function j(r,t,e){switch(e){case 0:return;case 1:return u(r[t]);case 2:var n=r[t];return{v:r[t-1|0],h:2,l:u(n),r:void 0};case 3:var o=r[t],i=r[t-1|0],s=r[t-2|0];return{v:i,h:2,l:u(o),r:u(s)};default:var f=e/2|0;return a(j(r,t,f),r[t-f|0],j(r,(t-f|0)-1|0,(e-f|0)-1|0))}}function I(r,t,e){switch(e){case 0:return;case 1:return u(r[t]);case 2:var n=r[t];return{v:r[t+1|0],h:2,l:u(n),r:void 0};case 3:var o=r[t],i=r[t+1|0],s=r[t+2|0];return{v:i,h:2,l:u(o),r:u(s)};default:var f=e/2|0;return a(I(r,t,f),r[t+f|0],I(r,1+(t+f|0)|0,(e-f|0)-1|0))}}function G(r,t){if(void 0!==r){var e=r.v,n=r.l,o=r.r,i=G(n,t),a=t(e),u=G(o,t);return a?n===i&&o===u?r:y(i,e,u):_(i,u)}}function D(r,t){if(void 0!==r){var e=T(r),n=new Array(e);return I(n,0,w(r,0,n,t))}}function N(r,t){if(void 0===r)return[void 0,void 0];var e=T(r),n=new Array(e),o=e-1|0,i={forward:0,backward:o};M(r,i,n,t);var a=i.forward;return[I(n,0,a),j(n,o,e-a|0)]}function U(r,t,e){var n=S(r),o=S(t);if(n!==o)return n<o?-1:1;for(var i=l(r,0),a=l(t,0);;){var u=a,s=i;if(!s)return 0;if(!u)return 0;var f=u.hd,c=s.hd,d=e(c.v,f.v);if(0!==d)return d;a=l(f.r,u.tl),i=l(c.r,s.tl)}}function C(r){var t=r.l;r.l=t.r,t.r=r;var e=r.l,n=void 0!==e?e.h:0,o=r.r,i=void 0!==o?o.h:0;r.h=(n>i?n:i)+1|0;var a=t.l,u=void 0!==a?a.h:0,s=r.h;return t.h=(u>s?u:s)+1|0,t}function P(r){var t=r.r;r.r=t.l,t.l=r;var e=r.l,n=void 0!==e?e.h:0,o=r.r,i=void 0!==o?o.h:0;r.h=(n>i?n:i)+1|0;var a=t.r,u=void 0!==a?a.h:0,s=r.h;return t.h=(u>s?u:s)+1|0,t}function R(r){var t=r.l,e=void 0!==t?t.h:0,n=r.r,o=void 0!==n?n.h:0;return r.h=(e>o?e:o)+1|0,r}function V(r){var t,e,n=r.l,o=r.r,i=void 0!==n?n.h:0,a=void 0!==o?o.h:0;if(i>(2+a|0))return s(n.l,n.r)?R(C(r)):R((e=P((t=r).l),t.l=e,C(t)));if(a>(2+i|0)){var u=o.l;return s(o.r,u)?R(P(r)):R(function(r){var t=C(r.r);return r.r=t,P(r)}(r))}return r.h=(i>a?i:a)+1|0,r}function O(r,t,e){if(void 0===t)return u(e);var n=r(e,t.v);if(0===n)return t;var o=t.l,i=t.r;if(n<0){var a=O(r,o,e);t.l=a}else t.r=O(r,i,e);return V(t)}t.copy=function r(t){return void 0!==t?{v:t.v,h:t.h,l:r(t.l),r:r(t.r)}:t},t.create=a,t.bal=f,t.singleton=u,t.minimum=function(r){if(void 0!==r)return o.some(c(r))},t.minUndefined=function(r){if(void 0!==r)return c(r)},t.maximum=function(r){if(void 0!==r)return o.some(d(r))},t.maxUndefined=function(r){if(void 0!==r)return d(r)},t.removeMinAuxWithRef=v,t.isEmpty=function(r){return void 0===r},t.stackAllLeft=l,t.forEachU=p,t.forEach=function(r,t){p(r,n.__1(t))},t.reduceU=m,t.reduce=function(r,t,e){return m(r,t,n.__2(e))},t.everyU=E,t.every=function(r,t){return E(r,n.__1(t))},t.someU=h,t.some=function(r,t){return h(r,n.__1(t))},t.joinShared=y,t.concatShared=_,t.keepSharedU=G,t.keepShared=function(r,t){return G(r,n.__1(t))},t.keepCopyU=D,t.keepCopy=function(r,t){return D(r,n.__1(t))},t.partitionSharedU=b,t.partitionShared=function(r,t){return b(r,n.__1(t))},t.partitionCopyU=N,t.partitionCopy=function(r,t){return N(r,n.__1(t))},t.lengthNode=T,t.size=S,t.toList=function(r){return A(r,0)},t.checkInvariantInternal=function r(t){for(;;){var e=t;if(void 0===e)return;var n=e.l,o=e.r,i=(void 0!==n?n.h:0)-(void 0!==o?o.h:0)|0;if(!(i<=2&&i>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLset.ml",290,4],Error:new Error};r(n),t=o}},t.fillArray=k,t.toArray=function(r){if(void 0===r)return[];var t=T(r),e=new Array(t);return k(r,0,e),e},t.fromSortedArrayAux=I,t.fromSortedArrayRevAux=j,t.fromSortedArrayUnsafe=function(r){return I(r,0,r.length)},t.has=function(r,t,e){for(;;){var n=r;if(void 0===n)return!1;var o=e(t,n.v);if(0===o)return!0;r=o<0?n.l:n.r}},t.cmp=U,t.eq=function(r,t,e){return 0===U(r,t,e)},t.subset=function r(t,e,n){for(;;){var o=e,i=t;if(void 0===i)return!0;if(void 0===o)return!1;var u=i.v,s=i.l,f=i.r,c=o.v,d=o.l,v=o.r,l=n(u,c);if(0!==l)if(l<0){if(!r(a(s,u,void 0),d,n))return!1;t=f}else{if(!r(a(void 0,u,f),v,n))return!1;t=s}else{if(!r(s,d,n))return!1;e=v,t=f}}},t.get=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var i=n.v,a=e(t,i);if(0===a)return o.some(i);r=a<0?n.l:n.r}},t.getUndefined=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var o=n.v,i=e(t,o);if(0===i)return o;r=i<0?n.l:n.r}},t.getExn=function(r,t,e){for(;;){var n=r;if(void 0===n)throw{RE_EXN_ID:"Not_found",Error:new Error};var o=n.v,i=e(t,o);if(0===i)return o;r=i<0?n.l:n.r}},t.fromArray=function(r,t){var e=r.length;if(0!==e){var n,o=i.strictlySortedLengthU(r,(function(r,e){return t(r,e)<0}));n=o>=0?I(r,0,o):j(r,(o=0|-o)-1|0,o);for(var a=o;a<e;++a)n=O(t,n,r[a]);return n}},t.addMutate=O,t.balMutate=V,t.removeMinAuxWithRootMutate=function r(t,e){var n=e.l,o=e.r;return void 0!==n?(e.l=r(t,n),V(e)):(t.v=e.v,o)}},6144:function(r,t,e){var n=e(1386),o=e(7175),i=e(2531);function a(r){return void 0!==r?r.h:0}function u(r,t,e,n){var o=a(r),i=a(n);return{k:t,v:e,h:o>=i?o+1|0:i+1|0,l:r,r:n}}function s(r,t){return{k:r,v:t,h:1,l:void 0,r:void 0}}function f(r,t){return void 0===t||void 0!==r&&r.h>=t.h}function c(r,t,e,n){var o=void 0!==r?r.h:0,i=void 0!==n?n.h:0;if(o>(i+2|0)){var s=r.l,f=r.r;return a(s)>=a(f)?u(s,r.k,r.v,u(f,t,e,n)):u(u(s,r.k,r.v,f.l),f.k,f.v,u(f.r,t,e,n))}if(i<=(o+2|0))return{k:t,v:e,h:o>=i?o+1|0:i+1|0,l:r,r:n};var c=n.l,d=n.r;return a(d)>=a(c)?u(u(r,t,e,c),n.k,n.v,d):u(u(r,t,e,c.l),c.k,c.v,u(c.r,n.k,n.v,d))}function d(r){for(;;){var t=r,e=t.l;if(void 0===e)return t.k;r=e}}function v(r){for(;;){var t=r,e=t.r;if(void 0===e)return t.k;r=e}}function l(r){for(;;){var t=r,e=t.l;if(void 0===e)return[t.k,t.v];r=e}}function p(r){for(;;){var t=r,e=t.r;if(void 0===e)return[t.k,t.v];r=e}}function m(r,t,e){var n=r.l;return void 0!==n?c(m(n,t,e),r.k,r.v,r.r):(t.contents=r.k,e.contents=r.v,r.r)}function E(r,t){for(;;){if(void 0===r)return t;t={hd:r,tl:t},r=r.l}}function h(r,t){if(void 0!==r){var e=h(r.l,t);if(void 0!==e)return e;var n=r.k,o=r.v;if(t(n,o))return[n,o];var i=h(r.r,t);return void 0!==i?i:void 0}}function g(r,t){for(;;){var e=r;if(void 0===e)return;g(e.l,t),t(e.k,e.v),r=e.r}}function x(r,t){if(void 0!==r){var e=x(r.l,t),n=t(r.v),o=x(r.r,t);return{k:r.k,v:n,h:r.h,l:e,r:o}}}function y(r,t){if(void 0!==r){var e=r.k,n=y(r.l,t),o=t(e,r.v),i=y(r.r,t);return{k:e,v:o,h:r.h,l:n,r:i}}}function _(r,t,e){for(;;){var n=t,o=r;if(void 0===o)return n;var i=o.k,a=o.v,u=o.l,s=o.r;t=e(_(u,n,e),i,a),r=s}}function b(r,t){for(;;){var e=r;if(void 0===e)return!0;if(!t(e.k,e.v))return!1;if(!b(e.l,t))return!1;r=e.r}}function T(r,t){for(;;){var e=r;if(void 0===e)return!1;if(t(e.k,e.v))return!0;if(T(e.l,t))return!0;r=e.r}}function S(r,t,e){return void 0!==r?c(S(r.l,t,e),r.k,r.v,r.r):s(t,e)}function A(r,t,e){return void 0!==r?c(r.l,r.k,r.v,A(r.r,t,e)):s(t,e)}function k(r,t,e,n){if(void 0===r)return S(n,t,e);if(void 0===n)return A(r,t,e);var o=r.k,i=r.v,a=r.h,s=r.l,f=r.r,d=n.k,v=n.v,l=n.h,p=n.l,m=n.r;return a>(l+2|0)?c(s,o,i,k(f,t,e,n)):l>(a+2|0)?c(k(r,t,e,p),d,v,m):u(r,t,e,n)}function M(r,t){if(void 0===r)return t;if(void 0===t)return r;var e={contents:t.k},n={contents:t.v},o=m(t,e,n);return k(r,e.contents,n.contents,o)}function w(r,t){if(void 0!==r){var e=r.k,n=r.v,o=w(r.l,t),i=t(e,n),a=w(r.r,t);return i?k(o,e,n,a):M(o,a)}}function j(r,t){if(void 0!==r){var e=r.k,n=r.v,i=j(r.l,t),a=t(e,n),u=j(r.r,t);return void 0!==a?k(i,e,o.valFromOption(a),u):M(i,u)}}function I(r,t){if(void 0===r)return[void 0,void 0];var e=r.k,n=r.v,o=I(r.l,t),i=o[1],a=o[0],u=t(e,n),s=I(r.r,t),f=s[1],c=s[0];return u?[k(a,e,n,c),M(i,f)]:[M(a,c),k(i,e,n,f)]}function G(r){var t=r.l,e=r.r;return(1+(void 0!==t?G(t):0)|0)+(void 0!==e?G(e):0)|0}function D(r){return void 0!==r?G(r):0}function N(r,t){for(;;){var e=t,n=r;if(void 0===n)return e;var o=n.k,i=n.v,a=n.l;t={hd:[o,i],tl:N(n.r,e)},r=a}}function U(r,t,e){for(;;){var n=t,o=r,i=o.k,a=o.l,u=o.r,s=void 0!==a?U(a,n,e):n;e[s]=i;var f=s+1|0;if(void 0===u)return f;t=f,r=u}}function C(r,t,e){for(;;){var n=t,o=r,i=o.l,a=o.r,u=void 0!==i?C(i,n,e):n;e[u]=o.v;var s=u+1|0;if(void 0===a)return s;t=s,r=a}}function P(r,t,e){for(;;){var n=t,o=r,i=o.l,a=o.k,u=o.r,s=void 0!==i?P(i,n,e):n;e[s]=[a,o.v];var f=s+1|0;if(void 0===u)return f;t=f,r=u}}function R(r,t,e){switch(e){case 0:return;case 1:var n=r[t];return s(n[0],n[1]);case 2:var o=r[t],i=r[t-1|0],a=o;return{k:i[0],v:i[1],h:2,l:s(a[0],a[1]),r:void 0};case 3:var f=r[t],c=r[t-1|0],d=r[t-2|0],v=c,l=f;return{k:v[0],v:v[1],h:2,l:s(l[0],l[1]),r:s(d[0],d[1])};default:var p=e/2|0,m=R(r,t,p),E=r[t-p|0],h=R(r,(t-p|0)-1|0,(e-p|0)-1|0);return u(m,E[0],E[1],h)}}function V(r,t,e){switch(e){case 0:return;case 1:var n=r[t];return s(n[0],n[1]);case 2:var o=r[t],i=r[t+1|0],a=o;return{k:i[0],v:i[1],h:2,l:s(a[0],a[1]),r:void 0};case 3:var f=r[t],c=r[t+1|0],d=r[t+2|0],v=c,l=f;return{k:v[0],v:v[1],h:2,l:s(l[0],l[1]),r:s(d[0],d[1])};default:var p=e/2|0,m=V(r,t,p),E=r[t+p|0],h=V(r,1+(t+p|0)|0,(e-p|0)-1|0);return u(m,E[0],E[1],h)}}function O(r,t,e,n){var o=D(r),i=D(t);if(o!==i)return o<i?-1:1;for(var a=E(r,0),u=E(t,0);;){var s=u,f=a;if(!f)return 0;if(!s)return 0;var c=s.hd,d=f.hd,v=e(d.k,c.k);if(0!==v)return v;var l=n(d.v,c.v);if(0!==l)return l;u=E(c.r,s.tl),a=E(d.r,f.tl)}}function F(r,t,e,n){if(D(r)!==D(t))return!1;for(var o=E(r,0),i=E(t,0);;){var a=i,u=o;if(!u)return!0;if(!a)return!0;var s=a.hd,f=u.hd;if(0!==e(f.k,s.k)||!n(f.v,s.v))return!1;i=E(s.r,a.tl),o=E(f.r,u.tl)}}function L(r){var t=r.l;r.l=t.r,t.r=r;var e=a(r.l),n=a(r.r);r.h=(e>n?e:n)+1|0;var o=a(t.l),i=r.h;return t.h=(o>i?o:i)+1|0,t}function X(r){var t=r.r;r.r=t.l,t.l=r;var e=a(r.l),n=a(r.r);r.h=(e>n?e:n)+1|0;var o=a(t.r),i=r.h;return t.h=(o>i?o:i)+1|0,t}function B(r){var t=a(r.l),e=a(r.r);return r.h=(t>e?t:e)+1|0,r}function z(r){var t,e,n=r.l,o=r.r,i=a(n),u=a(o);if(i>(2+u|0))return f(n.l,n.r)?B(L(r)):B((e=X((t=r).l),t.l=e,L(t)));if(u>(2+i|0)){var s=o.l;return f(o.r,s)?B(X(r)):B(function(r){var t=L(r.r);return r.r=t,X(r)}(r))}return r.h=(i>u?i:u)+1|0,r}function W(r,t,e,n){if(void 0===r)return s(t,e);var o=n(t,r.k);if(0===o)return r.v=e,r;var i=r.l,a=r.r;if(o<0){var u=W(i,t,e,n);r.l=u}else r.r=W(a,t,e,n);return z(r)}t.copy=function r(t){return void 0!==t?{k:t.k,v:t.v,h:t.h,l:r(t.l),r:r(t.r)}:t},t.create=u,t.bal=c,t.singleton=s,t.updateValue=function(r,t){return r.v===t?r:{k:r.k,v:t,h:r.h,l:r.l,r:r.r}},t.minKey=function(r){if(void 0!==r)return o.some(d(r))},t.minKeyUndefined=function(r){if(void 0!==r)return d(r)},t.maxKey=function(r){if(void 0!==r)return o.some(v(r))},t.maxKeyUndefined=function(r){if(void 0!==r)return v(r)},t.minimum=function(r){if(void 0!==r)return l(r)},t.minUndefined=function(r){if(void 0!==r)return l(r)},t.maximum=function(r){if(void 0!==r)return p(r)},t.maxUndefined=function(r){if(void 0!==r)return p(r)},t.removeMinAuxWithRef=m,t.isEmpty=function(r){return void 0===r},t.stackAllLeft=E,t.findFirstByU=h,t.findFirstBy=function(r,t){return h(r,n.__2(t))},t.forEachU=g,t.forEach=function(r,t){g(r,n.__2(t))},t.mapU=x,t.map=function(r,t){return x(r,n.__1(t))},t.mapWithKeyU=y,t.mapWithKey=function(r,t){return y(r,n.__2(t))},t.reduceU=_,t.reduce=function(r,t,e){return _(r,t,n.__3(e))},t.everyU=b,t.every=function(r,t){return b(r,n.__2(t))},t.someU=T,t.some=function(r,t){return T(r,n.__2(t))},t.join=k,t.concat=M,t.concatOrJoin=function(r,t,e,n){return void 0!==e?k(r,t,o.valFromOption(e),n):M(r,n)},t.keepSharedU=w,t.keepShared=function(r,t){return w(r,n.__2(t))},t.keepMapU=j,t.keepMap=function(r,t){return j(r,n.__2(t))},t.partitionSharedU=I,t.partitionShared=function(r,t){return I(r,n.__2(t))},t.lengthNode=G,t.size=D,t.toList=function(r){return N(r,0)},t.checkInvariantInternal=function r(t){for(;;){var e=t;if(void 0===e)return;var n=e.l,o=e.r,i=a(n)-a(o)|0;if(!(i<=2&&i>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLtree.ml",373,4],Error:new Error};r(n),t=o}},t.fillArray=P,t.toArray=function(r){if(void 0===r)return[];var t=G(r),e=new Array(t);return P(r,0,e),e},t.keysToArray=function(r){if(void 0===r)return[];var t=G(r),e=new Array(t);return U(r,0,e),e},t.valuesToArray=function(r){if(void 0===r)return[];var t=G(r),e=new Array(t);return C(r,0,e),e},t.fromSortedArrayAux=V,t.fromSortedArrayRevAux=R,t.fromSortedArrayUnsafe=function(r){return V(r,0,r.length)},t.cmpU=O,t.cmp=function(r,t,e,o){return O(r,t,e,n.__2(o))},t.eqU=F,t.eq=function(r,t,e,o){return F(r,t,e,n.__2(o))},t.get=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var i=e(t,n.k);if(0===i)return o.some(n.v);r=i<0?n.l:n.r}},t.getUndefined=function(r,t,e){for(;;){var n=r;if(void 0===n)return;var o=e(t,n.k);if(0===o)return n.v;r=o<0?n.l:n.r}},t.getWithDefault=function(r,t,e,n){for(;;){var o=r;if(void 0===o)return e;var i=n(t,o.k);if(0===i)return o.v;r=i<0?o.l:o.r}},t.getExn=function(r,t,e){for(;;){var n=r;if(void 0===n)throw{RE_EXN_ID:"Not_found",Error:new Error};var o=e(t,n.k);if(0===o)return n.v;r=o<0?n.l:n.r}},t.has=function(r,t,e){for(;;){var n=r;if(void 0===n)return!1;var o=e(t,n.k);if(0===o)return!0;r=o<0?n.l:n.r}},t.fromArray=function(r,t){var e=r.length;if(0!==e){var n,o=i.strictlySortedLengthU(r,(function(r,e){return t(r[0],e[0])<0}));n=o>=0?V(r,0,o):R(r,(o=0|-o)-1|0,o);for(var a=o;a<e;++a){var u=r[a];n=W(n,u[0],u[1],t)}return n}},t.updateMutate=W,t.balMutate=z,t.removeMinAuxWithRootMutate=function r(t,e){var n=e.r,o=e.l;return void 0!==o?(e.l=r(t,o),z(e)):(t.k=e.k,t.v=e.v,n)}},5252:function(r,t,e){var n=e(1386),o=e(2971),i=e(7175);function a(r){if(void 0===r)return r;var t={key:r.key,value:r.value,next:void 0};return function(r,t){for(;;){var e=t,n=r;if(void 0===n)return;var o={key:n.key,value:n.value,next:void 0};e.next=o,t=o,r=n.next}}(r.next,t),t}function u(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=a(r[n]);return e}function s(r,t){for(;;){var e=r;if(void 0===t)return e;t=t.next,r=e+1|0}}function f(r,t){for(;;){var e=t;if(void 0===e)return;r(e.key,e.value),t=e.next}}function c(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n)f(t,e[n])}function d(r,t,e){for(;;){var n=t;if(void 0===n)return e;e=r(e,n.key,n.value),t=n.next}}function v(r,t,e){for(var n=r.buckets,o=t,i=0,a=n.length;i<a;++i)o=d(e,n[i],o);return o}function l(r){var t=function(r){return o.reduceU(r.buckets,0,(function(r,t){var e=s(0,t);return r>e?r:e}))}(r),e=o.makeByU(t+1|0,(function(r){return 0}));return o.forEachU(r.buckets,(function(r){var t=s(0,r);e[t]=e[t]+1|0})),e}function p(r,t,e,n,o){for(;;){var a=o,u=n,s=a.next,f=r(a.key,a.value);if(void 0===f){if(t.size=t.size-1|0,void 0===s)return void(void 0!==u?u.next=s:t.buckets[e]=u);o=s}else{if(void 0!==u?a.next=a:t.buckets[e]=a,a.value=i.valFromOption(f),void 0===s)return void(a.next=s);o=s,n=a}}}function m(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n){var i=e[n];void 0!==i&&p(t,r,n,void 0,i)}}function E(r,t,e,n){for(;;){var o=e,i=r;t[i]=n(o);var a=o.next;if(void 0===a)return i+1|0;e=a,r=i+1|0}}function h(r,t){for(var e=r.buckets,n=0,o=new Array(r.size),i=0,a=e.length;i<a;++i){var u=e[i];void 0!==u&&(n=E(n,o,u,t))}return o}t.C=void 0,t.copy=function(r){return{size:r.size,buckets:u(r.buckets),hash:r.hash,eq:r.eq}},t.forEachU=c,t.forEach=function(r,t){c(r,n.__2(t))},t.reduceU=v,t.reduce=function(r,t,e){return v(r,t,n.__3(e))},t.logStats=function(r){var t=l(r);console.log({bindings:r.size,buckets:r.buckets.length,histogram:t})},t.keepMapInPlaceU=m,t.keepMapInPlace=function(r,t){m(r,n.__2(t))},t.fillArray=function(r,t,e){for(;;){var n=e,o=r;t[o]=[n.key,n.value];var i=n.next;if(void 0===i)return o+1|0;e=i,r=o+1|0}},t.keysToArray=function(r){return h(r,(function(r){return r.key}))},t.valuesToArray=function(r){return h(r,(function(r){return r.value}))},t.toArray=function(r){return h(r,(function(r){return[r.key,r.value]}))},t.getBucketHistogram=l},354:function(r,t){t.emptyOpt=void 0,t.make=function(r,t,e){var n=function(r,t){for(;;){if(r>=t)return r;if(r<<1<r)return r;r<<=1}}(16,e);return{size:0,buckets:new Array(n),hash:r,eq:t}},t.clear=function(r){r.size=0;for(var t=r.buckets,e=t.length,n=0;n<e;++n)t[n]=void 0},t.isEmpty=function(r){return 0===r.size}},3163:function(r,t,e){var n=e(6253),o=e(1386),i=e(7175),a=e(2531),u=e(6144);function s(r,t){var e=t.k,n=t.v,o=t.l,a=t.r;if(r===e)return[o,i.some(n),a];if(r<e){if(void 0===o)return[void 0,void 0,t];var f=s(r,o);return[f[0],f[1],u.join(f[2],e,n,a)]}if(void 0===a)return[t,void 0,void 0];var c=s(r,a);return[u.join(o,e,n,c[0]),c[1],c[2]]}function f(r,t){return void 0!==t?s(r,t):[void 0,void 0,void 0]}function c(r,t,e){if(void 0!==r){if(r.h>=(void 0!==t?t.h:0)){var n=r.k,o=r.v,a=r.l,s=r.r,d=f(n,t);return u.concatOrJoin(c(a,d[0],e),n,e(n,i.some(o),d[1]),c(s,d[2],e))}}else if(void 0===t)return;var v=t.k,l=t.v,p=t.l,m=t.r,E=f(v,r);return u.concatOrJoin(c(E[0],p,e),v,e(v,E[1],i.some(l)),c(E[2],m,e))}function d(r,t,e){for(;;){var o=t,i=r;if(!i)return 0;if(!o)return 0;var a=o.hd,s=i.hd,f=n.int_compare(s.k,a.k);if(0!==f)return f;var c=e(s.v,a.v);if(0!==c)return c;t=u.stackAllLeft(a.r,o.tl),r=u.stackAllLeft(s.r,i.tl)}}function v(r,t,e){var n=u.size(r),o=u.size(t);return n===o?d(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e):n<o?-1:1}function l(r,t,e){for(;;){var n=t,o=r;if(!o)return!0;if(!n)return!0;var i=n.hd,a=o.hd;if(a.k!==i.k||!e(a.v,i.v))return!1;t=u.stackAllLeft(i.r,n.tl),r=u.stackAllLeft(a.r,o.tl)}}function p(r,t,e){return u.size(r)===u.size(t)&&l(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e)}function m(r,t,e){if(void 0===r)return u.singleton(t,e);var n=r.k;if(t===n)return r.k=t,r.v=e,r;var o=r.l,i=r.r;if(t<n){var a=m(o,t,e);r.l=a}else r.r=m(i,t,e);return u.balMutate(r)}t.N=void 0,t.A=void 0,t.S=void 0,t.add=function r(t,e,n){if(void 0===t)return u.singleton(e,n);var o=t.k;if(e===o)return u.updateValue(t,n);var i=t.v;return e<o?u.bal(r(t.l,e,n),o,i,t.r):u.bal(t.l,o,i,r(t.r,e,n))},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return i.some(e.v);r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getWithDefault=function(r,t,e){for(;;){var n=r;if(void 0===n)return e;var o=n.k;if(t===o)return n.v;r=t<o?n.l:n.r}},t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.k;if(t===n)return!0;r=t<n?e.l:e.r}},t.remove=function r(t,e){if(void 0===t)return t;var n=t.k,o=t.l,i=t.r;if(e!==n)return e<n?u.bal(r(o,e),n,t.v,i):u.bal(o,n,t.v,r(i,e));if(void 0===o)return i;if(void 0===i)return o;var a={contents:i.k},s={contents:i.v},f=u.removeMinAuxWithRef(i,a,s);return u.bal(o,a.contents,s.contents,f)},t.splitAux=s,t.split=f,t.mergeU=c,t.merge=function(r,t,e){return c(r,t,o.__3(e))},t.compareAux=d,t.cmpU=v,t.cmp=function(r,t,e){return v(r,t,o.__2(e))},t.eqAux=l,t.eqU=p,t.eq=function(r,t,e){return p(r,t,o.__2(e))},t.addMutate=m,t.fromArray=function(r){var t=r.length;if(0!==t){var e,n=a.strictlySortedLengthU(r,(function(r,t){return r[0]<t[0]}));n>=0?e=u.fromSortedArrayAux(r,0,n):(n=0|-n,e=u.fromSortedArrayRevAux(r,n-1|0,n));for(var o=n;o<t;++o){var i=r[o];e=m(e,i[0],i[1])}return e}}},2459:function(r,t,e){var n=e(6253),o=e(1386),i=e(7175),a=e(2531),u=e(6144);function s(r,t){var e=t.k,n=t.v,o=t.l,a=t.r;if(r===e)return[o,i.some(n),a];if(r<e){if(void 0===o)return[void 0,void 0,t];var f=s(r,o);return[f[0],f[1],u.join(f[2],e,n,a)]}if(void 0===a)return[t,void 0,void 0];var c=s(r,a);return[u.join(o,e,n,c[0]),c[1],c[2]]}function f(r,t){return void 0!==t?s(r,t):[void 0,void 0,void 0]}function c(r,t,e){if(void 0!==r){if(r.h>=(void 0!==t?t.h:0)){var n=r.k,o=r.v,a=r.l,s=r.r,d=f(n,t);return u.concatOrJoin(c(a,d[0],e),n,e(n,i.some(o),d[1]),c(s,d[2],e))}}else if(void 0===t)return;var v=t.k,l=t.v,p=t.l,m=t.r,E=f(v,r);return u.concatOrJoin(c(E[0],p,e),v,e(v,E[1],i.some(l)),c(E[2],m,e))}function d(r,t,e){for(;;){var o=t,i=r;if(!i)return 0;if(!o)return 0;var a=o.hd,s=i.hd,f=n.string_compare(s.k,a.k);if(0!==f)return f;var c=e(s.v,a.v);if(0!==c)return c;t=u.stackAllLeft(a.r,o.tl),r=u.stackAllLeft(s.r,i.tl)}}function v(r,t,e){var n=u.size(r),o=u.size(t);return n===o?d(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e):n<o?-1:1}function l(r,t,e){for(;;){var n=t,o=r;if(!o)return!0;if(!n)return!0;var i=n.hd,a=o.hd;if(a.k!==i.k||!e(a.v,i.v))return!1;t=u.stackAllLeft(i.r,n.tl),r=u.stackAllLeft(a.r,o.tl)}}function p(r,t,e){return u.size(r)===u.size(t)&&l(u.stackAllLeft(r,0),u.stackAllLeft(t,0),e)}function m(r,t,e){if(void 0===r)return u.singleton(t,e);var n=r.k;if(t===n)return r.k=t,r.v=e,r;var o=r.l,i=r.r;if(t<n){var a=m(o,t,e);r.l=a}else r.r=m(i,t,e);return u.balMutate(r)}t.N=void 0,t.A=void 0,t.S=void 0,t.add=function r(t,e,n){if(void 0===t)return u.singleton(e,n);var o=t.k;if(e===o)return u.updateValue(t,n);var i=t.v;return e<o?u.bal(r(t.l,e,n),o,i,t.r):u.bal(t.l,o,i,r(t.r,e,n))},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return i.some(e.v);r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.k;if(t===n)return e.v;r=t<n?e.l:e.r}},t.getWithDefault=function(r,t,e){for(;;){var n=r;if(void 0===n)return e;var o=n.k;if(t===o)return n.v;r=t<o?n.l:n.r}},t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.k;if(t===n)return!0;r=t<n?e.l:e.r}},t.remove=function r(t,e){if(void 0===t)return t;var n=t.k,o=t.l,i=t.r;if(e!==n)return e<n?u.bal(r(o,e),n,t.v,i):u.bal(o,n,t.v,r(i,e));if(void 0===o)return i;if(void 0===i)return o;var a={contents:i.k},s={contents:i.v},f=u.removeMinAuxWithRef(i,a,s);return u.bal(o,a.contents,s.contents,f)},t.splitAux=s,t.split=f,t.mergeU=c,t.merge=function(r,t,e){return c(r,t,o.__3(e))},t.compareAux=d,t.cmpU=v,t.cmp=function(r,t,e){return v(r,t,o.__2(e))},t.eqAux=l,t.eqU=p,t.eq=function(r,t,e){return p(r,t,o.__2(e))},t.addMutate=m,t.fromArray=function(r){var t=r.length;if(0!==t){var e,n=a.strictlySortedLengthU(r,(function(r,t){return r[0]<t[0]}));n>=0?e=u.fromSortedArrayAux(r,0,n):(n=0|-n,e=u.fromSortedArrayRevAux(r,n-1|0,n));for(var o=n;o<t;++o){var i=r[o];e=m(e,i[0],i[1])}return e}}},9167:function(r,t,e){var n=e(1386),o=e(2971);function i(r){if(void 0===r)return r;var t={key:r.key,next:void 0};return function(r,t){for(;;){var e=t,n=r;if(void 0===n)return;var o={key:n.key,next:void 0};e.next=o,t=o,r=n.next}}(r.next,t),t}function a(r){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=i(r[n]);return e}function u(r,t){for(;;){var e=r;if(void 0===t)return e;t=t.next,r=e+1|0}}function s(r,t){for(;;){var e=t;if(void 0===e)return;r(e.key),t=e.next}}function f(r,t){for(var e=r.buckets,n=0,o=e.length;n<o;++n)s(t,e[n])}function c(r,t,e){for(;;){var n=e,o=r;t[o]=n.key;var i=n.next;if(void 0===i)return o+1|0;e=i,r=o+1|0}}function d(r,t,e){for(;;){var n=t;if(void 0===n)return e;e=r(e,n.key),t=n.next}}function v(r,t,e){for(var n=r.buckets,o=t,i=0,a=n.length;i<a;++i)o=d(e,n[i],o);return o}function l(r){var t=function(r){return o.reduceU(r.buckets,0,(function(r,t){var e=u(0,t);return r>e?r:e}))}(r),e=o.makeByU(t+1|0,(function(r){return 0}));return o.forEachU(r.buckets,(function(r){var t=u(0,r);e[t]=e[t]+1|0})),e}t.C=void 0,t.copy=function(r){return{size:r.size,buckets:a(r.buckets),hash:r.hash,eq:r.eq}},t.forEachU=f,t.forEach=function(r,t){f(r,n.__1(t))},t.fillArray=c,t.toArray=function(r){for(var t=r.buckets,e=0,n=new Array(r.size),o=0,i=t.length;o<i;++o){var a=t[o];void 0!==a&&(e=c(e,n,a))}return n},t.reduceU=v,t.reduce=function(r,t,e){return v(r,t,n.__2(e))},t.logStats=function(r){var t=l(r);console.log({bindings:r.size,buckets:r.buckets.length,histogram:t})},t.getBucketHistogram=l},9113:function(r,t,e){var n=e(3282),o=e(4881);function i(r,t){for(;;){var e=t,n=r;if(!n)return 0;if(!e)return 0;var i=e.hd,a=n.hd,u=a.v,s=i.v;if(u!==s)return u<s?-1:1;t=o.stackAllLeft(i.r,e.tl),r=o.stackAllLeft(a.r,n.tl)}}function a(r,t){var e=o.size(r),n=o.size(t);return e===n?i(o.stackAllLeft(r,0),o.stackAllLeft(t,0)):e<n?-1:1}function u(r,t){if(void 0===r)return o.singleton(t);var e=r.v;if(t===e)return r;var n=r.l,i=r.r;return t<e?r.l=u(n,t):r.r=u(i,t),o.balMutate(r)}t.S=void 0,t.N=void 0,t.A=void 0,t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.v;if(t===n)return!0;r=t<n?e.l:e.r}},t.compareAux=i,t.cmp=a,t.eq=function(r,t){return 0===a(r,t)},t.subset=function r(t,e){for(;;){var n=e,i=t;if(void 0===i)return!0;if(void 0===n)return!1;var a=i.v,u=i.l,s=i.r,f=n.v,c=n.l,d=n.r;if(a!==f)if(a<f){if(!r(o.create(u,a,void 0),c))return!1;t=s}else{if(!r(o.create(void 0,a,s),d))return!1;t=u}else{if(!r(u,c))return!1;e=d,t=s}}},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.addMutate=u,t.fromArray=function(r){var t=r.length;if(0!==t){var e,i=n.strictlySortedLength(r);i>=0?e=o.fromSortedArrayAux(r,0,i):(i=0|-i,e=o.fromSortedArrayRevAux(r,i-1|0,i));for(var a=i;a<t;++a)e=u(e,r[a]);return e}}},1572:function(r,t,e){var n=e(4881),o=e(8466);function i(r,t){for(;;){var e=t,o=r;if(!o)return 0;if(!e)return 0;var i=e.hd,a=o.hd,u=a.v,s=i.v;if(u!==s)return u<s?-1:1;t=n.stackAllLeft(i.r,e.tl),r=n.stackAllLeft(a.r,o.tl)}}function a(r,t){var e=n.size(r),o=n.size(t);return e===o?i(n.stackAllLeft(r,0),n.stackAllLeft(t,0)):e<o?-1:1}function u(r,t){if(void 0===r)return n.singleton(t);var e=r.v;if(t===e)return r;var o=r.l,i=r.r;return t<e?r.l=u(o,t):r.r=u(i,t),n.balMutate(r)}t.S=void 0,t.N=void 0,t.A=void 0,t.has=function(r,t){for(;;){var e=r;if(void 0===e)return!1;var n=e.v;if(t===n)return!0;r=t<n?e.l:e.r}},t.compareAux=i,t.cmp=a,t.eq=function(r,t){return 0===a(r,t)},t.subset=function r(t,e){for(;;){var o=e,i=t;if(void 0===i)return!0;if(void 0===o)return!1;var a=i.v,u=i.l,s=i.r,f=o.v,c=o.l,d=o.r;if(a!==f)if(a<f){if(!r(n.create(u,a,void 0),c))return!1;t=s}else{if(!r(n.create(void 0,a,s),d))return!1;t=u}else{if(!r(u,c))return!1;e=d,t=s}}},t.get=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getUndefined=function(r,t){for(;;){var e=r;if(void 0===e)return;var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.getExn=function(r,t){for(;;){var e=r;if(void 0===e)throw{RE_EXN_ID:"Not_found",Error:new Error};var n=e.v;if(t===n)return n;r=t<n?e.l:e.r}},t.addMutate=u,t.fromArray=function(r){var t=r.length;if(0!==t){var e,i=o.strictlySortedLength(r);i>=0?e=n.fromSortedArrayAux(r,0,i):(i=0|-i,e=n.fromSortedArrayRevAux(r,i-1|0,i));for(var a=i;a<t;++a)e=u(e,r[a]);return e}}},6253:function(r,t){function e(r,t){return r[1]===t[1]&&r[0]===t[0]}function n(r,t){var e=t[0],n=r[0];return n>e||!(n<e)&&r[1]>=t[1]}function o(r,t){return r[0]>t[0]||!(r[0]<t[0])&&r[1]>t[1]}t.int_compare=function(r,t){return r<t?-1:r===t?0:1},t.bool_compare=function(r,t){return r?t?0:1:t?-1:0},t.float_compare=function(r,t){return r===t?0:r<t?-1:r>t||r==r?1:t==t?-1:0},t.string_compare=function(r,t){return r===t?0:r<t?-1:1},t.bool_min=function(r,t){return r?t:r},t.int_min=function(r,t){return r<t?r:t},t.float_min=function(r,t){return r<t?r:t},t.string_min=function(r,t){return r<t?r:t},t.bool_max=function(r,t){return r||t},t.int_max=function(r,t){return r>t?r:t},t.float_max=function(r,t){return r>t?r:t},t.string_max=function(r,t){return r>t?r:t},t.i64_eq=e,t.i64_neq=function(r,t){return!e(r,t)},t.i64_lt=function(r,t){return!n(r,t)},t.i64_gt=o,t.i64_le=function(r,t){return!o(r,t)},t.i64_ge=n,t.i64_min=function(r,t){return n(r,t)?t:r},t.i64_max=function(r,t){return o(r,t)?r:t}},1748:function(r,t){t.dup=function(r){return r.slice(0)},t.sub=function(r,t,e){for(var n=new Array(e),o=0,i=t;o<e;)n[o]=r[i],o=o+1|0,i=i+1|0;return n},t.concat=function(r){var t=function(r,t){for(;;){var e=t,n=r;if(!e)return n;t=e.tl,r=e.hd.length+n|0}}(0,r),e=new Array(t);return function(r,t,e){for(;;){var n=e,o=t;if(!n)return;for(var i=n.hd,a=i.length,u=o,s=0;s<a;)r[u]=i[s],u=u+1|0,s=s+1|0;e=n.tl,t=u}}(e,0,r),e},t.make=function(r,t){for(var e=new Array(r),n=0;n<r;++n)e[n]=t;return e},t.make_float=function(r){for(var t=new Array(r),e=0;e<r;++e)t[e]=0;return t},t.blit=function(r,t,e,n,o){if(n<=t)for(var i=0;i<o;++i)e[i+n|0]=r[i+t|0];else for(var a=o-1|0;a>=0;--a)e[a+n|0]=r[a+t|0]},t.get=function(r,t){if(t<0||t>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[t]},t.set=function(r,t,e){if(t<0||t>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};r[t]=e}},6181:function(r,t){var e={contents:0};t.id=e,t.create=function(r){return e.contents=e.contents+1|0,r+"/"+e.contents},t.is_extension=function(r){return null!=r&&"string"==typeof r.RE_EXN_ID},t.exn_slot_name=function(r){return r.RE_EXN_ID}},1863:function(r,t){function e(r,t){return r<<t|r>>>(32-t|0)|0}function n(r,t){var n=t;n=e(n=Math.imul(n,-862048943),15);var o=r^(n=Math.imul(n,461845907));return((o=e(o,13))+(o<<2)|0)-430675100|0}t.hash_mix_int=n,t.hash_mix_string=function(r,t){for(var e=t.length,o=(e/4|0)-1|0,i=r,a=0;a<=o;++a){var u=a<<2;i=n(i,t.charCodeAt(u)|t.charCodeAt(u+1|0)<<8|t.charCodeAt(u+2|0)<<16|t.charCodeAt(u+3|0)<<24)}var s=3&e;return 0!==s&&(i=n(i,3===s?t.charCodeAt(e-1|0)<<16|t.charCodeAt(e-2|0)<<8|t.charCodeAt(e-3|0):2===s?t.charCodeAt(e-1|0)<<8|t.charCodeAt(e-2|0):t.charCodeAt(e-1|0))),i^e},t.hash_final_mix=function(r){var t=r^r>>>16;return t=Math.imul(t,-2048144789),t^=t>>>13,(t=Math.imul(t,-1028477387))^t>>>16}},8723:function(r,t){t.div=function(r,t){if(0===t)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r/t|0},t.mod_=function(r,t){if(0===t)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r%t}},4518:function(r,t,e){var n=e(7175),o=e(6181),i="JsError";t.$$Error=i,t.internalToOCamlException=function(r){return o.is_extension(r)?r:{RE_EXN_ID:"JsError",_1:r}},t.as_js_exn=function(r){if(r.RE_EXN_ID===i)return n.some(r._1)}},4923:function(r,t,e){var n=e(6253),o=function(r,t){for(var e in r)t(e)};function i(r,t){if(r===t)return 0;var e=typeof r,o=typeof t;switch(e){case"boolean":if("boolean"===o)return n.bool_compare(r,t);break;case"function":if("function"===o)throw{RE_EXN_ID:"Invalid_argument",_1:"compare: functional value",Error:new Error};break;case"number":if("number"===o)return n.float_compare(r,t);break;case"string":return"string"===o?n.string_compare(r,t):1;case"undefined":return-1}switch(o){case"string":return-1;case"undefined":return 1;default:if("boolean"===e)return 1;if("boolean"===o)return-1;if("function"===e)return 1;if("function"===o)return-1;if("number"===e)return null===t||void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if("number"===o)return null===r||void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(null===r)return void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?1:-1;if(null===t)return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?-1:1;if(void 0!==r.BS_PRIVATE_NESTED_SOME_NONE)return void 0!==t.BS_PRIVATE_NESTED_SOME_NONE?a(r,t):-1;var u=0|r.TAG,s=0|t.TAG;if(248===u)return n.int_compare(r[1],t[1]);if(251===u)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(u!==s)return u<s?-1:1;var f=0|r.length,c=0|t.length;if(f===c){if(!Array.isArray(r))return r instanceof Date&&t instanceof Date?r-t:a(r,t);for(var d=0;;){var v=d;if(v===f)return 0;var l=i(r[v],t[v]);if(0!==l)return l;d=v+1|0}}else if(f<c)for(var p=0;;){var m=p;if(m===f)return-1;var E=i(r[m],t[m]);if(0!==E)return E;p=m+1|0}else for(var h=0;;){var g=h;if(g===c)return 1;var x=i(r[g],t[g]);if(0!==x)return x;h=g+1|0}}}function a(r,t){var e={contents:void 0},a={contents:void 0},u=function(r,t){var e=r[2],n=r[1];if(!Object.prototype.hasOwnProperty.call(n,t)||i(r[0][t],n[t])>0){var o=e.contents;return void 0!==o&&t>=o?void 0:void(e.contents=t)}},s=[r,t,a],f=[t,r,e];o(r,(function(r){return u(s,r)})),o(t,(function(r){return u(f,r)}));var c=e.contents,d=a.contents;return void 0!==c?void 0!==d?n.string_compare(c,d):-1:void 0!==d?1:0}function u(r,t){if(r===t)return!0;var e=typeof r;if("string"===e||"number"===e||"boolean"===e||"undefined"===e||null===r)return!1;var n=typeof t;if("function"===e||"function"===n)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: functional value",Error:new Error};if("number"===n||"undefined"===n||null===t)return!1;var i=0|r.TAG,a=0|t.TAG;if(248===i)return r[1]===t[1];if(251===i)throw{RE_EXN_ID:"Invalid_argument",_1:"equal: abstract value",Error:new Error};if(i!==a)return!1;var s=0|r.length;if(s!==(0|t.length))return!1;if(!Array.isArray(r)){if(r instanceof Date&&t instanceof Date)return!(r>t||r<t);var f={contents:!0};return o(r,(function(r){Object.prototype.hasOwnProperty.call(t,r)||(f.contents=!1)})),f.contents&&o(t,(function(e){Object.prototype.hasOwnProperty.call(r,e)&&u(t[e],r[e])||(f.contents=!1)})),f.contents}for(var c=0;;){var d=c;if(d===s)return!0;if(!u(r[d],t[d]))return!1;c=d+1|0}}t.obj_dup=function(r){if(Array.isArray(r)){for(var t=r.length,e=new Array(t),n=0;n<t;++n)e[n]=r[n];return void 0!==r.TAG&&(e.TAG=r.TAG),e}return Object.assign({},r)},t.update_dummy=function(r,t){if(Array.isArray(t)){for(e=0;e<t.length;++e)r[e]=t[e];void 0!==t.TAG&&(r.TAG=t.TAG)}else for(var e in t)r[e]=t[e]},t.compare=i,t.equal=u,t.equal_null=function(r,t){return null!==t?u(r,t):r===t},t.equal_undefined=function(r,t){return void 0!==t?u(r,t):r===t},t.equal_nullable=function(r,t){return null==t?r===t:u(r,t)},t.notequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r!==t:!u(r,t)},t.greaterequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r>=t:i(r,t)>=0},t.greaterthan=function(r,t){return"number"==typeof r&&"number"==typeof t?r>t:i(r,t)>0},t.lessthan=function(r,t){return"number"==typeof r&&"number"==typeof t?r<t:i(r,t)<0},t.lessequal=function(r,t){return"number"==typeof r&&"number"==typeof t?r<=t:i(r,t)<=0},t.min=function(r,t){return i(r,t)<=0?r:t},t.max=function(r,t){return i(r,t)>=0?r:t}},7175:function(r,t){function e(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function n(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var t=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===t?void 0:{BS_PRIVATE_NESTED_SOME_NONE:t-1|0}}t.nullable_to_opt=function(r){return null==r?void 0:e(r)},t.undefined_to_opt=function(r){return void 0===r?void 0:e(r)},t.null_to_opt=function(r){return null===r?void 0:e(r)},t.valFromOption=n,t.some=e,t.isNested=function(r){return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE},t.option_get=function(r){return void 0===r?void 0:n(r)},t.option_unwrap=function(r){return void 0!==r?r.VAL:r}},3533:function(r,t){t.spliceApply=function(r,t){var e,n;n=t.length;var o=[];for(e=0;e<n-1;++e)o.push(t[e]);var i=t[n-1];for(e=0;e<i.length;++e)o.push(i[e]);return r.apply(null,o)},t.spliceNewApply=function(r,t){var e,n;n=t.length;var o=[null];for(e=0;e<n-1;++e)o.push(t[e]);var i=t[n-1];for(e=0;e<i.length;++e)o.push(i[e]);return new(Function.prototype.bind.apply(r,o))},t.spliceObjApply=function(r,t,e){var n,o;o=e.length;var i=[];for(n=0;n<o-1;++n)i.push(e[n]);var a=e[o-1];for(n=0;n<a.length;++n)i.push(a[n]);return r[t].apply(r,i)}},1386:function(r,t,e){var n=e(1748);function o(r,t){for(;;){var e=t,i=r,a=i.length,u=0===a?1:a,s=u-e.length|0;if(0===s)return i.apply(null,e);if(s>=0)return function(r,t){return function(e){return o(r,t.concat([e]))}}(i,e);t=n.sub(e,u,0|-s),r=i.apply(null,n.sub(e,0,u))}}function i(r,t){var e=r.length;if(1===e)return r(t);switch(e){case 1:return r(t);case 2:return function(e){return r(t,e)};case 3:return function(e,n){return r(t,e,n)};case 4:return function(e,n,o){return r(t,e,n,o)};case 5:return function(e,n,o,i){return r(t,e,n,o,i)};case 6:return function(e,n,o,i,a){return r(t,e,n,o,i,a)};case 7:return function(e,n,o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t])}}function a(r,t,e){var n=r.length;if(2===n)return r(t,e);switch(n){case 1:return o(r(t),[e]);case 2:return r(t,e);case 3:return function(n){return r(t,e,n)};case 4:return function(n,o){return r(t,e,n,o)};case 5:return function(n,o,i){return r(t,e,n,o,i)};case 6:return function(n,o,i,a){return r(t,e,n,o,i,a)};case 7:return function(n,o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t,e])}}function u(r,t,e,n){var i=r.length;if(3===i)return r(t,e,n);switch(i){case 1:return o(r(t),[e,n]);case 2:return o(r(t,e),[n]);case 3:return r(t,e,n);case 4:return function(o){return r(t,e,n,o)};case 5:return function(o,i){return r(t,e,n,o,i)};case 6:return function(o,i,a){return r(t,e,n,o,i,a)};case 7:return function(o,i,a,u){return r(t,e,n,o,i,a,u)};default:return o(r,[t,e,n])}}function s(r,t,e,n,i){var a=r.length;if(4===a)return r(t,e,n,i);switch(a){case 1:return o(r(t),[e,n,i]);case 2:return o(r(t,e),[n,i]);case 3:return o(r(t,e,n),[i]);case 4:return r(t,e,n,i);case 5:return function(o){return r(t,e,n,i,o)};case 6:return function(o,a){return r(t,e,n,i,o,a)};case 7:return function(o,a,u){return r(t,e,n,i,o,a,u)};default:return o(r,[t,e,n,i])}}function f(r,t,e,n,i,a){var u=r.length;if(5===u)return r(t,e,n,i,a);switch(u){case 1:return o(r(t),[e,n,i,a]);case 2:return o(r(t,e),[n,i,a]);case 3:return o(r(t,e,n),[i,a]);case 4:return o(r(t,e,n,i),[a]);case 5:return r(t,e,n,i,a);case 6:return function(o){return r(t,e,n,i,a,o)};case 7:return function(o,u){return r(t,e,n,i,a,o,u)};default:return o(r,[t,e,n,i,a])}}function c(r,t,e,n,i,a,u){var s=r.length;if(6===s)return r(t,e,n,i,a,u);switch(s){case 1:return o(r(t),[e,n,i,a,u]);case 2:return o(r(t,e),[n,i,a,u]);case 3:return o(r(t,e,n),[i,a,u]);case 4:return o(r(t,e,n,i),[a,u]);case 5:return o(r(t,e,n,i,a),[u]);case 6:return r(t,e,n,i,a,u);case 7:return function(o){return r(t,e,n,i,a,u,o)};default:return o(r,[t,e,n,i,a,u])}}function d(r,t,e,n,i,a,u,s){var f=r.length;if(7===f)return r(t,e,n,i,a,u,s);switch(f){case 1:return o(r(t),[e,n,i,a,u,s]);case 2:return o(r(t,e),[n,i,a,u,s]);case 3:return o(r(t,e,n),[i,a,u,s]);case 4:return o(r(t,e,n,i),[a,u,s]);case 5:return o(r(t,e,n,i,a),[u,s]);case 6:return o(r(t,e,n,i,a,u),[s]);case 7:return r(t,e,n,i,a,u,s);default:return o(r,[t,e,n,i,a,u,s])}}function v(r,t,e,n,i,a,u,s,f){var c=r.length;if(8===c)return r(t,e,n,i,a,u,s,f);switch(c){case 1:return o(r(t),[e,n,i,a,u,s,f]);case 2:return o(r(t,e),[n,i,a,u,s,f]);case 3:return o(r(t,e,n),[i,a,u,s,f]);case 4:return o(r(t,e,n,i),[a,u,s,f]);case 5:return o(r(t,e,n,i,a),[u,s,f]);case 6:return o(r(t,e,n,i,a,u),[s,f]);case 7:return o(r(t,e,n,i,a,u,s),[f]);default:return o(r,[t,e,n,i,a,u,s,f])}}t.app=o,t._1=i,t.__1=function(r){return 1===r.length?r:function(t){return i(r,t)}},t._2=a,t.__2=function(r){return 2===r.length?r:function(t,e){return a(r,t,e)}},t._3=u,t.__3=function(r){return 3===r.length?r:function(t,e,n){return u(r,t,e,n)}},t._4=s,t.__4=function(r){return 4===r.length?r:function(t,e,n,o){return s(r,t,e,n,o)}},t._5=f,t.__5=function(r){return 5===r.length?r:function(t,e,n,o,i){return f(r,t,e,n,o,i)}},t._6=c,t.__6=function(r){return 6===r.length?r:function(t,e,n,o,i,a){return c(r,t,e,n,o,i,a)}},t._7=d,t.__7=function(r){return 7===r.length?r:function(t,e,n,o,i,a,u){return d(r,t,e,n,o,i,a,u)}},t._8=v,t.__8=function(r){return 8===r.length?r:function(t,e,n,o,i,a,u,s){return v(r,t,e,n,o,i,a,u,s)}}},2900:function(r,t){t.$$Error="JsError",t.raiseError=function(r){throw new Error(r)},t.raiseEvalError=function(r){throw new EvalError(r)},t.raiseRangeError=function(r){throw new RangeError(r)},t.raiseReferenceError=function(r){throw new ReferenceError(r)},t.raiseSyntaxError=function(r){throw new SyntaxError(r)},t.raiseTypeError=function(r){throw new TypeError(r)},t.raiseUriError=function(r){throw new URIError(r)}},1589:function(r,t){t.equal=function(r,t){return r===t},t.max=2147483647,t.min=-2147483648},4763:function(r,t,e){var n=e(1589);function o(r){return r>n.max?n.max:r<n.min?n.min:Math.ceil(r)}function i(r){return r>n.max?n.max:r<n.min?n.min:Math.floor(r)}var a=o,u=i;t.unsafe_ceil=function(r){return Math.ceil(r)},t.ceil_int=o,t.ceil=a,t.unsafe_floor=function(r){return Math.floor(r)},t.floor_int=i,t.floor=u,t.random_int=function(r,t){return i(Math.random()*(t-r|0))+r|0}},194:function(r,t,e){var n=e(1386);t.then_=function(r,t){return t.then(n.__1(r))},t.$$catch=function(r,t){return t.catch(n.__1(r))}},8753:function(r,t,e){var n=e(1386),o=e(6638),i=e(2971),a=e(1748),u=e(3942),s=e(6517),f=e(9775),c=e(5082),d=e(519),v=e(3216),l=e(4125);function p(r,t){return!(!s.isNone(r.err)||!s.isNone(t.err)||r.asrtLabel!==t.asrtLabel)&&d.subsEq(r.subs,t.subs)}function m(r){return v.hash2(v.hashStr(r.asrtLabel),d.subsHash(r.subs))}var E=o.MakeHashable({hash:m,eq:p});function h(r,t,e,o,i,u){if(e===t.length)return t.some((function(r){return-1===r}))?o?0:n._1(u,t):i?0:n._1(u,t);for(var s=0,f=0,c=a.get(r,e).length-1|0;0===s&&f<=c;)a.set(t,e,a.get(a.get(r,e),f)),-1===a.get(t,e)&&o||(s=h(r,t,e+1|0,o,i,u)),f=f+1|0;return s}function g(r,t,e,o,u,s){for(var f=i.makeBy(t,(function(r){return[]})),c=t-1|0,d=r-1|0,v=0;v<=c;++v)for(var l=-1;l<=d;++l)n._2(e,l,v)&&a.get(f,v).push(l);var p=f.findIndex((function(r){return 0===r.length}));if(-1!==p)return o>=2?n._1(s,{TAG:4,args:[],errArgIdx:p}):0;var m=i.make(t,0),E=h(f,m,0,!0,!1,u);return 0===E?h(f,m,0,!1,!0,u):E}function x(r,t,e,o,i){var u=r.newVars.length,s=t.subs.isDefined.slice(),f={contents:(r.maxVar+1|0)+r.newVars.length|0},c=[],v=[],l=[];d.applySubs(o<t.hypsE.length?a.get(t.hypsE,o).expr:t.frame.asrt,t.subs,(function(r){var e=c.indexOf(r);if(-1!==e)return a.get(v,e);var n=f.contents;return f.contents=f.contents+1|0,c.push(r),v.push(n),l.push(a.get(t.frame.varTypes,r)),n}));for(var p=c.length-1|0,m=0;m<=p;++m){var E=a.get(c,m),h=a.get(v,m),g=a.get(l,m);a.set(t.subs.exprs,E,[h]),a.set(t.subs.begins,E,0),a.set(t.subs.ends,E,0),a.set(t.subs.isDefined,E,!0),r.newVars.push(h),r.newVarTypes.push(g)}var x=e||0===r.newVars.length?n._1(i,void 0):0;return s.forEach((function(r,e){a.set(t.subs.isDefined,e,r)})),r.newVars.splice(u),r.newVarTypes.splice(u),x}function y(r,t,e,o,i,u,s,f,c,v){var l=function(r){return u.map((function(r){return r>=0?a.get(o,r):[]}))};if(s===u.length){var p={contents:!1},m=x(r,t,i,s,(function(r){return p.contents=!0,n._1(c,void 0)}));return f>=2&&!p.contents?n._1(v,{TAG:5,args:l(),errArgIdx:s}):m}if(a.get(u,s)>=0){var E={contents:!1},h=d.iterateSubstitutions(a.get(t.hypsE,s).expr,a.get(o,a.get(u,s)),a.get(t.frmConstParts,s),a.get(t.constParts,s),a.get(t.varGroups,s),t.subs,e,(function(n){return E.contents=!0,y(r,t,e,o,i,u,s+1|0,f,c,v)}));return f>=2&&!E.contents?n._1(v,{TAG:4,args:l(),errArgIdx:s}):h}var g={contents:!1},_=x(r,t,i,s,(function(n){return g.contents=!0,y(r,t,e,o,i,u,s+1|0,f,c,v)}));return f>=2&&!g.contents?n._1(v,{TAG:5,args:l(),errArgIdx:s}):_}t.applyAssertionResultEq=p,t.applyAssertionResultHash=m,t.ApplyAssertionResultHash=E,t.applyAssertions=function(r,t,e,o,i,v,p,m,h,x,_,b,T,S,A){var k=void 0!==i&&i,M=void 0===v||v,w=void 0===p||p,j=void 0!==x?x:function(r){return!0},I=void 0!==_&&_,G=void 0!==T?T:0,D=function(r){return void 0!==m?n._1(b,{newVars:[],newVarTypes:[],newDisj:u.disjMake(void 0),asrtLabel:r.frame.label,subs:d.subsClone(r.subs),err:{TAG:3,asrtExpr:r.frame.asrt,expr:m}}):0},N=o.length,U=c.size(t),C=l.progressTrackerMake(.01,void 0,S,void 0,void 0),P={contents:0},R={contents:0},V=f.make(16,E);c.forEach(t,(function(t,i){if(0===R.contents&&n._1(j,i.frame))if(s.getWithDefault(s.map(m,(function(r){return a.get(r,0)!==a.get(i.frame.asrt,0)})),!1))G>=2&&(R.contents=D(i));else{var c={contents:!1};R.contents=function(r,t,e,o){return void 0!==t?d.iterateSubstitutions(r.frame.asrt,t,a.get(r.frmConstParts,r.numOfHypsE),a.get(r.constParts,r.numOfHypsE),a.get(r.varGroups,r.numOfHypsE),r.subs,e,o):n._1(o,r.subs)}(i,m,h,(function(t){c.contents=!0;var s=i.numOfHypsE,v=[],l=[],p={maxVar:r,newVars:v,newVarTypes:l};return g(N,s,(function(r,t){if(-1===r)return!k&&M;if(k&&r!==t)return!1;var e=a.get(o,r),n=a.get(i.hypsE,t).expr;if(a.get(n,0)!==a.get(e,0))return!1;var u={contents:!1};return d.iterateSubstitutions(n,e,a.get(i.frmConstParts,t),a.get(i.constParts,t),a.get(i.varGroups,t),i.subs,h,(function(r){return u.contents=!0,1})),u.contents}),G,(function(t){return y(p,i,h,o,w,t,0,G,(function(t){var o=function(r,t,e,o,i,a){var s=u.disjMake(void 0),f=d.verifyDisjoints(r,t,(function(r,t){return r<=e&&t<=e?!!n._2(i,r,t)||!!o&&(u.disjAddPair(s,r,t),!0):(u.disjAddPair(s,r,t),!0)}),a);return void 0!==f?{TAG:1,_0:f}:{TAG:0,_0:s}}(i.frame.disj,i.subs,r,I,e,G);if(0!==o.TAG)return 0===G?0:n._1(b,{newVars:v.slice(),newVarTypes:l.slice(),newDisj:u.disjMake(void 0),asrtLabel:i.frame.label,subs:d.subsClone(i.subs),err:o._0});var a={newVars:v.slice(),newVarTypes:l.slice(),newDisj:o._0,asrtLabel:i.frame.label,subs:d.subsClone(i.subs),err:void 0};return f.has(V,a)?0:(f.add(V,a),n._1(b,a))}),(function(r){return n._1(b,{newVars:[],newVarTypes:[],newDisj:u.disjMake(void 0),asrtLabel:i.frame.label,subs:d.subsClone(i.subs),err:r})}))}),(function(r){return n._1(b,{newVars:[],newVarTypes:[],newDisj:u.disjMake(void 0),asrtLabel:i.frame.label,subs:d.subsClone(i.subs),err:r})}))})),G>=2&&!c.contents&&(R.contents=D(i))}P.contents=P.contents+1,l.progressTrackerSetCurrPct(C,P.contents/U)}))},t.iterateCombinations=g},3942:function(r,t,e){var n=e(1386),o=e(9232),i=e(6638),a=e(8371),u=e(2971),s=e(1748),f=e(1094),c=e(6517),d=e(303),v=e(7175),l=e(5082),p=e(7356),m=e(7659),E=e(1854),h=e(2275),g=e(8615),x=e(3216),y=e(4125);function _(r,t){var e=r.length;if(e!==t.length)return!1;for(var n=!0,o=0;n&&o<e;)n=s.get(r,o)===s.get(t,o),o=o+1|0;return n}function b(r,t){var e=r.length,n=t.length,o=x.intCmp(e,n);if(0!==o)return o;for(var i=0,a=0;a<e&&0===i;)i=x.intCmp(s.get(r,a),s.get(t,a)),a=a+1|0;return i}var T=i.MakeComparable({cmp:b}),S=i.MakeHashable({hash:x.hashArrInt,eq:_});function A(r,t,e){if(t!==e){var n=t<=e?t:e,o=t<=e?e:t,i=p.get(r,n);return void 0!==i?m.add(v.valFromOption(i),o):p.set(r,n,m.fromArray([o]))}}function k(r,t){var e=r.parent;if(void 0===e)return n._1(t,r);var o=k(e,t);return void 0!==o?v.some(v.valFromOption(o)):n._1(t,r)}function M(r,t){for(;;){var e=r,o=n._1(t,e);if(void 0!==o)return v.some(v.valFromOption(o));var i=e.parent;if(void 0===i)return;r=i}}function w(r,t){return M(r.contents,(function(r){var e=h.get(r.frames,t);if(void 0!==e)return c.isNone(e.proof)?4:5;var n=h.get(r.labelToHyp,t);if(void 0!==n)return 0===n.typ?2:3;var o=h.get(r.symToInt,t);return void 0!==o?o<0?0:1:void 0}))}function j(r,t){return c.getWithDefault(c.map(h.get(c.getExn(r.contents.root).symToInt,t),(function(r){return r<0})),!1)}function I(r,t){return c.getWithDefault(c.map(M(r.contents,(function(r){return h.get(r.symToInt,t)})),(function(r){return 0<=r})),!1)}function G(r,t){return c.isSome(M(r.contents,(function(r){return h.get(r.labelToHyp,t)})))}function D(r,t,e){var n=t<=e?t:e,o=t<=e?e:t,i=p.get(r,n);return void 0!==i&&m.has(v.valFromOption(i),o)}function N(r,t){p.forEach(r,(function(r,e){m.forEach(e,(function(e){n._2(t,r,e)}))}))}function U(r){var t=[];N(r,(function(r,e){t.push([r,e])}));for(var e=function(t,e){var n={contents:!0};return t.forEach((function(t){n.contents&&e.forEach((function(e){n.contents&&t!==e&&(n.contents=D(r,t,e))}))})),n.contents},n=function(r,e){t.splice(t.findIndex((function(r){return _(r,e)})),1),e.forEach((function(t){r.includes(t)||r.push(t)}))},o=function(r){for(var n,o=0,i=t.length-2|0;o<=i;++o)if(c.isNone(n))for(var a=o+1|0,u=t.length;a<u;++a)if(c.isNone(n)){var f=s.get(t,o),d=s.get(t,a);e(f,d)&&(n=[f,d])}return n},i=!0;i;){var a=o();void 0!==a?n(a[0],a[1]):i=!1}return t.forEach((function(r){r.sort(x.intCmp)})),t.sort(b)}function C(r,t){var e=t.expr,n=e.length,o=n>0?s.get(e,0):0,i=n>1?s.get(e,1):0,a=p.get(r.exprToHyp,n);if(void 0===a)return p.set(r.exprToHyp,n,p.fromArray([[o,p.fromArray([[i,[t]]])]]));var u=v.valFromOption(a),f=p.get(u,o);if(void 0===f)return p.set(u,o,p.fromArray([[i,[t]]]));var c=v.valFromOption(f),d=p.get(c,i);return void 0===d?p.set(c,i,[t]):void 0!==d.find((function(r){return _(r.expr,t.expr)}))?void 0:void d.push(t)}function P(r,t){return M(r.contents,(function(r){return h.get(r.frames,t)}))}function R(r,t){return k(r.contents,(function(r){return x.arrForEach(r.hyps,t)}))}function V(r,t){return M(r.contents,(function(r){return h.get(r.symToInt,t)}))}function O(r,t){var e=V(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+t+"' is not declared."},Error:new Error}}function F(r,t){return t.map((function(t){return O(r,t)}))}function L(r,t){return t<0?u.get(c.getExn(r.contents.root).consts,0|-t):M(r.contents,(function(r){return t<r.varsBaseIdx?void 0:s.get(r.vars,t-r.varsBaseIdx|0)}))}function X(r,t){var e=L(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot convert "+String(t)+" to a symbol."},Error:new Error}}function B(r,t){return t.map((function(t){return X(r,t)})).join(" ")}function z(r,t,e){return e<0?L(r,e):u.get(t.frameVarToSymb,e)}function W(r,t,e){var n=z(r,t,e);if(void 0!==n)return n;throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not convert from int "+String(e)+" to a symbol."},Error:new Error}}function q(r,t,e){return e.map((function(e){return W(r,t,e)}))}function H(r,t){return M(r.contents,(function(r){return p.get(r.varTypes,t)}))}function $(r,t){var e=H(r,t);if(void 0!==e)return e;var n=L(r,t),o=void 0!==n?"'"+n+"'":String(t);throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot determine type of the variable "+o},Error:new Error}}function K(r,t,e,n){var o=void 0!==e&&e,i=m.make(16);return o||R(r,(function(r){1===r.typ&&r.expr.forEach((function(r){if(r>=0)return m.add(i,r)}))})),t.forEach((function(r){if(r>=0)return m.add(i,r)})),i}function J(r,t,e,n){var o=void 0!==e&&e,i=[];return R(r,(function(r){(1===r.typ&&!o||0===r.typ&&m.has(t,s.get(r.expr,1)))&&i.push(r)})),i}function Z(r,t){return k(r.contents,(function(r){var e={contents:void 0};return h.forEach(r.frames,(function(r,o){c.isNone(e.contents)&&(e.contents=n._1(t,o))})),e.contents}))}function Y(r){var t=r.parent;return void 0!==t?1+Y(t)|0:0}function Q(r,t,e){var n=void 0!==t&&t,o=void 0!==r?r.contents:void 0,i={contents:{root:void 0,parent:o,consts:void 0!==o?[]:[""],varsBaseIdx:void 0!==o?o.varsBaseIdx+o.vars.length|0:0,vars:[],symToInt:h.make(0),disj:p.make(16),hyps:[],labelToHyp:h.make(4),exprToHyp:p.make(4),varTypes:p.make(4),lastComment:void 0,frames:h.make(1),frameLabels:[],debug:c.getWithDefault(c.map(o,(function(r){return r.debug})),n)}};return i.contents.root=void 0!==o?o.root:i.contents,i}function rr(r){r.contents=Q(r,void 0).contents}function tr(r){var t,e=r.contents.parent;if(void 0===e)throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot close the root context."},Error:new Error};h.forEach(r.contents.frames,(function(r,t){h.set(e.frames,r,t)})),t=e,r.contents=t}function er(r,t,e){if(""===t.trim())throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot use an empty string as a name of "+e+"."},Error:new Error};var n=w(r,t);if(void 0!==n)switch(n){case 0:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare the constant '"+t+"' as "+e+"."},Error:new Error};case 1:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare the variable '"+t+"' as "+e+"."},Error:new Error};case 2:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare a floating label '"+t+"' as "+e+"."},Error:new Error};case 3:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare an essential label '"+t+"' as "+e+"."},Error:new Error};case 4:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare an axiom label '"+t+"' as "+e+"."},Error:new Error};case 5:throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to re-declare a provable label '"+t+"' as "+e+"."},Error:new Error}}}function nr(r,t){if(t<0)return t;var e=p.get(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot determine frame variable for the context variable "+String(t)+"."},Error:new Error}}function or(r,t){return t.map((function(t){return nr(r,t)}))}function ir(r,t){return f.fromArray(p.toArray(t).map((function(t){return[nr(r,t[0]),d.fromArray(or(r,m.toArray(t[1])))]})))}function ar(r,t,e,n,o,i,u,f,d,v){var l=void 0!==f&&f,E=void 0!==d&&d;if(er(r,n,void 0!==u?u:"a frame"),o.length<1)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of an assertion expression must be at least 1."},Error:new Error};if(!E&&!j(r,s.get(o,0)))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in an assertion expression must be a constant."},Error:new Error};var h=o.find((function(t){return c.isNone(V(r,t))}));if(void 0!==h)throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+h+"' must be either a constant or a variable."},Error:new Error};var g=o.map((function(t){return O(r,t)})),x=K(r,g,l),y=m.toArray(x),_=function(r,t){var e=p.make(16);return M(r.contents,(function(r){p.forEach(r.disj,(function(r,n){if(m.has(t,r))return m.forEach(n,(function(n){if(m.has(t,n))return A(e,r,n)}))}))})),e}(r,x),b=J(r,x,l),T=p.fromArray(y.map((function(r,t){return[r,t]})));return{ord:t,isAxiom:e,disj:ir(T,_),hyps:b.map((function(r){return{typ:r.typ,label:r.label,expr:or(T,r.expr)}})),asrt:or(T,g),label:n,frameVarToSymb:y.map((function(t){return X(r,t)})),varTypes:y.map((function(t){return $(r,t)})),numOfVars:y.length,numOfArgs:b.length,descr:r.contents.lastComment,proof:i,dbg:r.contents.debug?{disj:U(_).map((function(t){return B(r,t)})),hyps:b.map((function(t){return B(r,t.expr)})),asrt:B(r,g)}:void 0}}function ur(r,t,e,n,o){var i=c.getExn(r.contents.root).frameLabels;h.set(r.contents.frames,e,ar(r,i.length,t,e,n,o,c.isNone(o)?"an axiom":"a theorem",void 0,void 0)),i.push(e)}function sr(r,t){switch(0|t.TAG){case 0:var e=t.text;return void(r.contents.lastComment=e);case 1:return void t.symbols.forEach((function(t){if(c.isSome(r.contents.parent))throw{RE_EXN_ID:a.MmException,_1:{msg:"An attempt to declare a constant '"+t+"' in an inner block."},Error:new Error};er(r,t,"a constant");var e=r.contents;h.set(e.symToInt,t,0|-e.consts.length),e.consts.push(t)}));case 2:throw{RE_EXN_ID:a.MmException,_1:{msg:"Block statements are not accepted by applySingleStmt()."},Error:new Error};case 3:return void t.symbols.forEach((function(t){er(r,t,"a variable");var e=r.contents;h.set(e.symToInt,t,e.varsBaseIdx+e.vars.length|0),e.vars.push(t)}));case 4:var n=t.vars,o=n.find((function(t){return!I(r,t)}));if(void 0!==o)throw{RE_EXN_ID:a.MmException,_1:{msg:"The symbol '"+o+"' is not a variable but it is used in a disjoint statement."},Error:new Error};for(var i=n.map((function(t){return O(r,t)})),u=i.length-1|0,f=0;f<=u;++f)for(var d=f+1|0;d<=u;++d)A(r.contents.disj,s.get(i,f),s.get(i,d));return;case 5:var v=t.label,l=t.expr;if(2!==l.length)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of a floating expression must be 2."},Error:new Error};er(r,v,"a floating label");var m=s.get(l,0),E=s.get(l,1);if(!j(r,m))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in the floating '"+m+"' must be a constant."},Error:new Error};if(!I(r,E))throw{RE_EXN_ID:a.MmException,_1:{msg:"The second symbol in the floating '"+E+"' must be a variable."},Error:new Error};var g=O(r,E);if(c.isSome(H(r,g)))throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot redefine typecode for the variable '"+E+"'"},Error:new Error};var x=O(r,m),y={typ:0,label:v,expr:[x,g]},_=r.contents;return _.hyps.push(y),h.set(_.labelToHyp,v,y),C(_,y),p.set(_.varTypes,g,x);case 6:var b=t.label,T=t.expr;if(T.length<1)throw{RE_EXN_ID:a.MmException,_1:{msg:"Length of an essential expression must be at least 1."},Error:new Error};if(!j(r,s.get(T,0)))throw{RE_EXN_ID:a.MmException,_1:{msg:"The first symbol in an essential expression must be a constant."},Error:new Error};var S={typ:1,label:b,expr:F(r,T)},k=r.contents;return k.hyps.push(S),h.set(k.labelToHyp,b,S),C(k,S);case 7:return ur(r,!0,t.label,t.expr,void 0);case 8:return ur(r,!1,t.label,t.expr,t.proof)}}function fr(r,t){return c.getWithDefault(p.get(r,t),t)}function cr(r,t){for(var e=t.length-1|0,n=0;n<=e;++n){var o=s.get(t,n);o<0&&s.set(t,n,fr(r,o))}}function dr(r){var t=function(r){return{root:r.root,parent:r.parent,consts:r.consts,varsBaseIdx:r.varsBaseIdx,vars:r.vars,symToInt:r.symToInt,disj:r.disj,hyps:r.hyps,labelToHyp:r.labelToHyp,exprToHyp:r.exprToHyp,varTypes:r.varTypes,lastComment:void 0,frames:h.fromArray(h.toArray(r.frames).map((function(r){return[r[0],(t=r[1],{ord:t.ord,isAxiom:t.isAxiom,disj:t.disj,hyps:t.hyps,asrt:t.asrt,label:t.label,frameVarToSymb:t.frameVarToSymb,varTypes:t.varTypes,numOfVars:t.numOfVars,numOfArgs:t.numOfArgs,descr:void 0,proof:void 0,dbg:t.dbg})];var t}))),frameLabels:[],debug:r.debug}},e=r.parent;if(void 0!==e){var n=dr(e),o=n[0],i=t(r);return[o,{root:o,parent:n[1],consts:i.consts,varsBaseIdx:i.varsBaseIdx,vars:i.vars,symToInt:i.symToInt,disj:i.disj,hyps:i.hyps,labelToHyp:i.labelToHyp,exprToHyp:i.exprToHyp,varTypes:i.varTypes,lastComment:i.lastComment,frames:i.frames,frameLabels:i.frameLabels,debug:i.debug}]}var a=t(r);return a.root=a,[a,a]}t.createContext=Q,t.applySingleStmt=sr,t.openChildContext=rr,t.closeChildContext=tr,t.resetToParentContext=function(r){var t,e=r.contents.parent;if(void 0===e)throw{RE_EXN_ID:a.MmException,_1:{msg:"Cannot reset the root context."},Error:new Error};t=e,r.contents=t},t.loadContext=function(r,t,e,o,i,u,s,f,c){var d=void 0!==e?e:"",l=void 0!==o?o:"",p=void 0!==u?u:-1,m=void 0!==s?s:function(r){},E=void 0!==f&&f,h={contents:0},g=y.progressTrackerMake(.1,void 0,m,void 0,void 0);return a.traverseAst(void 0!==t?t:Q(void 0,E),r,(function(r,t){void 0!==i&&n._2(i,r,t.stmt);var e=t.stmt;switch(0|e.TAG){case 2:return e.level>0&&rr(r),void(r.contents.lastComment=void 0);case 7:case 8:break;default:return}if(p>0&&(h.contents=h.contents+1,y.progressTrackerSetCurrPct(g,h.contents/p)),d===e.label)return v.some(void 0)}),(function(r,t){var e=t.stmt;2!==e.TAG&&sr(r,e)}),(function(r,t){var e=t.stmt;switch(0|e.TAG){case 2:return void(e.level>0&&tr(r));case 7:case 8:break;default:return}if(l===e.label)return v.some(void 0)}),void 0)[0]},t.ctxOptimizeForProver=function(r){return{contents:dr(r.contents)[1]}},t.isDebug=function(r){return r.contents.debug},t.isConst=j,t.isVar=I,t.isHyp=G,t.isAsrt=function(r,t){return c.isSome(M(r.contents,(function(r){return h.get(r.frames,t)})))},t.isDisj=function(r,t,e){return c.getWithDefault(M(r.contents,(function(r){if(D(r.disj,t,e))return!0})),!1)},t.getHypothesis=function(r,t){return M(r.contents,(function(r){return h.get(r.labelToHyp,t)}))},t.getHypByExpr=function(r,t){return M(r.contents,(function(r){var e=t.length,n=p.get(r.exprToHyp,e);if(void 0!==n){var o=e>0?s.get(t,0):0,i=p.get(v.valFromOption(n),o);if(void 0!==i){var a=e>1?s.get(t,1):0,u=p.get(v.valFromOption(i),a);return void 0!==u?v.undefined_to_opt(u.find((function(r){return _(r.expr,t)}))):void 0}}}))},t.getMandHyps=function(r,t){return J(r,K(r,t,void 0),void 0)},t.getAllHyps=function(r){var t=[];return R(r,(function(r){t.push(r)})),l.fromArray(t.map((function(r){return[r.label,r]})))},t.getAllFrames=function(r){var t=[];return M(r.contents,(function(r){h.forEach(r.frames,(function(r,e){t.push([r,e])}))})),l.fromArray(t)},t.getAllFrameLabels=function(r){return c.getExn(r.contents.root).frameLabels.slice()},t.getAllDisj=function(r){var t=p.make(16);return M(r.contents,(function(r){p.forEach(r.disj,(function(r,e){m.forEach(e,(function(e){A(t,r,e)}))}))})),t},t.getLocalDisj=function(r){var t=p.make(16);return p.forEach(r.contents.disj,(function(r,e){m.forEach(e,(function(e){A(t,r,e)}))})),t},t.getFrame=P,t.getFrameExn=function(r,t){var e=P(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:a.MmException,_1:{msg:"Could not find a frame by the label '"+t+"'"},Error:new Error}},t.getLocalVars=function(r){return r.contents.vars.slice()},t.getLocalHyps=function(r){return r.contents.hyps.slice()},t.getNumOfVars=function(r){return r.contents.varsBaseIdx+r.contents.vars.length|0},t.forEachFrame=Z,t.forEachHypothesisInDeclarationOrder=R,t.getNestingLevel=function(r){return Y(r.contents)},t.findParentheses=function(r,t,e){for(var n=function(r,t,e){for(var n=!0,o=!1,i=!1,a=E.parenCntMake([t,e],!1,void 0),u=0,f=r.length,c=0;c<f&&n;){for(var d=s.get(r,c),v=d.length,l=0;l<v&&n;){var p=s.get(d,l);o||p!==t||(o=!0),i||p!==e||(i=!0),n=2!==(u=E.parenCntPut(a,p)),l=l+1|0}n=0===u,c=c+1|0}return!(!n||!o)&&i},i=function(r){var t=[];return Z(r,(function(r){r.hyps.forEach((function(r){1!==r.typ||t.push(r.expr)})),t.push(r.asrt)})),t}(r),a=F(r,o.getSpaceSeparatedValuesAsArray('( ) [ ] { } [. ]. [_ ]_ <. >. <" "> << >> [s ]s (. ). (( ))').filter((function(t){return j(r,t)}))).concat(u.range(1,c.getExn(r.contents.root).consts.length-1|0).map((function(r){return 0|-r}))),f=a.length-2|0,d=y.progressTrackerMake(.01,void 0,t,void 0,void 0),v=[],l=0;l<=f;++l){var p=s.get(a,l),m=s.get(a,l+1|0);v.includes(p)||v.includes(m)||!n(i,p,m)||(v.push(p),v.push(m)),y.progressTrackerSetCurrPct(d,l/f)}return v},t.getTypeOfVar=H,t.getTypeOfVarExn=$,t.getTokenType=w,t.ctxSymToInt=V,t.ctxIntToSym=L,t.ctxSymToIntExn=O,t.ctxSymsToIntsExn=F,t.ctxStrToIntsExn=function(r,t){return F(r,o.getSpaceSeparatedValuesAsArray(t))},t.ctxIntToSymExn=X,t.ctxIntsToSymsExn=function(r,t){return t.map((function(t){return X(r,t)}))},t.ctxIntsToStrExn=B,t.frmIntToSym=z,t.frmIntToSymExn=W,t.frmIntsToStrExn=function(r,t,e){return q(r,t,e).join(" ")},t.frmIntsToSymsExn=q,t.createFrame=ar,t.moveConstsToBegin=function(r,t){var e=c.getExn(r.contents.root),n=m.fromArray(o.getSpaceSeparatedValuesAsArray(t).map((function(t){return V(r,t)})).filter((function(r){return c.mapWithDefault(r,!1,(function(r){return r<0}))})).map(c.getExn)),i=m.size(n),a={contents:-1},u=function(r){for(;m.has(n,a.contents);)a.contents=a.contents-1|0;var t=a.contents;return a.contents=a.contents-1|0,t},f=p.make(i);m.forEach(n,(function(r){if(!(r>=(0|-i))){var t=u();p.set(f,r,t),p.set(f,t,r);var n=s.get(e.consts,0|-r);s.set(e.consts,0|-r,s.get(e.consts,0|-t)),s.set(e.consts,0|-t,n),h.set(e.symToInt,s.get(e.consts,0|-r),r),h.set(e.symToInt,s.get(e.consts,0|-t),t)}})),R(r,(function(r){cr(f,r.expr)})),Z(r,(function(r){r.hyps.forEach((function(r){cr(f,r.expr)})),cr(f,r.asrt),cr(f,r.varTypes)})),k(r.contents,(function(r){for(var t=r.vars.length-1|0,e=0;e<=t;++e){var n=r.varsBaseIdx+e|0,o=p.get(r.varTypes,n);void 0!==o&&p.set(r.varTypes,n,fr(f,o))}p.clear(r.exprToHyp),r.hyps.forEach((function(t){return C(r,t)}))}))},t.generateNewVarNames=function(r,t,e,n,o){for(var i=h.make(l.size(e)),a=function(r){return c.getWithDefault(h.get(i,r),0)},u=function(r){h.set(i,r,a(r)+1|0)},f=t.length-1|0,d=[],v=0;v<=f;++v){var p=X(r,s.get(t,v)),m=l.getWithDefault(e,p,p);u(m);for(var E={contents:m+String(a(m))};c.isSome(w(r,E.contents))||c.getWithDefault(c.map(n,function(r){return function(t){return g.has(t,r.contents)}}(E)),!1);)u(m),E.contents=m+String(a(m));d.push(E.contents)}return d},t.generateNewLabels=function(r,t,e,n,o,i){for(var a=void 0!==o&&o,u=function(t){return!!(c.getWithDefault(c.map(n,(function(r){return g.has(r,t)})),!1)||!a&&c.isSome(w(r,t)))||!!a&&G(r,t)},s=e-1|0,f=0,d=[],v=0;v<=s;++v){f=f+1|0;for(var l=t+String(f);u(l);)f=f+1|0,l=t+String(f);d.push(l)}return d},t.disjMake=function(r){return p.make(16)},t.disjAddPair=A,t.disjContains=D,t.disjToArr=U,t.disjForEachArr=function(r,t){U(r).forEach(n.__1(t))},t.disjForEach=N,t.disjIsEmpty=function(r){return 0===p.size(r)},t.exprEq=_,t.ExprCmp=T,t.ExprHash=S},1854:function(r,t,e){var n=e(8371),o=e(1748),i=e(3216);t.parenCntMake=function(r,t,e){var i=void 0===t||t,a=r.length;if(a%2!=0)throw{RE_EXN_ID:n.MmException,_1:{msg:"mod(parenLen, 2)  != 0 in parenCntMake"},Error:new Error};if(0===a)return{min:0,parens:[],parentStack:[],failed:!1};for(var u=[],s=(a/2|0)-1|0,f=0;f<=s;++f){var c=o.get(r,f<<1),d=o.get(r,1+(f<<1)|0);u.push({code:c,isOpen:!0,opposite:d}),u.push({code:d,isOpen:!1,opposite:c})}var v=r.reduce((function(r,t){return r<=t?r:t}),o.get(r,0));return i&&Math.abs(v)!==a&&console.log("Warning: parentheses are not optimized (this may slow down the unification process)."),{min:v,parens:u,parentStack:[],failed:!1}},t.parenCntReset=function(r){i.clearArray(r.parentStack),r.failed=!1},t.parenCntPut=function(r,t){if(!r.failed&&r.min<=t&&t<0){var e=r.parens.find((function(r){return r.code===t}));if(void 0!==e)if(e.isOpen)r.parentStack.push(e);else{var n=r.parentStack.pop();void 0!==n&&n.opposite===e.code||(r.failed=!0)}}return r.failed?2:0===r.parentStack.length?0:1}},8371:function(r,t,e){var n=e(6517),o=e(7175),i=e(6181),a=e(3533),u=e(1611),s=e(4125),f=i.create("MM_parser.MmException");function c(r){return" "===r||"\t"===r||"\n"===r||"\r"===r}function d(r,t){var e=(t+20|0)<r.length?"...":"";return"'"+r.substr(t,20)+e+"'"}function v(r,t,e,n,o,i){return u.traverseTree(r,t,(function(r,t){var e=t.stmt;if(2===e.TAG)return e.statements}),e,n,o,void 0)}function l(r){return void 0!==r?0===r.TAG?r.labels.join(" "):"( "+r.labels.join(" ")+" ) "+r.compressedProofBlock:"?"}function p(r){var t=r.stmt;switch(0|t.TAG){case 0:return"$( "+t.text+" $)";case 1:return"$c "+t.symbols.join(" ")+" $.";case 2:return"block(level="+String(t.level)+")";case 3:return"$v "+t.symbols.join(" ")+" $.";case 4:return"$d "+t.vars.join(" ")+" $.";case 5:return t.label+" $f "+t.expr.join(" ")+" $.";case 6:return t.label+" $e "+t.expr.join(" ")+" $.";case 7:return t.label+" $a "+t.expr.join(" ")+" $.";case 8:return t.label+" $p "+t.expr.join(" ")+" $= "+l(t.proof)+" $."}}t.MmException=f,t.parseMmFile=function(r,t,e,i,u){var v=void 0!==t&&t,l=void 0!==e&&e,p=void 0!==i?i:function(r){},m=r.length,E={contents:0},h={contents:!1},g={contents:""},x=s.progressTrackerMake(.1,void 0,p,!0,void 0),y=[],_=function(t){E.contents=t,E.contents>=m?(h.contents=!0,g.contents=""):(h.contents=!1,g.contents=r.charAt(E.contents))};_(0);var b=function(t){if(!h.contents)return E.contents=E.contents+1|0,void(E.contents>=m?(h.contents=!0,g.contents=""):g.contents=r.charAt(E.contents))},T=function(t){var e=function(t){for(var e,i=E.contents;n.isNone(e);){var a=r.indexOf("$)",E.contents);if(a<0)e=o.some(void 0);else _(a+2|0),h.contents||c(g.contents)?e=o.some(r.substring(i,a)):_(a+1|0)}return n.getExn(e)}();if(void 0!==e)return{begin:t,end:E.contents-1|0,stmt:{TAG:0,text:e}};throw{RE_EXN_ID:f,_1:{msg:"A comment is not closed at "+d(r,t)},Error:new Error}},S=function(t,e){if(void 0===t||t){for(var n=S(!1,void 0);"$("===n;)T(E.contents),n=S(!1,void 0);return n}!function(r){for(;!h.contents&&c(g.contents);)b()}();for(var o=E.contents;!h.contents&&!c(g.contents);)b();return r.substring(o,E.contents)},A=function(r){for(var t,e=[];n.isNone(t);){var i=S(void 0,void 0);""===i?t=o.some(void 0):"$("===i?T(E.contents):i===r?t=o.some(e):e.push(i)}return n.getExn(t)},k=function(t){var e=A("$.");if(void 0!==e)return{begin:t,end:E.contents-1|0,stmt:{TAG:1,symbols:e}};throw{RE_EXN_ID:f,_1:{msg:"A constant statement is not closed at "+d(r,t)},Error:new Error}},M=function(t){var e=A("$.");if(void 0!==e)return{begin:t,end:E.contents-1|0,stmt:{TAG:3,symbols:e}};throw{RE_EXN_ID:f,_1:{msg:"A variable statement is not closed at "+d(r,t)},Error:new Error}},w=function(t){var e=A("$.");if(void 0!==e)return{begin:t,end:E.contents-1|0,stmt:{TAG:4,vars:e}};throw{RE_EXN_ID:f,_1:{msg:"A disjoint statement is not closed at "+d(r,t)},Error:new Error}},j=function(t,e){var n=A("$.");if(void 0!==n)return{begin:t,end:E.contents-1|0,stmt:{TAG:5,label:e,expr:n}};throw{RE_EXN_ID:f,_1:{msg:"A floating statement is not closed at "+d(r,t)},Error:new Error}},I=function(t,e){var n=A("$.");if(void 0!==n)return{begin:t,end:E.contents-1|0,stmt:{TAG:6,label:e,expr:n}};throw{RE_EXN_ID:f,_1:{msg:"An essential statement is not closed at "+d(r,t)},Error:new Error}},G=function(t,e){var n=A("$.");if(void 0!==n)return{begin:t,end:E.contents-1|0,stmt:{TAG:7,label:e,expr:n}};throw{RE_EXN_ID:f,_1:{msg:"An axiom statement is not closed at "+d(r,t)},Error:new Error}},D=function(t,e){var n=A("$=");if(void 0!==n){var o=S(void 0,void 0);if("("===o){var i=A(")");if(void 0!==i){var u=A("$.");if(void 0!==u)return{begin:t,end:E.contents-1|0,stmt:{TAG:8,label:e,expr:n,proof:l?void 0:{TAG:1,labels:i,compressedProofBlock:a.spliceObjApply("","concat",[u])}}};throw{RE_EXN_ID:f,_1:{msg:"A probale statement is not closed[3] at "+d(r,t)},Error:new Error}}throw{RE_EXN_ID:f,_1:{msg:"A provable statement is not closed[2] at "+d(r,t)},Error:new Error}}var s=A("$.");if(void 0!==s)return{begin:t,end:E.contents-1|0,stmt:{TAG:8,label:e,expr:n,proof:l?void 0:{TAG:0,labels:[o].concat(s)}}};throw{RE_EXN_ID:f,_1:{msg:"A provable statement is not closed[4] at "+d(r,t)},Error:new Error}}throw{RE_EXN_ID:f,_1:{msg:"A provable statement is not closed[1] at "+d(r,t)},Error:new Error}},N=function(t,e){for(var o,i=[];n.isNone(o);){var a=S(!1,void 0),u=E.contents-a.length|0;if(""===a){if(0!==e)throw{RE_EXN_ID:f,_1:{msg:"Unexpected end of a block. The block begins at "+d(r,t)+" and is not closed."},Error:new Error};o={begin:t,end:E.contents-1|0,stmt:{TAG:2,level:e,statements:i}}}else if("$}"===a)o={begin:t,end:E.contents-1|0,stmt:{TAG:2,level:e,statements:i}};else if("${"===a){var c=N(u,e+1|0);i.push(c)}else if("$("===a){var l=T(u);v||i.push(l)}else if("$c"===a){var p=k(u);i.push(p)}else if("$v"===a){var h=M(u);i.push(h)}else if("$d"===a){var g=w(u);i.push(g)}else{var _=S(void 0,void 0),b=E.contents-_.length|0;if(""===_)throw{RE_EXN_ID:f,_1:{msg:"Unexpected end of file at "+d(r,u)},Error:new Error};if("$f"===_){var A=j(u,a);i.push(A)}else if("$e"===_){var U=I(u,a);i.push(U)}else if("$a"===_){y.push(a);var C=G(u,a);i.push(C)}else{if("$p"!==_)throw{RE_EXN_ID:f,_1:{msg:"Unexpected token '"+_+"' at "+d(r,b)},Error:new Error};y.push(a);var P=D(u,a);i.push(P)}}s.progressTrackerSetCurrPct(x,u/m)}return n.getExn(o)};return[N(E.contents,0),y]},t.textAt=d,t.traverseAst=v,t.stmtToStr=p,t.stmtToStrRec=function(r){return v([{contents:0},[]],r,(function(r,t){var e=r[0],n=t.stmt;if(2===n.TAG){var o=n.level;0!==o&&r[1].push("    ".repeat(e.contents)+"${"),e.contents=o}}),(function(r,t){var e;""!==(e=2===t.stmt.TAG?"":p(t))&&r[1].push("    ".repeat(r[0].contents)+e)}),(function(r,t){var e=r[0],n=t.stmt;if(2===n.TAG){var o=n.level;e.contents=o-1|0,0!==o&&r[1].push("    ".repeat(e.contents)+"$}")}}))[0][1]},t.astToStr=function(r){var t=[];return v(void 0,r,(function(r,e){var n=e.stmt;2===n.TAG&&n.level>0&&t.push("${")}),(function(r,e){var n=e.stmt;switch(0|n.TAG){case 0:t.push("$( "+n.text+" $)");break;case 1:var o="$c "+n.symbols.join(" ")+" $.";t.push(o);break;case 2:break;case 3:var i="$v "+n.symbols.join(" ")+" $.";t.push(i);break;case 4:var a="$d "+n.vars.join(" ")+" $.";t.push(a);break;case 5:var u=n.label+" $f "+n.expr.join(" ")+" $.";t.push(u);break;case 6:var s=n.label+" $e "+n.expr.join(" ")+" $.";t.push(s);break;case 7:var f=n.label+" $a "+n.expr.join(" ")+" $.";t.push(f);break;case 8:var c=n.label+" $p "+n.expr.join(" ")+" $= "+l(n.proof)+" $.";t.push(c)}}),(function(r,e){var n=e.stmt;2===n.TAG&&n.level>0&&t.push("$}")})),t.join("\n")}},4530:function(r,t,e){var n=e(1386),o=e(4763),i=e(8371),a=e(1748),u=e(3942),s=e(6517),f=e(7356),c=e(7659),d=e(1611),v=e(6310),l=e(2275);function p(r,t,e){var n=r.length;return e<=n?r:r+t.repeat(e-n|0)}function m(r){return r.map((function(r){return r.length})).reduce((function(r,t){return Math.max(r,t)}),0)}function E(r,t){var e=t.map((function(r){var t=r.proof;return 0===t.TAG?"":t.args.map((function(r){return r+1|0})).join(",")})),n=t.map((function(r){var t=r.proof;return t.TAG,t.label})),i=t.map((function(t){return u.ctxIntsToStrExn(r,t.expr)})),s=1+(o.floor_int(Math.log10(t.length))+1|0)|0,f=m(e)+1|0,c=m(n)+1|0;return t.map((function(r,t){return o=String(t+1|0)," ",((u=s)<=(d=o.length)?o:" ".repeat(u-d|0)+o)+"| "+p(a.get(e,t)," ",f)+"| "+p(a.get(n,t)," ",c)+"| "+a.get(i,t);var o,u,d}))}function h(r,t,e){var n=E(r,t);return p("--- "+e+" ","-",m(n))+"\n"+n.join("\n")+"\n"+p("","-",m(n))}function g(r,t,e,o){var i=c.make(64);d.traverseTree(void 0,t,(function(t,e){var n=a.get(r,e).proof;return 0===n.TAG||c.has(i,e)?void 0:n.args}),void 0,void 0,(function(t,u){0===a.get(r,u).proof.TAG?n._1(e,u):c.has(i,u)?n._1(o,u):(c.add(i,u),n._1(e,u))}),void 0)}t.createProof=function(r,t,e){if(t.length<=e)throw{RE_EXN_ID:i.MmException,_1:{msg:"tblLen <= rootIdx"},Error:new Error};var n=r.length,o=l.fromArray(r.map((function(r,t){return[r.label,t+1|0]}))),u=[],d=l.make(64),p=function(r,t){var e=c.make(64);return g(r,t,(function(r){}),(function(r){c.add(e,r)})),e}(t,e),m=f.make(64),E=[];g(t,e,(function(r){var e,i=a.get(t,r).proof;if(i.TAG,e=function(r){var t=l.get(o,r);if(void 0!==t)return t;var e=l.get(d,r);if(void 0!==e)return e;u.push(r);var i=n+u.length|0;return l.set(d,r,i),i}(i.label),E.push(e),c.has(p,r))return E.push(0),f.set(m,r,f.size(m)+1|0)}),(function(r){E.push(0|-s.getExn(f.get(m,r)))}));var h=n+u.length|0;return{TAG:1,labels:u,compressedProofBlock:E.map((function(r){return 0===r?"Z":r<0?v.intToCompressedProofStr(h-r|0):v.intToCompressedProofStr(r)})).join("")}},t.createProofTableFromProof=function(r){var t=f.make(v.proofNodeGetId(r)),e=[],n=function(r,n,o){if(s.isSome(f.get(t,r)))throw{RE_EXN_ID:i.MmException,_1:{msg:"getIdxByNodeId(nodeId)->Belt_Option.isSome in createProofTableFromProof()"},Error:new Error};var a=e.push({expr:n,proof:o})-1|0;f.set(t,r,a)};return d.traverseTree(void 0,r,(function(r,t){return 0===t.TAG?void 0:t.args}),void 0,void 0,(function(r,e){if(0===e.TAG){var o=e.id;s.isNone(f.get(t,o))&&n(o,e.expr,{TAG:0,label:e.hypLabel})}else{var a=e.id;s.isNone(f.get(t,a))&&n(a,e.expr,{TAG:1,args:e.args.map((function(r){var e=v.proofNodeGetId(r),n=f.get(t,e);if(void 0!==n)return n;throw{RE_EXN_ID:i.MmException,_1:{msg:"Could not determine idx by nodeId in createProofTableFromProof()."},Error:new Error}})),label:e.asrtLabel})}}),void 0),e},t.proofTableToArrStr=E,t.proofTableToStr=h,t.proofTablePrint=function(r,t,e){console.log(h(r,t,e))}},335:function(r,t,e){var n=e(1386),o=e(8371),i=e(1748),a=e(3942),u=e(6517),s=e(7175),f=e(2815),c=e(9775),d=e(5082),v=e(5650),l=e(2275);function p(r){if("number"==typeof r)return!0;switch(0|r.TAG){case 0:return!0;case 1:return r.args.every((function(r){return u.isSome(r.proof)}));case 2:return!1}}function m(r){var t=r.dbg;return void 0!==t?t.exprStr:r.expr.map((function(r){return String(r)})).join(" ")}function E(r){var t=r.fParents,e=void 0!==t?s.undefined_to_opt(t.find(p)):void 0;return u.isSome(e)?e:s.undefined_to_opt(r.eParents.find(p))}t.ptMake=function(r,t,e,n,o,i){var s=d.toArray(t);return{frms:r,hypsByExpr:f.fromArray(s.map((function(r){var t=r[1];return[t.expr,t]})),a.ExprHash),hypsByLabel:l.fromArray(s),ctxMaxVar:e,maxVar:e,newVars:c.make(16,a.ExprHash),disj:n,parenCnt:o,nodes:f.make(16,a.ExprHash),rootStmts:[],syntaxProofs:f.make(16,a.ExprHash),dbg:u.map(i,(function(r){return{newVars:[],disj:[],exprToStr:r}}))}},t.ptGetFrms=function(r){return r.frms},t.ptGetHypByExpr=function(r,t){return f.get(r.hypsByExpr,t)},t.ptGetHypByLabel=function(r,t){return l.get(r.hypsByLabel,t)},t.ptGetMaxVar=function(r){return r.maxVar},t.ptGetCtxMaxVar=function(r){return r.ctxMaxVar},t.ptGetParenCnt=function(r){return r.parenCnt},t.ptIsDisj=function(r,t,e){return a.disjContains(r.disj,t,e)},t.ptIsNewVarDef=function(r,t){return c.has(r.newVars,t)},t.ptGetRootStmts=function(r){return r.rootStmts},t.ptGetNode=function(r,t){var e=f.get(r.nodes,t);if(void 0!==e)return e;var o={expr:t,fParents:void 0,eParents:[],children:[],proof:void 0,isInvalidFloating:!1,dist:void 0,dbg:u.map(r.dbg,(function(r){return{exprStr:n._1(r.exprToStr,t)}}))};return f.set(r.nodes,t,o),o},t.ptAddNewVar=function(r,t){r.maxVar=r.maxVar+1|0;var e=r.maxVar;c.add(r.newVars,[t,e]);var o=r.dbg;return void 0!==o&&o.newVars.push(n._1(o.exprToStr,[t,e])),e},t.ptAddDisjPair=function(r,t,e){a.disjAddPair(r.disj,t,e);var o=r.dbg;void 0===o||o.disj.push(n._1(o.exprToStr,[t,e]))},t.ptAddRootStmt=function(r,t){return void 0!==r.rootStmts.find((function(r){return a.exprEq(r.expr,t.expr)}))?void 0:void r.rootStmts.push(t)},t.ptAddSyntaxProof=function(r,t,e){f.set(r.syntaxProofs,t,e)},t.ptGetSyntaxProof=function(r,t){return f.get(r.syntaxProofs,t)},t.ptGetAllSyntaxProofs=function(r){return f.toArray(r.syntaxProofs)},t.ptClearDists=function(r){f.forEach(r.nodes,(function(r,t){t.dist=void 0}))},t.ptGetDbg=function(r){return r.dbg},t.ptGetCopyOfNewVars=function(r){return c.toArray(r.newVars)},t.ptGetDisj=function(r){return r.disj},t.pnGetExpr=function(r){return r.expr},t.pnGetProof=function(r){return r.proof},t.pnGetFParents=function(r){return r.fParents},t.pnGetEParents=function(r){return r.eParents},t.pnAddParent=function(r,t,e,n){if(u.isNone(r.proof)||n){var s,f=!1;if(e)s=r.eParents;else{var c=r.fParents;if(void 0!==c)s=c;else{var d=[t];r.fParents=d,f=!0,s=d}}if(!f){var l=s.find((function(r){if("number"==typeof r)return"number"==typeof t;switch(0|r.TAG){case 0:return"number"!=typeof t&&0===t.TAG&&r.label===t.label;case 1:var e=r.args;if("number"==typeof t)return!1;if(1!==t.TAG)return!1;var n=t.args;return r.frame.label===t.frame.label&&e.length===n.length&&e.every((function(r,t){return a.exprEq(r.expr,i.get(n,t).expr)}));case 2:return!1}}));if(void 0!==l){if(p(l))throw{RE_EXN_ID:o.MmException,_1:{msg:"Unexpected: an unproved node '"+m(r)+"' has a proved parent."},Error:new Error}}else s.push(t),f=!0}if(f)return"number"!=typeof t&&1===t.TAG&&t.args.forEach((function(t){if(!a.exprEq(t.expr,r.expr))return void 0!==t.children.find((function(t){return a.exprEq(t.expr,r.expr)}))?void 0:void t.children.push(r)})),p(t)?(function(r){if(u.isNone(r.proof)){var t=E(r);if(void 0!==t){r.proof=t;for(var e=v.fromArray(r.children);!v.isEmpty(e);){var n=u.getExn(v.pop(e));if(u.isNone(n.proof)){var o=E(n);void 0!==o&&(n.proof=o,n.children.forEach((function(r){return v.add(e,r)})))}}}}}(r),n?void(r.proof=t):void 0):void 0}},t.pnIsInvalidFloating=function(r){return r.isInvalidFloating},t.pnSetInvalidFloating=function(r){r.isInvalidFloating=!0},t.pnGetDist=function(r){return r.dist},t.pnSetDist=function(r,t){r.dist=t},t.pnGetDbg=function(r){return r.dbg},t.jstfEqSrc=function(r,t,e){if("number"==typeof e)return!1;if(1!==e.TAG)return!1;var n=e.frame;if(t!==n.label)return!1;var o=e.args,u=r.length,s=n.hyps.length;if(u>s)return!1;for(var f=0,c=0,d=!0;d&&f<u&&c<s;)0===i.get(n.hyps,c).typ||(d=a.exprEq(i.get(r,f),i.get(o,c).expr),f=f+1|0),c=c+1|0;for(;d&&c<s;)0===i.get(n.hyps,c).typ?c=c+1|0:d=!1;return!(!d||f!==u)&&c===s}},3021:function(r,t,e){var n=e(8371),o=e(1748),i=e(3942),a=e(6517),u=e(2815),s=e(9775),f=e(335),c=e(1611),d=e(6601);function v(r,t){var e=function(r){var e=u.get(t,f.pnGetExpr(r));if(void 0!==e)return e;throw{RE_EXN_ID:n.MmException,_1:{msg:"exprSrcToDto: cannot get idx by expr."},Error:new Error}};if("number"==typeof r)return 0;switch(0|r.TAG){case 0:return{TAG:0,label:r.label};case 1:return{TAG:1,args:r.args.map(e),label:r.frame.label};case 2:return{TAG:2,args:r.args.map(e),label:r.frame.label,err:r.err}}}function l(r,t,e){return f.ptGetAllSyntaxProofs(r).map((function(r){var i,a=u.get(t,f.pnGetExpr(r[1]));if(void 0===a)throw{RE_EXN_ID:n.MmException,_1:{msg:"Could not convert proofNode to proofNodeDto for a syntax proof."},Error:new Error};return i=o.get(e,a),[r[0],i]}))}t.proofTreeToDto=function(r,t){var e=function(r,t){var e=d.make(void 0);f.ptGetAllSyntaxProofs(r).forEach((function(r){d.push(e,r[1])})),t.forEach((function(t){d.push(e,f.ptGetNode(r,t))}));for(var n=s.make(100,i.ExprHash),o=u.make(100,i.ExprHash),c=function(r){"number"!=typeof r&&0!=(0|r.TAG)&&r.args.forEach((function(r){d.push(e,r)}))};!d.isEmpty(e);){var v=a.getExn(d.pop(e)),l=f.pnGetExpr(v);s.has(n,l)||(s.add(n,l),u.set(o,l,u.size(o)),f.pnGetEParents(v).forEach(c),a.forEach(f.pnGetProof(v),c))}return o}(r,t),n=new Array(u.size(e));return u.forEach(e,(function(t,i){o.set(n,i,function(r,t){return{expr:f.pnGetExpr(r),parents:f.pnGetEParents(r).map((function(r){return v(r,t)})),proof:a.map(f.pnGetProof(r),(function(r){return v(r,t)})),dbg:a.map(f.pnGetDbg(r),(function(r){return{exprStr:r.exprStr}}))}}(f.ptGetNode(r,t),e))})),{newVars:f.ptGetCopyOfNewVars(r),disj:f.ptGetDisj(r),nodes:n,syntaxProofs:l(r,e,n),dbg:a.map(f.ptGetDbg(r),(function(r){return{newVars:r.newVars,disj:r.disj}}))}},t.createProofTable=function(r,t,e,s,f){var d=void 0!==e&&e;if(d&&a.isNone(s))throw{RE_EXN_ID:n.MmException,_1:{msg:"Error in createProofTable: ctx must be set when essentialsOnly == true."},Error:new Error};var v=function(r,t){if(!(d&&r.length>0))return r;var e=[];return i.getFrameExn(a.getExn(s),t).hyps.forEach((function(t,n){1!==t.typ||e.push(o.get(r,n))})),e},l=u.make(64,i.ExprHash),p=[],m=function(r,t){if(a.isSome(u.get(l,r)))throw{RE_EXN_ID:n.MmException,_1:{msg:"getIdxByExpr(expr)->Belt_Option.isSome in createProofTable()."},Error:new Error};var e=p.push({expr:r,proof:t})-1|0;u.set(l,r,e)};return c.traverseTree(void 0,t,(function(t,e){var i=e.proof;if(void 0===i)throw{RE_EXN_ID:n.MmException,_1:{msg:"Cannot create proofTable from an unproved proofNodeDto [1]."},Error:new Error};if("number"==typeof i)throw{RE_EXN_ID:n.MmException,_1:{msg:"VarType is not supported in createProofTable [1]."},Error:new Error};switch(0|i.TAG){case 0:return;case 1:return v(i.args,i.label).map((function(t){return o.get(r.nodes,t)}));case 2:throw{RE_EXN_ID:n.MmException,_1:{msg:"AssertionWithErr is not supported in createProofTable [1]."},Error:new Error}}}),void 0,void 0,(function(t,e){var i=e.proof;if(void 0===i)throw{RE_EXN_ID:n.MmException,_1:{msg:"Cannot create proofTable from an unproved proofNodeDto [2]."},Error:new Error};if("number"==typeof i)throw{RE_EXN_ID:n.MmException,_1:{msg:"VarType is not supported in createProofTable [2]."},Error:new Error};switch(0|i.TAG){case 0:a.isNone(u.get(l,e.expr))&&m(e.expr,{TAG:0,label:i.label});break;case 1:var s=i.label;a.isNone(u.get(l,e.expr))&&m(e.expr,{TAG:1,args:v(i.args,s).map((function(t){var e=o.get(r.nodes,t).expr,i=u.get(l,e);if(void 0!==i)return i;throw{RE_EXN_ID:n.MmException,_1:{msg:"Could not determine idx by expr in createProofTable()."},Error:new Error}})),label:s});break;case 2:throw{RE_EXN_ID:n.MmException,_1:{msg:"AssertionWithErr is not supported in createProofTable [2]."},Error:new Error}}}),void 0),p}},6310:function(r,t,e){var n=e(1386),o=e(4923),i=e(8371),a=e(2971),u=e(1748),s=e(3942),f=e(1094),c=e(6517),d=e(303),v=e(3216),l=e(9898);function p(r){return r.TAG,r.expr}function m(r,t){return p(u.get(r.nodes,t))}function E(r,t,e,n,i){var a=t,s=n,f=r.length,c=e.length;if(f<(t+i|0)||c<(n+i|0))return!1;for(var d=(t+i|0)-1|0;a<=d&&o.equal(u.get(r,a),u.get(e,s));)s=s+1|0,a=a+1|0;return a>d}var h=c.getExn("Z".codePointAt(0)),g=c.getExn("A".codePointAt(0)),x=g-1|0,y=c.getExn("T".codePointAt(0)),_=c.getExn("U".codePointAt(0)),b=_-1|0;function T(r){for(var t=r.length,e=[],n=0,o=0;o<t;){var i=c.getExn(r.codePointAt(o));i===h?(e.push("Z"),n=o=o+1|0):g<=i&&i<=y?(e.push(r.substring(n,o+1|0)),n=o=o+1|0):o=o+1|0}return e}function S(r){return r<=y?r-x|0:r-b|0}function A(r){for(var t=0,e=1,n=r.length,o=n-2|0;o>=0;--o)t=t+Math.imul(e,S(c.getExn(r.codePointAt(o))))|0,e=Math.imul(e,5);return Math.imul(t,20)+S(c.getExn(r.codePointAt(n-1|0)))|0}function k(r,t,e,o){var p=r.nodes.length;if(p<t.numOfArgs)throw{RE_EXN_ID:i.MmException,_1:{msg:"stackLength < numOfArgs"},Error:new Error};var h=function(r,t){var e=new Array(t.numOfVars),n=a.make(t.numOfVars,!1),o=r.nodes.length-t.numOfArgs|0;if(t.hyps.forEach((function(t,a){if(0===t.typ){var s=u.get(t.expr,0),f=u.get(t.expr,1);if(u.get(n,f))throw{RE_EXN_ID:i.MmException,_1:{msg:"subsLock[v]"},Error:new Error};var c=m(r,o+a|0);if(c.length<2)throw{RE_EXN_ID:i.MmException,_1:{msg:"subsExpr->Js_array2.length < 2"},Error:new Error};if(u.get(c,0)!==s)throw{RE_EXN_ID:i.MmException,_1:{msg:"subsExpr[0] != t"},Error:new Error};u.set(n,f,!0),u.set(e,f,c)}})),n.some((function(r){return!r})))throw{RE_EXN_ID:i.MmException,_1:{msg:"subsLock->Js_array2.some(lock => !lock)"},Error:new Error};return e}(r,t),g=function(r,t,e){var o={contents:void 0};return f.forEach(t,(function(t,i){if(c.isNone(o.contents))return d.forEach(i,(function(i){if(c.isNone(o.contents))for(var a=u.get(r,t),s=a.length-1|0,f=u.get(r,i),d=f.length-1|0,v=1;v<=s;++v)if(c.isNone(o.contents)){var l=u.get(a,v);if(l>=0)for(var p=1;p<=d;++p)if(c.isNone(o.contents)){var m=u.get(f,p);m>=0&&(l===m?o.contents={TAG:0,frmVar1:t,expr1:a.slice(1,s+1|0),frmVar2:i,expr2:f.slice(1,d+1|0),commonVar:l}:n._2(e,l,m)||(o.contents={TAG:1,frmVar1:t,expr1:a.slice(1,s+1|0),var1:l,frmVar2:i,expr2:f.slice(1,d+1|0),var2:m}))}}}))})),o.contents}(h,t.disj,o);if(void 0!==g){var x=l.unifErrToStr(g,(function(r){return s.ctxIntsToStrExn(e,r)}),(function(r){return s.frmIntsToStrExn(e,t,r)}));throw{RE_EXN_ID:i.MmException,_1:{msg:"Disjoint verification failed: "+x},Error:new Error}}!function(r,t,e){var n=r.nodes.length-t.numOfArgs|0;t.hyps.forEach((function(t,o){if(1===t.typ&&!function(r,t,e){for(var n=0,o=0,i=!0,a=r.length,s=e.length;i&&n<a&&o<s;){var f=u.get(r,n);if(f<0)i=f===u.get(e,o),o=o+1|0;else{var c=u.get(t,f),d=c.length-1|0;i=E(c,1,e,o,d),o=o+d|0}n=n+1|0}return!(!i||n!==a)&&o===s}(t.expr,e,m(r,n+o|0)))throw{RE_EXN_ID:i.MmException,_1:{msg:"!compareExprAfterSubstitution(ess, subs, stack->stGetExpr(baseIdx+i))"},Error:new Error}}))}(r,t,h);var y=function(r,t){var e={contents:0};r.forEach((function(r){e.contents=r<0?e.contents+1|0:(e.contents+u.get(t,r).length|0)-1|0}));for(var n=new Array(e.contents),o=0,i=0;i<e.contents;){var a=u.get(r,o);if(a<0)u.set(n,i,a),i=i+1|0;else{var s=u.get(t,a),f=s.length-1|0;v.copySubArray(s,1,n,i,f),i=i+f|0}o=o+1|0}return n}(t.asrt,h),_={TAG:1,id:r.nextId,args:r.nodes.slice(p-t.numOfArgs|0),asrtLabel:t.label,expr:y,dbg:s.isDebug(e)?{exprStr:s.ctxIntsToStrExn(e,y)}:void 0};r.nextId=r.nextId+1|0;for(var b=1,T=t.numOfArgs;b<=T;++b)r.nodes.pop();r.nodes.push(_)}t.proofNodeGetId=function(r){return r.id},t.proofNodeGetExpr=p,t.verifyProof=function(r,t,e,n){var o={nextId:0,nodes:[]};if(0===e.TAG?function(r,t,e,n){e.forEach((function(e){var o=s.getHypothesis(r,e);if(void 0!==o)return t.nodes.push({TAG:0,id:t.nextId,hypLabel:o.label,expr:o.expr,dbg:s.isDebug(r)?{exprStr:s.ctxIntsToStrExn(r,o.expr)}:void 0}),void(t.nextId=t.nextId+1|0);var a=s.getFrame(r,e);if(void 0!==a)return k(t,a,r,n);throw{RE_EXN_ID:i.MmException,_1:{msg:"The proof step '"+e+"' doesn't refer to a hypothesis or assertion (in uncompressed proof)."},Error:new Error}}))}(r,o,e.labels,n):function(r,t,e,n,o,f){var c=function(r){n.nodes.push({TAG:0,id:n.nextId,hypLabel:r.label,expr:r.expr,dbg:s.isDebug(e)?{exprStr:s.ctxIntsToStrExn(e,r.expr)}:void 0}),n.nextId=n.nextId+1|0},d=T(t),v=s.getMandHyps(e,r),l=v.length,p=l+f.length|0,m=[];a.forEach(d,(function(r){if("Z"!==r){var t=A(r);if(t<1)throw{RE_EXN_ID:i.MmException,_1:{msg:"Unexpected condition when applying compressed proof: i < 1."},Error:new Error};if(t<=l)return c(u.get(v,t-1|0));if(t<=p){var d=u.get(f,(t-l|0)-1|0),E=s.getHypothesis(e,d);if(void 0!==E)return c(E);var h=s.getFrame(e,d);if(void 0!==h)return k(n,h,e,o);throw{RE_EXN_ID:i.MmException,_1:{msg:"The proof step '"+d+"' doesn't refer to a hypothesis or assertion (in compressed proof)."},Error:new Error}}var g=a.get(m,(t-p|0)-1|0);if(void 0===g)throw{RE_EXN_ID:i.MmException,_1:{msg:"Compressed proof refers to a saved step by the index which is out of bounds."},Error:new Error};n.nodes.push(g)}else{var x=n.nodes.length;if(0===x)throw{RE_EXN_ID:i.MmException,_1:{msg:"Cannot execute 'Z' command because the stack is empty."},Error:new Error};m.push(u.get(n.nodes,x-1|0))}}))}(t,e.compressedProofBlock,r,o,n,e.labels),1!==o.nodes.length)throw{RE_EXN_ID:i.MmException,_1:{msg:"stack->Js_array2.length is "+String(o.nodes.length)+" but must be 1."},Error:new Error};if(!s.exprEq(m(o,0),t))throw{RE_EXN_ID:i.MmException,_1:{msg:"stack[0] != expr\nstack[0] is '"+s.ctxIntsToStrExn(r,m(o,0))+"'\nexpr is     '"+s.ctxIntsToStrExn(r,t)+"'"},Error:new Error};return u.get(o.nodes,0)},t.compressedProofBlockToArray=T,t.compressedProofStrToInt=A,t.intToCompressedProofStr=function(r){if(r<1)throw{RE_EXN_ID:i.MmException,_1:{msg:"intToCompressedProofStr: i < 1"},Error:new Error};for(var t=[String.fromCharCode(g+(r-1|0)%20|0)],e=(r-1|0)/20|0;e>0;)t.push(String.fromCharCode(_+(e-1|0)%5|0)),e=(e-1|0)/5|0;return t.reverse().join("")}},2694:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(1748),u=e(3942),s=e(6517),f=e(7175),c=e(9775),d=e(8753),v=e(335),l=e(5082),p=e(519),m=e(5650),E=e(5981),h=e(3216),g=e(4125);function x(r,t){if(v.ptIsNewVarDef(r,t))return 0;var e=v.ptGetHypByExpr(r,t);return void 0!==e?{TAG:0,label:e.label}:void 0}function y(r,t,e){var n=t.length,o=[];return l.forEach(v.ptGetFrms(r),(function(u,f){var c=f.frame.asrt;a.get(c,0)!==a.get(t,0)||p.iterateSubstitutions(c,t,a.get(f.frmConstParts,f.numOfHypsE),a.get(f.constParts,f.numOfHypsE),a.get(f.varGroups,f.numOfHypsE),f.subs,v.ptGetParenCnt(r),(function(t){if(t.isDefined.every((function(r){return r}))&&s.isNone(p.verifyDisjoints(f.frame.disj,t,(function(t,e){return v.ptIsDisj(r,t,e)}),0))){for(var u=f.frame.hyps,c=u.length,d=new Array(c),l=!0,m=0,E=c-1|0;m<=E&&l;){var h,g=p.applySubs(a.get(u,m).expr,t,(function(r){throw{RE_EXN_ID:i.MmException,_1:{msg:"Work variables are not supported in findAsrtParentsWithoutNewVars()."},Error:new Error}}));switch(e){case 0:h=!0;break;case 1:h=g.length<=n;break;case 2:h=g.length<n}(l=h)&&a.set(d,m,v.ptGetNode(r,g)),m=m+1|0}l&&o.push({TAG:1,args:d,frame:f.frame})}return 0}))})),o}function _(r,t){if(s.isNone(v.pnGetProof(t))&&!v.pnIsInvalidFloating(t)){var e=m.make(void 0),n=c.make(16,u.ExprHash),o=function(r){return void 0!==v.pnGetProof(r)||c.has(n,v.pnGetExpr(r))?void 0:(c.add(n,v.pnGetExpr(r)),m.add(e,r))},i=function(r){"number"!=typeof r&&1===r.TAG&&r.args.forEach(o)};for(o(t);s.isNone(v.pnGetProof(t))&&!m.isEmpty(e);){var a=s.getExn(m.pop(e));if(s.isNone(v.pnGetProof(a))){var f=v.pnGetFParents(a);if(void 0!==f)f.forEach(i);else{var d=v.pnGetExpr(a),l=x(r,d);void 0!==l?v.pnAddParent(a,l,!1,!1):y(r,d,1).forEach(function(r){return function(t){v.pnAddParent(r,t,!1,!1),i(t)}}(a))}}}return s.isNone(v.pnGetProof(t))?v.pnSetInvalidFloating(t):void 0}}function b(r,t,e,o,f,c,m,h,g,x,y,b){var T=void 0!==g?g:0,S=[],A=s.isSome(x),k=s.getWithDefault(x,0),M=void 0!==f?function(r){return r.label===f}:function(r){return!0},w=v.ptGetMaxVar(r);d.applyAssertions(w,v.ptGetFrms(r),(function(t,e){return v.ptIsDisj(r,t,e)}),e,o,c,m,t,v.ptGetParenCnt(r),M,h,(function(r){S.push(r);var t=S.length;return void 0!==y&&t%100==0&&n._1(y,t),A&&t>=k?1:0}),T,void 0,void 0);var j=[];return S.forEach((function(t){var e,n=l.get(v.ptGetFrms(r),t.asrtLabel);if(void 0===n)throw{RE_EXN_ID:i.MmException,_1:{msg:"Cannot find an assertion with label "+t.asrtLabel+" in findAsrtParentsWithNewVars."},Error:new Error};e=n.frame;var o=t.err,f=0;if(void 0!==o&&"number"!=typeof o)switch(0|o.TAG){case 3:case 4:case 5:f=1;break;default:f=2}else f=2;switch(f){case 1:return 0!==T?void j.push({TAG:2,args:[],frame:e,err:s.getExn(t.err)}):void 0;case 2:var c=E.make(void 0);t.newVars.forEach((function(e,n){var o=a.get(t.newVarTypes,n),i=v.ptAddNewVar(r,o);E.set(c,e,i)})),u.disjForEach(t.newDisj,(function(t,e){v.ptAddDisjPair(r,E.getWithDefault(c,t,t),E.getWithDefault(c,e,e))}));for(var d,m=e.hyps.length,h=new Array(m),g=0,x=m-1|0;g<=x&&(s.isNone(d)||0!==T);){for(var y=p.applySubs(a.get(e.hyps,g).expr,t.subs,(function(r){throw{RE_EXN_ID:i.MmException,_1:{msg:"New work variables are not expected here [findAsrtParentsWithNewVars]."},Error:new Error}})),b=y.length-1|0,S=0;S<=b;++S){var A=a.get(y,S);if(A>w){var k,M=E.get(c,A);if(void 0===M)throw{RE_EXN_ID:i.MmException,_1:{msg:"Could not replace an applVar with a treeVar."},Error:new Error};k=M,a.set(y,S,k)}}var I=v.ptGetNode(r,y);a.set(h,g,I),0===a.get(e.hyps,g).typ&&s.isNone(t.err)&&s.isNone(d)&&(_(r,I),s.isNone(v.pnGetProof(I))&&(d=v.pnGetExpr(I))),g=g+1|0}var G=void 0!==t.err?t.err:s.map(d,(function(r){return{TAG:2,expr:r}}));return void 0!==G?0!==T?void j.push({TAG:2,args:h,frame:e,err:G}):void 0:void j.push({TAG:1,args:h,frame:e})}})),j}function T(r,t){return"number"!=typeof t&&1===t.TAG&&t.args.some((function(t){return u.exprEq(r,v.pnGetExpr(t))}))}function S(r,t,e,o,u,c){void 0!==o?function(r,t,e,o,u){(function(r,t,e,o,a){var u=m.make(void 0),f=String(o),c=g.progressTrackerMake(.01,void 0,(function(r){}),void 0,void 0);v.ptClearDists(r);var d=v.ptGetNode(r,t);v.pnSetDist(d,0),m.add(u,d);for(var l=0,p=1,E=0,h=s.map(a,(function(r,t){n._1(r,"Proving bottom-up: 0/"+f+" "+String(t))}));s.isNone(v.pnGetProof(d))&&!m.isEmpty(u);){var y=s.getExn(m.pop(u));if(s.isNone(v.pnGetProof(y))){var _,b=v.pnGetDist(y);if(void 0===b)throw{RE_EXN_ID:i.MmException,_1:{msg:"Encountered a node without dist."},Error:new Error};if(_=b,void 0!==a){if(l!==_){h=void 0,l=_;var S=String(_);c=g.progressTrackerMake(.01,void 0,function(r){return function(t){var e=String(0|Math.round(100*t));n._1(a,"Proving bottom-up: "+r+"/"+f+" "+e+"%")}}(S),void 0,void 0),p=m.size(u)+1|0,E=0}g.progressTrackerSetCurrPct(c,E/p),E=E+1|0}var A=v.pnGetExpr(y),k=x(r,A);if(void 0!==k)v.pnAddParent(y,k,!0,!1);else{var M=_+1|0;M<=o&&n._3(e,A,_,h).forEach(function(r,t,e){return function(n){T(t,n)||(v.pnAddParent(r,n,!0,!1),"number"!=typeof n&&1===n.TAG&&n.args.forEach((function(r){if(s.isNone(v.pnGetProof(r))&&s.isNone(v.pnGetDist(r)))return v.pnSetDist(r,e),m.add(u,r)})))}}(y,A,M))}}}})(r,t,(function(t,n,i){var u=b(r,t,0===n?e.args0:e.args1,!1,0===n?e.asrtLabel:void 0,e.allowNewStmts,0===n&&e.allowNewVars,e.allowNewDisjForExistingVars,o,e.maxNumberOfBranches,i);if(0===n)return u;var s=t.length;return u.filter((function(r){if("number"==typeof r)return!0;if(1!==r.TAG)return!0;for(var t=r.frame,n=r.args,o=!0,i=t.hyps.length-1|0,u=0;u<=i&&o;){var f=a.get(n,u);if(1===a.get(t.hyps,u).typ){var c;switch(e.lengthRestrict){case 0:c=!0;break;case 1:c=v.pnGetExpr(f).length<=s;break;case 2:c=v.pnGetExpr(f).length<s}o=c}u=u+1|0}return o}))}),e.maxSearchDepth,u),v.ptGetNode(r,t)}(r,t,o,u,c):void 0!==e?function(r,t,e){var n=function(n,o){return b(r,t,n,!0,e.label,!1,!1,!1,o,void 0,void 0)},o=v.ptGetNode(r,t),i=function(r,t){var e=t.args.map((function(t){var e=v.ptGetRootStmts(r).find((function(r){return r.label===t}));if(void 0!==e)return e.expr;var n=v.ptGetHypByLabel(r,t);return void 0!==n?n.expr:void 0})).filter(s.isSome).map(s.getExn);if(e.length===t.args.length)return e}(r,e);void 0!==i&&s.getWithDefault(s.map(v.pnGetProof(o),(function(r){return!v.jstfEqSrc(i,e.label,r)})),!0)&&(h.arrForEach(n(i,0),(function(r){var t=v.jstfEqSrc(i,e.label,r);if(v.pnAddParent(o,r,!0,t),t)return f.some(void 0)})),s.isNone(v.pnGetProof(o))&&h.arrForEach(n(i,2),(function(r){var t=v.jstfEqSrc(i,e.label,r);if(v.pnAddParent(o,r,!0,t),t)return f.some(void 0)})))}(r,t,e):function(r,t){var e=v.ptGetNode(r,t);if(s.isNone(v.pnGetProof(e))){var n=b(r,t,v.ptGetRootStmts(r).map((function(r){return r.expr})),!1,void 0,!1,!1,!1,void 0,void 0,void 0);h.arrForEach(n,(function(r){return v.pnAddParent(e,r,!0,!1),v.pnGetProof(e)}))}}(r,t)}function A(r,t,e){var n=u.getNumOfVars(r)-1|0,o=u.getAllHyps(r),i=v.ptMake(t,o,n,u.getAllDisj(r),e,function(r,t){if(u.isDebug(r)){var e=function(e){return e<=t?u.ctxIntToSymExn(r,e):"&"+String(e)};return function(r){return r.map(e).join(" ")}}}(r,n));return l.forEach(o,(function(r,t){if(1===t.typ){var e=v.ptGetNode(i,t.expr);v.pnAddParent(e,{TAG:0,label:r},!0,!1),v.ptAddRootStmt(i,{isHyp:!0,label:r,expr:t.expr,jstf:void 0})}})),i}function k(r,t,e,n,o,u,c,d){if(s.isNone(r)&&(s.isNone(t)||s.isNone(e)||s.isNone(n)))throw{RE_EXN_ID:i.MmException,_1:{msg:"Either proofTree or (wrkCtx and frms and parenCnt) should be passed."},Error:new Error};var l=g.progressTrackerMake(.01,void 0,c,void 0,void 0),p=void 0!==r?f.valFromOption(r):A(s.getExn(t),s.getExn(e),s.getExn(n));if(0===u.length)return p;for(var m=a.get(u,0),E=0,h=o.length;E<h;++E){var x=a.get(o,E),y=v.ptGetNode(p,[m].concat(x));_(p,y);for(var b=0;s.isNone(v.pnGetProof(y))&&b<u.length;){var T=a.get(u,b);b=b+1|0,T!==m&&_(p,y=v.ptGetNode(p,[T].concat(x)))}void 0!==v.pnGetProof(y)&&(v.ptAddSyntaxProof(p,x,y),m=a.get(v.pnGetExpr(y),0)),g.progressTrackerSetCurrPct(l,(E+1|0)/o.length)}return p}function M(r,t){var e=u.createContext(f.some(r),void 0,void 0);return t.forEach((function(t){if(t.isHyp)return u.applySingleStmt(e,{TAG:6,label:t.label,expr:u.ctxIntsToSymsExn(r,t.expr)})})),e}t.bottomUpProverParamsMake=function(r,t,e,n,o,i,a,u,s,f){return{asrtLabel:r,maxSearchDepth:void 0!==t?t:4,lengthRestrict:void 0!==e?e:2,allowNewDisjForExistingVars:void 0===n||n,allowNewStmts:void 0===o||o,allowNewVars:void 0===i||i,args0:void 0!==a?a:[],args1:void 0!==u?u:[],maxNumberOfBranches:s}},t.createProofCtx=M,t.proveFloatings=function(r,t,e,n){var o=A(r,t,n);return e.forEach((function(r){_(o,v.ptGetNode(o,r))})),o},t.proveSyntaxTypes=k,t.unifyAll=function(r,t,e,i,a,u,c,d,l,p){var m=void 0!==d?d:0,E=g.progressTrackerMake(.01,void 0,s.map(l,(function(r,t){n._1(r,"Unifying all: "+o.floatToPctStr(t))})),void 0,void 0),h=A(M(r,e),t,i);void 0!==u&&u.length>0&&void 0!==c&&k(f.some(h),void 0,void 0,void 0,c,u,s.map(l,(function(r,t){n._1(r,"Checking syntax: "+o.floatToPctStr(t))})));var x=e.filter((function(r){return!r.isHyp})),y=x.length,_=y-1|0;return x.forEach((function(r,t){S(h,r.expr,r.jstf,t===_?a:void 0,m,t!==_||s.isNone(a)?void 0:l),v.ptAddRootStmt(h,r),g.progressTrackerSetCurrPct(E,(t+1|0)/y)})),h}},8099:function(r,t,e){var n=e(4923);t.jstfEq=function(r,t){return r.label===t.label&&n.equal(r.args,t.args)},t.jstfToStr=function(r){return(r.args.join(" ")+" : "+r.label).trim()}},519:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(3942),u=e(1094),s=e(6517),f=e(303),c=e(7175),d=e(5082),v=e(1854),l=e(8615),p=e(3216);function m(r,t,e){return r<0?i.get(i.get(t,0),0):r<(t.length-1|0)?(i.get(i.get(t,r+1|0),0)-i.get(i.get(t,r),1)|0)-1|0:(e-i.get(i.get(t,r),1)|0)-1|0}function E(r,t,e){return r<0?i.get(t.begins,0):r<(t.length-1|0)?(i.get(t.begins,r+1|0)-i.get(t.ends,r)|0)-1|0:(e-i.get(t.ends,r)|0)-1|0}function h(r){for(var t=[],e=0,n=r.length;e<n;++e){var o=t.length;i.get(r,e)<0?(0===o||i.get(i.get(t,o-1|0),1)>=0)&&t.push([e,-1]):o>0&&i.get(i.get(t,o-1|0),1)<0&&i.set(i.get(t,o-1|0),1,e-1|0)}var a=t.length,u=r.length;a>0&&i.get(i.get(t,a-1|0),1)<0&&i.set(i.get(t,a-1|0),1,u-1|0);for(var s=new Array(a),f=new Array(a),c=new Array(a),d={length:a,begins:s,ends:f,remainingMinLength:c},v=0,l=a-1|0;l>=0;--l)i.set(s,l,i.get(i.get(t,l),0)),i.set(f,l,i.get(i.get(t,l),1)),v=(v+(1+(i.get(f,l)-i.get(s,l)|0)|0)|0)+m(l,t,u)|0,i.set(c,l,v);return d}function g(r){return{length:r.length,begins:new Array(r.length),ends:new Array(r.length),remainingMinLength:[]}}function x(r,t,e,o,a,u,f){var c=function(n){return x(r,t,e,o,a+1|0,u,f)},d=t.length,l=r.length;if(d<l)return 0;if(a===e.length){if(!(e.length>0&&i.get(o.ends,a-1|0)!==(d-1|0)))return n._1(f,o);if(i.get(e.ends,a-1|0)===(l-1|0))return 0;var p=E(a-1|0,e,l);if(E(a-1|0,o,d)<p)return 0;v.parenCntReset(u);for(var m=0,h=i.get(o.ends,a-1|0)+1|0;h<d&&2!==m;)m=v.parenCntPut(u,i.get(t,h)),h=h+1|0;return 0===m?n._1(f,o):0}if(0===a&&0===i.get(e.begins,0)){if((d-1|0)<i.get(e.ends,0))return 0;for(var g,y=i.get(e.ends,0),_=0;s.isNone(g)&&_<=y;)i.get(r,_)!==i.get(t,_)&&(g=0),_=_+1|0;return void 0!==g?g:(i.set(o.begins,0,0),i.set(o.ends,0,y),c())}var b=0===a?0:i.get(o.ends,a-1|0)+1|0,T=d-i.get(e.remainingMinLength,a)|0;v.parenCntReset(u);for(var S=0,A=E(a-1|0,e,l),k=1;k<=A;++k)S=v.parenCntPut(u,i.get(t,b)),b=b+1|0;for(var M=1+(i.get(e.ends,a)-i.get(e.begins,a)|0)|0,w=0;b<=T&&2!==S&&0===w;){if(0===S){for(var j=0,I=!0;j<M&&I;)I=i.get(r,i.get(e.begins,a)+j|0)===i.get(t,b+j|0),j=j+1|0;j===M&&I&&(i.set(o.begins,a,b),i.set(o.ends,a,(b+M|0)-1|0),w=c(),v.parenCntReset(u))}S=v.parenCntPut(u,i.get(t,b)),b=b+1|0}return w}function y(r,t){var e=r.length;if(0===t.length)return[{leftConstPartIdx:-1,frmExpr:r,varsBeginIdx:0,numOfVars:e,exprBeginIdx:0,exprEndIdx:0}];var n=[];0!==i.get(t.begins,0)&&n.push({leftConstPartIdx:-1,frmExpr:r,varsBeginIdx:0,numOfVars:i.get(t.begins,0),exprBeginIdx:0,exprEndIdx:0});for(var o=0,a=t.length-2|0;o<=a;++o)n.push({leftConstPartIdx:o,frmExpr:r,varsBeginIdx:i.get(t.ends,o)+1|0,numOfVars:E(o,t,e),exprBeginIdx:0,exprEndIdx:0});var u=t.length-1|0;return i.get(t.ends,u)!==(e-1|0)&&n.push({leftConstPartIdx:u,frmExpr:r,varsBeginIdx:i.get(t.ends,u)+1|0,numOfVars:E(u,t,e),exprBeginIdx:0,exprEndIdx:0}),n}function _(r,t,e,o,a,u,s,f){var c=i.get(e,o),d=i.get(c.frmExpr,c.varsBeginIdx+a|0),l=(1+(c.exprEndIdx-u|0)|0)-((c.numOfVars-a|0)-1|0)|0,p=function(d){return a<(c.numOfVars-1|0)?_(r,t,e,o,a+1|0,u+d|0,s,f):o<(e.length-1|0)?_(r,t,e,o+1|0,0,i.get(e,o+1|0).exprBeginIdx,s,f):n._1(f,t)},m=0;if(i.get(t.isDefined,d)){var E=i.get(t.exprs,d),h=i.get(t.begins,d),g=1+(i.get(t.ends,d)-h|0)|0;if(g<=l&&(a<(c.numOfVars-1|0)||g===l)){for(var x=0;x<g&&i.get(E,h+x|0)===i.get(r,u+x|0);)x=x+1|0;x===g&&(m=p(g))}}else{if(i.set(t.isDefined,d,!0),i.set(t.exprs,d,r),i.set(t.begins,d,u),a===(c.numOfVars-1|0))i.set(t.ends,d,c.exprEndIdx),m=p(l);else{var y=1,b=u;v.parenCntReset(s);for(var T=0;y<=l&&0===m&&2!==T;)i.set(t.ends,d,b),0===(T=v.parenCntPut(s,i.get(r,b)))&&(m=p(y),v.parenCntReset(s)),y=y+1|0,b=b+1|0}i.set(t.isDefined,d,!1)}return m}function b(r,t,e,o,u,s,f,c){if(0===s.size)return a.exprEq(r,t)?n._1(c,s):0;var d=t.length,v=r.length;if(d<v||0===d||0===v)return 0;var l=r[v-1|0];if(l<0&&l!==t[d-1|0])return 0;var p=r[0];return p<0&&p!==t[0]?0:x(r,t,e,o,0,f,(function(r){return u.length>0?(function(r,t,e){var n=e.length;0===t.length?(i.get(r,0).exprBeginIdx=0,i.get(r,0).exprEndIdx=n-1|0):(r.forEach((function(r){-1===r.leftConstPartIdx?(r.exprBeginIdx=0,r.exprEndIdx=i.get(t.begins,0)-1|0):r.leftConstPartIdx===(t.length-1|0)?(r.exprBeginIdx=i.get(t.ends,r.leftConstPartIdx)+1|0,r.exprEndIdx=n-1|0):(r.exprBeginIdx=i.get(t.ends,r.leftConstPartIdx)+1|0,r.exprEndIdx=i.get(t.begins,r.leftConstPartIdx+1|0)-1|0)})),r.sort((function(r,t){return r.numOfVars<t.numOfVars?-1:r.numOfVars===t.numOfVars?0:1})))}(u,r,t),_(t,s,u,0,0,i.get(u,0).exprBeginIdx,f,c)):n._1(c,s)}))}function T(r){return{size:r,begins:o.make(r,0),ends:o.make(r,0),exprs:o.make(r,[]),isDefined:o.make(r,!1)}}function S(r){var t=r.hyps.filter((function(r){return 1===r.typ})),e=[],n=[],o=[];t.forEach((function(r){var t=h(r.expr),i=g(t),a=y(r.expr,t);e.push(t),n.push(i),o.push(a)}));var i=h(r.asrt),a=g(i),u=y(r.asrt,i);e.push(i),n.push(a),o.push(u);var s=T(r.numOfVars);return{frame:r,hypsE:t,numOfHypsE:t.length,frmConstParts:e,constParts:n,varGroups:o,subs:s}}t.subsClone=function(r){return{size:r.size,begins:r.begins.slice(),ends:r.ends.slice(),exprs:r.exprs.slice(),isDefined:r.isDefined.slice()}},t.subsEq=function(r,t){if(r.size!==t.size||!r.isDefined.every((function(r){return r}))||!t.isDefined.every((function(r){return r})))return!1;for(var e=!0,n=0;e&&n<r.size;){var o=i.get(r.exprs,n),a=i.get(r.begins,n),u=i.get(r.ends,n),s=1+(u-a|0)|0,f=i.get(t.exprs,n),c=i.get(t.begins,n);if(s===(1+(i.get(t.ends,n)-c|0)|0))for(var d=a,v=c;e&&d<=u;)e=i.get(o,d)===i.get(f,v),d=d+1|0,v=v+1|0;else e=!1;n=n+1|0}return e},t.subsHash=function(r){if(!r.isDefined.every((function(r){return r})))return 0;for(var t=0,e=0;e<r.size;)t=p.hash2(t,p.hashArrIntFromTo(i.get(r.exprs,e),i.get(r.begins,e),i.get(r.ends,e))),e=e+1|0;return t},t.createConstParts=h,t.createMatchingConstParts=g,t.createVarGroups=y,t.createSubs=T,t.prepareFrmSubsDataForFrame=S,t.prepareFrmSubsData=function(r,t,e){var n=void 0!==t?c.valFromOption(t):l.make(0),o=[];return a.forEachFrame(r,(function(r){l.has(n,r.label)||o.push(S(r))})),d.fromArray(o.map((function(r){return[r.frame.label,r]})))},t.iterateSubstitutions=b,t.applySubs=function(r,t,e){var o={contents:0};r.forEach((function(r){r<0||!i.get(t.isDefined,r)?o.contents=o.contents+1|0:o.contents=o.contents+(1+(i.get(t.ends,r)-i.get(t.begins,r)|0)|0)|0}));for(var a=new Array(o.contents),u=0,s=0;s<o.contents;){var f=i.get(r,u);if(f<0)i.set(a,s,f),s=s+1|0;else if(i.get(t.isDefined,f)){var c=i.get(t.exprs,f),d=1+(i.get(t.ends,f)-i.get(t.begins,f)|0)|0;p.copySubArray(c,i.get(t.begins,f),a,s,d),s=s+d|0}else i.set(a,s,n._1(e,f)),s=s+1|0;u=u+1|0}return a},t.verifyDisjoints=function(r,t,e,o){var a={contents:void 0};return u.forEach(r,(function(r,u){if(s.isNone(a.contents))return f.forEach(u,(function(u){if(s.isNone(a.contents))for(var f=i.get(t.exprs,r),c=i.get(t.begins,r),d=i.get(t.ends,r),v=i.get(t.exprs,u),l=i.get(t.begins,u),p=i.get(t.ends,u),m=c;m<=d;++m)if(s.isNone(a.contents)){var E=i.get(f,m);if(E>=0)for(var h=l;h<=p;++h)if(s.isNone(a.contents)){var g=i.get(v,h);g>=0&&(E===g?a.contents=0===o?0:{TAG:0,frmVar1:r,expr1:f.slice(c,d+1|0),frmVar2:u,expr2:v.slice(l,p+1|0),commonVar:E}:n._2(e,E,g)||(a.contents=0===o?0:{TAG:1,frmVar1:r,expr1:f.slice(c,d+1|0),var1:E,frmVar2:u,expr2:v.slice(l,p+1|0),var2:g}))}}}))})),a.contents},t.test_iterateConstParts=function(r,t,e,n){var o=function(r){return r.begins.map((function(t,e){return[t,i.get(r.ends,e)]}))},u=v.parenCntMake(a.ctxStrToIntsExn(r,n),void 0,void 0),s=h(t),f=g(s),c=[];return x(t,e,s,f,0,u,(function(r){return c.push(o(r)),0})),[o(s),c]},t.test_iterateSubstitutions=function(r,t,e,n){var o=v.parenCntMake(a.ctxStrToIntsExn(r,n),void 0,void 0),u=h(t),s=g(u),c=y(t,u),d=f.size(f.fromArray(t.filter((function(r){return r>=0})))),l=T(d),p=[];return b(t,e,u,s,c,l,o,(function(r){for(var t=[],e=0;e<d;++e)t.push(i.get(r.exprs,e).slice(i.get(r.begins,e),i.get(r.ends,e)+1|0));return p.push(t),0})),p}},7566:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(3942),u=e(6517),s=e(1611),f=e(3021);function c(r){return r.reduce((function(r,t){return Math.max(r,function(r){return 0===r.TAG?r._0.height:0}(t))}),0)}function d(r,t,e,s,f){var v=f.proof;if(0===v.TAG){for(var l=v.label,p=f.expr.length-1|0,m=n._1(r,void 0),E=new Array(p),h={id:m,parent:s,label:l,children:E,height:0},g=1;g<=p;++g)i.set(E,g-1|0,{TAG:1,id:n._1(r,void 0),parent:h,sym:a.ctxIntToSymExn(t,i.get(f.expr,g)),color:void 0,isVar:i.get(f.expr,g)>=0});return{TAG:0,_0:{id:m,parent:s,label:l,children:E,height:c(E)+1|0}}}var x=v.label,y=a.getFrame(t,x);if(void 0===y)return{TAG:1,_0:"Cannot find a frame by label '"+x+"' in buildSyntaxTreeInner."};var _=function(r,t){var e=new Array(t.numOfVars),n=o.make(t.numOfVars,!1);if(r.length!==t.numOfArgs)return{TAG:1,_0:"extractVarToRecIdxMapping: args.Js_array2.length != frame.numOfArgs"};var a={contents:void 0};t.hyps.forEach((function(t,o){if(u.isNone(a.contents)&&0===t.typ){var s=i.get(t.expr,1);return i.get(n,s)?void(a.contents={TAG:1,_0:"extractVarToRecIdxMapping: locks[v]"}):(i.set(n,s,!0),i.set(e,s,i.get(r,o)))}}));var s=a.contents;return void 0!==s?s:n.some((function(r){return!r}))?{TAG:1,_0:"extractVarToRecIdxMapping: locks->Js_array2.some(lock => !lock)"}:{TAG:0,_0:e}}(v.args,y);if(0!==_.TAG)return{TAG:1,_0:_._0};var b=_._0,T=n._1(r,void 0),S=new Array(y.asrt.length-1|0),A={id:T,parent:s,label:x,children:S,height:0},k={contents:void 0};y.asrt.forEach((function(o,s){if(s>0&&u.isNone(k.contents)){if(o<0)return i.set(S,s-1|0,{TAG:1,id:n._1(r,void 0),parent:A,sym:a.ctxIntToSymExn(t,o),color:void 0,isVar:!1});var f=d(r,t,e,A,i.get(e,i.get(b,o)));return 0===f.TAG?i.set(S,s-1|0,{TAG:0,_0:f._0}):void(k.contents={TAG:1,_0:f._0})}}));var M=k.contents;return void 0!==M?M:{TAG:0,_0:{id:T,parent:s,label:x,children:S,height:c(S)+1|0}}}function v(r,t,e){var n={contents:0};return d((function(r){return n.contents=n.contents+1|0,n.contents-1|0}),r,t,void 0,i.get(t,e))}function l(r,t,e){var n=t.nodes.find((function(r){return a.exprEq(r.expr,e)}));return void 0!==n?{TAG:0,_0:f.createProofTable(t,n,void 0,void 0,void 0)}:{TAG:1,_0:"buildSyntaxProofTableFromProofTreeDto: could not find a proof for: "+a.ctxIntsToStrExn(r,e)}}t.buildSyntaxTree=v,t.buildSyntaxProofTableFromProofTreeDto=l,t.buildSyntaxTreeFromProofTreeDto=function(r,t,e){var n=l(r,t,e);if(0!==n.TAG)return{TAG:1,_0:n._0};var o=n._0;return v(r,o,o.length-1|0)},t.syntaxTreeToSymbols=function r(t){return o.concatMany(t.children.map((function(t){return 0===t.TAG?r(t._0):[t.sym]})))},t.syntaxTreeIsEmpty=function(r){return 0===r.children.length},t.getNodeById=function(r,t){return s.traverseTree(void 0,{TAG:0,_0:r},(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(r,e){if((0===e.TAG?e._0.id:e.id)===t)return e}),void 0,void 0)[1]}},9898:function(r,t,e){var n=e(1386);function o(r,t){return r.map((function(r,e){return String(e+1|0)+": "+(0===r.length?"?":n._1(t,r))})).join("\n")}t.unifErrToStr=function(r,t,e){if("number"==typeof r)return"Details of the error were not stored.";switch(0|r.TAG){case 0:var i=String.fromCharCode(8594);return"Unsatisfied disjoint, common variable "+n._1(t,[r.commonVar])+":\n"+n._1(e,[r.frmVar1])+" "+i+" "+n._1(t,r.expr1)+"\n"+n._1(e,[r.frmVar2])+" "+i+" "+n._1(t,r.expr2);case 1:var a=String.fromCharCode(8594);return"Missing disjoint "+n._1(t,[r.var1])+","+n._1(t,[r.var2])+":\n"+n._1(e,[r.frmVar1])+" "+a+" "+n._1(t,r.expr1)+"\n"+n._1(e,[r.frmVar2])+" "+a+" "+n._1(t,r.expr2);case 2:return"Could not prove this floating statement:\n"+n._1(t,r.expr);case 3:var u=String.fromCharCode(8594);return"Could not find a unification for assertion:\n"+n._1(e,r.asrtExpr)+"\n"+u+"\n"+n._1(t,r.expr);case 4:var s=r.args,f=0===s.length?"":":";return"Could not unify essential hypothesis #"+String(r.errArgIdx+1|0)+f+"\n"+o(s,t);case 5:var c=r.errArgIdx,d=r.args;return"New variables are not allowed, but one had to be created when unifying "+(d.length===c?"assertion":"essential hypothesis #"+String(c+1|0))+(0===d.length?"":":")+"\n"+o(d,t)}}},9232:function(r,t,e){var n=e(1386),o=e(6517),i=e(7175),a=String.fromCharCode(160),u=String.fromCharCode(9679);function s(r,t){var e=r.depVer;if(void 0!==e&&n._2(r.depVerEq,i.valFromOption(e),t))return r.data}function f(r,t){return r.split(t).map((function(r){return o.getWithDefault(r,"").trim()})).filter((function(r){return r.length>0}))}var c=/[\n\r]/,d=/[\s\n\r]/,v=/\+/g,l=/-/g,p=/\//g,m=/_/g;t.nbsp=a,t.circleChar=u,t.currTimeStr=function(r){return new Date(Date.now()).toISOString()},t.floatToPctStr=function(r){return String(0|Math.round(100*r))+"%"},t.cacheMake=function(r,t){return{recalc:r,depVerEq:t,depVer:void 0,data:void 0}},t.cacheGetByDepVer=s,t.cacheGet=function(r,t,e){var o=s(r,t);if(void 0!==o)return i.valFromOption(o);r.depVer=i.some(t);var a=n._1(r.recalc,e);return r.data=i.some(a),a},t.multilineTextToNonEmptyLines=function(r){return f(r,c)},t.getSpaceSeparatedValuesAsArray=function(r){return f(r,d)},t.strToBase64=function(r){return btoa(r)},t.base64ToStr=function(r){return atob(r)},t.strToSafeBase64=function(r){return btoa(r).replace(v,"-").replace(p,"_")},t.safeBase64ToStr=function(r){return atob(r.replace(m,"/").replace(l,"+"))},t.$$setTimeout=function(r,t){return setTimeout(r,t)},t.$$clearTimeout=function(r){clearTimeout(r)},t.stubTimeoutId=0,t.versionMake=function(r){return{ver:0,val:r}},t.versionSet=function(r,t){return{ver:r.ver+1|0,val:t}}},4125:function(r,t,e){var n=e(1386),o=e(8723);function i(r,t){return o.div(1e5*r|0,t)}function a(r,t,e,n,o){var a=void 0!==n&&n,u=1e5*r|0,s=i(void 0!==t?t:0,u);return{step:u,numOfSteps:s,lastSentNumOfSteps:s,onProgress:e,dontDecrease:a}}function u(r,t){var e=r.onProgress;if(void 0!==e){var o,a,u=i(t,r.step);return r.dontDecrease&&u>r.lastSentNumOfSteps||!r.dontDecrease&&u!==r.lastSentNumOfSteps?(n._1(e,(o=u,a=r.step,Math.imul(o,a)/1e5)),void(r.lastSentNumOfSteps=u)):void 0}}t.progressTrackerMake=a,t.progressTrackerSetCurrPct=u,t.progressTrackerIntMake=function(r,t,e,n,o,i){var u=void 0!==t?t:0;return{progressState:a(r,u/e,n,void 0!==o&&o),cnt:u,maxCnt:e,stepInt:Math.max(e*r/2|0,1)}},t.progressTrackerIntIncCnt=function(r){if(r.cnt=r.cnt+1|0,0===o.mod_(r.cnt,r.stepInt))return u(r.progressState,r.cnt/r.maxCnt)}},256:function(r,t,e){var n=e(1386),o=e(3942),i=e(6891),a="MM_wrk_FindParens";t.procName=a,t.beginFindParens=function(r,t,e){i.beginWorkerInteraction(a,{ctx:r},(function(r,o,i){if(0===r.TAG)return n._1(t,r.pct);n._1(i,void 0),n._1(e,r.parens)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){var e=r.ctx;n._1(t,{TAG:1,parens:o.ctxIntsToStrExn(e,o.findParentheses(e,(function(r){n._1(t,{TAG:0,pct:r})}),void 0))})},t.reqToStr=function(r){return"FindParens"},t.respToStr=function(r){return 0===r.TAG?"FindParensProgress(pct="+String(r.pct)+")":'FindParensDone(parens="'+r.parens+'")'}},1618:function(r,t,e){var n=e(1386),o=e(2900),i=e(8371),a=e(1748),u=e(3942),s=e(6517),f=e(7175),c=e(6891),d=e(8488),v=e(4518),l="MM_wrk_LoadCtx";t.procName=l,t.beginLoadingMmContext=function(r,t,e,o){c.beginWorkerInteraction(l,{scopes:r},(function(r,o,i){if(0===r.TAG)return n._1(t,r.pct);n._1(i,void 0),n._1(e,r.ctx)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){var e=r.scopes,c=e.reduce((function(r,t){return r+t.expectedNumOfAssertions|0}),0),d=e.map((function(r){return r.expectedNumOfAssertions/c}));try{for(var l=u.createContext(void 0,void 0,void 0),p=0,m=e.length;p<m;++p){var E=a.get(e,p),h=d.reduce(function(r){return function(t,e,n){return n<r?t+e:t}}(p),0),g=a.get(d,p);if(u.loadContext(a.get(e,p).ast,f.some(l),E.stopBefore,E.stopAfter,void 0,E.expectedNumOfAssertions,function(r,e){return function(o){n._1(t,{TAG:0,pct:r+o*e})}}(h,g),void 0,void 0),E.resetNestingLevel)for(;0!==u.getNestingLevel(l);)u.closeChildContext(l)}return n._1(t,{TAG:0,pct:1}),n._1(t,{TAG:1,ctx:{TAG:0,_0:l}})}catch(r){var x=v.internalToOCamlException(r);if(x.RE_EXN_ID===i.MmException)return n._1(t,{TAG:1,ctx:{TAG:1,_0:x._1.msg}});if(x.RE_EXN_ID===o.$$Error)return n._1(t,{TAG:1,ctx:{TAG:1,_0:s.getWithDefault(x._1.message,"Internal error.")}});throw x}},t.reqToStr=function(r){return"LoadMmContext"},t.respToStr=function(r){return 0===r.TAG?"MmContextLoadProgress(pct="+String(r.pct)+")":"MmContextLoaded"},t.createMmScopesForFrame=function(r,t){var e=[];return r.reduce((function(r,n){if(r)return r;var o=function(r){switch(d.readInstrFromStr(r.readInstr)){case 0:return[void 0,void 0,r.allLabels];case 1:var t=r.allLabels.findIndex((function(t){return t===r.label}));return-1!==t?[r.label,void 0,r.allLabels.slice(0,t)]:[void 0,void 0,r.allLabels];case 2:var e=r.allLabels.findIndex((function(t){return t===r.label}));return-1!==e?[void 0,r.label,r.allLabels.slice(0,e+1|0)]:[void 0,void 0,r.allLabels]}}(n),a=o[2],u=a.includes(t)?[t,void 0,a.indexOf(t),!1]:[o[0],o[1],a.length,!0],s=u[2],f=n.ast;if(void 0===f)throw{RE_EXN_ID:i.MmException,_1:{msg:"Cannot create MM context for a frame without ast."},Error:new Error};var c={ast:f,expectedNumOfAssertions:s,stopBefore:u[0],stopAfter:u[1],resetNestingLevel:u[3]};return e.push(c),a.length!==s}),!1),e}},1317:function(r,t,e){var n=e(1386),o=e(8371),i=e(6891),a=e(4518),u="MM_wrk_ParseMmFile";t.procName=u,t.beginParsingMmFile=function(r,t,e){i.beginWorkerInteraction(u,{mmFileText:r},(function(r,o,i){if(0===r.TAG)return n._1(t,r.pct);n._1(i,void 0),n._1(e,r.parseResult)}),void 0,void 0,void 0,void 0)},t.processOnWorkerSide=function(r,t){try{var e=o.parseMmFile(r.mmFileText,void 0,void 0,(function(r){n._1(t,{TAG:0,pct:r})}),void 0);return n._1(t,{TAG:0,pct:1}),n._1(t,{TAG:1,parseResult:{TAG:0,_0:e}})}catch(r){var i=a.internalToOCamlException(r);if(i.RE_EXN_ID===o.MmException)return n._1(t,{TAG:1,parseResult:{TAG:1,_0:i._1.msg}});throw i}},t.reqToStr=function(r){return"ParseMmFile"},t.respToStr=function(r){return 0===r.TAG?"MmFileParseProgress(pct="+String(r.pct)+")":"MmFileParsed"}},2436:function(r,t,e){var n=e(1386),o=e(9232),i=e(6517);t.serialize=function(r){return r},t.deserialize=function(r){return r},t.logClientIsSendingRequest=function(r,t,e,a){var u=i.getWithDefault(i.map(a,(function(r){return n._1(r,e)})),"");console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] C~> "+u)},t.logClientReceivedResponse=function(r,t,e,a){var u=i.getWithDefault(i.map(a,(function(r){return n._1(r,e)})),"");console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] ->C "+u)},t.logWorkerIsSendingResponse=function(r,t,e,i){console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] W~> "+n._1(i,e))},t.logWorkerReceivedRequest=function(r,t,e,i){console.log(o.currTimeStr(void 0)+" ["+String(r)+","+t+"] ->W "+n._1(i,e))}},6891:function(r,t,e){var n=e(1386),o=e(1748),i=e(2436),a=e(6517),u=e(7175),s=e(6181),f=e(3216),c=s.create("MM_wrk_client.WorkerException"),d={contents:void 0},v={contents:0},l=[];t.beginWorkerInteraction=function(r,t,e,s,p,m,E){var h=void 0!==s&&s,g={contents:-1},x={contents:function(r){}};g.contents=function(r,t){var e=(v.contents=v.contents+1|0,v.contents-1|0);return l.push({id:e,callback:r,traceEnabled:t}),e}((function(t){var a=i.deserialize(t);h&&i.logClientReceivedResponse(g.contents,r,a,m),n._3(e,a,x.contents,(function(r){for(var t=g.contents,e=0;e<l.length;)o.get(l,e).id===t?l.splice(e,1):e=e+1|0}))}),h),x.contents=function(t){h&&i.logClientIsSendingRequest(g.contents,r,t,p);var e={clientId:g.contents,procName:r,body:i.serialize(t),traceEnabled:h};if(a.isNone(d.contents)){var o=new Worker("./webworker-main.js");o.onmessage=function(r){var t=r.data;f.arrForEach(l,(function(r){if(r.id===t.clientId)return n._1(r.callback,t.body),u.some(void 0)}))},d.contents=u.some(o)}var s=d.contents;if(void 0!==s)return u.valFromOption(s).postMessage(e);throw{RE_EXN_ID:c,_1:"Could not instantiate a webworker.",Error:new Error}},n._1(x.contents,t)},t.terminateWorker=function(r){var t=d.contents;if(void 0!==t)return u.valFromOption(t).terminate(),void(d.contents=void 0)}},5768:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(1748),u=e(3942),s=e(6517),f=e(7175),c=e(4518),d=/[\n\r]/;function v(r){var t=r.split(d).map((function(r){return s.getWithDefault(r,"").trim()})).filter((function(r){return r.length>0}));return 0===t.length?{TAG:0,_0:[]}:t.reduce((function(r,t){if(0!==r.TAG)return r;var e=r._0,n=function(r){var t=o.getSpaceSeparatedValuesAsArray(r);return 3!==t.length?{TAG:1,_0:"A line representing a variable definition should consist of exactly three parts separated with a whitespace."}:{TAG:0,_0:t}}(t);return 0!==n.TAG?{TAG:1,_0:n._0}:(e.push(n._0),{TAG:0,_0:e})}),{TAG:0,_0:[]})}t.prepareParenInts=function(r,t){for(var e=o.getSpaceSeparatedValuesAsArray(t),n=[],i=(e.length/2|0)-1|0,s=0;s<=i;++s){var f=a.get(e,s<<1),c=a.get(e,1+(s<<1)|0),d=u.ctxSymToInt(r,f);if(void 0!==d&&u.isConst(r,f)){var v=u.ctxSymToInt(r,c);void 0!==v&&u.isConst(r,c)&&(n.push(d),n.push(v))}}return n},t.textToVarDefs=v,t.createWrkCtx=function(r,t,e){var s=u.createContext(f.some(r),void 0,void 0),d=[function(r){var e=v(t);if(0!==e.TAG)return{varsErr:e._0,disjErr:void 0};try{return void e._0.forEach((function(r){u.applySingleStmt(s,{TAG:3,symbols:[a.get(r,2)]}),u.applySingleStmt(s,{TAG:5,label:a.get(r,0),expr:[a.get(r,1),a.get(r,2)]})}))}catch(r){var n=c.internalToOCamlException(r);if(n.RE_EXN_ID===i.MmException)return{varsErr:n._1.msg,disjErr:void 0};throw n}},function(r){try{return void o.multilineTextToNonEmptyLines(e).forEach((function(r){return u.applySingleStmt(s,{TAG:4,vars:r.split(",").map((function(r){return r.trim()}))})}))}catch(r){var t=c.internalToOCamlException(r);if(t.RE_EXN_ID===i.MmException)return{varsErr:void 0,disjErr:t._1.msg};throw t}}].reduce((function(r,t){return void 0!==r?r:n._1(t,void 0)}),void 0);return void 0!==d?{TAG:1,_0:d}:{TAG:0,_0:s}}},8887:function(r,t,e){var n=e(1386),o=e(9232),i=e(8371),a=e(7175),u=e(6891),s=e(1854),f=e(519),c=e(5768),d=e(8615),v="MM_wrk_ctx",l={contents:void 0},p=o.cacheMake((function(r){return r}),(function(r,t){return r===t})),m=o.cacheMake((function(r){return r}),(function(r,t){return r===t})),E=o.cacheMake((function(r){return f.prepareFrmSubsData(r[1],a.some(d.fromArray(r[0].asrtsToSkip)),void 0)}),(function(r,t){return r[0]===t[0]&&r[1]===t[1]})),h=o.cacheMake((function(r){return s.parenCntMake(c.prepareParenInts(r[1],r[0].parens),void 0,void 0)}),(function(r,t){return r[0]===t[0]&&r[1]===t[1]}));t.procName=v,t.beginWorkerInteractionUsingCtx=function(r,t,e,o,i,a,s,f,c,d,l){var p=void 0!==d&&d,m={TAG:0,settingsVer:r,preCtxVer:e,varsText:i,disjText:a};u.beginWorkerInteraction(v,m,(function(i,a,d){if("number"!=typeof i)return 0===i.TAG?i.settingsVer===r?(n._1(a,{TAG:1,settingsVer:r,settings:t}),n._1(a,m)):void 0:i.preCtxVer===e?(n._1(a,{TAG:2,preCtxVer:e,preCtx:o}),n._1(a,m)):void 0;n._1(d,void 0),u.beginWorkerInteraction(s,f,c,p,void 0,void 0,void 0)}),p,void 0,void 0,void 0)},t.getWrkCtxExn=function(r){var t=l.contents;if(void 0!==t)return t.wrkCtx;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkCtx is not created in the worker thread."},Error:new Error}},t.getWrkParenCntExn=function(r){var t=l.contents;if(void 0!==t)return t.wrkParenCnt;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkParenCnt is not created in the worker thread."},Error:new Error}},t.getWrkFrmsExn=function(r){var t=l.contents;if(void 0!==t)return t.wrkFrms;throw{RE_EXN_ID:i.MmException,_1:{msg:"wrkFrms is not created in the worker thread."},Error:new Error}},t.processOnWorkerSide=function(r,t){switch(0|r.TAG){case 0:l.contents=void 0;var e=function(r,t,e,n){var u=o.cacheGetByDepVer(p,r);if(void 0===u)return{TAG:1,_0:{TAG:0,settingsVer:r}};var s=o.cacheGetByDepVer(m,t);if(void 0===s)return{TAG:1,_0:{TAG:1,preCtxVer:t}};var f=a.valFromOption(s),d=c.createWrkCtx(f,e,n);if(0===d.TAG)return{TAG:0,_0:{wrkFrms:o.cacheGet(E,[r,t],[u,f]),wrkParenCnt:o.cacheGet(h,[r,t],[u,f]),wrkCtx:d._0}};throw{RE_EXN_ID:i.MmException,_1:{msg:"There was an error creating wrkCtx in the worker thread."},Error:new Error}}(r.settingsVer,r.preCtxVer,r.varsText,r.disjText);return 0!==e.TAG?n._1(t,e._0):(l.contents=e._0,n._1(t,0));case 1:return void o.cacheGet(p,r.settingsVer,r.settings);case 2:return void o.cacheGet(m,r.preCtxVer,r.preCtx)}},t.reqToStr=function(r){switch(0|r.TAG){case 0:return"PrepareWrkPrecalcData";case 1:return"SetSettings(settingsVer="+String(r.settingsVer)+")";case 2:return"SetPreCtx(preCtxVer="+String(r.preCtxVer)+")"}},t.respToStr=function(r){return"number"==typeof r?"Ok":0===r.TAG?"GetSettings(settingsVer="+String(r.settingsVer)+")":"GetPreCtx(preCtxVer="+String(r.preCtxVer)+")"}},8488:function(r,t,e){var n=e(1386),o=e(9232),i=e(4763),a=e(4923),u=e(8371),s=e(2971),f=e(1748),c=e(3942),d=e(2694),v=e(1094),l=e(6517),p=e(303),m=e(7175),E=e(2815),h=e(9775),g=e(335),x=e(5082),y=e(4530),_=e(7566),b=e(7356),T=e(7659),S=e(1854),A=e(519),k=e(5768),M=e(7712),w=e(1611),j=e(3021),I=e(6310),G=e(8099),D=e(2275),N=e(8615),U=e(5981),C=e(4518),P=e(3216),R=e(9898),V=e(2867),O="";function F(r){if(0===r.TAG)return r._0.map((function(r){return r.sym}));var t=r._0;return[t.exprTyp].concat(_.syntaxTreeToSymbols(t.root))}function L(r,t,e,n){return{TAG:0,_0:o.getSpaceSeparatedValuesAsArray(r).map((function(r){var n,o=l.flatMap(t,(function(t){return D.get(t,r)}));if(void 0!==o)n=o;else{var i=l.flatMap(e,(function(t){return D.get(t,r)}));n=void 0!==i?i:void 0}return{sym:r,color:n}}))}}function X(r,t,e,n){return{id:r,label:e,labelEditMode:!1,typ:t,typEditMode:!1,isGoal:n,cont:{TAG:0,_0:[]},contEditMode:!0,jstfText:"",jstfEditMode:!1,stmtErr:void 0,expr:void 0,jstf:void 0,proofTreeDto:void 0,src:void 0,proof:void 0,proofStatus:void 0,unifErr:void 0,syntaxErr:void 0}}function B(r){var t,e=r.expr;if(void 0===e)throw{RE_EXN_ID:u.MmException,_1:{msg:"Expr must be set for a userStmt before converting to rootStmt."},Error:new Error};return t=e,{isHyp:0===r.typ,label:r.label,expr:t,jstf:r.jstf}}function z(r){var t=r.cont;if(0===t.TAG)return r;var e=t._0;return void 0!==e.clickedNodeId?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:{TAG:1,_0:{exprTyp:e.exprTyp,root:e.root,clickedNodeId:void 0,expLvl:e.expLvl}},contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r}function W(r,t){return m.undefined_to_opt(r.stmts.find((function(r){return r.id===t})))}function q(r,t){var e=W(r,t);if(void 0!==e)return e;throw{RE_EXN_ID:u.MmException,_1:{msg:"editorGetStmtByIdExn: Cannot find a step by id."},Error:new Error}}function H(r,t,e){var o=a.obj_dup(r);return o.stmts=r.stmts.map((function(r){return r.id===t?n._1(e,r):r})),o}function $(r,t){if(r.checkedStmtIds.includes(t)){var e=a.obj_dup(r);return e.checkedStmtIds=r.checkedStmtIds.filter((function(r){return r!==t})),e}var n=a.obj_dup(r);return n.checkedStmtIds=r.checkedStmtIds.concat([t]),n}function K(r){var t=a.obj_dup(r);return t.checkedStmtIds=[],t.stmts=r.stmts.map(z),t}function J(r,t){var e=a.obj_dup(r);return e.checkedStmtIds=r.checkedStmtIds.filter((function(r){return r!==t})),e.stmts=r.stmts.filter((function(r){return r.id!==t})),e}function Z(r,t){var e=r.stmts.length;return 0!==e&&0!==r.checkedStmtIds.length&&(!(!t||r.checkedStmtIds.includes(f.get(r.stmts,0).id))||!t&&!r.checkedStmtIds.includes(f.get(r.stmts,e-1|0).id))}function Y(r,t){var e=N.fromArray(r.stmts.map((function(r){return r.label}))),n=k.textToVarDefs(r.varsText);0===n.TAG&&n._0.forEach((function(r){N.add(e,f.get(r,0))}));for(var o,i=1,a=t+String(i);o=a,N.has(e,o)||c.isHyp(r.preCtx,o);)i=i+1|0,a=t+String(i);return a}function Q(r){return 0===r.checkedStmtIds.length?void 0:m.undefined_to_opt(r.stmts.find((function(t){return r.checkedStmtIds.includes(t.id)})))}function rr(r){var t=String(r.nextStmtId),e=r.stmts.reduce((function(r,t){return 1===t.typ?r+1|0:r}),0),n=0===e&&r.settings.defaultStmtLabel.trim().length>0?r.settings.defaultStmtLabel.trim():Y(r,O),o=0===e&&r.settings.initStmtIsGoal,i=l.map(Q(r),(function(r){return r.id})),u=a.obj_dup(r);return[(u.stmts=void 0!==i?s.concatMany(r.stmts.map((function(r){return r.id===i?[X(t,1,n,o),r]:[r]}))):r.stmts.concat([X(t,1,n,o)]),u.nextStmtId=r.nextStmtId+1|0,u),t]}function tr(r){return 1===r.checkedStmtIds.length}function er(r,t){return!r.stmts.some((function(r){return r.id===t&&(!!(r.labelEditMode||r.typEditMode||r.contEditMode)||r.jstfEditMode)}))}function nr(r,t){var e=a.obj_dup(r);return e.disjEditMode=!1,e.disjText=t,e}var or="HYP";function ir(r,t){var e=D.make(100);return c.forEachHypothesisInDeclarationOrder(r,(function(n){if(0===n.typ){var o=c.ctxIntToSym(r,f.get(n.expr,0));if(void 0!==o){var i=D.get(t,o);void 0!==i&&D.set(e,c.ctxIntToSymExn(r,f.get(n.expr,1)),i)}}})),e}function ar(r){var t,e,n,o,i=a.obj_dup(r);return i.wrkCtxColors=(t=r.varsText,e=r.typeColors,n=D.make(16),0===(o=k.textToVarDefs(t)).TAG&&o._0.forEach((function(r){var t=f.get(r,2),o=f.get(r,1),i=D.get(e,o);if(void 0!==i)return D.set(n,t,i)})),n),i}function ur(r){var t=a.obj_dup(r);return t.stmts=r.stmts.map((function(t){return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:L(F(t.cont).join(" "),m.some(r.preCtxColors),m.some(r.wrkCtxColors)),contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr}})),t}function sr(r,t){var e=a.obj_dup(r);return e.varsEditMode=!1,e.varsText=t,ur(ar(e))}function fr(r){var t=function(t){return t.typ?r.settings.stickGoalToBottom&&t.isGoal?3:2:1},e=function(r,e){return t(r)-t(e)|0},o=r.stmts.length;if(o<2)return r;for(var i=r.stmts.slice(),u=!0,s=o-2|0;s>=0&&u;){u=!1;for(var c=0;c<=s;++c)if(n._2(e,f.get(i,c),f.get(i,c+1|0))>0){var d=f.get(i,c);f.set(i,c,f.get(i,c+1|0)),f.set(i,c+1|0,d),u=!0}s=s-1|0}var v=a.obj_dup(r);return v.stmts=i,v}function cr(r){return l.isSome(r.stmtErr)}function dr(r){return!(!l.isSome(r.varsErr)&&!l.isSome(r.disjErr))||r.stmts.some(cr)}function vr(r){var t=k.createWrkCtx(r.preCtx,r.varsText,r.disjText);if(0!==t.TAG){var e,n=t._0,o=n.varsErr;if(void 0!==o){var i=a.obj_dup(r);i.varsErr=o,e=i}else e=r;var u=n.disjErr;if(void 0===u)return e;var s=a.obj_dup(e);return s.disjErr=u,s}var f=a.obj_dup(r);return f.wrkCtx=m.some(t._0),f}function lr(r){var t=r.trim();if(0===t.length)return{TAG:0,_0:void 0};var e=t.split(":");return 2!==e.length?{TAG:1,_0:"Cannot parse justification: '"+t+"'. A justification must contain exactly one colon symbol."}:""===f.get(e,1).trim()?{TAG:1,_0:"Cannot parse justification: '"+t+"'. Reference must not be empty."}:{TAG:0,_0:{args:o.getSpaceSeparatedValuesAsArray(f.get(e,0)),label:f.get(e,1).trim()}}}function pr(r){if(l.isSome(r.stmtErr)||0===r.typ)return r;var t=lr(r.jstfText);return 0===t.TAG?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:t._0,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:t._0,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}function mr(r,t,e){return!!N.has(e,r)||c.isHyp(t,r)}function Er(r){var t=r.wrkCtx;if(void 0!==t){var e=m.valFromOption(t),o=r.stmts.length,i=N.make(o),a=E.make(o,c.ExprHash),s={contents:void 0},f=[function(r){return l.isSome(r.stmtErr)?r:0!==r.typ?mr(r.label,e,i)?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"Cannot reuse label '"+r.label+"' [3].",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r:void 0!==c.getTokenType(e,r.label)?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"Cannot reuse label '"+r.label+"' [1].",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:mr(r.label,e,i)?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"Cannot reuse label '"+r.label+"' [2].",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r},function(r){if(l.isSome(r.stmtErr))return r;try{return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:c.ctxSymsToIntsExn(e,F(r.cont)),jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}catch(e){var t=C.internalToOCamlException(e);if(t.RE_EXN_ID===u.MmException)return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:t._1.msg,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr};throw t}},function(r){if(l.isSome(r.stmtErr))return r;var t=r.expr;if(void 0!==t){var n=c.getHypByExpr(e,t);if(void 0!==n)return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"This statement is the same as the previously defined hypothesis - '"+n.label+"'",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr};var o=E.get(a,t);return void 0!==o?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"This statement is the same as the previous one - '"+o+"'",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot validateStmtExpr without expr."},Error:new Error}},function(r){if(l.isSome(r.stmtErr))return r;var t=s.contents;return void 0!==t&&r.isGoal?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:"Cannot re-define the goal. Previously defined goal is the step labeled '"+t+"'",expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r},pr,function(t){var n=r.settings.asrtsToSkip,o=r.frms;if(l.isSome(t.stmtErr))return t;var a=t.jstf;if(void 0===a)return t;var s=a.label,f=a.args,d=f.find((function(r){return!mr(r,e,i)}));if(void 0!==d)return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:"The label '"+d+"' is not defined.",expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr};if(!c.isAsrt(e,s))return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:"The label '"+s+"' doesn't refer to any assertion.",expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr};if(n.includes(s))return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:"The assertion '"+s+"' is skipped by settings.",expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr};var v=x.get(o,s);if(void 0!==v){var p=v.numOfHypsE,m=f.length;if(m===p)return t;var E=1===p?"essential hypothesis":"essential hypotheses",h=1===m?"is":"are";return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:"'"+s+"' assertion expects "+String(p)+" "+E+" but "+String(m)+" "+h+" provided.",expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr}}throw{RE_EXN_ID:u.MmException,_1:{msg:"Could not get frame by label '"+s+"'"},Error:new Error}}];return r.stmts.reduce((function(r,t){if(dr(r))return r;var e=f.reduce((function(r,t){return l.isSome(r.stmtErr)?r:n._1(t,r)}),t);if(N.add(i,e.label),!l.isSome(e.stmtErr)){var o=e.expr;if(void 0===o)throw{RE_EXN_ID:u.MmException,_1:{msg:"Expr must be set in prepareUserStmtsForUnification."},Error:new Error};E.set(a,o,e.label),e.isGoal&&(s.contents=e.label)}return H(r,e.id,(function(r){return e}))}),r)}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot prepareUserStmtsForUnification without wrkCtx."},Error:new Error}}function hr(r){var t=function(r){var t=a.obj_dup(r);return t.stmts=r.stmts.map((function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:void 0,expr:void 0,jstf:void 0,proofTreeDto:void 0,src:void 0,proof:void 0,proofStatus:void 0,unifErr:void 0,syntaxErr:void 0}})),t.disjErr=void 0,t.varsErr=void 0,t}(r);return[fr,vr,Er].reduce((function(r,t){return dr(r)?r:n._1(t,r)}),t)}function gr(r,t){var e=r.wrkCtx;if(void 0!==e){var n=m.valFromOption(e),o=[];if(c.disjForEachArr(t,(function(r){var t=c.ctxIntsToSymsExn(n,r);c.applySingleStmt(n,{TAG:4,vars:t}),o.push(t.join(","))})),0===o.length)return r;var i=o.join("\n"),s=a.obj_dup(r);return s.disjText=[r.disjText,i].join("\n").trim(),s}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot create new disjoints without wrkCtx."},Error:new Error}}function xr(r,t){var e=r.expr;if(void 0!==e)return c.exprEq(e,t.expr);throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot compare steps without expr."},Error:new Error}}function yr(r){var t=r.wrkCtx;if(void 0!==t){var e=m.valFromOption(t),n=N.fromArray(P.arrFlatMap(r.stmts,(function(r){return F(r.cont)})));c.getLocalHyps(e).forEach((function(r){if(0===r.typ&&r.label.startsWith("."))return N.add(n,c.ctxIntToSymExn(e,f.get(r.expr,1)))}));var o,i=c.getLocalVars(e).filter((function(r){return!N.has(n,r)}));if(0===i.length)o=r;else{var a=T.fromArray(c.ctxSymsToIntsExn(e,i));o=sr(r,c.getLocalHyps(e).filter((function(r){return 0===r.typ&&!T.has(a,f.get(r.expr,1))})).map((function(r){return r.label+" "+c.ctxIntToSymExn(e,f.get(r.expr,0))+" "+c.ctxIntToSymExn(e,f.get(r.expr,1))})).join("\n"))}var s=c.disjMake(void 0);c.disjForEach(c.getLocalDisj(e),(function(r,t){if(N.has(n,c.ctxIntToSymExn(e,r))&&N.has(n,c.ctxIntToSymExn(e,t)))return c.disjAddPair(s,r,t)}));var d=c.disjToArr(s).map((function(r){return c.ctxIntsToSymsExn(e,r).join(",")})).join("\n");return o.disjText!==d?nr(o,d):o}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot remove unused variables without wrkCtx."},Error:new Error}}function _r(r,t,e,n){if("number"!=typeof e&&1===e.TAG){var o=e.label,i=e.args,a=c.getFrame(r,o);if(void 0!==a){var d=[],v={contents:!0};return a.hyps.forEach((function(r,e){if(1===r.typ&&v.contents){var a=s.get(i,e);if(void 0===a)throw{RE_EXN_ID:u.MmException,_1:{msg:"Too few arguments for '"+o+"' in srcToJstf."},Error:new Error};var c=E.get(n,f.get(t.nodes,a).expr);void 0!==c?d.push(c.label):v.contents=!1}})),v.contents?{args:d,label:o}:void 0}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot find an assertion '"+o+"' in srcToJstf."},Error:new Error}}}function br(r,t,e){if(void 0===t)return l.flatMap(e,(function(t){return D.get(t,r)}));var n=D.get(m.valFromOption(t),r);return void 0!==n?n:l.flatMap(e,(function(t){return D.get(t,r)}))}function Tr(r,t,e,n){return{id:r.id,parent:r.parent,label:r.label,children:r.children.map((function(r){return 0===r.TAG?{TAG:0,_0:Tr(r._0,t,e)}:{TAG:1,id:r.id,parent:r.parent,sym:r.sym,color:br(r.sym,t,e),isVar:r.isVar}})),height:r.height}}function Sr(r,t){var e=0;S.parenCntReset(t);for(var n=0;n<r.length&&2!==e;)e=S.parenCntPut(t,f.get(r,n)),n=n+1|0;return 0===e}function Ar(r,t,e,n,o,a){if(0===a.TAG)return"Error: only compressed proofs are supported.";var u=function(r,t){var e=r.length;if(e<=50)return[r];for(var n=[],o=i.ceil_int(e/50),a=1;a<=o;++a){var u=Math.imul(a-1|0,50);n.push(r.substr(u,50))}return n}(a.compressedProofBlock).join(" "),s=o.label+" $p "+F(o.cont).join(" ")+" $= ( "+a.labels.join(" ")+" ) "+u+" $.",d=0===n.trim().length,v=t.length>0||!c.disjIsEmpty(e)||!d,l=[];v&&l.push("${");var p=t.filter((function(r){return 0===r.typ})).map((function(t){return c.ctxIntToSymExn(r,f.get(t.expr,1))}));return p.length>0&&l.push("$v "+p.join(" ")+" $."),t.forEach((function(t){0!==t.typ||l.push(t.label+" $f "+c.ctxIntsToStrExn(r,t.expr)+" $.")})),c.disjForEachArr(e,(function(t){l.push("$d "+c.ctxIntsToStrExn(r,t)+" $.")})),t.forEach((function(t){1!==t.typ||l.push(t.label+" $e "+c.ctxIntsToStrExn(r,t.expr)+" $.")})),d||l.push("$( "+n+" $)"),l.push(s),v&&l.push("$}"),l.join("\r\n")}function kr(r,t,e){return r.stmts.reduce((function(r,n){if(0!==r.TAG)return r;var o=r._0;if(0===n.typ)return{TAG:0,_0:o};var i=lr(n.jstfText);if(0!==i.TAG)return{TAG:1,_0:"Cannot parse justification '"+n.jstfText+"' for the step '"+n.label+"'"};var a=i._0;if(void 0===a)return{TAG:0,_0:o};if(!a.args.includes(t))return{TAG:0,_0:o};var u={args:a.args.map((function(r){return r===t?e:r})),label:a.label};return{TAG:0,_0:H(o,n.id,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:G.jstfToStr(u),jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}))}}),{TAG:0,_0:r})}var Mr=/[\s:]+/g;function wr(r,t,e){var n=e.replace(Mr,"");if(""===n)return{TAG:1,_0:"label must not be empty."};var o=r.stmts.find((function(r){return r.id!==t&&r.label===n}));if(void 0!==o)return{TAG:1,_0:"label '"+n+"' is used by another step."};var i=W(r,t);if(void 0===i)return{TAG:0,_0:r};if(i.label===n)return{TAG:0,_0:r};var a=kr(r,i.label,n);return 0===a.TAG?{TAG:0,_0:H(a._0,t,(function(r){return{id:r.id,label:n,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}))}:{TAG:1,_0:a._0}}function jr(r){var t=[];return w.traverseTree(void 0,{TAG:0,_0:r},(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(r,e){0!==e.TAG&&t.push(e.id)}),void 0,void 0),p.fromArray(t)}function Ir(r){var t=r.clickedNodeId;if(void 0===t)return[-1,void 0];var e=_.getNodeById(r.root,t);if(void 0===e)return[-1,void 0];if(0===e.TAG)return[-1,void 0];var n=e.parent;if(0===r.expLvl)return e.isVar?[t,p.fromArray([t])]:[t,jr(n)];for(var o=n,i=r.expLvl;i>0&&l.isSome(o);)i=i-1|0,o=l.getExn(o).parent;return void 0!==o?[t,jr(o)]:[t,jr(r.root)]}function Gr(r){var t=Ir(r);return p.size(t[1])}function Dr(r){return 0===r.TAG?[-1,void 0]:Ir(r._0)}function Nr(r){if(0!==r.TAG){var t=Dr(r)[1];if(!p.isEmpty(t)){var e=[];return w.traverseTree(void 0,{TAG:0,_0:r._0.root},(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(r,n){0!==n.TAG&&p.has(t,n.id)&&e.push(n.sym)}),void 0,void 0),e}}}function Ur(r){return{exprTyp:r.exprTyp,root:r.root,clickedNodeId:r.clickedNodeId,expLvl:Math.min(r.expLvl+1|0,r.root.height)}}function Cr(r){return{exprTyp:r.exprTyp,root:r.root,clickedNodeId:r.clickedNodeId,expLvl:Math.max(r.expLvl-1|0,0)}}var Pr=/^\d+$/;t.defaultJstfForHyp=or,t.contIsEmpty=function(r){return 0===r.TAG?0===r._0.length:_.syntaxTreeIsEmpty(r._0.root)},t.contToArrStr=F,t.contToStr=function(r){return F(r).join(" ")},t.strToCont=L,t.userStmtTypeFromStr=function(r){switch(r){case"e":return 0;case"p":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert '"+r+"' to userStmtType"},Error:new Error}}},t.userStmtTypeToStr=function(r){return r?"p":"e"},t.readInstrToStr=function(r){switch(r){case 0:return"ReadAll";case 1:return"StopBefore";case 2:return"StopAfter"}},t.readInstrFromStr=function(r){switch(r){case"ReadAll":return 0;case"StopAfter":return 2;case"StopBefore":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert string '"+r+"' to a readInstr."},Error:new Error}}},t.mmFileSourceTypeToStr=function(r){return r?"Web":"Local"},t.mmFileSourceTypeFromStr=function(r){switch(r){case"Local":return 0;case"Web":return 1;default:throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert string '"+r+"' to an mmFileSourceType."},Error:new Error}}},t.mmFileSourceTypeFromStrOpt=function(r){switch(r){case"Local":return 0;case"Web":return 1;default:return}},t.createEmptyUserStmt=X,t.userStmtToRootStmt=B,t.updateStmt=H,t.isStmtChecked=function(r,t){return r.checkedStmtIds.includes(t)},t.toggleStmtChecked=$,t.checkAllStmts=function(r){var t=a.obj_dup(r);return t.checkedStmtIds=r.stmts.map((function(r){return r.id})),t},t.uncheckAllStmts=K,t.deleteCheckedStmts=function(r){var t=a.obj_dup(r);return t.checkedStmtIds=[],t.stmts=r.stmts.filter((function(t){return!r.checkedStmtIds.includes(t.id)})),t},t.deleteStmt=J,t.canMoveCheckedStmts=Z,t.moveCheckedStmts=function(r,t){if(!Z(r,t))return r;var e=r.stmts.length,n=r.stmts.slice();if(t){for(var o=e-2|0,i=0;i<=o;++i)if(!r.checkedStmtIds.includes(f.get(n,i).id)&&r.checkedStmtIds.includes(f.get(n,i+1|0).id)){var u=f.get(n,i);f.set(n,i,f.get(n,i+1|0)),f.set(n,i+1|0,u)}}else for(var s=e-1|0;s>=1;--s)if(r.checkedStmtIds.includes(f.get(n,s-1|0).id)&&!r.checkedStmtIds.includes(f.get(n,s).id)){var c=f.get(n,s);f.set(n,s,f.get(n,s-1|0)),f.set(n,s-1|0,c)}var d=a.obj_dup(r);return d.stmts=n,d},t.getRootStmtsForUnification=function(r){for(var t=!1,e=[],n=0,o=r.stmts.length;n<o&&!t;){var i=f.get(r.stmts,n);e.push(i),t=r.checkedStmtIds.includes(i.id),n=n+1|0}return e},t.addNewStmt=rr,t.isSingleStmtChecked=tr,t.duplicateCheckedStmt=function(r){if(!tr(r))return r;var t=String(r.nextStmtId),e=Y(r,O),n=f.get(r.checkedStmtIds,0),o=a.obj_dup(r);return o.checkedStmtIds=[t],o.stmts=s.concatMany(r.stmts.map((function(r){return r.id===n?[r,{id:t,label:e,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:!1,cont:r.cont,contEditMode:r.contEditMode,jstfText:"",jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}]:[r]}))),o.nextStmtId=r.nextStmtId+1|0,o},t.canGoEditModeForStmt=er,t.setDescrEditMode=function(r){var t=a.obj_dup(r);return t.descrEditMode=!0,t},t.completeDescrEditMode=function(r,t){var e=a.obj_dup(r);return e.descrEditMode=!1,e.descr=t,e},t.setVarsEditMode=function(r){var t=a.obj_dup(r);return t.varsEditMode=!0,t},t.completeVarsEditMode=sr,t.setDisjEditMode=function(r){var t=a.obj_dup(r);return t.disjEditMode=!0,t},t.completeDisjEditMode=nr,t.setLabelEditMode=function(r,t){return er(r,t)?H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:!0,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})):r},t.completeLabelEditMode=function(r,t,e){return H(r,t,(function(r){return""!==e.trim()?{id:r.id,label:e,labelEditMode:!1,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r}))},t.setContEditMode=function(r,t){return er(r,t)?H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:!0,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})):r},t.completeContEditMode=function(r,t,e){return H(r,t,(function(t){return""===e.trim()?t:{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:L(e,m.some(r.preCtxColors),m.some(r.wrkCtxColors)),contEditMode:!1,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr}}))},t.setStmtCont=function(r,t,e){return H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:e,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}))},t.setTypEditMode=function(r,t){return er(r,t)?H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:!0,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})):r},t.completeTypEditMode=function(r,t,e,n){return H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:e,typEditMode:!1,isGoal:!!e&&n,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}))},t.setJstfEditMode=function(r,t){return er(r,t)?H(r,t,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:!0,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})):r},t.completeJstfEditMode=function(r,t,e){return H(r,t,(function(n){var o=e.trim().toLocaleUpperCase(),i=o===or?0:1,a=o===or?"":e.trim(),u=r.stmts.reduce((function(r,e){var n=e.id===t?i:e.typ;return e.id!==t&&1===n?r+1|0:r}),0),s=0!==i&&0===u,f=s&&!n.isGoal&&r.settings.defaultStmtLabel.length>0?r.settings.defaultStmtLabel:n.label;return{id:n.id,label:f,labelEditMode:n.labelEditMode,typ:i,typEditMode:n.typEditMode,isGoal:s,cont:n.cont,contEditMode:n.contEditMode,jstfText:a,jstfEditMode:!1,stmtErr:n.stmtErr,expr:n.expr,jstf:n.jstf,proofTreeDto:n.proofTreeDto,src:n.src,proof:n.proof,proofStatus:n.proofStatus,unifErr:n.unifErr,syntaxErr:n.syntaxErr}}))},t.incUnifyAllIsRequiredCnt=function(r){var t=a.obj_dup(r);return t.unifyAllIsRequiredCnt=r.unifyAllIsRequiredCnt+1|0,t},t.setPreCtxData=function(r,t){for(var e=c.ctxOptimizeForProver(t.ctxV.val),n=t.settingsV.val,o=k.prepareParenInts(e,n.parens),i=o.length/2|0,u=D.make(i),s=0;s<i;++s)D.set(u,c.ctxIntToSymExn(e,f.get(o,s<<1)),c.ctxIntToSymExn(e,f.get(o,1+(s<<1)|0)));var d=a.obj_dup(r);return d.parensMap=u,d.syntaxTypes=t.syntaxTypes,d.parenCnt=t.parenCnt,d.frms=t.frms,d.preCtx=e,d.preCtxV=t.ctxV.ver,d.srcs=t.srcs,d.settings=n,d.settingsV=t.settingsV.ver,ur(ar(function(r){var t=a.obj_dup(r);return t.preCtxColors=ir(r.preCtx,r.typeColors),t}(function(r){var t=a.obj_dup(r);return t.typeColors=M.settingsGetTypeColors(r.settings),t}(d))))},t.editorStateHasErrors=dr,t.prepareEditorForUnification=hr,t.addNewStatements=function(r,t){var e=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=m.valFromOption(e),o=t.length;if(0===o)return[r,[]];var i=x.fromArray(r.settings.typeSettings.map((function(r){return[r.typ,r.prefix]}))),s=c.generateNewVarNames(n,t,i,void 0,void 0),d=c.generateNewLabels(n,"var",o,void 0,void 0,void 0);c.applySingleStmt(n,{TAG:3,symbols:s});var v=c.ctxIntsToSymsExn(n,t);d.forEach((function(r,t){c.applySingleStmt(n,{TAG:5,label:r,expr:[f.get(v,t),f.get(s,t)]})}));var l=c.ctxSymsToIntsExn(n,s),p=d.map((function(r,t){return r+" "+f.get(v,t)+" "+f.get(s,t)})).join("\n"),E=a.obj_dup(r);return E.varsText=[r.varsText,p].join("\n").trim(),[ar(E),l]}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot create new variables without wrkCtx."},Error:new Error}}(r,t.newVarTypes),n=e[1],o=U.make(void 0);t.newVars.forEach((function(r,t){U.set(o,r,f.get(n,t))}));var i=function(r,t){return{newVars:r.newVars,newVarTypes:r.newVarTypes,newDisj:r.newDisj,newDisjStr:r.newDisjStr,stmts:r.stmts.map((function(r){return{label:r.label,expr:r.expr.map((function(r){return U.getWithDefault(t,r,r)})),exprStr:r.exprStr,jstf:r.jstf,isProved:r.isProved}}))}}(t,o),s=c.disjMake(void 0);c.disjForEach(i.newDisj,(function(r,t){c.disjAddPair(s,U.getWithDefault(o,r,r),U.getWithDefault(o,t,t))}));var d=gr(e[0],s),v=Q(d),p=V.make(void 0),E=function(r){return{args:r.args.map((function(r){return V.getWithDefault(p,r,r)})),label:r.label}},h=i.stmts.some((function(r){return d.stmts.some((function(t){return xr(t,r)}))})),g=l.isSome(v)&&!h,y={contents:d};return i.stmts.forEach((function(r){if(l.isSome(v)&&xr(l.getExn(v),r)){var t=l.getExn(v);return y.contents=H(y.contents,t.id,(function(t){var e=r.jstf;return{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:void 0!==e?G.jstfToStr(E(e)):t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr}})),V.set(p,r.label,t.label)}var e=function(r,t,e,n,o){var i=r.wrkCtx;if(void 0!==i){var s,d,v=m.valFromOption(i),p=c.getHypByExpr(v,t);if(void 0!==p)return[r,p.label];if(void 0!==n){var E=r.stmts.findIndex((function(r){return r.id===n}));s=-1!==E?E:r.stmts.length}else s=r.stmts.length;if(void 0!==e){var h=N.fromArray(e.args),g=r.stmts.reduce((function(r,t,e){return N.isEmpty(h)?r:(N.remove(h,t.label),e+1|0)}),0);d=s<g?s:g}else d=0;var x=function(r,n){var i;if(void 0!==n){var u=function(r,t){return r.stmts.findIndex((function(r){return r.id===t}))}(r,n.id)+1|0;i=d<=u&&u<=s?u:d}else i=o?s:d;var p=function(r,t){var e=r.checkedStmtIds,n=K(r),o=rr(0<=t&&t<n.stmts.length?$(n,f.get(n.stmts,t).id):n),i=a.obj_dup(o[0]);return i.checkedStmtIds=e,[i,o[1]]}(r,i),E=p[1],h=p[0],g=H(h,E,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:1,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:L(c.ctxIntsToStrExn(v,t),m.some(h.preCtxColors),m.some(h.wrkCtxColors)),contEditMode:!1,jstfText:l.mapWithDefault(e,"",G.jstfToStr),jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:t,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}));return[g,q(g,E).label]},y=function(r,t){return m.undefined_to_opt(r.stmts.find((function(r){var e=r.expr;if(void 0!==e)return c.exprEq(e,t);throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot getUserStmtByExpr without stmt.expr."},Error:new Error}})))}(r,t);if(void 0===y)return x(r,void 0);if(0===y.typ)return[r,y.label];var _=lr(y.jstfText);if(0!==_.TAG)return x(r,y);var b=_._0;return void 0!==b?function(r){return void 0!==e&&G.jstfEq(r,e)}(b)?[r,y.label]:x(r,y):[void 0!==e?H(r,y.id,(function(r){return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:G.jstfToStr(e),jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})):r,y.label]}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot insertStmt without wrkCtx."},Error:new Error}}(y.contents,r.expr,l.map(r.jstf,E),l.map(v,(function(r){return r.id})),g);y.contents=e[0],V.set(p,r.label,e[1])})),y.contents},t.findPossibleSubs=function(r,t,e){var n=r.wrkCtx;if(void 0!==n){var o=m.valFromOption(n),i=f.get(c.generateNewLabels(o,"temp-ax-",1,void 0,void 0,void 0),0),a=c.createFrame(o,0,!1,i,c.ctxIntsToSymsExn(o,t),void 0,void 0,!0,!0,void 0),p=A.prepareFrmSubsDataForFrame(a),E=c.getAllDisj(o),h=[];return A.iterateSubstitutions(a.asrt,e,f.get(p.frmConstParts,p.numOfHypsE),f.get(p.constParts,p.numOfHypsE),f.get(p.varGroups,p.numOfHypsE),p.subs,r.parenCnt,(function(t){var e=function(r,t,e){for(var n=function(r){var n=s.get(t.frameVarToSymb,r);if(void 0!==n)return c.ctxSymToIntExn(e,n);throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot convert frameVar to ctxVar."},Error:new Error}},o=b.fromArray(s.range(0,t.numOfVars-1|0).map((function(t){return[n(t),A.applySubs([t],r,(function(r){throw{RE_EXN_ID:u.MmException,_1:{msg:"Work variables are not supported in convertSubsToWrkSubs()."},Error:new Error}}))]}))),i=c.getNumOfVars(e)-1|0,a=0;a<=i;++a)b.has(o,a)||b.set(o,a,[a]);return{newDisj:c.disjMake(void 0),subs:v.fromArray(b.toArray(o)),err:void 0}}(t,a,o);return function(r,t){var e=b.make(v.size(r.subs)),n=function(t){var n=b.get(e,t);if(void 0!==n)return n;var o=v.get(r.subs,t);return b.set(e,t,void 0!==o?o.filter((function(r){return r>=0})):[]),l.getExn(b.get(e,t))};c.disjForEach(t,(function(e,o){l.isNone(r.err)&&n(e).forEach((function(i){l.isNone(r.err)&&n(o).forEach((function(n){if(l.isNone(r.err))return i===n&&(r.err={TAG:0,var1:e,var2:o,commonVar:i}),l.isNone(r.err)&&!c.disjContains(t,i,n)?c.disjAddPair(r.newDisj,i,n):void 0}))}))}))}(e,E),l.isNone(e.err)&&function(r,t,e,n){var o=v.toArray(n.subs),i=o.map((function(r){return[c.getTypeOfVarExn(t,r[0])].concat(r[1])})),a=d.proveFloatings(t,e,i,r);o.forEach((function(r,t){if(l.isNone(n.err)){var e=f.get(i,t);l.isNone(g.pnGetProof(g.ptGetNode(a,e)))&&(n.err={TAG:1,var:r[0],subsExpr:r[1],typeExpr:e})}}))}(r.parenCnt,o,r.frms,e),h.push(e),0})),h}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot search for substitutions without wrkCtx."},Error:new Error}},t.applySubstitutionForEditor=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=m.valFromOption(e),o=gr(r,t.newDisj),i=a.obj_dup(o);return i.stmts=o.stmts.map((function(r){var e=function(r,t){var e={contents:0};r.forEach((function(r){if(r<0)e.contents=e.contents+1|0;else{var n=v.get(t.subs,r);if(void 0===n)throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot find a substitution for "+String(r)+" in applyWrkSubs."},Error:new Error};e.contents=e.contents+n.length|0}}));for(var n=new Array(e.contents),o=0,i=0;i<e.contents;){var a=f.get(r,o);if(a<0)f.set(n,i,a),i=i+1|0;else{var s=v.getExn(t.subs,a),c=s.length;P.copySubArray(s,0,n,i,c),i=i+c|0}o=o+1|0}return n}(c.ctxSymsToIntsExn(n,F(r.cont)),t);return{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:L(c.ctxIntsToStrExn(n,e),m.some(o.preCtxColors),m.some(o.wrkCtxColors)),contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:r.proofTreeDto,src:r.src,proof:r.proof,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}})),i}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot apply substitution without wrkCtx."},Error:new Error}},t.removeUnusedVars=yr,t.applyUnifyAllResults=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=m.valFromOption(e),o=E.fromArray(t.nodes.map((function(r){return[r.expr,r]})),c.ExprHash),i=E.fromArray(r.stmts.map((function(r){var t=r.expr;if(void 0!==t)return[t,r];throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without stmt.expr [1]."},Error:new Error}})),c.ExprHash),a=E.fromArray(t.syntaxProofs,c.ExprHash);return r.stmts.reduce((function(r,e){var s=e.id;return e.label,e.labelEditMode,e.typ,e.typEditMode,e.isGoal,e.cont,e.contEditMode,e.jstfText,e.jstfEditMode,e.stmtErr,e.expr,e.jstf,e.proofTreeDto,e.src,e.unifErr,e.syntaxErr,H(r,s,(function(e){var s=e.expr;if(void 0!==s){var d=function(r,t,e,n,o,i){var a=t.cont;if(0!==a.TAG)return t;var u=E.get(o,e.slice(1)),s=void 0!==u?_.buildSyntaxTreeFromProofTreeDto(n,i,u.expr):void 0;return void 0!==s?0===s.TAG?{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:{TAG:1,_0:{exprTyp:f.get(a._0,0).sym,root:Tr(s._0,m.some(r.preCtxColors),m.some(r.wrkCtxColors)),clickedNodeId:void 0,expLvl:0}},contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:t.syntaxErr}:{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:s._0}:r.settings.checkSyntax?{id:t.id,label:t.label,labelEditMode:t.labelEditMode,typ:t.typ,typEditMode:t.typEditMode,isGoal:t.isGoal,cont:t.cont,contEditMode:t.contEditMode,jstfText:t.jstfText,jstfEditMode:t.jstfEditMode,stmtErr:t.stmtErr,expr:t.expr,jstf:t.jstf,proofTreeDto:t.proofTreeDto,src:t.src,proof:t.proof,proofStatus:t.proofStatus,unifErr:t.unifErr,syntaxErr:Sr(e,r.parenCnt)?"":"parentheses mismatch"}:t}(r,e,s,n,a,t);if(1!==d.typ)return d;var v=E.get(o,s);if(void 0!==v){var p=function(r,t,e,n,o){var i,a=n.proof;if(void 0!==a){var u=_r(t,e,a,o);if(void 0!==u){var s=r.jstf;i=void 0!==s?G.jstfEq(u,s)?{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:r.jstfText,jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:e,src:r.src,proof:n,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}:r:{id:r.id,label:r.label,labelEditMode:r.labelEditMode,typ:r.typ,typEditMode:r.typEditMode,isGoal:r.isGoal,cont:r.cont,contEditMode:r.contEditMode,jstfText:G.jstfToStr(u),jstfEditMode:r.jstfEditMode,stmtErr:r.stmtErr,expr:r.expr,jstf:r.jstf,proofTreeDto:e,src:r.src,proof:n,proofStatus:r.proofStatus,unifErr:r.unifErr,syntaxErr:r.syntaxErr}}else i=r}else i=r;return{id:i.id,label:i.label,labelEditMode:i.labelEditMode,typ:i.typ,typEditMode:i.typEditMode,isGoal:i.isGoal,cont:i.cont,contEditMode:i.contEditMode,jstfText:i.jstfText,jstfEditMode:i.jstfEditMode,stmtErr:i.stmtErr,expr:i.expr,jstf:i.jstf,proofTreeDto:e,src:i.src,proof:i.proof,proofStatus:i.proofStatus,unifErr:i.unifErr,syntaxErr:i.syntaxErr}}(d,n,t,v,i),h=p.proof;if(void 0!==h)return{id:p.id,label:p.label,labelEditMode:p.labelEditMode,typ:p.typ,typEditMode:p.typEditMode,isGoal:p.isGoal,cont:p.cont,contEditMode:p.contEditMode,jstfText:p.jstfText,jstfEditMode:p.jstfEditMode,stmtErr:p.stmtErr,expr:p.expr,jstf:p.jstf,proofTreeDto:p.proofTreeDto,src:h.proof,proof:p.proof,proofStatus:0,unifErr:p.unifErr,syntaxErr:p.syntaxErr};var g=p.jstf;if(void 0===g)return{id:p.id,label:p.label,labelEditMode:p.labelEditMode,typ:p.typ,typEditMode:p.typEditMode,isGoal:p.isGoal,cont:p.cont,contEditMode:p.contEditMode,jstfText:p.jstfText,jstfEditMode:p.jstfEditMode,stmtErr:p.stmtErr,expr:p.expr,jstf:p.jstf,proofTreeDto:p.proofTreeDto,src:p.src,proof:p.proof,proofStatus:2,unifErr:p.unifErr,syntaxErr:p.syntaxErr};var x=v.parents.find((function(r){var e=_r(n,t,r,i);return void 0!==e&&G.jstfEq(g,e)}));if(void 0!==x)return{id:p.id,label:p.label,labelEditMode:p.labelEditMode,typ:p.typ,typEditMode:p.typEditMode,isGoal:p.isGoal,cont:p.cont,contEditMode:p.contEditMode,jstfText:p.jstfText,jstfEditMode:p.jstfEditMode,stmtErr:p.stmtErr,expr:p.expr,jstf:p.jstf,proofTreeDto:p.proofTreeDto,src:x,proof:p.proof,proofStatus:1,unifErr:p.unifErr,syntaxErr:p.syntaxErr};var y,b=v.parents.map((function(r){return"number"==typeof r||2!==r.TAG?void 0:[r.label,r.err]})).filter(l.isSome).map(l.getExn);if(1!==b.length)y=void 0;else{var T=b[0],S=T[0];y=R.unifErrToStr(T[1],(function(r){return c.ctxIntsToStrExn(n,r)}),(function(r){return c.frmIntsToStrExn(n,c.getFrameExn(n,S),r)}))}return{id:p.id,label:p.label,labelEditMode:p.labelEditMode,typ:p.typ,typEditMode:p.typEditMode,isGoal:p.isGoal,cont:p.cont,contEditMode:p.contEditMode,jstfText:p.jstfText,jstfEditMode:p.jstfEditMode,stmtErr:p.stmtErr,expr:p.expr,jstf:p.jstf,proofTreeDto:p.proofTreeDto,src:p.src,proof:p.proof,proofStatus:3,unifErr:l.orElse(p.unifErr,y),syntaxErr:p.syntaxErr}}throw{RE_EXN_ID:u.MmException,_1:{msg:"exprToNode->Belt_HashMap.get(expr) is None"},Error:new Error}}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without stmt.expr [2]."},Error:new Error}}))}),r)}throw{RE_EXN_ID:u.MmException,_1:{msg:"Cannot applyUnifyAllResults without wrkCtx."},Error:new Error}},t.updateEditorStateWithPostupdateActions=function(r,t){var e=hr(n._1(t,r));return l.isSome(e.wrkCtx)?hr(yr(e)):e},t.generateCompressedProof=function(r,t){var e=r.wrkCtx;if(void 0!==e){var n=m.valFromOption(e),o=W(r,t);if(void 0!==o){var i=o.proofTreeDto;if(void 0!==i){var a=o.proof;if(void 0!==a){var s=r.preCtx,v=B(o).expr,p=j.createProofTable(i,a,void 0,void 0,void 0),E=j.createProofTable(i,a,!0,m.some(n),void 0),g=h.fromArray(p.map((function(r){return r.expr})),c.ExprHash),x=r.stmts.map(B),_=d.createProofCtx(n,x.filter((function(r){return!!r.isHyp&&h.has(g,r.expr)}))),b=c.getMandHyps(_,v),S=y.createProof(b,p,p.length-1|0),A=[];b.forEach((function(r){l.isNone(c.getHypByExpr(s,r.expr))&&A.push(r)}));var k=T.make(16);h.forEach(g,(function(r){r.forEach((function(r){if(r>=0)return T.add(k,r)}))}));var M=T.fromArray(b.map((function(r){return f.get(r.expr,1)})));c.getLocalHyps(n).forEach((function(r){if(0===r.typ){var t=f.get(r.expr,1);!T.has(k,t)||T.has(M,t)||A.push(r)}}));var w=c.disjMake(void 0);return I.verifyProof(_,v,S,(function(r,t){if(!c.isDisj(n,r,t))throw{RE_EXN_ID:u.MmException,_1:{msg:"!(wrkCtx->isDisj(n,m))"},Error:new Error};return c.isDisj(s,r,t)||c.disjAddPair(w,r,t),!0})),[Ar(n,A,w,r.descr,o,S),y.proofTableToStr(n,p,o.label),y.proofTableToStr(n,E,o.label)]}}}}},t.updateColorsInAllStmts=ur,t.getTheOnlyCheckedStmt=function(r){return 1!==r.checkedStmtIds.length?void 0:Q(r)},t.editorGetStmtById=W,t.editorGetStmtByIdExn=q,t.getAllExprsToSyntaxCheck=function(r,t){var e=[];return r.stmts.forEach((function(r,n){0===r.cont.TAG&&e.push(f.get(t,n).expr.slice(1))})),e},t.mergeStmts=function(r,t,e){var n=W(r,t);if(void 0===n)return{TAG:1,_0:"Cannot find a step with id = '"+t+"'"};var o=W(r,e);if(void 0===o)return{TAG:1,_0:"Cannot find a step with id = '"+e+"'"};if(F(n.cont).join(" ")!==F(o.cont).join(" "))return{TAG:1,_0:"Steps to merge must have identical expressions."};var i=kr(r,o.label,n.label);return 0!==i.TAG?{TAG:1,_0:i._0}:{TAG:0,_0:J(i._0,e)}},t.renameStmt=wr,t.findStmtsToMerge=function(r){if(1!==r.checkedStmtIds.length)return{TAG:1,_0:"One step should be selected [2]."};var t=W(r,f.get(r.checkedStmtIds,0));if(void 0===t)return{TAG:1,_0:"One step should be selected [1]."};var e=F(t.cont).join(" "),n=r.stmts.find((function(r){return r.id!==t.id&&F(r.cont).join(" ")===e}));return void 0!==n?{TAG:0,_0:[t,n]}:{TAG:1,_0:"Cannot find another step to merge with."}},t.parseJstf=lr,t.getIdsOfSelectedNodes=Dr,t.hasSelectedText=function(r){return 0!==r.TAG&&void 0!==r._0.clickedNodeId},t.getSelectedText=function(r){return l.map(Nr(r),(function(r){return r.join(" ")}))},t.getNodeIdBySymIdx=function(r,t){return w.traverseTree({contents:0},{TAG:0,_0:t},(function(r,t){if(0===t.TAG)return t._0.children}),void 0,(function(t,e){if(0!==e.TAG)return t.contents=t.contents+1|0,t.contents===r?e.id:void 0}),void 0,void 0)[1]},t.incExpLvl=Ur,t.decExpLvl=Cr,t.getNumberOfSelectedSymbols=Gr,t.getSelectedSymbols=Nr,t.updateExpLevel=function(r,t){for(var e=t?Ur:Cr,o=r,i=Gr(o),a=n._1(e,o),u=Gr(a);i===u&&(t&&a.expLvl<a.root.height||!t&&a.expLvl>0);)i=Gr(o=a),u=Gr(a=n._1(e,o));return a},t.addColorsToSyntaxTree=Tr,t.getColorForSymbol=br,t.createSymbolColors=ir,t.renumberSteps=function(r){var t=hr(r);if(dr(t))return{TAG:1,_0:"Cannot perform renumbering because there is an error in the editor content. Please resolve the error before renumbering."};var e=t.stmts.filter((function(r){if(1===r.typ){var t=r.label;return l.isSome(m.null_to_opt(t.match(Pr)))}return!1})).map((function(r){return r.id})),n=N.fromArray(e),o=t.stmts.reduce((function(r,t){if(0!==r.TAG)return r;var e=r._0;return N.has(n,t.id)?wr(e,t.id,"###tmp###"+t.label):{TAG:0,_0:e}}),{TAG:0,_0:t}),i=e.reduce((function(r,t){if(0!==r.TAG)return r;var e=r._0;return wr(e,t,Y(e,""))}),o);if(0!==i.TAG)return i;var a=hr(i._0);return dr(a)?{TAG:1,_0:"Cannot renumber steps: there was an internal error during renumbering."}:{TAG:0,_0:a}}},3350:function(r,t,e){var n=e(1386),o=e(2971),i=e(1748),a=e(3942),u=e(1094),s=e(303),f=e(5082),c=e(8887),d=e(140),v=e(4125),l="MM_wrk_search_asrt";function p(r,t){for(var e=t.length,n=r.asrt.length,o=0,a=0;o<e&&a<n;)(i.get(r.asrt,a)<0&&i.get(r.asrt,a)===i.get(t,o)||i.get(r.asrt,a)>=0&&i.get(r.varTypes,i.get(r.asrt,a))===i.get(t,o))&&(o=o+1|0),a=a+1|0;return o===e}function m(r,t,e,n,c,d,l){var m=v.progressTrackerMake(.01,void 0,d,void 0,void 0),E={contents:0},h=f.size(t),g=[];return f.valuesToArray(t).sort((function(r,t){return r.frame.ord-t.frame.ord|0})).forEach((function(t){var f=t.frame;if(f.label.toLowerCase().includes(e)&&i.get(f.asrt,0)===n&&p(f,c)){var d=a.disjMake(void 0);u.forEach(f.disj,(function(r,t){s.forEach(t,(function(t){a.disjAddPair(d,r,t)}))}));var l=[];a.disjForEachArr(d,(function(t){l.push(a.frmIntsToStrExn(r,f,t))}));var x=[],y=[];f.hyps.forEach((function(t){if(1===t.typ){var e=t.label;y.push(e),x.push({label:e,expr:t.expr,exprStr:a.frmIntsToStrExn(r,f,t.expr),jstf:void 0,isProved:!1})}})),x.push({label:f.label,expr:f.asrt,exprStr:a.frmIntsToStrExn(r,f,f.asrt),jstf:{args:y,label:f.label},isProved:!1}),g.push({newVars:o.range(0,f.numOfVars-1|0),newVarTypes:f.varTypes,newDisj:d,newDisjStr:l,stmts:x})}E.contents=E.contents+1,v.progressTrackerSetCurrPct(m,E.contents/h)})),g}t.procName=l,t.doSearchAssertions=m,t.searchAssertions=function(r,t,e,o,i,a,u,s,f,v){return d.promise((function(d){c.beginWorkerInteractionUsingCtx(r,t,e,o,i,a,l,{label:u.toLowerCase(),typ:s,pattern:f},(function(r,t,e){if(0===r.TAG)return n._1(v,r._0);n._1(e,void 0),n._1(d,r.found)}),!1,void 0)}))},t.processOnWorkerSide=function(r,t){var e=m(c.getWrkCtxExn(void 0),c.getWrkFrmsExn(void 0),r.label,r.typ,r.pattern,(function(r){n._1(t,{TAG:0,_0:r})}));n._1(t,{TAG:1,found:e})},t.frameMatchesPattern=p,t.reqToStr=function(r){return'FindAssertions(label="'+r.label+'", typ='+String(r.typ)+", pattern=["+r.pattern.map((function(r){return String(r)})).join(", ")+"])"},t.respToStr=function(r){return 0===r.TAG?"OnProgress(pct="+String(r._0)+")":"SearchResult"}},7712:function(r,t,e){var n=e(6517),o=e(7175),i=e(2275);t.markUrlAsTrusted=function(r,t){return n.isSome(o.undefined_to_opt(r.webSrcSettings.find((function(r){return r.url===t}))))?{parens:r.parens,asrtsToSkip:r.asrtsToSkip,asrtsToSkipRegex:r.asrtsToSkipRegex,editStmtsByLeftClick:r.editStmtsByLeftClick,defaultStmtType:r.defaultStmtType,defaultStmtLabel:r.defaultStmtLabel,initStmtIsGoal:r.initStmtIsGoal,checkSyntax:r.checkSyntax,stickGoalToBottom:r.stickGoalToBottom,typeSettings:r.typeSettings,webSrcSettings:r.webSrcSettings.map((function(r){return r.url===t?{alias:r.alias,url:r.url,trusted:!0}:r})),longClickEnabled:r.longClickEnabled,longClickDelayMs:r.longClickDelayMs,hideContextSelector:r.hideContextSelector,showVisByDefault:r.showVisByDefault}:{parens:r.parens,asrtsToSkip:r.asrtsToSkip,asrtsToSkipRegex:r.asrtsToSkipRegex,editStmtsByLeftClick:r.editStmtsByLeftClick,defaultStmtType:r.defaultStmtType,defaultStmtLabel:r.defaultStmtLabel,initStmtIsGoal:r.initStmtIsGoal,checkSyntax:r.checkSyntax,stickGoalToBottom:r.stickGoalToBottom,typeSettings:r.typeSettings,webSrcSettings:r.webSrcSettings.concat([{alias:"",url:t,trusted:!0}]),longClickEnabled:r.longClickEnabled,longClickDelayMs:r.longClickDelayMs,hideContextSelector:r.hideContextSelector,showVisByDefault:r.showVisByDefault}},t.settingsGetTypeColors=function(r){return i.fromArray(r.typeSettings.map((function(r){return[r.typ,r.color]})))}},2500:function(r,t,e){var n=e(1386),o=e(8371),i=e(1748),a=e(3942),u=e(2694),s=e(6517),f=e(7175),c=e(2815),d=e(9775),v=e(7356),l=e(8887),p=e(1611),m=e(3021),E=e(8615),h=e(140),g="MM_wrk_unify";t.procName=g,t.unify=function(r,t,e,o,i,a,u,s,f,c,d,v){return h.promise((function(p){l.beginWorkerInteractionUsingCtx(r,t,e,o,i,a,g,{rootStmts:u,bottomUpProverParams:s,syntaxTypes:f,exprsToSyntaxCheck:c,debugLevel:d},(function(r,t,e){if(0===r.TAG)return n._1(v,r._0);n._1(e,void 0),n._1(p,r._0)}),!1,void 0)}))},t.processOnWorkerSide=function(r,t){var e=r.rootStmts,o=u.unifyAll(l.getWrkCtxExn(void 0),l.getWrkFrmsExn(void 0),e,l.getWrkParenCntExn(void 0),r.bottomUpProverParams,r.syntaxTypes,r.exprsToSyntaxCheck,r.debugLevel,(function(r){n._1(t,{TAG:0,_0:r})}),void 0);n._1(t,{TAG:1,_0:m.proofTreeToDto(o,e.map((function(r){return r.expr})))})},t.proofTreeDtoToNewStmtsDto=function(r,t,e,n,u,l){var m=v.fromArray(r.newVars.map((function(r){if(2!==r.length)throw{RE_EXN_ID:"Match_failure",_1:["MM_wrk_unify.res",359,67],Error:new Error};var t=r[0];return[r[1],t]}))),h=r.nodes.find((function(r){return a.exprEq(r.expr,t)}));if(void 0===h)throw{RE_EXN_ID:o.MmException,_1:{msg:"the proof tree DTO doesn't contain the node to prove."},Error:new Error};return h.parents.map((function(h){if("number"!=typeof h&&1===h.TAG){var g=h.args,x={contents:!1},y={contents:!1},_=[],b=[],T=a.disjMake(void 0),S=[],A=[],k={newVars:_,newVarTypes:b,newDisj:T,newDisjStr:S,stmts:A},M=c.toArray(u),w=c.fromArray(M,a.ExprHash),j=E.fromArray(l),I=function(r,t,n){var u=c.get(w,r);if(void 0!==u)return u;var s=a.getHypByExpr(e,r);if(void 0!==s)return s.label;if(n){var d=i.get(a.generateNewLabels(e,t,1,f.some(j),!0,void 0),0);return c.set(w,r,d),E.add(j,d),d}throw{RE_EXN_ID:o.MmException,_1:{msg:"Could not find a label for an expr."},Error:new Error}},G=v.make(8),D=E.make(8),N=a.getNumOfVars(e)-1|0,U=function(r){if(r<=N){var t=a.ctxIntToSym(e,r);if(void 0!==t)return t;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine sym for an existing int in srcToNewStmts."},Error:new Error}}var n=v.get(G,r);if(void 0!==n)return n;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine name of a new var in srcToNewStmts."},Error:new Error}},C=function(r){var t=a.getFrame(e,r);if(void 0!==t)return t;throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot get a frame by label '"+r+" in srcToNewStmts.'"},Error:new Error}},P=function(t,u,s,c){u.forEach((function(r){if(r>N&&!_.includes(r)){var t=v.get(m,r);if(void 0!==t){_.push(r),b.push(t);var u=i.get(a.generateNewVarNames(e,[t],n,f.some(D),void 0),0);return v.set(G,r,u),E.add(D,u),void I([t,r],"v",!0)}throw{RE_EXN_ID:o.MmException,_1:{msg:"Cannot determine type of a new var in srcToNewStmts."},Error:new Error}}}));var d,l=u.map(U).join(" ");if(void 0!==s&&"number"!=typeof s)switch(0|s.TAG){case 0:d=void 0;break;case 1:var p=s.label,h=s.args,g=[];C(p).hyps.forEach((function(t,e){1!==t.typ||g.push(I(i.get(r.nodes,i.get(h,e)).expr,"",!1))})),d={args:g,label:p};break;case 2:x.contents=!0,d=void 0}else d=void 0;A.push({label:t,expr:u,exprStr:l,jstf:d,isProved:c})},R=C(h.label),V=[];R.hyps.forEach((function(t,e){1!==t.typ||V.push(i.get(r.nodes,i.get(g,e)))}));var O=d.make(16,a.ExprHash),F=d.make(16,a.ExprHash);if(V.forEach((function(e){p.traverseTree(d.fromArray([t],a.ExprHash),e,(function(t,e){if(!d.has(O,e.expr)){d.add(O,e.expr);var n=e.proof;if(void 0!==n&&"number"!=typeof n)switch(0|n.TAG){case 0:return;case 1:var o=n.args,a=[];return C(n.label).hyps.forEach((function(t,e){1!==t.typ||a.push(i.get(r.nodes,i.get(o,e)))})),a;case 2:return void(x.contents=!0)}}}),(function(r,t){return x.contents||y.contents?f.some(void 0):d.has(r,t.expr)?(y.contents=!0,f.some(void 0)):void d.add(r,t.expr)}),void 0,(function(r,t){if(d.remove(r,t.expr),x.contents||y.contents)return f.some(void 0);if(!d.has(F,t.expr)){d.add(F,t.expr);var e=t.proof;if(void 0!==e){if("number"!=typeof e)switch(0|e.TAG){case 0:return;case 1:return void P(I(t.expr,"",!0),t.expr,t.proof,!0);case 2:return x.contents=!0,f.some(void 0)}}else P(I(t.expr,"",!0),t.expr,void 0,!1)}}),void 0)})),!x.contents&&!y.contents){P(I(t,"",!1),t,h,g.every((function(t){return s.isSome(i.get(r.nodes,t).proof)})));var L=function(r){return r<=N||_.includes(r)};return a.disjForEach(r.disj,(function(r,t){if(L(r)&&L(t)&&!a.isDisj(e,r,t))return a.disjAddPair(T,r,t)})),a.disjForEachArr(T,(function(r){S.push("$d "+r.map(U).join(" ")+" $.")})),k}}})).filter(s.isSome).map(s.getExn)},t.reqToStr=function(r){return"Unify(debugLevel="+String(r.debugLevel)+", bottomUpProverParams="+(void 0!==(t=r.bottomUpProverParams)?"{allowNewDisjForExistingVars="+(t.allowNewDisjForExistingVars?"true":"false")+"}":"None")+")";var t},t.respToStr=function(r){return 0===r.TAG?'OnProgress("'+r._0+'")':"Result"}},8594:function(r,t,e){var n=e(1386),o=e(2436),i=e(6517),a=e(2500),u=e(5082),s=e(1618),f=e(8887),c=e(256),d=e(1317),v=e(3350);function l(r,t,e,i,a){var u=o.deserialize(i.body);i.traceEnabled&&o.logWorkerReceivedRequest(i.clientId,i.procName,u,t),n._2(r,u,(function(r){i.traceEnabled&&o.logWorkerIsSendingResponse(i.clientId,i.procName,r,e),n._1(a,{clientId:i.clientId,body:o.serialize(r)})}))}var p=u.fromArray([[d.procName,function(r,t){return l(d.processOnWorkerSide,d.reqToStr,d.respToStr,r,t)}],[s.procName,function(r,t){return l(s.processOnWorkerSide,s.reqToStr,s.respToStr,r,t)}],[c.procName,function(r,t){return l(c.processOnWorkerSide,c.reqToStr,c.respToStr,r,t)}],[f.procName,function(r,t){return l(f.processOnWorkerSide,f.reqToStr,f.respToStr,r,t)}],[v.procName,function(r,t){return l(v.processOnWorkerSide,v.reqToStr,v.respToStr,r,t)}],[a.procName,function(r,t){return l(a.processOnWorkerSide,a.reqToStr,a.respToStr,r,t)}]]);t.U=function(r){i.forEach(u.get(p,r.procName),(function(t){n._2(t,r,(function(r){postMessage(r)}))}))}},3216:function(r,t,e){var n=e(1386),o=e(2900),i=e(4763),a=e(2971),u=e(1748),s=e(6517),f=e(303),c=e(1367),d=e(6181),v=o.raiseError;function l(r,t,e){return i.floor_int(Math.sign(n._2(r,t,e)))}function p(r,t){return l((function(r,t){return r.localeCompare(t)}),r,t)}var m=d.create("Expln_utils_common.ExplnUtilsException");t.exn=v,t.clearArray=r=>r.length=0,t.arrFlatMap=function(r,t){return a.concatMany(a.map(r,t))},t.arrStrDistinct=function(r){return c.toArray(c.fromArray(r))},t.arrIntDistinct=function(r){return f.toArray(f.fromArray(r))},t.arrForEach=function(r,t){for(var e,o=r.length,i=0;i<o&&s.isNone(e);)e=n._1(t,u.get(r,i)),i=i+1|0;return e},t.arrJoin=function(r,t){var e=r.length;if(e<2)return r;for(var n=new Array((e<<1)-1|0),o=e-1|0,i=0;i<=o;++i)u.set(n,i<<1,u.get(r,i)),i!==o&&u.set(n,1+(i<<1)|0,t);return n},t.copySubArray=function(r,t,e,n,o){for(var i=t,a=n,s=r.length,f=e.length,c=Math.min(s-1|0,(t+o|0)-1|0);i<=c&&a<f;)u.set(e,a,u.get(r,i)),a=a+1|0,i=i+1|0},t.toIntCmp=l,t.intCmp=function(r,t){return r<t?-1:r===t?0:1},t.floatCmp=function(r,t){return r<t?-1:r===t?0:1},t.strCmp=p,t.strCmpI=function(r,t){return p(r.toLocaleUpperCase(),t.toLocaleUpperCase())},t.cmpRev=function(r,t,e){return 0|-n._2(r,t,e)},t.stringify=function(r){var t=JSON.stringify(r);return void 0!==t?t:"undefined"},t.ExplnUtilsException=m,t.comparatorBy=function(r,t,e){var o=n._1(r,t),i=n._1(r,e);return o<i?-1:o===i?0:1},t.comparatorAndThen=function(r,t,e,o){var i=n._2(r,e,o);return 0!==i?i:n._2(t,e,o)},t.comparatorInverse=function(r,t,e){return 0|-n._2(r,t,e)},t.hashStr=r=>{let t=0;for(let e=0;e<r.length;e++)t=(t<<5)-t+r.charCodeAt(e),t|=0;return t},t.hashArrInt=r=>{let t=0;for(let e=0;e<r.length;e++)t=(t<<5)-t+r[e],t|=0;return t},t.hashArrIntFromTo=(r,t,e)=>{let n=0;for(let o=t;o<=e;o++)n=(n<<5)-n+r[o],n|=0;return n},t.hash2=(r,t)=>(r<<5)-r+t|0},1611:function(r,t,e){var n=e(1386),o=e(1748),i=e(6517),a=e(6601),u=e(3216);t.log=function(r){console.log(r)},t.log2=function(r,t){console.log(r,t)},t.traverseTree=function(r,t,e,s,f,c,d){var v,l=i.isSome(s),p=i.isSome(f),m=i.isSome(c),E=a.make(void 0);for(a.push(E,{node:t,nodesToPostProcess:m?[t]:void 0});!a.isEmpty(E)&&i.isNone(v);){var h=a.pop(E);if(void 0!==h&&(l&&(v=i.flatMap(s,function(t){return function(e){return n._2(e,r,t.node)}}(h))),p&&i.isNone(v)&&(v=i.flatMap(f,function(t){return function(e){return n._2(e,r,t.node)}}(h))),i.isNone(v))){var g=n._2(e,r,h.node),x=0;if(void 0!==g&&0!==g.length)for(var y=g.length-1|0,_=y;_>=0;--_){var b;if(m)if(_===y){var T=h.nodesToPostProcess;if(void 0===T)throw{RE_EXN_ID:u.ExplnUtilsException,_1:{msg:"this case is not possible, because each node has itself in its nodesToPostProcess (2)"},Error:new Error};T.push(o.get(g,_)),b=T}else b=[o.get(g,_)];else b=void 0;a.push(E,{node:o.get(g,_),nodesToPostProcess:b})}else x=1;if(1===x&&m){var S=h.nodesToPostProcess;if(void 0===S)throw{RE_EXN_ID:u.ExplnUtilsException,_1:{msg:"this case is not possible, because each node has itself in its nodesToPostProcess (1)"},Error:new Error};for(var A={contents:S.length-1|0};A.contents>=0&&i.isNone(v);)v=i.flatMap(c,function(t,e){return function(i){return n._2(i,r,o.get(e,t.contents))}}(A,S)),A.contents=A.contents-1|0}}}return[r,v]}},140:function(r,t,e){var n=e(1386),o=e(194),i=e(4518);t.promise=function(r){return new Promise((function(t,e){try{return n._1(r,(function(r){t(r)}))}catch(r){return e(i.internalToOCamlException(r))}}))},t.promiseFlatMap=function(r,t){return o.then_(t,r)},t.promiseMap=function(r,t){return o.then_((function(r){return Promise.resolve(n._1(t,r))}),r)}}},e={};r=function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(8594),onmessage=t=>{(0,r.U)(t.data)}}();